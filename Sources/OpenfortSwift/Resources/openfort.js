!function(){"use strict";function e(e,t){return function(){return e.apply(t,arguments)}}const{toString:t}=Object.prototype,{getPrototypeOf:r}=Object,{iterator:n,toStringTag:s}=Symbol,i=(o=Object.create(null),e=>{const r=t.call(e);return o[r]||(o[r]=r.slice(8,-1).toLowerCase())});var o;const a=e=>(e=e.toLowerCase(),t=>i(t)===e),c=e=>t=>typeof t===e,{isArray:u}=Array,h=c("undefined");function l(e){return null!==e&&!h(e)&&null!==e.constructor&&!h(e.constructor)&&p(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const d=a("ArrayBuffer");const f=c("string"),p=c("function"),m=c("number"),g=e=>null!==e&&"object"==typeof e,y=e=>{if("object"!==i(e))return!1;const t=r(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||s in e||n in e)},w=a("Date"),v=a("File"),A=a("Blob"),b=a("FileList"),E=a("URLSearchParams"),[_,k,R,I]=["ReadableStream","Request","Response","Headers"].map(a);function T(e,t,{allOwnKeys:r=!1}={}){if(null==e)return;let n,s;if("object"!=typeof e&&(e=[e]),u(e))for(n=0,s=e.length;n<s;n++)t.call(null,e[n],n,e);else{if(l(e))return;const s=r?Object.getOwnPropertyNames(e):Object.keys(e),i=s.length;let o;for(n=0;n<i;n++)o=s[n],t.call(null,e[o],o,e)}}function N(e,t){if(l(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n,s=r.length;for(;s-- >0;)if(n=r[s],t===n.toLowerCase())return n;return null}const S="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,P=e=>!h(e)&&e!==S;const O=(C="undefined"!=typeof Uint8Array&&r(Uint8Array),e=>C&&e instanceof C);var C;const x=a("HTMLFormElement"),M=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),U=a("RegExp"),D=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};T(r,(r,s)=>{let i;!1!==(i=t(r,s,e))&&(n[s]=i||r)}),Object.defineProperties(e,n)};const L=a("AsyncFunction"),B=(F="function"==typeof setImmediate,q=p(S.postMessage),F?setImmediate:q?(j=`axios@${Math.random()}`,G=[],S.addEventListener("message",({source:e,data:t})=>{e===S&&t===j&&G.length&&G.shift()()},!1),e=>{G.push(e),S.postMessage(j,"*")}):e=>setTimeout(e));var F,q,j,G;const H="undefined"!=typeof queueMicrotask?queueMicrotask.bind(S):"undefined"!=typeof process&&process.nextTick||B;var z={isArray:u,isArrayBuffer:d,isBuffer:l,isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||p(e.append)&&("formdata"===(t=i(e))||"object"===t&&p(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&d(e.buffer),t},isString:f,isNumber:m,isBoolean:e=>!0===e||!1===e,isObject:g,isPlainObject:y,isEmptyObject:e=>{if(!g(e)||l(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(e){return!1}},isReadableStream:_,isRequest:k,isResponse:R,isHeaders:I,isUndefined:h,isDate:w,isFile:v,isBlob:A,isRegExp:U,isFunction:p,isStream:e=>g(e)&&p(e.pipe),isURLSearchParams:E,isTypedArray:O,isFileList:b,forEach:T,merge:function e(){const{caseless:t,skipUndefined:r}=P(this)&&this||{},n={},s=(s,i)=>{const o=t&&N(n,i)||i;y(n[o])&&y(s)?n[o]=e(n[o],s):y(s)?n[o]=e({},s):u(s)?n[o]=s.slice():r&&h(s)||(n[o]=s)};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&T(arguments[e],s);return n},extend:(t,r,n,{allOwnKeys:s}={})=>(T(r,(r,s)=>{n&&p(r)?t[s]=e(r,n):t[s]=r},{allOwnKeys:s}),t),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,n,s)=>{let i,o,a;const c={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)a=i[o],s&&!s(a,e,t)||c[a]||(t[a]=e[a],c[a]=!0);e=!1!==n&&r(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:i,kindOfTest:a,endsWith:(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return-1!==n&&n===r},toArray:e=>{if(!e)return null;if(u(e))return e;let t=e.length;if(!m(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{const r=(e&&e[n]).call(e);let s;for(;(s=r.next())&&!s.done;){const r=s.value;t.call(e,r[0],r[1])}},matchAll:(e,t)=>{let r;const n=[];for(;null!==(r=e.exec(t));)n.push(r);return n},isHTMLForm:x,hasOwnProperty:M,hasOwnProp:M,reduceDescriptors:D,freezeMethods:e=>{D(e,(t,r)=>{if(p(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;const n=e[r];p(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))})},toObjectSet:(e,t)=>{const r={},n=e=>{e.forEach(e=>{r[e]=!0})};return u(e)?n(e):n(String(e).split(t)),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,r){return t.toUpperCase()+r}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:N,global:S,isContextDefined:P,isSpecCompliantForm:function(e){return!!(e&&p(e.append)&&"FormData"===e[s]&&e[n])},toJSONObject:e=>{const t=new Array(10),r=(e,n)=>{if(g(e)){if(t.indexOf(e)>=0)return;if(l(e))return e;if(!("toJSON"in e)){t[n]=e;const s=u(e)?[]:{};return T(e,(e,t)=>{const i=r(e,n+1);!h(i)&&(s[t]=i)}),t[n]=void 0,s}}return e};return r(e,0)},isAsyncFn:L,isThenable:e=>e&&(g(e)||p(e))&&p(e.then)&&p(e.catch),setImmediate:B,asap:H,isIterable:e=>null!=e&&p(e[n])};function K(e,t,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}z.inherits(K,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:z.toJSONObject(this.config),code:this.code,status:this.status}}});const V=K.prototype,W={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{W[e]={value:e}}),Object.defineProperties(K,W),Object.defineProperty(V,"isAxiosError",{value:!0}),K.from=(e,t,r,n,s,i)=>{const o=Object.create(V);z.toFlatObject(e,o,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);const a=e&&e.message?e.message:"Error",c=null==t&&e?e.code:t;return K.call(o,a,c,r,n,s),e&&null==o.cause&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",i&&Object.assign(o,i),o};function J(e){return z.isPlainObject(e)||z.isArray(e)}function Y(e){return z.endsWith(e,"[]")?e.slice(0,-2):e}function Q(e,t,r){return e?e.concat(t).map(function(e,t){return e=Y(e),!r&&t?"["+e+"]":e}).join(r?".":""):t}const X=z.toFlatObject(z,{},null,function(e){return/^is[A-Z]/.test(e)});function $(e,t,r){if(!z.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const n=(r=z.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!z.isUndefined(t[e])})).metaTokens,s=r.visitor||u,i=r.dots,o=r.indexes,a=(r.Blob||"undefined"!=typeof Blob&&Blob)&&z.isSpecCompliantForm(t);if(!z.isFunction(s))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(z.isDate(e))return e.toISOString();if(z.isBoolean(e))return e.toString();if(!a&&z.isBlob(e))throw new K("Blob is not supported. Use a Buffer instead.");return z.isArrayBuffer(e)||z.isTypedArray(e)?a&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function u(e,r,s){let a=e;if(e&&!s&&"object"==typeof e)if(z.endsWith(r,"{}"))r=n?r:r.slice(0,-2),e=JSON.stringify(e);else if(z.isArray(e)&&function(e){return z.isArray(e)&&!e.some(J)}(e)||(z.isFileList(e)||z.endsWith(r,"[]"))&&(a=z.toArray(e)))return r=Y(r),a.forEach(function(e,n){!z.isUndefined(e)&&null!==e&&t.append(!0===o?Q([r],n,i):null===o?r:r+"[]",c(e))}),!1;return!!J(e)||(t.append(Q(s,r,i),c(e)),!1)}const h=[],l=Object.assign(X,{defaultVisitor:u,convertValue:c,isVisitable:J});if(!z.isObject(e))throw new TypeError("data must be an object");return function e(r,n){if(!z.isUndefined(r)){if(-1!==h.indexOf(r))throw Error("Circular reference detected in "+n.join("."));h.push(r),z.forEach(r,function(r,i){!0===(!(z.isUndefined(r)||null===r)&&s.call(t,r,z.isString(i)?i.trim():i,n,l))&&e(r,n?n.concat(i):[i])}),h.pop()}}(e),t}function Z(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function ee(e,t){this._pairs=[],e&&$(e,this,t)}const te=ee.prototype;function re(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function ne(e,t,r){if(!t)return e;const n=r&&r.encode||re;z.isFunction(r)&&(r={serialize:r});const s=r&&r.serialize;let i;if(i=s?s(t,r):z.isURLSearchParams(t)?t.toString():new ee(t,r).toString(n),i){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}te.append=function(e,t){this._pairs.push([e,t])},te.toString=function(e){const t=e?function(t){return e.call(this,t,Z)}:Z;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};class se{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){z.forEach(this.handlers,function(t){null!==t&&e(t)})}}var ie={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},oe={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:ee,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]};const ae="undefined"!=typeof window&&"undefined"!=typeof document,ce="object"==typeof navigator&&navigator||void 0,ue=ae&&(!ce||["ReactNative","NativeScript","NS"].indexOf(ce.product)<0),he="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,le=ae&&window.location.href||"http://localhost";var de={...Object.freeze({__proto__:null,hasBrowserEnv:ae,hasStandardBrowserEnv:ue,hasStandardBrowserWebWorkerEnv:he,navigator:ce,origin:le}),...oe};function fe(e){function t(e,r,n,s){let i=e[s++];if("__proto__"===i)return!0;const o=Number.isFinite(+i),a=s>=e.length;if(i=!i&&z.isArray(n)?n.length:i,a)return z.hasOwnProp(n,i)?n[i]=[n[i],r]:n[i]=r,!o;n[i]&&z.isObject(n[i])||(n[i]=[]);return t(e,r,n[i],s)&&z.isArray(n[i])&&(n[i]=function(e){const t={},r=Object.keys(e);let n;const s=r.length;let i;for(n=0;n<s;n++)i=r[n],t[i]=e[i];return t}(n[i])),!o}if(z.isFormData(e)&&z.isFunction(e.entries)){const r={};return z.forEachEntry(e,(e,n)=>{t(function(e){return z.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),n,r,0)}),r}return null}const pe={transitional:ie,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",n=r.indexOf("application/json")>-1,s=z.isObject(e);s&&z.isHTMLForm(e)&&(e=new FormData(e));if(z.isFormData(e))return n?JSON.stringify(fe(e)):e;if(z.isArrayBuffer(e)||z.isBuffer(e)||z.isStream(e)||z.isFile(e)||z.isBlob(e)||z.isReadableStream(e))return e;if(z.isArrayBufferView(e))return e.buffer;if(z.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return $(e,new de.classes.URLSearchParams,{visitor:function(e,t,r,n){return de.isNode&&z.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)},...t})}(e,this.formSerializer).toString();if((i=z.isFileList(e))||r.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return $(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return s||n?(t.setContentType("application/json",!1),function(e,t,r){if(z.isString(e))try{return(t||JSON.parse)(e),z.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(r||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||pe.transitional,r=t&&t.forcedJSONParsing,n="json"===this.responseType;if(z.isResponse(e)||z.isReadableStream(e))return e;if(e&&z.isString(e)&&(r&&!this.responseType||n)){const r=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e,this.parseReviver)}catch(e){if(r){if("SyntaxError"===e.name)throw K.from(e,K.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:de.classes.FormData,Blob:de.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};z.forEach(["delete","get","head","post","put","patch"],e=>{pe.headers[e]={}});const me=z.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);const ge=Symbol("internals");function ye(e){return e&&String(e).trim().toLowerCase()}function we(e){return!1===e||null==e?e:z.isArray(e)?e.map(we):String(e)}function ve(e,t,r,n,s){return z.isFunction(n)?n.call(this,t,r):(s&&(t=r),z.isString(t)?z.isString(n)?-1!==t.indexOf(n):z.isRegExp(n)?n.test(t):void 0:void 0)}let Ae=class{constructor(e){e&&this.set(e)}set(e,t,r){const n=this;function s(e,t,r){const s=ye(t);if(!s)throw new Error("header name must be a non-empty string");const i=z.findKey(n,s);(!i||void 0===n[i]||!0===r||void 0===r&&!1!==n[i])&&(n[i||t]=we(e))}const i=(e,t)=>z.forEach(e,(e,r)=>s(e,r,t));if(z.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(z.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))i((e=>{const t={};let r,n,s;return e&&e.split("\n").forEach(function(e){s=e.indexOf(":"),r=e.substring(0,s).trim().toLowerCase(),n=e.substring(s+1).trim(),!r||t[r]&&me[r]||("set-cookie"===r?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t})(e),t);else if(z.isObject(e)&&z.isIterable(e)){let r,n,s={};for(const t of e){if(!z.isArray(t))throw TypeError("Object iterator must return a key-value pair");s[n=t[0]]=(r=s[n])?z.isArray(r)?[...r,t[1]]:[r,t[1]]:t[1]}i(s,t)}else null!=e&&s(t,e,r);return this}get(e,t){if(e=ye(e)){const r=z.findKey(this,e);if(r){const e=this[r];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}(e);if(z.isFunction(t))return t.call(this,e,r);if(z.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=ye(e)){const r=z.findKey(this,e);return!(!r||void 0===this[r]||t&&!ve(0,this[r],r,t))}return!1}delete(e,t){const r=this;let n=!1;function s(e){if(e=ye(e)){const s=z.findKey(r,e);!s||t&&!ve(0,r[s],s,t)||(delete r[s],n=!0)}}return z.isArray(e)?e.forEach(s):s(e),n}clear(e){const t=Object.keys(this);let r=t.length,n=!1;for(;r--;){const s=t[r];e&&!ve(0,this[s],s,e,!0)||(delete this[s],n=!0)}return n}normalize(e){const t=this,r={};return z.forEach(this,(n,s)=>{const i=z.findKey(r,s);if(i)return t[i]=we(n),void delete t[s];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}(s):String(s).trim();o!==s&&delete t[s],t[o]=we(n),r[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return z.forEach(this,(r,n)=>{null!=r&&!1!==r&&(t[n]=e&&z.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(e=>r.set(e)),r}static accessor(e){const t=(this[ge]=this[ge]={accessors:{}}).accessors,r=this.prototype;function n(e){const n=ye(e);t[n]||(!function(e,t){const r=z.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(e,r,s){return this[n].call(this,t,e,r,s)},configurable:!0})})}(r,e),t[n]=!0)}return z.isArray(e)?e.forEach(n):n(e),this}};function be(e,t){const r=this||pe,n=t||r,s=Ae.from(n.headers);let i=n.data;return z.forEach(e,function(e){i=e.call(r,i,s.normalize(),t?t.status:void 0)}),s.normalize(),i}function Ee(e){return!(!e||!e.__CANCEL__)}function _e(e,t,r){K.call(this,null==e?"canceled":e,K.ERR_CANCELED,t,r),this.name="CanceledError"}function ke(e,t,r){const n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(new K("Request failed with status code "+r.status,[K.ERR_BAD_REQUEST,K.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}Ae.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),z.reduceDescriptors(Ae.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[r]=e}}}),z.freezeMethods(Ae),z.inherits(_e,K,{__CANCEL__:!0});const Re=(e,t,r=3)=>{let n=0;const s=function(e,t){e=e||10;const r=new Array(e),n=new Array(e);let s,i=0,o=0;return t=void 0!==t?t:1e3,function(a){const c=Date.now(),u=n[o];s||(s=c),r[i]=a,n[i]=c;let h=o,l=0;for(;h!==i;)l+=r[h++],h%=e;if(i=(i+1)%e,i===o&&(o=(o+1)%e),c-s<t)return;const d=u&&c-u;return d?Math.round(1e3*l/d):void 0}}(50,250);return function(e,t){let r,n,s=0,i=1e3/t;const o=(t,i=Date.now())=>{s=i,r=null,n&&(clearTimeout(n),n=null),e(...t)};return[(...e)=>{const t=Date.now(),a=t-s;a>=i?o(e,t):(r=e,n||(n=setTimeout(()=>{n=null,o(r)},i-a)))},()=>r&&o(r)]}(r=>{const i=r.loaded,o=r.lengthComputable?r.total:void 0,a=i-n,c=s(a);n=i;e({loaded:i,total:o,progress:o?i/o:void 0,bytes:a,rate:c||void 0,estimated:c&&o&&i<=o?(o-i)/c:void 0,event:r,lengthComputable:null!=o,[t?"download":"upload"]:!0})},r)},Ie=(e,t)=>{const r=null!=e;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},Te=e=>(...t)=>z.asap(()=>e(...t));var Ne=de.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,de.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(de.origin),de.navigator&&/(msie|trident)/i.test(de.navigator.userAgent)):()=>!0,Se=de.hasStandardBrowserEnv?{write(e,t,r,n,s,i){const o=[e+"="+encodeURIComponent(t)];z.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),z.isString(n)&&o.push("path="+n),z.isString(s)&&o.push("domain="+s),!0===i&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Pe(e,t,r){let n=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(n||0==r)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Oe=e=>e instanceof Ae?{...e}:e;function Ce(e,t){t=t||{};const r={};function n(e,t,r,n){return z.isPlainObject(e)&&z.isPlainObject(t)?z.merge.call({caseless:n},e,t):z.isPlainObject(t)?z.merge({},t):z.isArray(t)?t.slice():t}function s(e,t,r,s){return z.isUndefined(t)?z.isUndefined(e)?void 0:n(void 0,e,0,s):n(e,t,0,s)}function i(e,t){if(!z.isUndefined(t))return n(void 0,t)}function o(e,t){return z.isUndefined(t)?z.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function a(r,s,i){return i in t?n(r,s):i in e?n(void 0,r):void 0}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(e,t,r)=>s(Oe(e),Oe(t),0,!0)};return z.forEach(Object.keys({...e,...t}),function(n){const i=c[n]||s,o=i(e[n],t[n],n);z.isUndefined(o)&&i!==a||(r[n]=o)}),r}var xe=e=>{const t=Ce({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:a}=t;if(t.headers=o=Ae.from(o),t.url=ne(Pe(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),z.isFormData(r))if(de.hasStandardBrowserEnv||de.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(z.isFunction(r.getHeaders)){const e=r.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(([e,r])=>{t.includes(e.toLowerCase())&&o.set(e,r)})}if(de.hasStandardBrowserEnv&&(n&&z.isFunction(n)&&(n=n(t)),n||!1!==n&&Ne(t.url))){const e=s&&i&&Se.read(i);e&&o.set(s,e)}return t};var Me="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise(function(t,r){const n=xe(e);let s=n.data;const i=Ae.from(n.headers).normalize();let o,a,c,u,h,{responseType:l,onUploadProgress:d,onDownloadProgress:f}=n;function p(){u&&u(),h&&h(),n.cancelToken&&n.cancelToken.unsubscribe(o),n.signal&&n.signal.removeEventListener("abort",o)}let m=new XMLHttpRequest;function g(){if(!m)return;const n=Ae.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());ke(function(e){t(e),p()},function(e){r(e),p()},{data:l&&"text"!==l&&"json"!==l?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:n,config:e,request:m}),m=null}m.open(n.method.toUpperCase(),n.url,!0),m.timeout=n.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(r(new K("Request aborted",K.ECONNABORTED,e,m)),m=null)},m.onerror=function(t){const n=new K(t&&t.message?t.message:"Network Error",K.ERR_NETWORK,e,m);n.event=t||null,r(n),m=null},m.ontimeout=function(){let t=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const s=n.transitional||ie;n.timeoutErrorMessage&&(t=n.timeoutErrorMessage),r(new K(t,s.clarifyTimeoutError?K.ETIMEDOUT:K.ECONNABORTED,e,m)),m=null},void 0===s&&i.setContentType(null),"setRequestHeader"in m&&z.forEach(i.toJSON(),function(e,t){m.setRequestHeader(t,e)}),z.isUndefined(n.withCredentials)||(m.withCredentials=!!n.withCredentials),l&&"json"!==l&&(m.responseType=n.responseType),f&&([c,h]=Re(f,!0),m.addEventListener("progress",c)),d&&m.upload&&([a,u]=Re(d),m.upload.addEventListener("progress",a),m.upload.addEventListener("loadend",u)),(n.cancelToken||n.signal)&&(o=t=>{m&&(r(!t||t.type?new _e(null,e,m):t),m.abort(),m=null)},n.cancelToken&&n.cancelToken.subscribe(o),n.signal&&(n.signal.aborted?o():n.signal.addEventListener("abort",o)));const y=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(n.url);y&&-1===de.protocols.indexOf(y)?r(new K("Unsupported protocol "+y+":",K.ERR_BAD_REQUEST,e)):m.send(s||null)})};const Ue=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let r,n=new AbortController;const s=function(e){if(!r){r=!0,o();const t=e instanceof Error?e:this.reason;n.abort(t instanceof K?t:new _e(t instanceof Error?t.message:t))}};let i=t&&setTimeout(()=>{i=null,s(new K(`timeout ${t} of ms exceeded`,K.ETIMEDOUT))},t);const o=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(s):e.removeEventListener("abort",s)}),e=null)};e.forEach(e=>e.addEventListener("abort",s));const{signal:a}=n;return a.unsubscribe=()=>z.asap(o),a}},De=function*(e,t){let r=e.byteLength;if(r<t)return void(yield e);let n,s=0;for(;s<r;)n=s+t,yield e.slice(s,n),s=n},Le=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:r}=await t.read();if(e)break;yield r}}finally{await t.cancel()}},Be=(e,t,r,n)=>{const s=async function*(e,t){for await(const r of Le(e))yield*De(r,t)}(e,t);let i,o=0,a=e=>{i||(i=!0,n&&n(e))};return new ReadableStream({async pull(e){try{const{done:t,value:n}=await s.next();if(t)return a(),void e.close();let i=n.byteLength;if(r){let e=o+=i;r(e)}e.enqueue(new Uint8Array(n))}catch(e){throw a(e),e}},cancel:e=>(a(e),s.return())},{highWaterMark:2})},{isFunction:Fe}=z,qe=(({Request:e,Response:t})=>({Request:e,Response:t}))(z.global),{ReadableStream:je,TextEncoder:Ge}=z.global,He=(e,...t)=>{try{return!!e(...t)}catch(e){return!1}},ze=e=>{e=z.merge.call({skipUndefined:!0},qe,e);const{fetch:t,Request:r,Response:n}=e,s=t?Fe(t):"function"==typeof fetch,i=Fe(r),o=Fe(n);if(!s)return!1;const a=s&&Fe(je),c=s&&("function"==typeof Ge?(e=>t=>e.encode(t))(new Ge):async e=>new Uint8Array(await new r(e).arrayBuffer())),u=i&&a&&He(()=>{let e=!1;const t=new r(de.origin,{body:new je,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),h=o&&a&&He(()=>z.isReadableStream(new n("").body)),l={stream:h&&(e=>e.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!l[e]&&(l[e]=(t,r)=>{let n=t&&t[e];if(n)return n.call(t);throw new K(`Response type '${e}' is not supported`,K.ERR_NOT_SUPPORT,r)})});const d=async(e,t)=>{const n=z.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(z.isBlob(e))return e.size;if(z.isSpecCompliantForm(e)){const t=new r(de.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return z.isArrayBufferView(e)||z.isArrayBuffer(e)?e.byteLength:(z.isURLSearchParams(e)&&(e+=""),z.isString(e)?(await c(e)).byteLength:void 0)})(t):n};return async e=>{let{url:s,method:o,data:a,signal:c,cancelToken:f,timeout:p,onDownloadProgress:m,onUploadProgress:g,responseType:y,headers:w,withCredentials:v="same-origin",fetchOptions:A}=xe(e),b=t||fetch;y=y?(y+"").toLowerCase():"text";let E=Ue([c,f&&f.toAbortSignal()],p),_=null;const k=E&&E.unsubscribe&&(()=>{E.unsubscribe()});let R;try{if(g&&u&&"get"!==o&&"head"!==o&&0!==(R=await d(w,a))){let e,t=new r(s,{method:"POST",body:a,duplex:"half"});if(z.isFormData(a)&&(e=t.headers.get("content-type"))&&w.setContentType(e),t.body){const[e,r]=Ie(R,Re(Te(g)));a=Be(t.body,65536,e,r)}}z.isString(v)||(v=v?"include":"omit");const t=i&&"credentials"in r.prototype,c={...A,signal:E,method:o.toUpperCase(),headers:w.normalize().toJSON(),body:a,duplex:"half",credentials:t?v:void 0};_=i&&new r(s,c);let f=await(i?b(_,A):b(s,c));const p=h&&("stream"===y||"response"===y);if(h&&(m||p&&k)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=f[t]});const t=z.toFiniteNumber(f.headers.get("content-length")),[r,s]=m&&Ie(t,Re(Te(m),!0))||[];f=new n(Be(f.body,65536,r,()=>{s&&s(),k&&k()}),e)}y=y||"text";let I=await l[z.findKey(l,y)||"text"](f,e);return!p&&k&&k(),await new Promise((t,r)=>{ke(t,r,{data:I,headers:Ae.from(f.headers),status:f.status,statusText:f.statusText,config:e,request:_})})}catch(t){if(k&&k(),t&&"TypeError"===t.name&&/Load failed|fetch/i.test(t.message))throw Object.assign(new K("Network Error",K.ERR_NETWORK,e,_),{cause:t.cause||t});throw K.from(t,t&&t.code,e,_)}}},Ke=new Map,Ve=e=>{let t=e?e.env:{};const{fetch:r,Request:n,Response:s}=t,i=[n,s,r];let o,a,c=i.length,u=Ke;for(;c--;)o=i[c],a=u.get(o),void 0===a&&u.set(o,a=c?new Map:ze(t)),u=a;return a};Ve();const We={http:null,xhr:Me,fetch:{get:Ve}};z.forEach(We,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}});const Je=e=>`- ${e}`,Ye=e=>z.isFunction(e)||null===e||!1===e;var Qe=(e,t)=>{e=z.isArray(e)?e:[e];const{length:r}=e;let n,s;const i={};for(let o=0;o<r;o++){let r;if(n=e[o],s=n,!Ye(n)&&(s=We[(r=String(n)).toLowerCase()],void 0===s))throw new K(`Unknown adapter '${r}'`);if(s&&(z.isFunction(s)||(s=s.get(t))))break;i[r||"#"+o]=s}if(!s){const e=Object.entries(i).map(([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build"));throw new K("There is no suitable adapter to dispatch the request "+(r?e.length>1?"since :\n"+e.map(Je).join("\n"):" "+Je(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return s};function Xe(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new _e(null,e)}function $e(e){Xe(e),e.headers=Ae.from(e.headers),e.data=be.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Qe(e.adapter||pe.adapter,e)(e).then(function(t){return Xe(e),t.data=be.call(e,e.transformResponse,t),t.headers=Ae.from(t.headers),t},function(t){return Ee(t)||(Xe(e),t&&t.response&&(t.response.data=be.call(e,e.transformResponse,t.response),t.response.headers=Ae.from(t.response.headers))),Promise.reject(t)})}const Ze="1.12.2",et={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{et[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const tt={};et.transitional=function(e,t,r){function n(e,t){return"[Axios v"+Ze+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return(r,s,i)=>{if(!1===e)throw new K(n(s," has been removed"+(t?" in "+t:"")),K.ERR_DEPRECATED);return t&&!tt[s]&&(tt[s]=!0,console.warn(n(s," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,s,i)}},et.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};var rt={assertOptions:function(e,t,r){if("object"!=typeof e)throw new K("options must be an object",K.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let s=n.length;for(;s-- >0;){const i=n[s],o=t[i];if(o){const t=e[i],r=void 0===t||o(t,i,e);if(!0!==r)throw new K("option "+i+" must be "+r,K.ERR_BAD_OPTION_VALUE);continue}if(!0!==r)throw new K("Unknown option "+i,K.ERR_BAD_OPTION)}},validators:et};const nt=rt.validators;let st=class{constructor(e){this.defaults=e||{},this.interceptors={request:new se,response:new se}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=new Error;const r=t.stack?t.stack.replace(/^.+\n/,""):"";try{e.stack?r&&!String(e.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+r):e.stack=r}catch(e){}}throw e}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=Ce(this.defaults,t);const{transitional:r,paramsSerializer:n,headers:s}=t;void 0!==r&&rt.assertOptions(r,{silentJSONParsing:nt.transitional(nt.boolean),forcedJSONParsing:nt.transitional(nt.boolean),clarifyTimeoutError:nt.transitional(nt.boolean)},!1),null!=n&&(z.isFunction(n)?t.paramsSerializer={serialize:n}:rt.assertOptions(n,{encode:nt.function,serialize:nt.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),rt.assertOptions(t,{baseUrl:nt.spelling("baseURL"),withXsrfToken:nt.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=s&&z.merge(s.common,s[t.method]);s&&z.forEach(["delete","get","head","post","put","patch","common"],e=>{delete s[e]}),t.headers=Ae.concat(i,s);const o=[];let a=!0;this.interceptors.request.forEach(function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,o.unshift(e.fulfilled,e.rejected))});const c=[];let u;this.interceptors.response.forEach(function(e){c.push(e.fulfilled,e.rejected)});let h,l=0;if(!a){const e=[$e.bind(this),void 0];for(e.unshift(...o),e.push(...c),h=e.length,u=Promise.resolve(t);l<h;)u=u.then(e[l++],e[l++]);return u}h=o.length;let d=t;for(;l<h;){const e=o[l++],t=o[l++];try{d=e(d)}catch(e){t.call(this,e);break}}try{u=$e.call(this,d)}catch(e){return Promise.reject(e)}for(l=0,h=c.length;l<h;)u=u.then(c[l++],c[l++]);return u}getUri(e){return ne(Pe((e=Ce(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}};z.forEach(["delete","get","head","options"],function(e){st.prototype[e]=function(t,r){return this.request(Ce(r||{},{method:e,url:t,data:(r||{}).data}))}}),z.forEach(["post","put","patch"],function(e){function t(t){return function(r,n,s){return this.request(Ce(s||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}st.prototype[e]=t(),st.prototype[e+"Form"]=t(!0)});const it={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(it).forEach(([e,t])=>{it[t]=e});const ot=function t(r){const n=new st(r),s=e(st.prototype.request,n);return z.extend(s,st.prototype,n,{allOwnKeys:!0}),z.extend(s,n,null,{allOwnKeys:!0}),s.create=function(e){return t(Ce(r,e))},s}(pe);ot.Axios=st,ot.CanceledError=_e,ot.CancelToken=class e{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const r=this;this.promise.then(e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null}),this.promise.then=e=>{let t;const n=new Promise(e=>{r.subscribe(e),t=e}).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e(function(e,n,s){r.reason||(r.reason=new _e(e,n,s),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let t;const r=new e(function(e){t=e});return{token:r,cancel:t}}},ot.isCancel=Ee,ot.VERSION=Ze,ot.toFormData=$,ot.AxiosError=K,ot.Cancel=ot.CanceledError,ot.all=function(e){return Promise.all(e)},ot.spread=function(e){return function(t){return e.apply(null,t)}},ot.isAxiosError=function(e){return z.isObject(e)&&!0===e.isAxiosError},ot.mergeConfig=Ce,ot.AxiosHeaders=Ae,ot.formToJSON=e=>fe(z.isHTMLForm(e)?new FormData(e):e),ot.getAdapter=Qe,ot.HttpStatusCode=it,ot.default=ot;const{Axios:at,AxiosError:ct,CanceledError:ut,isCancel:ht,CancelToken:lt,VERSION:dt,all:ft,Cancel:pt,isAxiosError:mt,spread:gt,toFormData:yt,AxiosHeaders:wt,HttpStatusCode:vt,formToJSON:At,getAdapter:bt,mergeConfig:Et}=ot;var _t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function kt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Rt(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var r=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}),r}const It=new Set(["ENOTFOUND","ENETUNREACH","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED","HOSTNAME_MISMATCH"]);var Tt=e=>!It.has(e&&e.code),Nt=kt(Tt);const St="axios-retry";function Pt(e){return!e.response&&(!!e.code&&(!["ERR_CANCELED","ECONNABORTED"].includes(e.code)&&Nt(e)))}const Ot=["get","head","options"],Ct=Ot.concat(["put","delete"]);function xt(e){return"ECONNABORTED"!==e.code&&(!e.response||429===e.response.status||e.response.status>=500&&e.response.status<=599)}function Mt(e){return!!e.config?.method&&(xt(e)&&-1!==Ct.indexOf(e.config.method))}function Ut(e){return Pt(e)||Mt(e)}function Dt(e=void 0){const t=e?.response?.headers["retry-after"];if(!t)return 0;let r=1e3*(Number(t)||0);return 0===r&&(r=(new Date(t).valueOf()||0)-Date.now()),Math.max(0,r)}const Lt={retries:3,retryCondition:Ut,retryDelay:function(e=0,t=void 0){return Math.max(0,Dt(t))},shouldResetTimeout:!1,onRetry:()=>{},onMaxRetryTimesExceeded:()=>{},validateResponse:null};function Bt(e,t,r=!1){const n=function(e,t){return{...Lt,...t,...e[St]}}(e,t||{});return n.retryCount=n.retryCount||0,n.lastRequestTime&&!r||(n.lastRequestTime=Date.now()),e[St]=n,n}const Ft=(e,t)=>{const r=e.interceptors.request.use(e=>(Bt(e,t,!0),e[St]?.validateResponse&&(e.validateStatus=()=>!1),e)),n=e.interceptors.response.use(null,async r=>{const{config:n}=r;if(!n)return Promise.reject(r);const s=Bt(n,t);return r.response&&s.validateResponse?.(r.response)?r.response:await async function(e,t){const{retries:r,retryCondition:n}=e,s=(e.retryCount||0)<r&&n(t);if("object"==typeof s)try{return!1!==await s}catch(e){return!1}return s}(s,r)?async function(e,t,r,n){t.retryCount+=1;const{retryDelay:s,shouldResetTimeout:i,onRetry:o}=t,a=s(t.retryCount,r);if(function(e,t){e.defaults.agent===t.agent&&delete t.agent,e.defaults.httpAgent===t.httpAgent&&delete t.httpAgent,e.defaults.httpsAgent===t.httpsAgent&&delete t.httpsAgent}(e,n),!i&&n.timeout&&t.lastRequestTime){const e=Date.now()-t.lastRequestTime,s=n.timeout-e-a;if(s<=0)return Promise.reject(r);n.timeout=s}return n.transformRequest=[e=>e],await o(t.retryCount,r,n),n.signal?.aborted?Promise.resolve(e(n)):new Promise(t=>{const r=()=>{clearTimeout(s),t(e(n))},s=setTimeout(()=>{t(e(n)),n.signal?.removeEventListener&&n.signal.removeEventListener("abort",r)},a);n.signal?.addEventListener&&n.signal.addEventListener("abort",r,{once:!0})})}(e,s,r,n):(await async function(e,t){e.retryCount>=e.retries&&await e.onMaxRetryTimesExceeded(t,e.retryCount)}(s,r),Promise.reject(r))});return{requestInterceptorId:r,responseInterceptorId:n}};Ft.isNetworkError=Pt,Ft.isSafeRequestError=function(e){return!!e.config?.method&&(xt(e)&&-1!==Ot.indexOf(e.config.method))},Ft.isIdempotentRequestError=Mt,Ft.isNetworkOrIdempotentRequestError=Ut,Ft.exponentialDelay=function(e=0,t=void 0,r=100){const n=2**e*r,s=Math.max(n,Dt(t));return s+.2*s*Math.random()},Ft.linearDelay=function(e=100){return(t=0,r=void 0)=>{const n=t*e;return Math.max(n,Dt(r))}},Ft.isRetryableError=xt;const qt="https://api.openfort.io".replace(/\/+$/,"");let jt=class{basePath;axios;configuration;constructor(e,t=qt,r=ot){this.basePath=t,this.axios=r,e&&(this.configuration=e,this.basePath=e.basePath||this.basePath)}},Gt=class extends Error{field;constructor(e,t){super(t),this.field=e,this.name="RequiredError"}};const Ht="https://example.com",zt=function(e,t,r){if(null==r)throw new Gt(t,`Required parameter ${t} was null or undefined when calling ${e}.`)},Kt=async function(e,t){if(t&&t.accessToken){const r="function"==typeof t.accessToken?await t.accessToken():await t.accessToken;e.Authorization="Bearer "+r}};function Vt(e,t,r=""){null!=t&&("object"==typeof t?Array.isArray(t)?t.forEach(t=>Vt(e,t,r)):Object.keys(t).forEach(n=>Vt(e,t[n],`${r}${""!==r?".":""}${n}`)):e.has(r)?e.append(r,t):e.set(r,t))}const Wt=function(e,...t){const r=new URLSearchParams(e.search);Vt(r,t),e.search=r.toString()},Jt=function(e,t,r){const n="string"!=typeof e;return(n&&r&&r.isJsonMime?r.isJsonMime(t.headers["Content-Type"]):n)?JSON.stringify(void 0!==e?e:{}):e||""},Yt=function(e){return e.pathname+e.search+e.hash},Qt=function(e,t,r,n){return(s=t,i=r)=>{const o={...e.options,url:(n?.basePath||s.defaults.baseURL||i)+e.url};return s.request(o)}},Xt=function(e){const t=function(e){return{cancelTransferOwnership:async(t,r,n={})=>{zt("cancelTransferOwnership","id",t),zt("cancelTransferOwnership","cancelTransferOwnershipRequest",r);const s="/v1/accounts/{id}/cancel_transfer_ownership".replace("{id}",encodeURIComponent(String(t))),i=new URL(s,Ht);let o;e&&(o=e.baseOptions);const a={method:"POST",...o,...n},c={};await Kt(c,e),c["Content-Type"]="application/json",Wt(i,{});let u=o&&o.headers?o.headers:{};return a.headers={...c,...u,...n.headers},a.data=Jt(r,a,e),{url:Yt(i),options:a}},completeRecovery:async(t,r,n={})=>{zt("completeRecovery","id",t),zt("completeRecovery","completeRecoveryRequest",r);const s="/v1/accounts/{id}/complete_recovery".replace("{id}",encodeURIComponent(String(t))),i=new URL(s,Ht);let o;e&&(o=e.baseOptions);const a={method:"POST",...o,...n},c={};await Kt(c,e),c["Content-Type"]="application/json",Wt(i,{});let u=o&&o.headers?o.headers:{};return a.headers={...c,...u,...n.headers},a.data=Jt(r,a,e),{url:Yt(i),options:a}},createAccount:async(t,r={})=>{zt("createAccount","createAccountRequest",t);const n=new URL("/v1/accounts",Ht);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r},o={};await Kt(o,e),o["Content-Type"]="application/json",Wt(n,{});let a=s&&s.headers?s.headers:{};return i.headers={...o,...a,...r.headers},i.data=Jt(t,i,e),{url:Yt(n),options:i}},deployAccount:async(t,r,n={})=>{zt("deployAccount","id",t),zt("deployAccount","deployRequest",r);const s="/v1/accounts/{id}/deploy".replace("{id}",encodeURIComponent(String(t))),i=new URL(s,Ht);let o;e&&(o=e.baseOptions);const a={method:"POST",...o,...n},c={};await Kt(c,e),c["Content-Type"]="application/json",Wt(i,{});let u=o&&o.headers?o.headers:{};return a.headers={...c,...u,...n.headers},a.data=Jt(r,a,e),{url:Yt(i),options:a}},disableAccount:async(t,r={})=>{zt("disableAccount","id",t);const n="/v1/accounts/{id}/disable".replace("{id}",encodeURIComponent(String(t))),s=new URL(n,Ht);let i;e&&(i=e.baseOptions);const o={method:"POST",...i,...r},a={};await Kt(a,e),Wt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...r.headers},{url:Yt(s),options:o}},getAccount:async(t,r,n={})=>{zt("getAccount","id",t);const s="/v1/accounts/{id}".replace("{id}",encodeURIComponent(String(t))),i=new URL(s,Ht);let o;e&&(o=e.baseOptions);const a={method:"GET",...o,...n},c={},u={};await Kt(c,e),r&&(u.expand=r),Wt(i,u);let h=o&&o.headers?o.headers:{};return a.headers={...c,...h,...n.headers},{url:Yt(i),options:a}},getAccountV2:async(t,r={})=>{zt("getAccountV2","id",t);const n="/v2/accounts/{id}".replace("{id}",encodeURIComponent(String(t))),s=new URL(n,Ht);let i;e&&(i=e.baseOptions);const o={method:"GET",...i,...r},a={};await Kt(a,e),Wt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...r.headers},{url:Yt(s),options:o}},getAccounts:async(t,r,n,s,i,o,a,c={})=>{const u=new URL("/v1/accounts",Ht);let h;e&&(h=e.baseOptions);const l={method:"GET",...h,...c},d={},f={};await Kt(d,e),void 0!==t&&(f.limit=t),void 0!==r&&(f.skip=r),void 0!==n&&(f.order=n),void 0!==s&&(f.chainId=s),void 0!==i&&(f.player=i),void 0!==o&&(f.address=o),a&&(f.expand=a),Wt(u,f);let p=h&&h.headers?h.headers:{};return l.headers={...d,...p,...c.headers},{url:Yt(u),options:l}},getAccountsV2:async(t,r,n,s,i,o,a,c,u={})=>{const h=new URL("/v2/accounts",Ht);let l;e&&(l=e.baseOptions);const d={method:"GET",...l,...u},f={},p={};await Kt(f,e),void 0!==t&&(p.limit=t),void 0!==r&&(p.skip=r),void 0!==n&&(p.order=n),void 0!==s&&(p.chainId=s),void 0!==i&&(p.user=i),void 0!==o&&(p.chainType=o),void 0!==a&&(p.accountType=a),void 0!==c&&(p.address=c),Wt(h,p);let m=l&&l.headers?l.headers:{};return d.headers={...f,...m,...u.headers},{url:Yt(h),options:d}},getSignerIdByAddress:async(t,r={})=>{zt("getSignerIdByAddress","address",t);const n=new URL("/v2/accounts/signer",Ht);let s;e&&(s=e.baseOptions);const i={method:"GET",...s,...r},o={},a={};await Kt(o,e),void 0!==t&&(a.address=t),Wt(n,a);let c=s&&s.headers?s.headers:{};return i.headers={...o,...c,...r.headers},{url:Yt(n),options:i}},requestTransferOwnership:async(t,r,n={})=>{zt("requestTransferOwnership","id",t),zt("requestTransferOwnership","transferOwnershipRequest",r);const s="/v1/accounts/{id}/request_transfer_ownership".replace("{id}",encodeURIComponent(String(t))),i=new URL(s,Ht);let o;e&&(o=e.baseOptions);const a={method:"POST",...o,...n},c={};await Kt(c,e),c["Content-Type"]="application/json",Wt(i,{});let u=o&&o.headers?o.headers:{};return a.headers={...c,...u,...n.headers},a.data=Jt(r,a,e),{url:Yt(i),options:a}},signPayload:async(t,r,n={})=>{zt("signPayload","id",t),zt("signPayload","signPayloadRequest",r);const s="/v1/accounts/{id}/sign_payload".replace("{id}",encodeURIComponent(String(t))),i=new URL(s,Ht);let o;e&&(o=e.baseOptions);const a={method:"POST",...o,...n},c={};await Kt(c,e),c["Content-Type"]="application/json",Wt(i,{});let u=o&&o.headers?o.headers:{};return a.headers={...c,...u,...n.headers},a.data=Jt(r,a,e),{url:Yt(i),options:a}},startRecovery:async(t,r,n={})=>{zt("startRecovery","id",t),zt("startRecovery","startRecoveryRequest",r);const s="/v1/accounts/{id}/start_recovery".replace("{id}",encodeURIComponent(String(t))),i=new URL(s,Ht);let o;e&&(o=e.baseOptions);const a={method:"POST",...o,...n},c={};await Kt(c,e),c["Content-Type"]="application/json",Wt(i,{});let u=o&&o.headers?o.headers:{};return a.headers={...c,...u,...n.headers},a.data=Jt(r,a,e),{url:Yt(i),options:a}},switchChainV2:async(t,r={})=>{zt("switchChainV2","switchChainQueriesV2",t);const n=new URL("/v2/accounts/switch-chain",Ht);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r},o={};await Kt(o,e),o["Content-Type"]="application/json",Wt(n,{});let a=s&&s.headers?s.headers:{};return i.headers={...o,...a,...r.headers},i.data=Jt(t,i,e),{url:Yt(n),options:i}},syncAccount:async(t,r={})=>{zt("syncAccount","id",t);const n="/v1/accounts/{id}/sync".replace("{id}",encodeURIComponent(String(t))),s=new URL(n,Ht);let i;e&&(i=e.baseOptions);const o={method:"POST",...i,...r},a={};await Kt(a,e),Wt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...r.headers},{url:Yt(s),options:o}}}}(e);return{async cancelTransferOwnership(r,n,s){const i=await t.cancelTransferOwnership(r,n,s);return Qt(i,ot,qt,e)},async completeRecovery(r,n,s){const i=await t.completeRecovery(r,n,s);return Qt(i,ot,qt,e)},async createAccount(r,n){const s=await t.createAccount(r,n);return Qt(s,ot,qt,e)},async deployAccount(r,n,s){const i=await t.deployAccount(r,n,s);return Qt(i,ot,qt,e)},async disableAccount(r,n){const s=await t.disableAccount(r,n);return Qt(s,ot,qt,e)},async getAccount(r,n,s){const i=await t.getAccount(r,n,s);return Qt(i,ot,qt,e)},async getAccountV2(r,n){const s=await t.getAccountV2(r,n);return Qt(s,ot,qt,e)},async getAccounts(r,n,s,i,o,a,c,u){const h=await t.getAccounts(r,n,s,i,o,a,c,u);return Qt(h,ot,qt,e)},async getAccountsV2(r,n,s,i,o,a,c,u,h){const l=await t.getAccountsV2(r,n,s,i,o,a,c,u,h);return Qt(l,ot,qt,e)},async getSignerIdByAddress(r,n){const s=await t.getSignerIdByAddress(r,n);return Qt(s,ot,qt,e)},async requestTransferOwnership(r,n,s){const i=await t.requestTransferOwnership(r,n,s);return Qt(i,ot,qt,e)},async signPayload(r,n,s){const i=await t.signPayload(r,n,s);return Qt(i,ot,qt,e)},async startRecovery(r,n,s){const i=await t.startRecovery(r,n,s);return Qt(i,ot,qt,e)},async switchChainV2(r,n){const s=await t.switchChainV2(r,n);return Qt(s,ot,qt,e)},async syncAccount(r,n){const s=await t.syncAccount(r,n);return Qt(s,ot,qt,e)}}};let $t=class extends jt{cancelTransferOwnership(e,t){return Xt(this.configuration).cancelTransferOwnership(e.id,e.cancelTransferOwnershipRequest,t).then(e=>e(this.axios,this.basePath))}completeRecovery(e,t){return Xt(this.configuration).completeRecovery(e.id,e.completeRecoveryRequest,t).then(e=>e(this.axios,this.basePath))}createAccount(e,t){return Xt(this.configuration).createAccount(e.createAccountRequest,t).then(e=>e(this.axios,this.basePath))}deployAccount(e,t){return Xt(this.configuration).deployAccount(e.id,e.deployRequest,t).then(e=>e(this.axios,this.basePath))}disableAccount(e,t){return Xt(this.configuration).disableAccount(e.id,t).then(e=>e(this.axios,this.basePath))}getAccount(e,t){return Xt(this.configuration).getAccount(e.id,e.expand,t).then(e=>e(this.axios,this.basePath))}getAccountV2(e,t){return Xt(this.configuration).getAccountV2(e.id,t).then(e=>e(this.axios,this.basePath))}getAccounts(e={},t){return Xt(this.configuration).getAccounts(e.limit,e.skip,e.order,e.chainId,e.player,e.address,e.expand,t).then(e=>e(this.axios,this.basePath))}getAccountsV2(e={},t){return Xt(this.configuration).getAccountsV2(e.limit,e.skip,e.order,e.chainId,e.user,e.chainType,e.accountType,e.address,t).then(e=>e(this.axios,this.basePath))}getSignerIdByAddress(e,t){return Xt(this.configuration).getSignerIdByAddress(e.address,t).then(e=>e(this.axios,this.basePath))}requestTransferOwnership(e,t){return Xt(this.configuration).requestTransferOwnership(e.id,e.transferOwnershipRequest,t).then(e=>e(this.axios,this.basePath))}signPayload(e,t){return Xt(this.configuration).signPayload(e.id,e.signPayloadRequest,t).then(e=>e(this.axios,this.basePath))}startRecovery(e,t){return Xt(this.configuration).startRecovery(e.id,e.startRecoveryRequest,t).then(e=>e(this.axios,this.basePath))}switchChainV2(e,t){return Xt(this.configuration).switchChainV2(e.switchChainQueriesV2,t).then(e=>e(this.axios,this.basePath))}syncAccount(e,t){return Xt(this.configuration).syncAccount(e.id,t).then(e=>e(this.axios,this.basePath))}};const Zt=function(e){const t=function(e){return{authenticateSIWE:async(t,r={})=>{zt("authenticateSIWE","sIWEAuthenticateRequest",t);const n=new URL("/iam/v1/siwe/authenticate",Ht);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r},o={};await Kt(o,e),o["Content-Type"]="application/json",Wt(n,{});let a=s&&s.headers?s.headers:{};return i.headers={...o,...a,...r.headers},i.data=Jt(t,i,e),{url:Yt(n),options:i}},getJwks:async(t,r={})=>{zt("getJwks","publishableKey",t);const n="/iam/v1/{publishable_key}/jwks.json".replace("{publishable_key}",encodeURIComponent(String(t))),s=new URL(n,Ht);let i;e&&(i=e.baseOptions);const o={method:"GET",...i,...r};Wt(s,{});let a=i&&i.headers?i.headers:{};return o.headers={...a,...r.headers},{url:Yt(s),options:o}},initOAuth:async(t,r,n={})=>{zt("initOAuth","oAuthInitRequest",t);const s=new URL("/iam/v1/oauth/init",Ht);let i;e&&(i=e.baseOptions);const o={method:"POST",...i,...n},a={};await Kt(a,e),null!=r&&(a["x-game"]=String(r)),a["Content-Type"]="application/json",Wt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...n.headers},o.data=Jt(t,o,e),{url:Yt(s),options:o}},initSIWE:async(t,r,n={})=>{zt("initSIWE","sIWERequest",t);const s=new URL("/iam/v1/siwe/init",Ht);let i;e&&(i=e.baseOptions);const o={method:"POST",...i,...n},a={};await Kt(a,e),null!=r&&(a["x-game"]=String(r)),a["Content-Type"]="application/json",Wt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...n.headers},o.data=Jt(t,o,e),{url:Yt(s),options:o}},linkEmail:async(t,r,n={})=>{zt("linkEmail","loginRequest",t);const s=new URL("/iam/v1/password/link",Ht);let i;e&&(i=e.baseOptions);const o={method:"POST",...i,...n},a={};null!=r&&(a["x-game"]=String(r)),a["Content-Type"]="application/json",Wt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...n.headers},o.data=Jt(t,o,e),{url:Yt(s),options:o}},linkOAuth:async(t,r,n={})=>{zt("linkOAuth","oAuthInitRequest",t);const s=new URL("/iam/v1/oauth/init_link",Ht);let i;e&&(i=e.baseOptions);const o={method:"POST",...i,...n},a={};null!=r&&(a["x-game"]=String(r)),a["Content-Type"]="application/json",Wt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...n.headers},o.data=Jt(t,o,e),{url:Yt(s),options:o}},linkSIWE:async(t,r={})=>{zt("linkSIWE","sIWEAuthenticateRequest",t);const n=new URL("/iam/v1/siwe/link",Ht);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Wt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Jt(t,i,e),{url:Yt(n),options:i}},linkThirdParty:async(t,r,n={})=>{zt("linkThirdParty","thirdPartyLinkRequest",t);const s=new URL("/iam/v1/oauth/link",Ht);let i;e&&(i=e.baseOptions);const o={method:"POST",...i,...n},a={};null!=r&&(a["x-game"]=String(r)),a["Content-Type"]="application/json",Wt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...n.headers},o.data=Jt(t,o,e),{url:Yt(s),options:o}},loginEmailPassword:async(t,r,n={})=>{zt("loginEmailPassword","loginRequest",t);const s=new URL("/iam/v1/password/login",Ht);let i;e&&(i=e.baseOptions);const o={method:"POST",...i,...n},a={};await Kt(a,e),null!=r&&(a["x-game"]=String(r)),a["Content-Type"]="application/json",Wt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...n.headers},o.data=Jt(t,o,e),{url:Yt(s),options:o}},loginOIDC:async(t,r,n={})=>{zt("loginOIDC","loginOIDCRequest",t);const s=new URL("/iam/v1/oidc/login",Ht);let i;e&&(i=e.baseOptions);const o={method:"POST",...i,...n},a={};await Kt(a,e),null!=r&&(a["x-game"]=String(r)),a["Content-Type"]="application/json",Wt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...n.headers},o.data=Jt(t,o,e),{url:Yt(s),options:o}},loginWithIdToken:async(t,r={})=>{zt("loginWithIdToken","loginWithIdTokenRequest",t);const n=new URL("/iam/v1/oauth/login_id_token",Ht);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r},o={};await Kt(o,e),o["Content-Type"]="application/json",Wt(n,{});let a=s&&s.headers?s.headers:{};return i.headers={...o,...a,...r.headers},i.data=Jt(t,i,e),{url:Yt(n),options:i}},logout:async(t,r={})=>{zt("logout","logoutRequest",t);const n=new URL("/iam/v1/sessions/logout",Ht);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Wt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Jt(t,i,e),{url:Yt(n),options:i}},me:async(t={})=>{const r=new URL("/iam/v1/me",Ht);let n;e&&(n=e.baseOptions);const s={method:"GET",...n,...t};Wt(r,{});let i=n&&n.headers?n.headers:{};return s.headers={...i,...t.headers},{url:Yt(r),options:s}},poolOAuth:async(t,r={})=>{zt("poolOAuth","key",t);const n=new URL("/iam/v1/oauth/pool",Ht);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r},o={},a={};await Kt(o,e),void 0!==t&&(a.key=t),Wt(n,a);let c=s&&s.headers?s.headers:{};return i.headers={...o,...c,...r.headers},{url:Yt(n),options:i}},refresh:async(t,r={})=>{zt("refresh","refreshTokenRequest",t);const n=new URL("/iam/v1/sessions",Ht);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r},o={};await Kt(o,e),o["Content-Type"]="application/json",Wt(n,{});let a=s&&s.headers?s.headers:{};return i.headers={...o,...a,...r.headers},i.data=Jt(t,i,e),{url:Yt(n),options:i}},registerGuest:async(t,r={})=>{const n=new URL("/iam/v1/guest",Ht);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r},o={};await Kt(o,e),null!=t&&(o["x-game"]=String(t)),Wt(n,{});let a=s&&s.headers?s.headers:{};return i.headers={...o,...a,...r.headers},{url:Yt(n),options:i}},requestEmailVerification:async(t,r={})=>{zt("requestEmailVerification","requestVerifyEmailRequest",t);const n=new URL("/iam/v1/password/request_email_verification",Ht);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r},o={};await Kt(o,e),o["Content-Type"]="application/json",Wt(n,{});let a=s&&s.headers?s.headers:{};return i.headers={...o,...a,...r.headers},i.data=Jt(t,i,e),{url:Yt(n),options:i}},requestResetPassword:async(t,r={})=>{zt("requestResetPassword","requestResetPasswordRequest",t);const n=new URL("/iam/v1/password/request_reset",Ht);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r},o={};await Kt(o,e),o["Content-Type"]="application/json",Wt(n,{});let a=s&&s.headers?s.headers:{};return i.headers={...o,...a,...r.headers},i.data=Jt(t,i,e),{url:Yt(n),options:i}},resetPassword:async(t,r={})=>{zt("resetPassword","resetPasswordRequest",t);const n=new URL("/iam/v1/password/reset",Ht);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r},o={};await Kt(o,e),o["Content-Type"]="application/json",Wt(n,{});let a=s&&s.headers?s.headers:{};return i.headers={...o,...a,...r.headers},i.data=Jt(t,i,e),{url:Yt(n),options:i}},signupEmailPassword:async(t,r,n={})=>{zt("signupEmailPassword","signupRequest",t);const s=new URL("/iam/v1/password/signup",Ht);let i;e&&(i=e.baseOptions);const o={method:"POST",...i,...n},a={};await Kt(a,e),null!=r&&(a["x-game"]=String(r)),a["Content-Type"]="application/json",Wt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...n.headers},o.data=Jt(t,o,e),{url:Yt(s),options:o}},thirdParty:async(t,r,n={})=>{zt("thirdParty","thirdPartyOAuthRequest",t);const s=new URL("/iam/v1/oauth/third_party",Ht);let i;e&&(i=e.baseOptions);const o={method:"POST",...i,...n},a={};await Kt(a,e),null!=r&&(a["x-game"]=String(r)),a["Content-Type"]="application/json",Wt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...n.headers},o.data=Jt(t,o,e),{url:Yt(s),options:o}},unlinkEmail:async(t,r={})=>{zt("unlinkEmail","unlinkEmailRequest",t);const n=new URL("/iam/v1/password/unlink",Ht);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Wt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Jt(t,i,e),{url:Yt(n),options:i}},unlinkOAuth:async(t,r={})=>{zt("unlinkOAuth","unlinkOAuthRequest",t);const n=new URL("/iam/v1/oauth/unlink",Ht);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Wt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Jt(t,i,e),{url:Yt(n),options:i}},unlinkSIWE:async(t,r={})=>{zt("unlinkSIWE","sIWERequest",t);const n=new URL("/iam/v1/siwe/unlink",Ht);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Wt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Jt(t,i,e),{url:Yt(n),options:i}},verifyEmail:async(t,r={})=>{zt("verifyEmail","verifyEmailRequest",t);const n=new URL("/iam/v1/password/verify_email",Ht);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r},o={};await Kt(o,e),o["Content-Type"]="application/json",Wt(n,{});let a=s&&s.headers?s.headers:{};return i.headers={...o,...a,...r.headers},i.data=Jt(t,i,e),{url:Yt(n),options:i}},verifyOAuthToken:async(t,r={})=>{zt("verifyOAuthToken","authenticateOAuthRequest",t);const n=new URL("/iam/v1/oauth/verify",Ht);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r},o={};await Kt(o,e),o["Content-Type"]="application/json",Wt(n,{});let a=s&&s.headers?s.headers:{};return i.headers={...o,...a,...r.headers},i.data=Jt(t,i,e),{url:Yt(n),options:i}}}}(e);return{async authenticateSIWE(r,n){const s=await t.authenticateSIWE(r,n);return Qt(s,ot,qt,e)},async getJwks(r,n){const s=await t.getJwks(r,n);return Qt(s,ot,qt,e)},async initOAuth(r,n,s){const i=await t.initOAuth(r,n,s);return Qt(i,ot,qt,e)},async initSIWE(r,n,s){const i=await t.initSIWE(r,n,s);return Qt(i,ot,qt,e)},async linkEmail(r,n,s){const i=await t.linkEmail(r,n,s);return Qt(i,ot,qt,e)},async linkOAuth(r,n,s){const i=await t.linkOAuth(r,n,s);return Qt(i,ot,qt,e)},async linkSIWE(r,n){const s=await t.linkSIWE(r,n);return Qt(s,ot,qt,e)},async linkThirdParty(r,n,s){const i=await t.linkThirdParty(r,n,s);return Qt(i,ot,qt,e)},async loginEmailPassword(r,n,s){const i=await t.loginEmailPassword(r,n,s);return Qt(i,ot,qt,e)},async loginOIDC(r,n,s){const i=await t.loginOIDC(r,n,s);return Qt(i,ot,qt,e)},async loginWithIdToken(r,n){const s=await t.loginWithIdToken(r,n);return Qt(s,ot,qt,e)},async logout(r,n){const s=await t.logout(r,n);return Qt(s,ot,qt,e)},async me(r){const n=await t.me(r);return Qt(n,ot,qt,e)},async poolOAuth(r,n){const s=await t.poolOAuth(r,n);return Qt(s,ot,qt,e)},async refresh(r,n){const s=await t.refresh(r,n);return Qt(s,ot,qt,e)},async registerGuest(r,n){const s=await t.registerGuest(r,n);return Qt(s,ot,qt,e)},async requestEmailVerification(r,n){const s=await t.requestEmailVerification(r,n);return Qt(s,ot,qt,e)},async requestResetPassword(r,n){const s=await t.requestResetPassword(r,n);return Qt(s,ot,qt,e)},async resetPassword(r,n){const s=await t.resetPassword(r,n);return Qt(s,ot,qt,e)},async signupEmailPassword(r,n,s){const i=await t.signupEmailPassword(r,n,s);return Qt(i,ot,qt,e)},async thirdParty(r,n,s){const i=await t.thirdParty(r,n,s);return Qt(i,ot,qt,e)},async unlinkEmail(r,n){const s=await t.unlinkEmail(r,n);return Qt(s,ot,qt,e)},async unlinkOAuth(r,n){const s=await t.unlinkOAuth(r,n);return Qt(s,ot,qt,e)},async unlinkSIWE(r,n){const s=await t.unlinkSIWE(r,n);return Qt(s,ot,qt,e)},async verifyEmail(r,n){const s=await t.verifyEmail(r,n);return Qt(s,ot,qt,e)},async verifyOAuthToken(r,n){const s=await t.verifyOAuthToken(r,n);return Qt(s,ot,qt,e)}}};class er extends jt{authenticateSIWE(e,t){return Zt(this.configuration).authenticateSIWE(e.sIWEAuthenticateRequest,t).then(e=>e(this.axios,this.basePath))}getJwks(e,t){return Zt(this.configuration).getJwks(e.publishableKey,t).then(e=>e(this.axios,this.basePath))}initOAuth(e,t){return Zt(this.configuration).initOAuth(e.oAuthInitRequest,e.xGame,t).then(e=>e(this.axios,this.basePath))}initSIWE(e,t){return Zt(this.configuration).initSIWE(e.sIWERequest,e.xGame,t).then(e=>e(this.axios,this.basePath))}linkEmail(e,t){return Zt(this.configuration).linkEmail(e.loginRequest,e.xGame,t).then(e=>e(this.axios,this.basePath))}linkOAuth(e,t){return Zt(this.configuration).linkOAuth(e.oAuthInitRequest,e.xGame,t).then(e=>e(this.axios,this.basePath))}linkSIWE(e,t){return Zt(this.configuration).linkSIWE(e.sIWEAuthenticateRequest,t).then(e=>e(this.axios,this.basePath))}linkThirdParty(e,t){return Zt(this.configuration).linkThirdParty(e.thirdPartyLinkRequest,e.xGame,t).then(e=>e(this.axios,this.basePath))}loginEmailPassword(e,t){return Zt(this.configuration).loginEmailPassword(e.loginRequest,e.xGame,t).then(e=>e(this.axios,this.basePath))}loginOIDC(e,t){return Zt(this.configuration).loginOIDC(e.loginOIDCRequest,e.xGame,t).then(e=>e(this.axios,this.basePath))}loginWithIdToken(e,t){return Zt(this.configuration).loginWithIdToken(e.loginWithIdTokenRequest,t).then(e=>e(this.axios,this.basePath))}logout(e,t){return Zt(this.configuration).logout(e.logoutRequest,t).then(e=>e(this.axios,this.basePath))}me(e){return Zt(this.configuration).me(e).then(e=>e(this.axios,this.basePath))}poolOAuth(e,t){return Zt(this.configuration).poolOAuth(e.key,t).then(e=>e(this.axios,this.basePath))}refresh(e,t){return Zt(this.configuration).refresh(e.refreshTokenRequest,t).then(e=>e(this.axios,this.basePath))}registerGuest(e={},t){return Zt(this.configuration).registerGuest(e.xGame,t).then(e=>e(this.axios,this.basePath))}requestEmailVerification(e,t){return Zt(this.configuration).requestEmailVerification(e.requestVerifyEmailRequest,t).then(e=>e(this.axios,this.basePath))}requestResetPassword(e,t){return Zt(this.configuration).requestResetPassword(e.requestResetPasswordRequest,t).then(e=>e(this.axios,this.basePath))}resetPassword(e,t){return Zt(this.configuration).resetPassword(e.resetPasswordRequest,t).then(e=>e(this.axios,this.basePath))}signupEmailPassword(e,t){return Zt(this.configuration).signupEmailPassword(e.signupRequest,e.xGame,t).then(e=>e(this.axios,this.basePath))}thirdParty(e,t){return Zt(this.configuration).thirdParty(e.thirdPartyOAuthRequest,e.xGame,t).then(e=>e(this.axios,this.basePath))}unlinkEmail(e,t){return Zt(this.configuration).unlinkEmail(e.unlinkEmailRequest,t).then(e=>e(this.axios,this.basePath))}unlinkOAuth(e,t){return Zt(this.configuration).unlinkOAuth(e.unlinkOAuthRequest,t).then(e=>e(this.axios,this.basePath))}unlinkSIWE(e,t){return Zt(this.configuration).unlinkSIWE(e.sIWERequest,t).then(e=>e(this.axios,this.basePath))}verifyEmail(e,t){return Zt(this.configuration).verifyEmail(e.verifyEmailRequest,t).then(e=>e(this.axios,this.basePath))}verifyOAuthToken(e,t){return Zt(this.configuration).verifyOAuthToken(e.authenticateOAuthRequest,t).then(e=>e(this.axios,this.basePath))}}const tr=function(e){const t=function(e){return{createSession:async(t,r,n={})=>{zt("createSession","createSessionRequest",t);const s=new URL("/v1/sessions",Ht);let i;e&&(i=e.baseOptions);const o={method:"POST",...i,...n},a={};await Kt(a,e),null!=r&&(a["X-Behalf-Of-Project"]=String(r)),a["Content-Type"]="application/json",Wt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...n.headers},o.data=Jt(t,o,e),{url:Yt(s),options:o}},getPlayerSessions:async(t,r,n,s,i,o={})=>{zt("getPlayerSessions","player",t);const a=new URL("/v1/sessions",Ht);let c;e&&(c=e.baseOptions);const u={method:"GET",...c,...o},h={},l={};await Kt(h,e),void 0!==r&&(l.limit=r),void 0!==n&&(l.skip=n),void 0!==s&&(l.order=s),void 0!==t&&(l.player=t),i&&(l.expand=i),Wt(a,l);let d=c&&c.headers?c.headers:{};return u.headers={...h,...d,...o.headers},{url:Yt(a),options:u}},getSession:async(t,r,n={})=>{zt("getSession","id",t);const s="/v1/sessions/{id}".replace("{id}",encodeURIComponent(String(t))),i=new URL(s,Ht);let o;e&&(o=e.baseOptions);const a={method:"GET",...o,...n},c={},u={};await Kt(c,e),r&&(u.expand=r),Wt(i,u);let h=o&&o.headers?o.headers:{};return a.headers={...c,...h,...n.headers},{url:Yt(i),options:a}},revokeSession:async(t,r,n={})=>{zt("revokeSession","revokeSessionRequest",t);const s=new URL("/v1/sessions/revoke",Ht);let i;e&&(i=e.baseOptions);const o={method:"POST",...i,...n},a={};await Kt(a,e),null!=r&&(a["X-Behalf-Of-Project"]=String(r)),a["Content-Type"]="application/json",Wt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...n.headers},o.data=Jt(t,o,e),{url:Yt(s),options:o}},signatureSession:async(t,r,n={})=>{zt("signatureSession","id",t),zt("signatureSession","signatureRequest",r);const s="/v1/sessions/{id}/signature".replace("{id}",encodeURIComponent(String(t))),i=new URL(s,Ht);let o;e&&(o=e.baseOptions);const a={method:"POST",...o,...n},c={};await Kt(c,e),await Kt(c,e),c["Content-Type"]="application/json",Wt(i,{});let u=o&&o.headers?o.headers:{};return a.headers={...c,...u,...n.headers},a.data=Jt(r,a,e),{url:Yt(i),options:a}}}}(e);return{async createSession(r,n,s){const i=await t.createSession(r,n,s);return Qt(i,ot,qt,e)},async getPlayerSessions(r,n,s,i,o,a){const c=await t.getPlayerSessions(r,n,s,i,o,a);return Qt(c,ot,qt,e)},async getSession(r,n,s){const i=await t.getSession(r,n,s);return Qt(i,ot,qt,e)},async revokeSession(r,n,s){const i=await t.revokeSession(r,n,s);return Qt(i,ot,qt,e)},async signatureSession(r,n,s){const i=await t.signatureSession(r,n,s);return Qt(i,ot,qt,e)}}};class rr extends jt{createSession(e,t){return tr(this.configuration).createSession(e.createSessionRequest,e.xBehalfOfProject,t).then(e=>e(this.axios,this.basePath))}getPlayerSessions(e,t){return tr(this.configuration).getPlayerSessions(e.player,e.limit,e.skip,e.order,e.expand,t).then(e=>e(this.axios,this.basePath))}getSession(e,t){return tr(this.configuration).getSession(e.id,e.expand,t).then(e=>e(this.axios,this.basePath))}revokeSession(e,t){return tr(this.configuration).revokeSession(e.revokeSessionRequest,e.xBehalfOfProject,t).then(e=>e(this.axios,this.basePath))}signatureSession(e,t){return tr(this.configuration).signatureSession(e.id,e.signatureRequest,t).then(e=>e(this.axios,this.basePath))}}const nr=function(e){const t=function(e){return{createTransactionIntent:async(t,r,n={})=>{zt("createTransactionIntent","createTransactionIntentRequest",t);const s=new URL("/v1/transaction_intents",Ht);let i;e&&(i=e.baseOptions);const o={method:"POST",...i,...n},a={};await Kt(a,e),null!=r&&(a["X-Behalf-Of-Project"]=String(r)),a["Content-Type"]="application/json",Wt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...n.headers},o.data=Jt(t,o,e),{url:Yt(s),options:o}},estimateTransactionIntentCost:async(t,r={})=>{zt("estimateTransactionIntentCost","createTransactionIntentRequest",t);const n=new URL("/v1/transaction_intents/estimate_gas_cost",Ht);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r},o={};await Kt(o,e),o["Content-Type"]="application/json",Wt(n,{});let a=s&&s.headers?s.headers:{};return i.headers={...o,...a,...r.headers},i.data=Jt(t,i,e),{url:Yt(n),options:i}},getTransactionIntent:async(t,r,n={})=>{zt("getTransactionIntent","id",t);const s="/v1/transaction_intents/{id}".replace("{id}",encodeURIComponent(String(t))),i=new URL(s,Ht);let o;e&&(o=e.baseOptions);const a={method:"GET",...o,...n},c={},u={};await Kt(c,e),r&&(u.expand=r),Wt(i,u);let h=o&&o.headers?o.headers:{};return a.headers={...c,...h,...n.headers},{url:Yt(i),options:a}},getTransactionIntents:async(t,r,n,s,i,o,a,c,u,h={})=>{const l=new URL("/v1/transaction_intents",Ht);let d;e&&(d=e.baseOptions);const f={method:"GET",...d,...h},p={},m={};await Kt(p,e),void 0!==t&&(m.limit=t),void 0!==r&&(m.skip=r),void 0!==n&&(m.order=n),s&&(m.expand=s),void 0!==i&&(m.chainId=i),o&&(m.account=o),a&&(m.player=a),void 0!==c&&(m.status=c),u&&(m.policy=u),Wt(l,m);let g=d&&d.headers?d.headers:{};return f.headers={...p,...g,...h.headers},{url:Yt(l),options:f}},signature:async(t,r,n={})=>{zt("signature","id",t),zt("signature","signatureRequest",r);const s="/v1/transaction_intents/{id}/signature".replace("{id}",encodeURIComponent(String(t))),i=new URL(s,Ht);let o;e&&(o=e.baseOptions);const a={method:"POST",...o,...n},c={};await Kt(c,e),await Kt(c,e),c["Content-Type"]="application/json",Wt(i,{});let u=o&&o.headers?o.headers:{};return a.headers={...c,...u,...n.headers},a.data=Jt(r,a,e),{url:Yt(i),options:a}}}}(e);return{async createTransactionIntent(r,n,s){const i=await t.createTransactionIntent(r,n,s);return Qt(i,ot,qt,e)},async estimateTransactionIntentCost(r,n){const s=await t.estimateTransactionIntentCost(r,n);return Qt(s,ot,qt,e)},async getTransactionIntent(r,n,s){const i=await t.getTransactionIntent(r,n,s);return Qt(i,ot,qt,e)},async getTransactionIntents(r,n,s,i,o,a,c,u,h,l){const d=await t.getTransactionIntents(r,n,s,i,o,a,c,u,h,l);return Qt(d,ot,qt,e)},async signature(r,n,s){const i=await t.signature(r,n,s);return Qt(i,ot,qt,e)}}};let sr=class extends jt{createTransactionIntent(e,t){return nr(this.configuration).createTransactionIntent(e.createTransactionIntentRequest,e.xBehalfOfProject,t).then(e=>e(this.axios,this.basePath))}estimateTransactionIntentCost(e,t){return nr(this.configuration).estimateTransactionIntentCost(e.createTransactionIntentRequest,t).then(e=>e(this.axios,this.basePath))}getTransactionIntent(e,t){return nr(this.configuration).getTransactionIntent(e.id,e.expand,t).then(e=>e(this.axios,this.basePath))}getTransactionIntents(e={},t){return nr(this.configuration).getTransactionIntents(e.limit,e.skip,e.order,e.expand,e.chainId,e.account,e.player,e.status,e.policy,t).then(e=>e(this.axios,this.basePath))}signature(e,t){return nr(this.configuration).signature(e.id,e.signatureRequest,t).then(e=>e(this.axios,this.basePath))}},ir=class{apiKey;username;password;accessToken;basePath;baseOptions;formDataCtor;constructor(e={}){this.apiKey=e.apiKey,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.baseOptions=e.baseOptions,this.formDataCtor=e.formDataCtor}isJsonMime(e){const t=new RegExp("^(application/json|[^;/ \t]+/[^;/ \t]+[+]json)[ \t]*(;.*)?$","i");return null!==e&&(t.test(e)||"application/json-patch+json"===e.toLowerCase())}};const or=({basePath:e,accessToken:t})=>{if(!e.trim())throw Error("basePath can not be empty");return new ir({basePath:e,accessToken:t})};let ar=class{config;transactionIntentsApi;accountsApi;sessionsApi;authenticationApi;constructor(e){const t=ot.create();Ft(t,{retries:3,retryDelay:Ft.exponentialDelay,retryCondition:Ft.isRetryableError});const r={basePath:e.basePath,accessToken:e.accessToken};this.config={backend:or(r)},this.transactionIntentsApi=new sr(this.config.backend,void 0,t),this.accountsApi=new $t(this.config.backend,void 0,t),this.sessionsApi=new rr(this.config.backend,void 0,t),this.authenticationApi=new er(this.config.backend,void 0,t)}};var cr;!function(e){e.AUTHENTICATION="openfort.authentication",e.CONFIGURATION="openfort.configuration",e.ACCOUNT="openfort.account",e.TEST="openfort.test",e.SESSION="openfort.session",e.PKCE_STATE="openfort.pkce_state",e.PKCE_VERIFIER="openfort.pkce_verifier"}(cr||(cr={}));let ur=class e{type;token;player;refreshToken;thirdPartyProvider;thirdPartyTokenType;constructor(e,t,r,n,s,i){this.type=e,this.token=t,this.player=r,this.refreshToken=n,this.thirdPartyProvider=s,this.thirdPartyTokenType=i}static thirdPartyAuthToken;get provider(){return this.thirdPartyProvider}get tokenType(){return this.thirdPartyTokenType}save(t){const r="third_party"===this.type;r&&(e.thirdPartyAuthToken=this.token),t.save(cr.AUTHENTICATION,JSON.stringify({type:this.type,token:r?void 0:this.token,player:this.player,refreshToken:this.refreshToken,thirdPartyProvider:this.thirdPartyProvider,thirdPartyTokenType:this.thirdPartyTokenType}))}static clear(t){e.thirdPartyAuthToken="",t.remove(cr.AUTHENTICATION)}static async fromStorage(t){const r=await t.get(cr.AUTHENTICATION);if(!r)return null;try{const t=JSON.parse(r);return"third_party"===t.type&&(t.token=e.thirdPartyAuthToken),new e(t.type,t.token,t.player,t.refreshToken,t.thirdPartyProvider,t.thirdPartyTokenType)}catch{return null}}};var hr;!function(e){e.AUTHENTICATION_ERROR="AUTHENTICATION_ERROR",e.INVALID_CONFIGURATION="INVALID_CONFIGURATION",e.NOT_LOGGED_IN_ERROR="NOT_LOGGED_IN_ERROR",e.ALREADY_LOGGED_IN_ERROR="ALREADY_LOGGED_IN_ERROR",e.REFRESH_TOKEN_ERROR="REFRESH_TOKEN_ERROR",e.USER_REGISTRATION_ERROR="USER_REGISTRATION_ERROR",e.LOGOUT_ERROR="LOGOUT_ERROR",e.OPERATION_NOT_SUPPORTED_ERROR="OPERATION_NOT_SUPPORTED_ERROR",e.MISSING_SIGNER_ERROR="MISSING_SIGNER_ERROR",e.USER_NOT_AUTHORIZED_ON_ECOSYSTEM="USER_NOT_AUTHORIZED_ON_ECOSYSTEM",e.INTERNAL_ERROR="INTERNAL_ERROR"}(hr||(hr={}));let lr=class extends Error{type;data;constructor(e,t,r={}){super(e),this.type=t,this.data=r}};const dr=async(e,t,r)=>{try{return await e()}catch(e){let n;const s={};let i;mt(e)?(i=e.response?.status,n=e.response?.data?.error&&function(e){return"type"in e&&"message"in e}(e.response.data.error)?e.response.data.error.message:e.message):n=e.message;const o=void 0!==i&&t[i]?t[i]:t.default,a=new lr(n,o,s);throw void 0!==i&&t[i]||r?.(e,a),a}};var fr,pr,mr,gr,yr,wr,vr,Ar,br,Er,_r,kr,Rr,Ir;!function(e){e[e.NONE=0]="NONE",e[e.UNAUTHENTICATED=1]="UNAUTHENTICATED",e[e.EMBEDDED_SIGNER_NOT_CONFIGURED=2]="EMBEDDED_SIGNER_NOT_CONFIGURED",e[e.CREATING_ACCOUNT=3]="CREATING_ACCOUNT",e[e.READY=4]="READY"}(fr||(fr={})),function(e){e.ON_AUTH_INIT="onAuthInit",e.ON_AUTH_SUCCESS="onAuthSuccess",e.ON_AUTH_FAILURE="onAuthFailure",e.ON_LOGOUT="onLogout",e.ON_SWITCH_ACCOUNT="onSwitchAccount",e.ON_SIGNED_MESSAGE="onSignedMessage",e.ON_EMBEDDED_WALLET_CREATED="onEmbeddedWalletCreated",e.ON_EMBEDDED_WALLET_RECOVERED="onEmbeddedWalletRecovered"}(pr||(pr={})),function(e){e.PASSWORD="password",e.AUTOMATIC="automatic",e.PASSKEY="passkey"}(mr||(mr={})),function(e){e.UPGRADEABLE_V4="Upgradeable_v04",e.MANAGED_V4="Managed_v04",e.ERC6551_V4="ERC6551_v04",e.ERC6551_V5="ERC6551_v05",e.RECOVERABLE_V4="Recoverable_v04",e.MANAGED_V5="Managed_v05",e.UPGRADEABLE_V5="Upgradeable_v05",e.UPGRADEABLE_V6="Upgradeable_v06",e.ZKSYNC_UPGRADEABLE_V1="zksync_upgradeable_v1",e.ZKSYNC_UPGRADEABLE_V2="zksync_upgradeable_v2"}(gr||(gr={})),function(e){e.OPENFORT="openfort",e.THIRD_PARTY="thirdParty"}(yr||(yr={})),function(e){e.ID_TOKEN="idToken",e.CUSTOM_TOKEN="customToken"}(wr||(wr={})),function(e){e.ACCELBYTE="accelbyte",e.FIREBASE="firebase",e.LOOTLOCKER="lootlocker",e.PLAYFAB="playfab",e.SUPABASE="supabase",e.CUSTOM="custom",e.OIDC="oidc"}(vr||(vr={})),function(e){e.EMAIL="email",e.WALLET="wallet"}(Ar||(Ar={})),function(e){e.GOOGLE="google",e.TWITTER="twitter",e.APPLE="apple",e.FACEBOOK="facebook",e.DISCORD="discord",e.EPIC_GAMES="epic_games",e.LINE="line"}(br||(br={})),function(e){e.ACTION_VERIFY_EMAIL="verify_email"}(Er||(Er={})),function(e){e.S256="S256"}(_r||(_r={})),function(e){e.EOA="Externally Owned Account",e.SMART_ACCOUNT="Smart Account"}(kr||(kr={})),function(e){e.EVM="EVM",e.SVM="SVM"}(Rr||(Rr={})),function(e){e.ASC="asc",e.DESC="desc"}(Ir||(Ir={}));let Tr=class{storage;authManager;validateAndRefreshToken;ensureInitialized;eventEmitter;constructor(e,t,r,n,s){this.storage=e,this.authManager=t,this.validateAndRefreshToken=r,this.ensureInitialized=n,this.eventEmitter=s}async logInWithEmailPassword({email:e,password:t,ecosystemGame:r}){if(await this.ensureInitialized(),await ur.fromStorage(this.storage))throw new lr("Already logged in",hr.ALREADY_LOGGED_IN_ERROR);this.eventEmitter.emit(pr.ON_AUTH_INIT,{method:"email",provider:"email"});try{const n=await this.authManager.loginEmailPassword(e,t,r);return"action"in n||(new ur("jwt",n.token,n.player.id,n.refreshToken).save(this.storage),this.eventEmitter.emit(pr.ON_AUTH_SUCCESS,n)),n}catch(e){throw this.eventEmitter.emit(pr.ON_AUTH_FAILURE,e),e}}async signUpGuest(){if(await this.ensureInitialized(),await ur.fromStorage(this.storage))throw new lr("Already logged in",hr.ALREADY_LOGGED_IN_ERROR);this.eventEmitter.emit(pr.ON_AUTH_INIT,{method:"guest"});try{const e=await this.authManager.registerGuest();return new ur("jwt",e.token,e.player.id,e.refreshToken).save(this.storage),this.eventEmitter.emit(pr.ON_AUTH_SUCCESS,e),e}catch(e){throw this.eventEmitter.emit(pr.ON_AUTH_FAILURE,e),e}}async signUpWithEmailPassword({email:e,password:t,options:r,ecosystemGame:n}){if(await this.ensureInitialized(),await ur.fromStorage(this.storage))throw new lr("Already logged in",hr.ALREADY_LOGGED_IN_ERROR);this.eventEmitter.emit(pr.ON_AUTH_INIT,{method:"email",provider:"email"});try{const s=await this.authManager.signupEmailPassword(e,t,r?.data.name,n);return"action"in s||(new ur("jwt",s.token,s.player.id,s.refreshToken).save(this.storage),this.eventEmitter.emit(pr.ON_AUTH_SUCCESS,s)),s}catch(e){throw this.eventEmitter.emit(pr.ON_AUTH_FAILURE,e),e}}async linkEmailPassword({email:e,password:t,authToken:r,ecosystemGame:n}){return await this.validateAndRefreshToken(),await this.authManager.linkEmail(e,t,r,n)}async unlinkEmailPassword({email:e,authToken:t}){return await this.validateAndRefreshToken(),await this.authManager.unlinkEmail(e,t)}async requestEmailVerification({email:e,redirectUrl:t}){await this.ensureInitialized(),await this.authManager.requestEmailVerification(e,t)}async resetPassword({email:e,password:t,state:r}){await this.ensureInitialized(),await this.authManager.resetPassword(e,t,r)}async requestResetPassword({email:e,redirectUrl:t}){await this.ensureInitialized(),await this.authManager.requestResetPassword(e,t)}async verifyEmail({email:e,state:t}){await this.ensureInitialized(),await this.authManager.verifyEmail(e,t)}async initOAuth({provider:e,options:t,ecosystemGame:r}){if(await this.ensureInitialized(),await ur.fromStorage(this.storage))throw new lr("Already logged in",hr.ALREADY_LOGGED_IN_ERROR);return this.eventEmitter.emit(pr.ON_AUTH_INIT,{method:"oauth",provider:e}),await this.authManager.initOAuth(e,t,r)}async initLinkOAuth({provider:e,options:t,ecosystemGame:r}){await this.validateAndRefreshToken();const n=await ur.fromStorage(this.storage);if(!n)throw new lr("No authentication found",hr.NOT_LOGGED_IN_ERROR);return this.eventEmitter.emit(pr.ON_AUTH_INIT,{method:"oauth",provider:e}),await this.authManager.linkOAuth(n,e,t,r)}async unlinkOAuth({provider:e,authToken:t}){return await this.validateAndRefreshToken(),await this.authManager.unlinkOAuth(e,t)}async poolOAuth(e){await this.ensureInitialized();try{const t=await this.authManager.poolOAuth(e);return new ur("jwt",t.token,t.player.id,t.refreshToken).save(this.storage),this.eventEmitter.emit(pr.ON_AUTH_SUCCESS,t),t}catch(e){throw this.eventEmitter.emit(pr.ON_AUTH_FAILURE,e),e}}async loginWithIdToken({provider:e,token:t,ecosystemGame:r}){if(await this.ensureInitialized(),await ur.fromStorage(this.storage))throw new lr("Already logged in",hr.ALREADY_LOGGED_IN_ERROR);this.eventEmitter.emit(pr.ON_AUTH_INIT,{method:"idToken",provider:e});try{const n=await this.authManager.loginWithIdToken(e,t,r);return new ur("jwt",n.token,n.player.id,n.refreshToken).save(this.storage),this.eventEmitter.emit(pr.ON_AUTH_SUCCESS,n),n}catch(e){throw this.eventEmitter.emit(pr.ON_AUTH_FAILURE,e),e}}async initSIWE({address:e,ecosystemGame:t}){return await this.ensureInitialized(),await this.authManager.initSIWE(e,t)}async authenticateWithSIWE({signature:e,message:t,walletClientType:r,connectorType:n}){if(await this.ensureInitialized(),await ur.fromStorage(this.storage))throw new lr("Already logged in",hr.ALREADY_LOGGED_IN_ERROR);this.eventEmitter.emit(pr.ON_AUTH_INIT,{method:"siwe",provider:"wallet"});try{const s=await this.authManager.authenticateSIWE(e,t,r,n);return new ur("jwt",s.token,s.player.id,s.refreshToken).save(this.storage),this.eventEmitter.emit(pr.ON_AUTH_SUCCESS,s),s}catch(e){throw this.eventEmitter.emit(pr.ON_AUTH_FAILURE,e),e}}async linkWallet({signature:e,message:t,walletClientType:r,connectorType:n,authToken:s}){return await this.validateAndRefreshToken(),await this.authManager.linkWallet(e,t,r,n,s)}async unlinkWallet({address:e,authToken:t}){return await this.validateAndRefreshToken(),await this.authManager.unlinkWallet(e,t)}async storeCredentials(e){if(await this.ensureInitialized(),!e.player)throw new lr("Player ID is required to store credentials",hr.INVALID_CONFIGURATION);new ur("jwt",e.accessToken,e.player,e.refreshToken).save(this.storage)}async logout(){const e=await ur.fromStorage(this.storage);if(e){try{"third_party"!==e.type&&await this.authManager.logout(e.token,e?.refreshToken)}catch(e){}ur.clear(this.storage),this.eventEmitter.emit(pr.ON_LOGOUT)}}};var Nr={};!function(e){var t=_t&&_t.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,s=0,i=t.length;s<i;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))};function r(e){return e[Math.floor(Math.random()*e.length)]}function n(e){return e.reduce(function(e,t){return e.length>t.length?e:t})}function s(e){return e.reduce(function(e,t){return e.length<t.length?e:t})}function i(n){void 0===n&&(n={}),"string"==typeof n&&(n={separator:n}),"boolean"==typeof n&&(n={capitalize:n});var s=n.separator,i=void 0===s?"":s,o=n.capitalize,a=void 0===o||o,c=n.adjectiveCount,u=void 0===c?1:c,h=n.addAdverb,l=void 0!==h&&h,d=t(t(t([],t([],Array(u),!0).map(function(t){return r(e.adjectives)}),!0),[r(e.nouns),r(e.verbs)],!1),l?[r(e.adverbs)]:[],!0);return a&&(d=d.map(function(e){return e.charAt(0).toUpperCase()+e.substr(1)})),d.join(i)}Object.defineProperty(e,"__esModule",{value:!0}),e.adverbs=e.verbs=e.nouns=e.adjectives=void 0,e.humanId=i,e.poolSize=function(t){void 0===t&&(t={});var r=t.adjectiveCount,n=void 0===r?1:r,s=t.addAdverb,i=void 0!==s&&s;return e.adjectives.length*n*e.nouns.length*e.verbs.length*(i?e.adverbs.length:1)},e.maxLength=function(t){void 0===t&&(t={});var r=t.adjectiveCount,s=void 0===r?1:r,i=t.addAdverb,o=void 0!==i&&i,a=t.separator,c=void 0===a?"":a;return n(e.adjectives).length*s+s*c.length+n(e.nouns).length+c.length+n(e.verbs).length+(o?n(e.adverbs).length+c.length:0)},e.minLength=function(t){void 0===t&&(t={});var r=t.adjectiveCount,n=void 0===r?1:r,i=t.addAdverb,o=void 0!==i&&i,a=t.separator,c=void 0===a?"":a;return s(e.adjectives).length*n+n*c.length+s(e.nouns).length+c.length+s(e.verbs).length+(o?s(e.adverbs).length+c.length:0)},e.adjectives=["afraid","all","beige","better","big","blue","bold","brave","breezy","bright","brown","bumpy","busy","calm","chatty","chilly","chubby","clean","clear","clever","cold","common","cool","cozy","crisp","cuddly","curly","curvy","cute","cyan","dark","deep","dirty","dry","dull","eager","early","easy","eight","eighty","eleven","empty","every","fair","famous","fancy","fast","few","fiery","fifty","fine","five","flat","floppy","fluffy","forty","four","frank","free","fresh","fruity","full","funky","funny","fuzzy","gentle","giant","gold","good","goofy","great","green","grumpy","happy","heavy","hip","honest","hot","huge","humble","hungry","icy","itchy","jolly","khaki","kind","large","late","lazy","legal","lemon","light","little","long","loose","loud","lovely","lucky","major","many","metal","mighty","modern","moody","neat","new","nice","nine","ninety","odd","old","olive","open","orange","perky","petite","pink","plain","plenty","polite","pretty","proud","public","puny","purple","quick","quiet","rare","ready","real","red","rich","ripe","salty","seven","shaggy","shaky","sharp","shiny","short","shy","silent","silly","silver","six","sixty","slick","slimy","slow","small","smart","smooth","social","soft","solid","some","sour","sparkly","spicy","spotty","stale","strict","strong","sunny","sweet","swift","tall","tame","tangy","tasty","ten","tender","thick","thin","thirty","three","tidy","tiny","tired","tough","tricky","true","twelve","twenty","two","upset","vast","violet","wacky","warm","wet","whole","wicked","wide","wild","wise","witty","yellow","young","yummy"],e.nouns=["apes","animals","areas","bars","banks","baths","breads","bushes","cloths","clowns","clubs","hoops","loops","memes","papers","parks","paths","showers","sides","signs","sites","streets","teeth","tires","webs","actors","ads","adults","aliens","ants","apples","baboons","badgers","bags","bananas","bats","beans","bears","beds","beers","bees","berries","bikes","birds","boats","bobcats","books","bottles","boxes","brooms","buckets","bugs","buses","buttons","camels","cases","cameras","candies","candles","carpets","carrots","carrots","cars","cats","chairs","chefs","chicken","clocks","clouds","coats","cobras","coins","corners","colts","comics","cooks","cougars","regions","results","cows","crabs","crabs","crews","cups","cities","cycles","dancers","days","deer","dingos","dodos","dogs","dolls","donkeys","donuts","doodles","doors","dots","dragons","drinks","dryers","ducks","ducks","eagles","ears","eels","eggs","ends","mammals","emus","experts","eyes","facts","falcons","fans","feet","files","flies","flowers","forks","foxes","friends","frogs","games","garlics","geckos","geese","ghosts","ghosts","gifts","glasses","goats","grapes","groups","guests","hairs","hands","hats","heads","hornets","horses","hotels","hounds","houses","humans","icons","ideas","impalas","insects","islands","items","jars","jeans","jobs","jokes","keys","kids","kings","kiwis","knives","lamps","lands","laws","lemons","lies","lights","lines","lions","lizards","llamas","mails","mangos","maps","masks","meals","melons","mice","mirrors","moments","moles","monkeys","months","moons","moose","mugs","nails","needles","news","nights","numbers","olives","onions","oranges","otters","owls","pandas","pans","pants","papayas","parents","parts","parrots","paws","peaches","pears","peas","pens","pets","phones","pianos","pigs","pillows","places","planes","planets","plants","plums","poems","poets","points","pots","pugs","pumas","queens","rabbits","radios","rats","ravens","readers","rice","rings","rivers","rockets","rocks","rooms","roses","rules","schools","bats","seals","seas","sheep","shirts","shoes","shrimps","singers","sloths","snails","snakes","socks","spiders","spies","spoons","squids","stamps","stars","states","steaks","suits","suns","swans","symbols","tables","taxes","taxis","teams","terms","things","ties","tigers","times","tips","toes","towns","tools","toys","trains","trams","trees","turkeys","turtles","vans","views","walls","walls","wasps","waves","ways","weeks","windows","wings","wolves","wombats","words","worlds","worms","yaks","years","zebras","zoos"],e.verbs=["accept","act","add","admire","agree","allow","appear","argue","arrive","ask","attack","attend","bake","bathe","battle","beam","beg","begin","behave","bet","boil","bow","brake","brush","build","burn","buy","call","camp","care","carry","change","cheat","check","cheer","chew","clap","clean","cough","count","cover","crash","create","cross","cry","cut","dance","decide","deny","design","dig","divide","do","double","doubt","draw","dream","dress","drive","drop","drum","eat","end","enter","enjoy","exist","fail","fall","feel","fetch","film","find","fix","flash","float","flow","fly","fold","follow","fry","give","glow","go","grab","greet","grin","grow","guess","hammer","hang","happen","heal","hear","help","hide","hope","hug","hunt","invent","invite","itch","jam","jog","join","joke","judge","juggle","jump","kick","kiss","kneel","knock","know","laugh","lay","lead","learn","leave","lick","like","lie","listen","live","look","lose","love","make","march","marry","mate","matter","melt","mix","move","nail","notice","obey","occur","open","own","pay","peel","play","poke","post","press","prove","pull","pump","pick","punch","push","raise","read","refuse","relate","relax","remain","repair","repeat","reply","report","rescue","rest","retire","return","rhyme","ring","roll","rule","run","rush","say","scream","see","search","sell","send","serve","shake","share","shave","shine","show","shop","shout","sin","sink","sing","sip","sit","sleep","slide","smash","smell","smile","smoke","sneeze","sniff","sort","speak","spend","stand","start","stay","stick","stop","stare","study","strive","swim","switch","take","talk","tan","tap","taste","teach","tease","tell","thank","think","throw","tickle","tie","trade","train","travel","try","turn","type","unite","vanish","visit","wait","walk","warn","wash","watch","wave","wear","win","wink","wish","wonder","work","worry","write","yawn","yell"],e.adverbs=["bravely","brightly","busily","daily","freely","hungrily","joyously","knowlingly","lazily","oddly","mysteriously","noisily","politely","quickly","quietly","rapidly","safely","sleepily","slowly","truly","yearly"],e.default=i}(Nr);let Sr,Pr=class{iValidByteLengths=[16,24,32];rpId;rpName;timeoutMillis;derivedKeyLengthBytes;extractableKey;constructor({rpId:e,rpName:t,timeoutMillis:r,derivedKeyLengthBytes:n,extractableKey:s}){if(this.rpId=e,this.rpName=t,this.timeoutMillis=r??6e4,this.derivedKeyLengthBytes=n??32,this.extractableKey=s??!0,!this.iValidByteLengths.includes(this.derivedKeyLengthBytes))throw new Error(`Invalid key byte length ${this.derivedKeyLengthBytes}`)}static randomPasskeyName(){return Nr.humanId({capitalize:!0,separator:" "})}getChallengeBytes(){return crypto.getRandomValues(new Uint8Array(32))}async deriveFromAssertion(e){const t=e.getClientExtensionResults();if(!t)throw new Error("Passkey fetch failed");const r=t.prf;if(!r||!r.results)throw new Error("PRF extension not supported or missing results");const n=r.results.first;return await crypto.subtle.importKey("raw",n,{name:"AES-CBC",length:this.derivedKeyLengthBytes},this.extractableKey,["encrypt","decrypt"])}async createPasskey({id:e,displayName:t,seed:r}){const n={challenge:this.getChallengeBytes(),rp:{id:this.rpId,name:this.rpName},user:{id:(new TextEncoder).encode(e),name:e,displayName:t},pubKeyCredParams:[{type:"public-key",alg:-7},{type:"public-key",alg:-257}],authenticatorSelection:{residentKey:"required",userVerification:"required"},extensions:{prf:{eval:{first:(new TextEncoder).encode(r)}}},timeout:this.timeoutMillis,attestation:"direct"},s=await navigator.credentials.create({publicKey:n});if(s)return{id:btoa(String.fromCharCode(...new Uint8Array(s.rawId))),displayName:t,key:new Uint8Array(await crypto.subtle.exportKey("raw",await this.deriveFromAssertion(s)))};throw new Error("could not create passkey")}base64ToArrayBuffer(e){const t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r.buffer}async deriveKey({id:e,seed:t}){const r=e,n=await navigator.credentials.get({publicKey:{challenge:this.getChallengeBytes(),rpId:this.rpId,allowCredentials:[{id:this.base64ToArrayBuffer(r),type:"public-key"}],userVerification:"required",extensions:{prf:{eval:{first:(new TextEncoder).encode(t)}}}}});return this.deriveFromAssertion(n)}async deriveAndExportKey({id:e,seed:t}){if(!this.extractableKey)throw new Error("Derived keys cannot be exported if extractableKey is not set to true");const r=await this.deriveKey({id:e,seed:t});return new Uint8Array(await crypto.subtle.exportKey("raw",r))}};function Or(){if("undefined"!=typeof crypto&&crypto.randomUUID)return crypto.randomUUID();const e=new Uint8Array(16);return crypto.getRandomValues(e),e[6]=15&e[6]|64,e[8]=63&e[8]|128,[...e].map((e,t)=>{const r=e.toString(16).padStart(2,"0");return[4,6,8,10].includes(t)?`-${r}`:r}).join("")}function Cr(e){return`0x${e.toString(16)}`}function xr(e){let t="";const r=e.startsWith("0x")?e.slice(2):e;for(let e=0;e<r.length;e+=2){const n=parseInt(r.substring(e,e+2),16);0!==n&&(t+=String.fromCharCode(n))}return t}let Mr=class e{baseConfiguration;shieldConfiguration;thirdPartyAuth;shieldUrl;iframeUrl;backendUrl;storage;passkeyRpId;passkeyRpName;static instance=null;constructor({baseConfiguration:t,shieldConfiguration:r,overrides:n,thirdPartyAuth:s}){this.shieldConfiguration=r,this.baseConfiguration=t,this.backendUrl=n?.backendUrl||"https://api.openfort.io",this.iframeUrl=n?.iframeUrl||"https://embed.openfort.io",this.iframeUrl=`${this.iframeUrl}/iframe/${this.baseConfiguration.publishableKey}`,r?.debug&&(this.iframeUrl=`${this.iframeUrl}?debug=true`),this.shieldUrl=n?.shieldUrl||"https://shield.openfort.io",this.storage=n?.storage,this.thirdPartyAuth=s,this.passkeyRpId=r?.passkeyRpId,this.passkeyRpName=r?.passkeyRpName,n?.crypto?.digest&&function(e){Sr=e}(n.crypto.digest),e.instance=this}static getInstance(){return e.instance}};var Ur={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}function s(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function i(e,t,n,i,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new s(n,i||e,o),c=r?r+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function o(e,t){0===--e._eventsCount?e._events=new n:delete e._events[t]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),a.prototype.eventNames=function(){var e,n,s=[];if(0===this._eventsCount)return s;for(n in e=this._events)t.call(e,n)&&s.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(e)):s},a.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var s=0,i=n.length,o=new Array(i);s<i;s++)o[s]=n[s].fn;return o},a.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},a.prototype.emit=function(e,t,n,s,i,o){var a=r?r+e:e;if(!this._events[a])return!1;var c,u,h=this._events[a],l=arguments.length;if(h.fn){switch(h.once&&this.removeListener(e,h.fn,void 0,!0),l){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,t),!0;case 3:return h.fn.call(h.context,t,n),!0;case 4:return h.fn.call(h.context,t,n,s),!0;case 5:return h.fn.call(h.context,t,n,s,i),!0;case 6:return h.fn.call(h.context,t,n,s,i,o),!0}for(u=1,c=new Array(l-1);u<l;u++)c[u-1]=arguments[u];h.fn.apply(h.context,c)}else{var d,f=h.length;for(u=0;u<f;u++)switch(h[u].once&&this.removeListener(e,h[u].fn,void 0,!0),l){case 1:h[u].fn.call(h[u].context);break;case 2:h[u].fn.call(h[u].context,t);break;case 3:h[u].fn.call(h[u].context,t,n);break;case 4:h[u].fn.call(h[u].context,t,n,s);break;default:if(!c)for(d=1,c=new Array(l-1);d<l;d++)c[d-1]=arguments[d];h[u].fn.apply(h[u].context,c)}}return!0},a.prototype.on=function(e,t,r){return i(this,e,t,r,!1)},a.prototype.once=function(e,t,r){return i(this,e,t,r,!0)},a.prototype.removeListener=function(e,t,n,s){var i=r?r+e:e;if(!this._events[i])return this;if(!t)return o(this,i),this;var a=this._events[i];if(a.fn)a.fn!==t||s&&!a.once||n&&a.context!==n||o(this,i);else{for(var c=0,u=[],h=a.length;c<h;c++)(a[c].fn!==t||s&&!a[c].once||n&&a[c].context!==n)&&u.push(a[c]);u.length?this._events[i]=1===u.length?u[0]:u:o(this,i)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&o(this,t)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a}(Ur);var Dr,Lr,Br=kt(Ur.exports);!function(e){e[e.UNAUTHORIZED=4100]="UNAUTHORIZED",e[e.UNSUPPORTED_METHOD=4200]="UNSUPPORTED_METHOD"}(Dr||(Dr={})),function(e){e[e.INVALID_PARAMS=-32602]="INVALID_PARAMS",e[e.INTERNAL_ERROR=-32603]="INTERNAL_ERROR",e[e.TRANSACTION_REJECTED=-32003]="TRANSACTION_REJECTED"}(Lr||(Lr={}));let Fr=class extends Error{message;code;constructor(e,t){super(t),this.message=t,this.code=e}};var qr;!function(e){e.ACCOUNTS_CHANGED="accountsChanged",e.ACCOUNTS_CONNECT="connect"}(qr||(qr={}));const jr={icon:'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" viewBox="597.32 331.34 171.36 105.32" ><g><rect x="673.9" y="404.26" width="18.2" height="32.4" /><polygon points="768.68,331.36 768.68,331.36 768.68,331.34 610.78,331.34 610.78,331.36 597.32,331.36 597.32,436.64    615.52,436.64 615.52,349.54 750.48,349.54 750.48,436.64 768.68,436.64  " /><polygon points="732.16,367.79 633.83,367.79 633.83,370.19 633.79,370.19 633.79,436.64 651.99,436.64 651.99,385.99    713.9,385.99 713.9,436.64 732.09,436.64 732.09,385.99 732.16,385.99  " /></g></svg>',name:"Openfort",rdns:"xyz.openfort",uuid:Or()};const Gr="https://64a03e4967fb4dad3ecb914918c777b6@o4504593015242752.ingest.us.sentry.io/4509292415287296";let Hr=class e{static sentryInstance;static queuedCalls=[];static baseTags;static set sentry(t){const r=t.getDsn();if(!r)throw new Error("Sentry DSN is not set");if(r.projectId!==Gr.split("https://")[1].split("/")[1]||r.host!==Gr.split("@")[1].split("/")[0]||r.publicKey!==Gr.split("@")[0].split("https://")[1])throw new Error("Sentry DSN is not valid");t.captureAxiosError=(r,n,s,i)=>{if(n instanceof ct){if(400===n.response?.status||401===n.response?.status)return;n.name=r,t.captureException(n,{...s,captureContext:{...s?.captureContext,extra:{errorResponseData:n.response?.data,errorStatus:n.response?.status,errorHeaders:n.response?.headers,errorRequest:n.request},tags:{...e.baseTags,method:r}}})}else t.captureException(n,s,i)},e.sentryInstance=t}static get sentry(){return e.proxy}static async init({sentry:t,configuration:r}){if(t)return void(e.sentry=t);const n=await Promise.resolve().then(function(){return Ra});e.sentry=new n.BrowserClient({dsn:Gr,integrations:[],stackParser:n.defaultStackParser,transport:n.makeFetchTransport}),e.baseTags={projectId:r?.baseConfiguration.publishableKey,sdk:"@openfort/openfort-js",sdkVersion:"0.10.27"},e.processQueuedCalls()}static proxy=new Proxy({},{get:(t,r)=>e.sentryInstance&&"function"==typeof e.sentryInstance[r]?(...t)=>e.sentryInstance[r](...t):(...t)=>{e.queuedCalls.push({fn:r,args:t})}});static processQueuedCalls(){e.sentryInstance&&(e.queuedCalls.forEach(({fn:t,args:r})=>{"function"==typeof e.sentryInstance[t]&&e.sentryInstance[t](...r)}),e.queuedCalls=[])}};const{sentry:zr}=Hr;var Kr="penpal";const Vr=e=>"object"==typeof e&&null!==e,Wr=e=>"function"==typeof e,Jr=e=>"SYN"===e.type,Yr=e=>"ACK1"===e.type,Qr=e=>"ACK2"===e.type,Xr=e=>"CALL"===e.type,$r=e=>"REPLY"===e.type;let Zr=class extends Error{constructor(e){super(`You've hit a bug in Penpal. Please file an issue with the following information: ${e}`)}};const en="deprecated-penpal";var tn,rn;!function(e){e.Call="call",e.Reply="reply",e.Syn="syn",e.SynAck="synAck",e.Ack="ack"}(tn||(tn={})),function(e){e.Fulfilled="fulfilled",e.Rejected="rejected"}(rn||(rn={}));const nn=e=>e.split("."),sn=e=>e.join("."),on=e=>new Zr(`Unexpected message to translate: ${JSON.stringify(e)}`);var an;!function(e){e.RECOVER="recover",e.RECOVERED="recovered",e.CREATE="create",e.CREATED="created",e.UPDATE_AUTHENTICATION="update-authentication",e.AUTHENTICATION_UPDATED="authentication-updated",e.SIGN="sign",e.SET_RECOVERY_METHOD="set-recovery-method",e.SWITCH_CHAIN="switch-chain",e.CHAIN_SWITCHED="chain-switched",e.EXPORT="export",e.SIGNED="signed",e.LOGGED_OUT="logged-out",e.GET_CURRENT_DEVICE="get-current-device",e.CURRENT_DEVICE="current-device"}(an||(an={}));let cn=class{uuid;action=an.GET_CURRENT_DEVICE;playerID;constructor(e,t){this.uuid=e,this.playerID=t}},un=class{uuid;action=an.SIGN;message;requestConfiguration;requireArrayify;requireHash;chainType;constructor(e,t,r,n,s,i){this.uuid=e,this.message=t,this.requestConfiguration=r,this.requireArrayify=n,this.requireHash=s,this.chainType=i||"EVM"}},hn=class{uuid;action=an.SWITCH_CHAIN;chainId;requestConfiguration;constructor(e,t,r){this.uuid=e,this.chainId=t,this.requestConfiguration=r}},ln=class{uuid;action=an.EXPORT;requestConfiguration;constructor(e,t){this.uuid=e,this.requestConfiguration=t}};class dn{uuid;action=an.SET_RECOVERY_METHOD;recoveryMethod;recoveryPassword;encryptionSession;passkeyKey;passkeyId;requestConfiguration;constructor(e,t,r,n,s,i,o){this.uuid=e,this.recoveryMethod=t,this.recoveryPassword=n,this.encryptionSession=s,this.requestConfiguration=r,this.passkeyKey=i,this.passkeyId=o}}function fn(e){return"error"in e}class pn{uuid;action=an.UPDATE_AUTHENTICATION;accessToken;recovery;constructor(e,t,r){this.uuid=e,this.accessToken=t,this.recovery=r}}var mn;!function(e){e.OPENFORT="openfort"}(mn||(mn={}));const gn=new TextEncoder,yn=new TextDecoder;class wn extends Error{constructor(e,t){super(e,t),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}wn.code="ERR_JOSE_GENERIC";(class extends wn{constructor(e,t,r="unspecified",n="unspecified"){super(e,{cause:{claim:r,reason:n,payload:t}}),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=r,this.reason=n,this.payload=t}}).code="ERR_JWT_CLAIM_VALIDATION_FAILED";(class extends wn{constructor(e,t,r="unspecified",n="unspecified"){super(e,{cause:{claim:r,reason:n,payload:t}}),this.code="ERR_JWT_EXPIRED",this.claim=r,this.reason=n,this.payload=t}}).code="ERR_JWT_EXPIRED";(class extends wn{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}}).code="ERR_JOSE_ALG_NOT_ALLOWED";(class extends wn{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}}).code="ERR_JOSE_NOT_SUPPORTED";(class extends wn{constructor(e="decryption operation failed",t){super(e,t),this.code="ERR_JWE_DECRYPTION_FAILED"}}).code="ERR_JWE_DECRYPTION_FAILED";(class extends wn{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}}).code="ERR_JWE_INVALID";(class extends wn{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}}).code="ERR_JWS_INVALID";class vn extends wn{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}}vn.code="ERR_JWT_INVALID";(class extends wn{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}}).code="ERR_JWK_INVALID";(class extends wn{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}}).code="ERR_JWKS_INVALID";(class extends wn{constructor(e="no applicable key found in the JSON Web Key Set",t){super(e,t),this.code="ERR_JWKS_NO_MATCHING_KEY"}}).code="ERR_JWKS_NO_MATCHING_KEY";(class extends wn{constructor(e="multiple matching keys found in the JSON Web Key Set",t){super(e,t),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}).code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";(class extends wn{constructor(e="request timed out",t){super(e,t),this.code="ERR_JWKS_TIMEOUT"}}).code="ERR_JWKS_TIMEOUT";(class extends wn{constructor(e="signature verification failed",t){super(e,t),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}).code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";const An=e=>(e=>{let t=e;"string"==typeof t&&(t=gn.encode(t));const r=[];for(let e=0;e<t.length;e+=32768)r.push(String.fromCharCode.apply(null,t.subarray(e,e+32768)));return btoa(r.join(""))})(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),bn=e=>{let t=e;t instanceof Uint8Array&&(t=yn.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return(e=>{const t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r})(t)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};function En(e){if("string"!=typeof e)throw new vn("JWTs must use Compact JWS serialization, JWT must be a string");const{1:t,length:r}=e.split(".");if(5===r)throw new vn("Only JWTs using Compact JWS serialization can be decoded");if(3!==r)throw new vn("Invalid JWT");if(!t)throw new vn("JWTs must contain a payload");let n,s;try{n=bn(t)}catch{throw new vn("Failed to base64url decode the payload")}try{s=JSON.parse(yn.decode(n))}catch{throw new vn("Failed to parse the decoded payload as JSON")}if(!function(e){if("object"!=typeof(t=e)||null===t||"[object Object]"!==Object.prototype.toString.call(e))return!1;var t;if(null===Object.getPrototypeOf(e))return!0;let r=e;for(;null!==Object.getPrototypeOf(r);)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(e)===r}(s))throw new vn("Invalid JWT Claims Set");return s}let _n=class e{constructor(e){this.user=e.user,this.id=e.id,this.chainType=e.chainType,this.address=e.address,this.accountType=e.accountType,this.chainId=e.chainId,this.createdAt=e.createdAt,this.implementationType=e.implementationType,this.factoryAddress=e.factoryAddress,this.recoveryMethod=e.recoveryMethod,this.recoveryMethodDetails=e.recoveryMethodDetails,this.salt=e.salt,this.ownerAddress=e.ownerAddress,this.type=e.type}user;id;chainType;address;accountType;chainId;ownerAddress;factoryAddress;salt;createdAt;implementationType;recoveryMethod;recoveryMethodDetails;type;save(e){e.save(cr.ACCOUNT,JSON.stringify({user:this.user,id:this.id,chainType:this.chainType,address:this.address,accountType:this.accountType,chainId:this.chainId,ownerAddress:this.ownerAddress,createdAt:this.createdAt,implementationType:this.implementationType,factoryAddress:this.factoryAddress,salt:this.salt,recoveryMethod:this.recoveryMethod,recoveryMethodDetails:this.recoveryMethodDetails}))}static parseRecoveryMethod=e=>{switch(e){case"user":case mr.PASSWORD:return mr.PASSWORD;case"project":case mr.AUTOMATIC:return mr.AUTOMATIC;case"passkey":case mr.PASSKEY:return mr.PASSKEY;default:return}};static async fromStorage(t){const r=await t.get(cr.ACCOUNT);if(!r)return null;try{const t=JSON.parse(r);return new e(t)}catch{return null}}};function kn(...e){const t=Mr.getInstance();t?.shieldConfiguration?.debug&&console.log(`${(new Date).toISOString()} [SDK]`,...e)}let Rn=class{iframeManager;storage;backendApiClients;passkeyHandler;eventEmitter;constructor(e,t,r,n,s){this.iframeManager=e,this.storage=t,this.backendApiClients=r,this.passkeyHandler=n,this.eventEmitter=s}async createPasskey(e){const t=await this.passkeyHandler.createPasskey({id:Pr.randomPasskeyName(),displayName:"Openfort - Embedded Wallet",seed:e});return{id:t.id,key:t.key}}async configure(e){const t=await ur.fromStorage(this.storage);if(!t)throw new lr("No access token found",hr.NOT_LOGGED_IN_ERROR);const r=Mr.getInstance();if(!r)throw new lr("Configuration not found",hr.INVALID_CONFIGURATION);const n=await _n.fromStorage(this.storage);let s;if(n){const t={account:n.id,...e.entropy&&{entropy:{...e.entropy.recoveryPassword&&{recoveryPassword:e.entropy.recoveryPassword},...e.entropy.encryptionSession&&{encryptionSession:e.entropy.encryptionSession},..."passkey"===n.recoveryMethod&&{passkey:{id:n.recoveryMethodDetails?.passkeyId,env:n.recoveryMethodDetails?.passkeyEnv,key:await e.getPasskeyKeyFn(n.recoveryMethodDetails?.passkeyId)}}}}},r=await this.iframeManager.recover(t);s=r.account}else{const n=await this.backendApiClients.accountsApi.getAccountsV2({user:t.player,accountType:e.accountType,chainType:e.chainType},{headers:{authorization:`Bearer ${r.baseConfiguration.publishableKey}`,"x-player-token":t.token,"x-auth-provider":t.thirdPartyProvider,"x-token-type":t.thirdPartyTokenType}});if(0===n.data.data.length){const r=e.entropy?.passkey?await this.createPasskey(t.player):void 0,n={accountType:e.accountType,chainType:e.chainType,chainId:e.chainId,...e.entropy&&{entropy:{...e.entropy.recoveryPassword&&{recoveryPassword:e.entropy.recoveryPassword},...e.entropy.encryptionSession&&{encryptionSession:e.entropy.encryptionSession},...e.entropy.passkey&&{passkey:r}}}},i=await this.iframeManager.create(n);s=i.account}else{const t=n.data.data,r=t.find(t=>t.chainId===e.chainId),i=r||t[0],o={account:i.id,...e.entropy&&{entropy:{...e.entropy.recoveryPassword&&{recoveryPassword:e.entropy.recoveryPassword},...e.entropy.encryptionSession&&{encryptionSession:e.entropy.encryptionSession},..."passkey"===i.recoveryMethod&&{passkey:{id:i.recoveryMethodDetails?.passkeyId,env:i.recoveryMethodDetails?.passkeyEnv,key:await e.getPasskeyKeyFn(i.recoveryMethodDetails?.passkeyId)}}}}},a=await this.iframeManager.recover(o);if(s=a.account,!r){const t=await this.iframeManager.switchChain(e.chainId);s=t.account}}}return dr(async()=>{const e=await this.backendApiClients.accountsApi.getAccountV2({id:s},{headers:{authorization:`Bearer ${r.baseConfiguration.publishableKey}`,"x-player-token":t.token,"x-auth-provider":t.thirdPartyProvider,"x-token-type":t.thirdPartyTokenType}}),n=new _n({user:e.data.user,chainType:e.data.chainType,id:e.data.id,address:e.data.address,ownerAddress:e.data.ownerAddress,accountType:e.data.accountType,createdAt:e.data.createdAt,implementationType:e.data.smartAccount?.implementationType,chainId:e.data.chainId,salt:e.data.smartAccount?.salt,factoryAddress:e.data.smartAccount?.factoryAddress,recoveryMethod:_n.parseRecoveryMethod(e.data.recoveryMethod),recoveryMethodDetails:e.data.recoveryMethodDetails});return n.save(this.storage),this.eventEmitter.emit(pr.ON_SWITCH_ACCOUNT,e.data.address),n},{default:hr.AUTHENTICATION_ERROR})}async sign(e,t,r,n){const s=await this.iframeManager.sign(e,t,r,n);return this.eventEmitter.emit(pr.ON_SIGNED_MESSAGE,{message:e,signature:s}),s}async export(){return await this.iframeManager.export()}async switchChain({chainId:e}){const t=await _n.fromStorage(this.storage);if(t?.accountType===kr.EOA)new _n({...t,chainId:e}).save(this.storage);else{const r=await this.iframeManager.switchChain(e);new _n({...t,id:r.account,chainId:e}).save(this.storage)}}async create(e){const t=await this.iframeManager.create(e),r=await ur.fromStorage(this.storage);if(!r)throw new lr("No access token found",hr.NOT_LOGGED_IN_ERROR);const n=Mr.getInstance();if(!n)throw new lr("Configuration not found",hr.INVALID_CONFIGURATION);return dr(async()=>{const e=await this.backendApiClients.accountsApi.getAccountV2({id:t.account},{headers:{authorization:`Bearer ${n.baseConfiguration.publishableKey}`,"x-player-token":r.token,"x-auth-provider":r.thirdPartyProvider,"x-token-type":r.thirdPartyTokenType}}),s=new _n({user:e.data.user,chainType:e.data.chainType,id:e.data.id,address:e.data.address,ownerAddress:e.data.ownerAddress,accountType:e.data.accountType,createdAt:e.data.createdAt,implementationType:e.data.smartAccount?.implementationType,chainId:e.data.chainId,salt:e.data.smartAccount?.salt,factoryAddress:e.data.smartAccount?.factoryAddress,recoveryMethod:_n.parseRecoveryMethod(e.data.recoveryMethod),recoveryMethodDetails:e.data.recoveryMethodDetails});return s.save(this.storage),this.eventEmitter.emit(pr.ON_SWITCH_ACCOUNT,e.data.address),s},{default:hr.AUTHENTICATION_ERROR})}async recover(e){const t=await this.iframeManager.recover(e),r=await ur.fromStorage(this.storage);if(!r)throw new lr("No access token found",hr.NOT_LOGGED_IN_ERROR);const n=Mr.getInstance();if(!n)throw new lr("Configuration not found",hr.INVALID_CONFIGURATION);return dr(async()=>{const e=await this.backendApiClients.accountsApi.getAccountV2({id:t.account},{headers:{authorization:`Bearer ${n.baseConfiguration.publishableKey}`,"x-player-token":r.token,"x-auth-provider":r.thirdPartyProvider,"x-token-type":r.thirdPartyTokenType}}),s=new _n({user:e.data.user,chainType:e.data.chainType,id:e.data.id,address:e.data.address,ownerAddress:e.data.ownerAddress,accountType:e.data.accountType,createdAt:e.data.createdAt,implementationType:e.data.smartAccount?.implementationType,chainId:e.data.chainId,salt:e.data.smartAccount?.salt,factoryAddress:e.data.smartAccount?.factoryAddress,recoveryMethod:_n.parseRecoveryMethod(e.data.recoveryMethod),recoveryMethodDetails:e.data.recoveryMethodDetails});return s.save(this.storage),this.eventEmitter.emit(pr.ON_SWITCH_ACCOUNT,e.data.address),s},{default:hr.AUTHENTICATION_ERROR})}async setRecoveryMethod({recoveryMethod:e,recoveryPassword:t,encryptionSession:r,passkeyInfo:n}){await this.iframeManager.setRecoveryMethod(e,t,r,n?.passkeyKey,n?.passkeyId)}async disconnect(){await this.iframeManager.disconnect(),this.storage.remove(cr.ACCOUNT)}};const In={1:"https://cloudflare-eth.com",10:"https://optimism-rpc.publicnode.com",56:"https://bsc.publicnode.com",97:"https://bsc-testnet.publicnode.com",137:"https://polygon-rpc.com",204:"https://opbnb-mainnet-rpc.bnbchain.org",300:"https://sepolia.era.zksync.dev",324:"https://mainnet.era.zksync.io",1946:"https://rpc.minato.soneium.org",2741:"https://api.mainnet.abs.xyz",3939:"https://test.doschain.com",4337:"https://build.onbeam.com/rpc",5611:"https://opbnb-testnet-rpc.bnbchain.org",7979:"https://main.doschain.com",8453:"https://mainnet.base.org",11124:"https://api.testnet.abs.xyz",13337:"https://build.onbeam.com/rpc/testnet",13473:"https://rpc.testnet.immutable.com",42161:"https://arb1.arbitrum.io/rpc",42170:"https://nova.arbitrum.io/rpc",43113:"https://api.avax-test.network/ext/bc/C/rpc",43114:"https://api.avax.network/ext/bc/C/rpc",50104:"https://rpc.sophon.xyz",80002:"https://polygon-amoy-bor-rpc.publicnode.com",84532:"https://sepolia.base.org",421614:"https://sepolia-rollup.arbitrum.io/rpc",7225878:"https://rpc.saakuru.network",7777777:"https://rpc.zora.energy",11155111:"https://ethereum-sepolia-rpc.publicnode.com",11155420:"https://optimism-sepolia-rpc.publicnode.com",28122024:"https://rpcv2-testnet.ancient8.gg",531050104:"https://rpc.testnet.sophon.xyz",666666666:"https://rpc.degen.tips",888888888:"https://rpc.ancient8.gg",999999999:"https://sepolia.rpc.zora.energy",85011:"https://subnets.avax.network/criminalsa/testnet/rpc",84358:"https://subnets.avax.network/titan/mainnet/rpc",10143:"https://testnet-rpc.monad.xyz",510525:"https://rpc.clankermon.com",3008:"https://kl1-testnet.kiooverse.xyz/rpc",167e3:"https://rpc.taiko.xyz"};let Tn=class{emitter=new Br;on(e,t){return this.emitter.on(e,t),this}off(e,t){return this.emitter.off(e,t),this}emit(e,...t){return this.emitter.emit(e,...t)}once(e,t){return this.emitter.once(e,t),this}removeAllListeners(e){return this.emitter.removeAllListeners(e),this}listenerCount(e){return this.emitter.listenerCount(e)}listeners(e){return this.emitter.listeners(e)}};const Nn=["chainId","chainName","nativeCurrency"],Sn=async({params:e,rpcProvider:t,storage:r})=>{if(!e||!Array.isArray(e)||0===e.length)throw new Fr(Lr.INVALID_PARAMS,"Invalid parameters for wallet_addEthereumChain");const n=(e=>{if(!e||"object"!=typeof e)throw new Fr(Lr.INVALID_PARAMS,"Invalid chain parameter: expected an object");if(!(e=>Nn.every(t=>t in e))(e))throw new Fr(Lr.INVALID_PARAMS,`Invalid chain parameter. The following properties are required: ${Nn.join(", ")}`);if(!e.chainName||""===e.chainName.trim())throw new Fr(Lr.INVALID_PARAMS,"chainName cannot be empty");if(!((t=e.nativeCurrency)&&"object"==typeof t&&"name"in t&&"symbol"in t&&"decimals"in t&&"string"==typeof t.name&&"string"==typeof t.symbol&&"number"==typeof t.decimals&&Number.isInteger(t.decimals)))throw new Fr(Lr.INVALID_PARAMS,"Invalid nativeCurrency object");var t;if(0===e.rpcUrls?.length)throw new Fr(Lr.INVALID_PARAMS,"At least one RPC URL must be provided");if(!/^0x[0-9a-fA-F]+$/.test(e.chainId))throw new Fr(Lr.INVALID_PARAMS,"chainId must be a valid hex string");return{chainId:e.chainId,blockExplorerUrls:e.blockExplorerUrls||[],chainName:e.chainName,iconUrls:e.iconUrls||[],rpcUrls:e.rpcUrls||[],nativeCurrency:e.nativeCurrency}})(e[0]),s=parseInt(n.chainId,16),{chainId:i}=await t.detectNetwork();return s!==i&&null},Pn=async e=>{const{hash:t,signer:r,ownerAddress:n,factoryAddress:s,salt:i,chainId:o,address:a,implementationType:c}=e;let u=t;if([gr.UPGRADEABLE_V5,gr.UPGRADEABLE_V6,gr.ZKSYNC_UPGRADEABLE_V1,gr.ZKSYNC_UPGRADEABLE_V2].includes(c)){const e={name:"Openfort",version:"0.5",chainId:Number(o),verifyingContract:a},t={OpenfortMessage:[{name:"hashedMessage",type:"bytes32"}]},r={hashedMessage:u},{_TypedDataEncoder:n}=await Promise.resolve().then(function(){return Yu});u=n.hash(e,t,r)}const h=await r.sign(u,!1,!1);if(s&&i&&[gr.UPGRADEABLE_V5,gr.UPGRADEABLE_V6].includes(c)){const{id:e}=await Promise.resolve().then(function(){return Yu}),{defaultAbiCoder:t}=await Promise.resolve().then(function(){return Ph}),{hexConcat:r}=await Promise.resolve().then(function(){return sc}),o=r([e("createAccountWithNonce(address,bytes32,bool)").slice(0,10),t.encode(["address","bytes32","bool"],[n,i,!1])]);return r([t.encode(["address","bytes","bytes"],[s,o,h]),"0x6492649264926492649264926492649264926492649264926492649264926492"])}return h};function On(e){return{data:(()=>{if("token-allowance"===e.type)throw new Fr(Lr.INVALID_PARAMS,"token-allowance policy is not supported with this account implementation.");if("gas-limit"===e.type)throw new Fr(Lr.INVALID_PARAMS,"gas-limit policy is not supported with this account implementation.");if("rate-limit"===e.type)throw new Fr(Lr.INVALID_PARAMS,"rate-limit policy is not supported with this account implementation.");return e.data})(),type:e.type.custom}}function Cn(e){if("native-token-transfer"===e.type)throw new Fr(Lr.INVALID_PARAMS,"native-token-transfer permission is not supported with this account implementation.");if("rate-limit"===e.type)throw new Fr(Lr.INVALID_PARAMS,"rate-limit permission is not supported with this account implementation.");if("gas-limit"===e.type)throw new Fr(Lr.INVALID_PARAMS,"gas-limit permission is not supported with this account implementation.");return{...e,policies:e?.policies?.map(On),required:e.required??!1,type:"string"==typeof e.type?e.type:e.type.custom}}function xn(e){return{expiry:e.validUntil?Number(e.validUntil):0,grantedPermissions:e.whitelist?e.whitelist.map(t=>({type:"contract-call",data:{address:t,calls:[]},policies:[{data:{limit:e.limit},type:{custom:"usage-limit"}}]})):[],permissionsContext:e.id}}const Mn=e=>{const t=e?.logs?.[0];return{blockHash:t?.blockHash,blockNumber:e?.blockNumber?.toString(),contractAddress:void 0,cumulativeGasUsed:e?.gasUsed,effectiveGasPrice:e?.gasFee,from:void 0,gasUsed:e?.gasUsed,logs:e?.logs||[],logsBloom:void 0,status:1===e?.status?"success":0===e?.status?"reverted":void 0,to:e?.to,transactionHash:e?.transactionHash,transactionIndex:t?.transactionIndex,type:"eip1559",blobGasPrice:void 0,blobGasUsed:void 0,root:void 0}},Un=async({params:e,signer:t,account:r,authentication:n,backendClient:s,policyId:i})=>{const o=e[0]?.capabilities?.paymasterService?.policy??i,a=await(async(e,t,r,n,s)=>{const i=e.map(e=>{if(!e.to)throw new Fr(Lr.INVALID_PARAMS,'wallet_sendCalls requires a "to" field');return{to:String(e.to),data:e.data?String(e.data):void 0,value:e.value?String(e.value):void 0}});return dr(async()=>(await t.transactionIntentsApi.createTransactionIntent({createTransactionIntentRequest:{account:r.id,policy:s,chainId:r.chainId,interactions:i}},{headers:{authorization:`Bearer ${t.config.backend.accessToken}`,"x-player-token":n.token,"x-auth-provider":n.thirdPartyProvider,"x-token-type":n.thirdPartyTokenType}})).data,{default:hr.AUTHENTICATION_ERROR})})(e,s,r,n,o).catch(e=>{throw new Fr(Lr.TRANSACTION_REJECTED,e.message)});if(a.response?.error.reason)throw new Fr(Lr.TRANSACTION_REJECTED,a.response?.error.reason);if(a?.nextAction?.payload?.signableHash){let e;e=[300,531050104,324,50104,2741,11124].includes(r.chainId)?await t.sign(a.nextAction.payload.signableHash,!1,!1):await t.sign(a.nextAction.payload.signableHash);const n=await dr(async()=>await s.transactionIntentsApi.signature({id:a.id,signatureRequest:{signature:e}}),{default:hr.AUTHENTICATION_ERROR}).catch(e=>{throw new Fr(Lr.TRANSACTION_REJECTED,e.message)});if(0===n.data.response?.status)throw new Fr(Lr.TRANSACTION_REJECTED,n.data.response?.error.reason);if(!n.data.response)throw new Fr(Lr.TRANSACTION_REJECTED,"No transaction response received");return{id:a.id,receipt:Mn(n.data.response)}}if(!a.response)throw new Fr(Lr.TRANSACTION_REJECTED,"No transaction response received");return{id:a.id,receipt:Mn(a.response)}},Dn=["types","domain","primaryType","message"],Ln=async({params:e,method:t,signer:r,implementationType:n,rpcProvider:s,account:i})=>{const o=e[0],a=e[1];if(!o||!a)throw new Fr(Lr.INVALID_PARAMS,`${t} requires an address and a typed data JSON`);const{chainId:c}=await s.detectNetwork(),u=((e,t)=>{let r;if("string"==typeof e)try{r=JSON.parse(e)}catch(e){throw new Fr(Lr.INVALID_PARAMS,`Failed to parse typed data JSON: ${e}`)}else{if("object"!=typeof e)throw new Fr(Lr.INVALID_PARAMS,`Invalid typed data argument: ${e}`);r=e}if(!(e=>Dn.every(t=>t in e))(r))throw new Fr(Lr.INVALID_PARAMS,`Invalid typed data argument. The following properties are required: \n      ${Dn.join(", ")}`);const n=r.domain?.chainId;if(n&&("string"==typeof n&&(n.startsWith("0x")?r.domain.chainId=parseInt(n,16):r.domain.chainId=parseInt(n,10)),r.domain.chainId!==t))throw new Fr(Lr.INVALID_PARAMS,`Invalid chainId, expected ${t}`);return r})(a,c),h={...u.types};delete h.EIP712Domain;const{_TypedDataEncoder:l}=await Promise.resolve().then(function(){return Yu}),d=l.hash(u.domain,h,u.message);return await Pn({hash:d,implementationType:n,chainId:c,signer:r,address:o,ownerAddress:i.ownerAddress,factoryAddress:i.factoryAddress,salt:i.salt})};class Bn{#e;#t;#r;#n;updatePolicy(e){this.#t=e}#s;#i;#o=null;#a;isOpenfort=!0;#c;constructor({storage:e,backendApiClients:t,openfortEventEmitter:r,policyId:n,ensureSigner:s,chains:i,validateAndRefreshSession:o}){this.#c=s,this.#e=e,this.#r=i,this.#t=n,this.#s=o,this.#a=t,this.#i=new Tn,r.on(pr.ON_LOGOUT,this.#u),r.on(pr.ON_SWITCH_ACCOUNT,this.#h)}#l=async()=>(this.#n||(this.#n=await this.#c()),this.#n);#u=async()=>{this.#n=void 0,this.#i.emit(qr.ACCOUNTS_CHANGED,[])};#h=async e=>{this.#i.emit(qr.ACCOUNTS_CHANGED,[e])};async getRpcProvider(){if(!this.#o){const e=await _n.fromStorage(this.#e),t=e?.chainId||8453;await Promise.resolve().then(function(){return gg}).then(e=>{const r=this.#r?this.#r[t]:void 0;this.#o=new e.StaticJsonRpcProvider(r??In[t])})}if(!this.#o)throw new Error("RPC provider not initialized");return this.#o}async#d(e){switch(e.method){case"eth_accounts":{const e=await _n.fromStorage(this.#e);return e?[e.address]:[]}case"eth_requestAccounts":{const e=await _n.fromStorage(this.#e);if(e)return this.#i.emit(qr.ACCOUNTS_CONNECT,{chainId:String(e.chainId)}),[e.address];throw new Fr(Dr.UNAUTHORIZED,"Unauthorized - must be authenticated and configured with a signer.")}case"eth_signTransaction":{const t=await _n.fromStorage(this.#e),r=await this.#l(),n=await ur.fromStorage(this.#e);if(!t||!n)throw new Fr(Dr.UNAUTHORIZED,"Unauthorized - call eth_requestAccounts first");const s=await this.getRpcProvider(),{chainId:i}=await s.detectNetwork(),[o]=e.params||[];o.chainId||(o.chainId=i.toString());const a=function({from:e,...t}){return{to:t.to,data:t.data,accessList:t.accessList,chainId:(s=t.chainId,s.startsWith("0x")?parseInt(s,16):parseInt(s,10)),type:t.type&&{"0x0":"legacy","0x1":"eip2930","0x2":"eip1559"}[t.type]||"eip1559",maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,value:(r=t.value,n=BigInt,void 0!==r?n(r):0n),nonce:t.nonce?parseInt(t.nonce.toString(),16):void 0,gas:t.gas?BigInt(t.gas):void 0};var r,n,s}(o),{serialize:c}=await Promise.resolve().then(function(){return gp}),u=e=>{if(e)return{legacy:0,eip2930:1,eip1559:2}[e]},{gas:h,...l}=a,d={...l,gasLimit:h,to:a.to??void 0,type:u(a.type)},f=c(d),{keccak256:p}=await Promise.resolve().then(function(){return oc}),m=p(f);await this.#s();const g=await r.sign(m,!1,!1),{splitSignature:y}=await Promise.resolve().then(function(){return sc});return c(d,y(g))}case"eth_sendTransaction":{const t=await _n.fromStorage(this.#e),r=await this.#l(),n=await ur.fromStorage(this.#e);if(!t||!n)throw new Fr(Dr.UNAUTHORIZED,"Unauthorized - call eth_requestAccounts first");if(await this.#s(),t?.accountType===kr.EOA){const[r]=e.params||[],n=await this.getRpcProvider(),s=await async function(e,t,r){const n={...e};if(!n.nonce){const e=await t.getTransactionCount(r,"pending");n.nonce=`0x${e.toString(16)}`}if(!n.gas)try{const e=await t.estimateGas({from:r,to:n.to,data:n.data,value:n.value});n.gas=e.toHexString()}catch{n.gas="0x5208"}const s=n.maxFeePerGas&&n.maxPriorityFeePerGas,i=n.gasPrice;if(!s&&!i){const e=await t.getBlock("latest");if(null!==e.baseFeePerGas&&void 0!==e.baseFeePerGas){const r=e.baseFeePerGas,s=r.mul(12).div(10),i=await t.getGasPrice();let o=i.sub(r);o.lt(0)&&(o=i.mul(0));const a=s.add(o);n.maxFeePerGas=a.toHexString(),n.maxPriorityFeePerGas=o.toHexString(),n.type="0x2",delete n.gasPrice}else{const e=(await t.getGasPrice()).mul(12).div(10);n.gasPrice=e.toHexString(),n.type="0x0",delete n.maxFeePerGas,delete n.maxPriorityFeePerGas}}return n}(r,n,t.address),i=await this.#d({method:"eth_signTransaction",params:[s]});return this.#d({method:"eth_sendRawTransaction",params:[i]})}return(await Un({params:e.params||[],signer:r,account:t,authentication:n,backendClient:this.#a,policyId:this.#t})).receipt.transactionHash}case"eth_sendRawTransactionSync":{const t=await _n.fromStorage(this.#e),r=await this.#l(),n=await ur.fromStorage(this.#e);if(!t||!n)throw new Fr(Dr.UNAUTHORIZED,"Unauthorized - call eth_requestAccounts first");if(t?.accountType===kr.EOA)throw new Fr(Dr.UNSUPPORTED_METHOD,`${e.method}: Method not supported`);return await this.#s(),await Un({params:e.params||[],signer:r,account:t,authentication:n,backendClient:this.#a,policyId:this.#t})}case"eth_estimateGas":{const t=await _n.fromStorage(this.#e),r=await ur.fromStorage(this.#e);if(!t||!r)throw new Fr(Dr.UNAUTHORIZED,"Unauthorized - call eth_requestAccounts first");return await this.#s(),await(async({params:e,account:t,authentication:r,backendClient:n,policyId:s})=>{const i=await(async(e,t,r,n,s)=>{const i=e.map(e=>{if(!e.to)throw new Fr(Lr.INVALID_PARAMS,'eth_estimateGas requires a "to" field');return{to:String(e.to),data:e.data?String(e.data):void 0,value:e.value?String(e.value):void 0}});return dr(async()=>(await t.transactionIntentsApi.estimateTransactionIntentCost({createTransactionIntentRequest:{policy:s,chainId:r.chainId,interactions:i}},{headers:{authorization:`Bearer ${t.config.backend.accessToken}`,"x-player-token":n.token,"x-auth-provider":n.thirdPartyProvider,"x-token-type":n.thirdPartyTokenType}})).data,{default:hr.AUTHENTICATION_ERROR})})(e,n,t,r,s).catch(e=>{throw new Fr(Lr.TRANSACTION_REJECTED,e.message)});return i.estimatedTXGas})({params:e.params||[],account:t,authentication:r,backendClient:this.#a,policyId:this.#t})}case"eth_signTypedData":case"eth_signTypedData_v4":{const t=await _n.fromStorage(this.#e),r=await this.#l();if(!t)throw new Fr(Dr.UNAUTHORIZED,"Unauthorized - call eth_requestAccounts first");await this.#s();const n=await this.getRpcProvider();return await Ln({method:e.method,params:e.params||[],signer:r,implementationType:t.implementationType||t.type,rpcProvider:n,account:t})}case"personal_sign":{const t=await _n.fromStorage(this.#e);if(!t)throw new Fr(Dr.UNAUTHORIZED,"Unauthorized - call eth_requestAccounts first");const r=await this.#l();return await this.#s(),await(async({params:e,signer:t,account:r})=>{const n=e[0],s=e[1];if(!s||!n)throw new Fr(Lr.INVALID_PARAMS,"personal_sign requires an address and a message");if(s.toLowerCase()!==r.address.toLowerCase())throw new Fr(Lr.INVALID_PARAMS,"personal_sign requires the signer to be the from address");const{hashMessage:i}=await Promise.resolve().then(function(){return Yu});return await Pn({hash:i(xr(n)),implementationType:r.implementationType||r.type,chainId:Number(r.chainId),signer:t,address:s,salt:r.salt,factoryAddress:r.factoryAddress,ownerAddress:r.ownerAddress})})({params:e.params||[],signer:r,account:t})}case"eth_chainId":{const e=await this.getRpcProvider(),{chainId:t}=await e.detectNetwork();return Cr(t)}case"wallet_switchEthereumChain":{const t=await this.#l();if(!e.params||!Array.isArray(e.params)||0===e.params.length)throw new Fr(Lr.INVALID_PARAMS,"Invalid parameters for wallet_switchEthereumChain");await this.#s();try{const r=parseInt(e.params[0].chainId,16);await t.switchChain({chainId:r}),await Promise.resolve().then(function(){return gg}).then(e=>{const t=this.#r?this.#r[r]:void 0;this.#o=new e.StaticJsonRpcProvider(t??In[r])})}catch(e){const t=e;throw new Fr(Lr.INTERNAL_ERROR,`Failed to switch chain: ${t.message}`)}return null}case"wallet_addEthereumChain":{await this.#l();const t=await this.getRpcProvider();return await Sn({params:e.params||[],rpcProvider:t,storage:this.#e})}case"wallet_showCallsStatus":return null;case"wallet_getCallsStatus":{const t=await _n.fromStorage(this.#e);if(t?.accountType===kr.EOA)throw new Fr(Dr.UNSUPPORTED_METHOD,`${e.method}: Method not supported`);const r=await ur.fromStorage(this.#e);if(!t||!r)throw new Fr(Dr.UNAUTHORIZED,"Unauthorized - call eth_requestAccounts first");return await this.#s(),await(async({params:e,authentication:t,backendClient:r})=>{const n=await(async(e,t,r)=>dr(async()=>(await t.transactionIntentsApi.getTransactionIntent({id:e},{headers:{authorization:`Bearer ${t.config.backend.accessToken}`,"x-player-token":r.token,"x-auth-provider":r.thirdPartyProvider,"x-token-type":r.thirdPartyTokenType}})).data,{default:hr.AUTHENTICATION_ERROR}))(e[0],r,t).catch(e=>{throw new Fr(Lr.TRANSACTION_REJECTED,e.message)});return{status:n.response?"CONFIRMED":"PENDING",receipts:n.response?[{status:0===n.response.status?"reverted":"success",logs:n.response.logs?.map(e=>({address:e.address,data:e.data,topics:e.topics}))||[],blockHash:n.response.transactionHash||"",blockNumber:BigInt(n.response.blockNumber||0),gasUsed:BigInt(n.response.gasUsed||0),transactionHash:n.response.transactionHash||""}]:void 0}})({params:e.params||{},authentication:r,backendClient:this.#a})}case"wallet_sendCalls":{const t=await _n.fromStorage(this.#e);if(t?.accountType===kr.EOA)throw new Fr(Dr.UNSUPPORTED_METHOD,`${e.method}: Method not supported`);const r=await this.#l(),n=await ur.fromStorage(this.#e);if(!t||!n)throw new Fr(Dr.UNAUTHORIZED,"Unauthorized - call eth_requestAccounts first");return await this.#s(),await(async({params:e,signer:t,account:r,authentication:n,backendClient:s,policyId:i})=>(await Un({params:e,signer:t,account:r,authentication:n,backendClient:s,policyId:i})).id)({params:e.params?e.params[0].calls:[],signer:r,account:t,authentication:n,backendClient:this.#a,policyId:this.#t})}case"wallet_grantPermissions":{const t=await _n.fromStorage(this.#e);if(t?.accountType===kr.EOA)throw new Fr(Dr.UNSUPPORTED_METHOD,`${e.method}: Method not supported`);const r=await this.#l(),n=await ur.fromStorage(this.#e);if(!t||!n)throw new Fr(Dr.UNAUTHORIZED,"Unauthorized - call eth_requestAccounts first");return await this.#s(),await(async({params:e,signer:t,account:r,authentication:n,backendClient:s,policyId:i})=>{const o=await(async(e,t,r,n,s)=>{const i=e[0],o=Math.floor(Date.now()/1e3),a=Math.floor(new Date(Date.now()+1e3*i.expiry).getTime()/1e3),c=i.permissions.map(Cn),u=c.filter(e=>"contract-call"===e.type||"erc20-token-transfer"===e.type||"erc721-token-transfer"===e.type||"erc1155-token-transfer"===e.type).map(e=>e.data.address);let h,l=c.find(e=>"call-limit"===e.type)?.data;if(l=c[0]?.policies?.find(e=>"call-limit"===e.type)?.data?.limit,"signer"in i&&i.signer){if("keys"===i.signer.type)throw new Fr(Lr.INVALID_PARAMS,"Multi-key signers are not supported for session creation");"key"!==i.signer.type&&"account"!==i.signer.type||(h=i.signer.data.id)}else"account"in i&&i.account&&(h=i.account);if(!h)throw new Fr(Lr.INVALID_PARAMS,"Failed to request permissions - missing session address");const d=((e,t,r,n,s,i=!1,o,a,c,u)=>{const h={address:e,chainId:t,validAfter:r,validUntil:n,optimistic:i,whitelist:o,player:a,account:u};return s&&(h.policy=s),c&&(h.limit=c),h})(h,r.chainId,o,a,s,!1,u,n.player,l,r.id);return dr(async()=>(await t.sessionsApi.createSession({createSessionRequest:d},{headers:{authorization:`Bearer ${t.config.backend.accessToken}`,"x-player-token":n.token,"x-auth-provider":n.thirdPartyProvider,"x-token-type":n.thirdPartyTokenType}})).data,{default:hr.AUTHENTICATION_ERROR})})(e,s,r,n,i).catch(e=>{throw new Fr(Lr.TRANSACTION_REJECTED,e.message)});if(o?.nextAction?.payload?.signableHash){let e;return e=[300,531050104,324,50104,2741,11124].includes(r.chainId)?await t.sign(o.nextAction.payload.signableHash,!1,!1):await t.sign(o.nextAction.payload.signableHash),xn(await dr(async()=>(await s.sessionsApi.signatureSession({id:o.id,signatureRequest:{signature:e}})).data,{default:hr.AUTHENTICATION_ERROR}).catch(e=>{throw new Fr(Lr.TRANSACTION_REJECTED,e.message)}))}if(!1===o.isActive)throw new Fr(Lr.TRANSACTION_REJECTED,"Failed to grant permissions");return xn(o)})({params:e.params||[],signer:r,account:t,authentication:n,backendClient:this.#a,policyId:this.#t})}case"wallet_revokePermissions":{const t=await _n.fromStorage(this.#e),r=await this.#l(),n=await ur.fromStorage(this.#e);if(!t||!n)throw new Fr(Dr.UNAUTHORIZED,"Unauthorized - call eth_requestAccounts first");return await this.#s(),await(async({params:e,signer:t,account:r,authentication:n,backendClient:s,policyId:i})=>{const o=e[0];if(!o.permissionContext)return await t.disconnect(),{};const a=await(async(e,t,r,n,s)=>{const i=((e,t,r,n,s)=>{const i={address:e,chainId:t,player:r,account:s};return n&&(i.policy=n),i})(e.permissionContext,r.chainId,n.player,s,r.id);return dr(async()=>(await t.sessionsApi.revokeSession({revokeSessionRequest:i},{headers:{authorization:`Bearer ${t.config.backend.accessToken}`,"x-player-token":n.token,"x-auth-provider":n.thirdPartyProvider,"x-token-type":n.thirdPartyTokenType}})).data,{default:hr.AUTHENTICATION_ERROR})})(o,s,r,n,i).catch(e=>{throw new Fr(Lr.TRANSACTION_REJECTED,e.message)});if(a?.nextAction?.payload?.signableHash){let e;return e=[300,531050104,324,50104,2741,11124].includes(r.chainId)?await t.sign(a.nextAction.payload.signableHash,!1,!1):await t.sign(a.nextAction.payload.signableHash),(await s.sessionsApi.signatureSession({id:a.id,signatureRequest:{signature:e}}).catch(e=>{throw new Fr(Lr.TRANSACTION_REJECTED,e.message)})).data}return a})({params:e.params||[],signer:r,account:t,authentication:n,backendClient:this.#a})}case"wallet_getCapabilities":{const t=await _n.fromStorage(this.#e);if(t?.accountType===kr.EOA)throw new Fr(Dr.UNSUPPORTED_METHOD,`${e.method}: Method not supported`);const r=await this.getRpcProvider(),{chainId:n}=await r.detectNetwork();return{[Cr(n)]:{permissions:{supported:!0,signerTypes:["account","key"],keyTypes:["secp256k1"],permissionTypes:["contract-calls"]},paymasterService:{supported:!0},atomicBatch:{supported:!0}}}}case"eth_gasPrice":case"eth_getBalance":case"eth_sendRawTransaction":case"eth_getCode":case"eth_getStorageAt":case"eth_call":case"eth_blockNumber":case"eth_getBlockByHash":case"eth_getBlockByNumber":case"eth_getTransactionByHash":case"eth_getTransactionReceipt":case"eth_getTransactionCount":return(await this.getRpcProvider()).send(e.method,e.params||[]);default:throw new Fr(Dr.UNSUPPORTED_METHOD,`${e.method}: Method not supported`)}}async request(e){try{return this.#d(e)}catch(e){if(e instanceof Fr)throw e;if(e instanceof Error)throw new Fr(Lr.INTERNAL_ERROR,e.message);throw new Fr(Lr.INTERNAL_ERROR,"Internal error")}}on(e,t){this.#i.on(e,t)}removeListener(e,t){this.#i.off(e,t)}}let Fn=class extends Error{code;constructor(e,t){super(t),this.name="PenpalError",this.code=e}},qn=class{messagePoster;handlers=new Set;isInitialized=!1;hasBeenUsed=!1;validateMessage;messageBuffer=[];nextNumericId=1;stringToNumericId=new Map;numericToStringId=new Map;constructor(e){if(this.messagePoster=e,!e||"function"!=typeof e.postMessage)throw new Fn("CONNECTION_DESTROYED","Invalid message poster provided");kn("ReactNativeMessenger created")}initialize(e){if(this.isInitialized)return void kn("ReactNativeMessenger already initialized");if(this.hasBeenUsed)throw new Fn("CONNECTION_DESTROYED","A messenger can only be used for a single connection");this.validateMessage=e?.validateReceivedMessage,this.isInitialized=!0,this.hasBeenUsed=!0,kn(`ReactNativeMessenger initialized, processing ${this.messageBuffer.length} buffered messages`);const t=[...this.messageBuffer];this.messageBuffer=[],t.forEach(e=>{this.processMessage(e)})}sendMessage(e,t){if(!this.isInitialized)throw new Fn("CONNECTION_DESTROYED","ReactNativeMessenger not initialized");t&&t.length>0&&kn("React Native: Ignoring transferables (not supported)"),kn("ReactNativeMessenger sending message:",e);try{let t=e;"penpal"===e?.namespace&&(t=this.convertToDeprecatedFormat(e),kn("React Native: Converted message:",t));const r=JSON.stringify(t);this.messagePoster.postMessage(r)}catch(e){throw new Fn("TRANSMISSION_FAILED",`Failed to send message through React Native WebView: ${e instanceof Error?e.message:String(e)}`)}}addMessageHandler(e){this.handlers.add(e),kn(`Message handler added, total handlers: ${this.handlers.size}`)}removeMessageHandler(e){this.handlers.delete(e),kn(`Message handler removed, total handlers: ${this.handlers.size}`)}handleMessage(e){if(kn("[HANDSHAKE DEBUG] ReactNativeMessenger.handleMessage called with:",e),!this.isInitialized){return kn(`[HANDSHAKE DEBUG] ReactNativeMessenger: Message received but not initialized, buffering message (${this.messageBuffer.length+1} total)`),void this.messageBuffer.push(e)}kn("[HANDSHAKE DEBUG] ReactNativeMessenger is initialized, processing message"),this.processMessage(e)}processMessage(e){kn("[HANDSHAKE DEBUG] ReactNativeMessenger processing message:",e);const t=this.convertFromDeprecatedFormat(e);if(kn("[HANDSHAKE DEBUG] Message after conversion:",t),this.validateMessage&&!this.validateMessage(t))return void kn("[HANDSHAKE DEBUG] Message validation failed:",t);kn(`[HANDSHAKE DEBUG] Routing message to ${this.handlers.size} handlers`);let r=0;this.handlers.forEach(e=>{r++;try{kn(`[HANDSHAKE DEBUG] Calling handler ${r}/${this.handlers.size}`),e(t),kn(`[HANDSHAKE DEBUG] Handler ${r} completed successfully`)}catch(e){kn(`[HANDSHAKE DEBUG] Error in handler ${r}:`,e)}})}convertToDeprecatedFormat(e){if("penpal"!==e?.namespace)return e;switch(e.type){case"SYN":return kn("React Native: Converting SYN to deprecated format to avoid MessagePorts",{originalMessage:e}),{penpal:"syn",participantId:e.participantId};case"ACK1":return kn("React Native: Converting ACK1 to deprecated format",{originalMessage:e}),{penpal:"synAck",methodNames:e.methodPaths||[]};case"ACK2":return kn("React Native: Converting ACK2 to deprecated format",{originalMessage:e}),{penpal:"ack"};case"REPLY":{kn("React Native: Converting REPLY to deprecated format",{originalMessage:e});const t=this.getNumericId(e.callId);return e.isError?{penpal:"reply",id:t,resolution:"rejected",returnValue:e.value,returnValueIsError:e.isSerializedErrorInstance||!1}:{penpal:"reply",id:t,resolution:"fulfilled",returnValue:e.value}}case"CALL":return kn("React Native: Converting CALL to deprecated format",{originalMessage:e}),{penpal:"call",id:this.getNumericId(e.id),methodName:e.methodPath.join("."),args:e.args};case"DESTROY":return{namespace:"penpal",type:"DESTROY"};default:return e}}convertFromDeprecatedFormat(e){if(e?.penpal)switch(e.penpal){case"syn":{kn("[HANDSHAKE DEBUG] React Native: Converting deprecated SYN to modern format",{originalMessage:e});const t={namespace:"penpal",type:"SYN",participantId:e.participantId};return kn("[HANDSHAKE DEBUG] Converted SYN:",t),t}case"synAck":{kn("[HANDSHAKE DEBUG] React Native: Converting deprecated synAck to modern ACK1 format",{originalMessage:e});const t={namespace:"penpal",type:"ACK1",methodPaths:e.methodNames?.map(e=>e.split("."))||[],channel:void 0};return kn("[HANDSHAKE DEBUG] Converted ACK1:",t),t}case"ack":{kn("[HANDSHAKE DEBUG] React Native: Converting deprecated ack to modern ACK2 format",{originalMessage:e});const t={namespace:"penpal",type:"ACK2",channel:void 0};return kn("[HANDSHAKE DEBUG] Converted ACK2:",t),t}case"reply":{kn("React Native: Converting deprecated reply to modern REPLY format",{originalMessage:e});const t=this.getStringId(e.id);t||kn(`Warning: No string ID mapping found for numeric ID ${e.id}, using as-is`);const r=t||String(e.id);return"fulfilled"===e.resolution?{namespace:"penpal",type:"REPLY",callId:r,value:e.returnValue}:{namespace:"penpal",type:"REPLY",callId:r,isError:!0,value:e.returnValue,isSerializedErrorInstance:e.returnValueIsError||!1}}case"call":{kn("React Native: Converting deprecated call to modern CALL format",{originalMessage:e});const t=this.getStringId(e.id);return t||kn(`Warning: No string ID mapping found for numeric ID ${e.id}, using as-is`),{namespace:"penpal",type:"CALL",id:t||String(e.id),methodPath:e.methodName.split("."),args:e.args}}default:return kn("React Native: Unknown deprecated penpal message type:",e.penpal),e}return e}setupMessagePort(e){kn("React Native: setupMessagePort called but ignored (MessagePort not supported)")}destroy(){this.isInitialized&&(this.handlers.clear(),this.messageBuffer=[],this.stringToNumericId.clear(),this.numericToStringId.clear(),this.nextNumericId=1,this.isInitialized=!1,this.hasBeenUsed=!1,kn("ReactNativeMessenger destroyed and ready for reuse"))}reset(){kn("ReactNativeMessenger reset for reuse"),this.handlers.clear(),this.messageBuffer=[],this.isInitialized=!1,this.hasBeenUsed=!1,this.nextNumericId=1,this.stringToNumericId.clear(),this.numericToStringId.clear()}getNumericId(e){let t=this.stringToNumericId.get(e);return t||(t=this.nextNumericId++,this.stringToNumericId.set(e,t),this.numericToStringId.set(t,e),kn(`ID mapping created: "${e}" -> ${t}`)),t}getStringId(e){return this.numericToStringId.get(e)}};const jn=e=>({name:e.name,message:e.message,stack:e.stack,penpalCode:e instanceof Fn?e.code:void 0}),Gn=(e,t=[])=>{const r=[];for(const n of Object.keys(e)){const s=e[n];Wr(s)?r.push([...t,n]):Vr(s)&&r.push(...Gn(s,[...t,n]))}return r},Hn=e=>e.join(".");let zn=class{value;transferables;constructor(e,t){this.value=e,this.transferables=t?.transferables}};const Kn=(e,t,r)=>({namespace:Kr,channel:e,type:"REPLY",callId:t,isError:!0,...r instanceof Error?{value:jn(r),isSerializedErrorInstance:!0}:{value:r}}),Vn=(e,t,r,n)=>{let s=!1;const i=async i=>{if(s)return;if(!Xr(i))return;n?.(`Received ${Hn(i.methodPath)}() call`,i);const{methodPath:o,args:a,id:c}=i;let u,h;try{const e=((e,t)=>{const r=e.reduce((e,t)=>Vr(e)?e[t]:void 0,t);return Wr(r)?r:void 0})(o,t);if(!e)throw new Fn("METHOD_NOT_FOUND",`Method \`${Hn(o)}\` is not found.`);let n=await e(...a);n instanceof zn&&(h=n.transferables,n=await n.value),u={namespace:Kr,channel:r,type:"REPLY",callId:c,value:n}}catch(e){u=Kn(r,c,e)}if(!s)try{n?.(`Sending ${Hn(o)}() reply`,u),e.sendMessage(u,h)}catch(t){throw"DataCloneError"===t.name&&(u=Kn(r,c,t),n?.(`Sending ${Hn(o)}() reply`,u),e.sendMessage(u)),t}};return e.addMessageHandler(i),()=>{s=!0,e.removeMessageHandler(i)}};let Wn=class{transferables;timeout;constructor(e){this.transferables=e?.transferables,this.timeout=e?.timeout}};const Jn=new Set(["apply","call","bind"]),Yn=(e,t,r=[])=>new Proxy(r.length?()=>{}:Object.create(null),{get(n,s){if("then"!==s)return r.length&&Jn.has(s)?Reflect.get(n,s):Yn(e,t,[...r,s])},apply:(t,n,s)=>e(r,s)}),Qn=e=>new Fn("CONNECTION_DESTROYED",`Method call ${Hn(e)}() failed due to destroyed connection`),Xn=(e,t,r)=>{let n=!1;const s=new Map,i=e=>{if(!$r(e))return;const{callId:t,value:n,isError:i,isSerializedErrorInstance:o}=e,a=s.get(t);a&&(s.delete(t),r?.(`Received ${Hn(a.methodPath)}() call`,e),i?a.reject(o?(({name:e,message:t,stack:r,penpalCode:n})=>{const s=n?new Fn(n,t):new Error(t);return s.name=e,s.stack=r,s})(n):n):a.resolve(n))};return e.addMessageHandler(i),{remoteProxy:Yn((i,o)=>{if(n)throw Qn(i);const a=Or(),c=o[o.length-1],u=c instanceof Wn,{timeout:h,transferables:l}=u?c:{},d=u?o.slice(0,-1):o;return new Promise((n,o)=>{const c=void 0!==h?window.setTimeout(()=>{s.delete(a),o(new Fn("METHOD_CALL_TIMEOUT",`Method call ${Hn(i)}() timed out after ${h}ms`))},h):void 0;s.set(a,{methodPath:i,resolve:n,reject:o,timeoutId:c});try{const n={namespace:Kr,channel:t,type:"CALL",id:a,methodPath:i,args:d};r?.(`Sending ${Hn(i)}() call`,n),e.sendMessage(n,l)}catch(n){o(new Fn("TRANSMISSION_FAILED",n.message))}})},r),destroy:()=>{n=!0,e.removeMessageHandler(i);for(const{methodPath:e,reject:t,timeoutId:r}of s.values())clearTimeout(r),t(Qn(e));s.clear()}}},$n=({messenger:e,methods:t,timeout:r,channel:n,log:s})=>{const i=Or();let o;const a=[];let c=!1;const u=Gn(t),{promise:h,resolve:l,reject:d}=(()=>{let e,t;return{promise:new Promise((r,n)=>{e=r,t=n}),resolve:e,reject:t}})(),f=setTimeout(()=>{d(new Fn("CONNECTION_TIMEOUT",`Connection timed out after ${r}ms`))},r),p=()=>{for(const e of a)e()},m=()=>{if(c)return;a.push(Vn(e,t,n,s));const{remoteProxy:r,destroy:i}=Xn(e,n,s);a.push(i),clearTimeout(f),c=!0,l({remoteProxy:r,destroy:p})},g=()=>{const t={namespace:Kr,type:"SYN",channel:n,participantId:i};s?.("Sending handshake SYN",t);try{e.sendMessage(t)}catch(t){d(new Fn("TRANSMISSION_FAILED",t.message))}},y=t=>{Jr(t)&&(t=>{if(s?.("Received handshake SYN",t),t.participantId===o&&o!==en)return;if(o=t.participantId,g(),!(i>o||o===en))return;const r={namespace:Kr,channel:n,type:"ACK1",methodPaths:u};s?.("Sending handshake ACK1",r);try{e.sendMessage(r)}catch(t){d(new Fn("TRANSMISSION_FAILED",t.message))}})(t),Yr(t)&&(t=>{s?.("Received handshake ACK1",t);const r={namespace:Kr,channel:n,type:"ACK2"};s?.("Sending handshake ACK2",r);try{e.sendMessage(r)}catch(t){return void d(new Fn("TRANSMISSION_FAILED",t.message))}m()})(t),Qr(t)&&(e=>{s?.("Received handshake ACK2",e),m()})(t)};return e.addMessageHandler(y),a.push(()=>e.removeMessageHandler(y)),g(),h},Zn=new WeakSet,es=({messenger:e,methods:t={},timeout:r,channel:n,log:s})=>{if(!e)throw new Fn("INVALID_ARGUMENT","messenger must be defined");if(Zn.has(e))throw new Fn("INVALID_ARGUMENT","A messenger can only be used for a single connection");Zn.add(e);const i=[e.destroy],o=(e=>{let t,r=!1;return(...n)=>(r||(r=!0,t=e(...n)),t)})(t=>{if(t){const r={namespace:Kr,channel:n,type:"DESTROY"};try{e.sendMessage(r)}catch(t){}}for(const e of i)e();s?.("Connection destroyed")}),a=e=>(e=>Vr(e)&&e.namespace===Kr)(e)&&e.channel===n;return{promise:(async()=>{try{e.initialize({log:s,validateReceivedMessage:a}),e.addMessageHandler(e=>{(e=>"DESTROY"===e.type)(e)&&o(!1)});const{remoteProxy:c,destroy:u}=await $n({messenger:e,methods:t,timeout:r,channel:n,log:s});return i.push(u),c}catch(e){throw o(!0),e}})(),destroy:()=>{o(!0)}}};class ts extends Error{constructor(){super("This embedded signer requires a password to be recovered")}}class rs extends Error{constructor(){super("Wrong recovery passkey for this embedded signer")}}class ns extends Error{constructor(){super("MissingProjectEntropyError")}}class ss extends Error{constructor(){super("Wrong recovery password for this embedded signer")}}class is extends Error{constructor(){super("Not configured")}}class os extends Error{constructor(){super("OTP required")}}let as=class{messenger;connection;remote;storage;sdkConfiguration;isInitialized=!1;initializationPromise=null;constructor(e,t,r){if(!e)throw new lr("Configuration is required for IframeManager",hr.INVALID_CONFIGURATION);if(!t)throw new lr("Storage is required for IframeManager",hr.INVALID_CONFIGURATION);if(!r)throw new lr("Messenger is required for IframeManager",hr.INVALID_CONFIGURATION);this.sdkConfiguration=e,this.storage=t,this.messenger=r}async initialize(){if(!this.isInitialized)if(this.initializationPromise)await this.initializationPromise;else{this.initializationPromise=this.doInitialize();try{await this.initializationPromise,this.isInitialized=!0}catch(e){throw this.initializationPromise=null,e}}}async doInitialize(){kn("Initializing IframeManager connection..."),this.messenger.initialize({validateReceivedMessage:e=>!(!e||"object"!=typeof e),log:kn}),this.connection=es({messenger:this.messenger,timeout:1e4,log:kn});try{this.remote=await this.connection.promise,kn("IframeManager connection established")}catch(e){const t=e;throw zr.captureException(t),this.destroy(),kn("Failed to establish connection:",t),new lr(`Failed to establish iFrame connection: ${t.cause||t.message}`,hr.INTERNAL_ERROR,e)}}async ensureConnection(){if(this.isInitialized&&this.remote||await this.initialize(),!this.remote)throw new lr("Failed to establish connection",hr.INTERNAL_ERROR);return this.remote}handleError(e){if(fn(e)){if("not-configured-error"===e.error)throw this.storage.remove(cr.ACCOUNT),new is;if("missing-user-entropy-error"===e.error)throw this.storage.remove(cr.ACCOUNT),new ts;if("missing-project-entropy-error"===e.error)throw this.storage.remove(cr.ACCOUNT),new ns;if("incorrect-user-entropy-error"===e.error)throw new ss;if("missing-passkey-error"===e.error)throw this.storage.remove(cr.ACCOUNT),new ts;if("incorrect-passkey-error"===e.error)throw new rs;if("otp-required-error"===e.error)throw new os;throw this.storage.remove(cr.ACCOUNT),new lr(`Unknown error: ${e.error}`,hr.INTERNAL_ERROR)}throw e}async buildRequestConfiguration(){const e=await ur.fromStorage(this.storage);if(!e)throw new lr("Must be authenticated to create a signer",hr.NOT_LOGGED_IN_ERROR);const t={auth:mn.OPENFORT,authProvider:e.thirdPartyProvider,token:e.token,tokenType:e.thirdPartyTokenType};return{thirdPartyProvider:e.thirdPartyProvider,thirdPartyTokenType:e.thirdPartyTokenType,token:e.token,publishableKey:this.sdkConfiguration.baseConfiguration.publishableKey,openfortURL:this.sdkConfiguration.backendUrl,shieldAuthentication:t,shieldAPIKey:this.sdkConfiguration.shieldConfiguration?.shieldPublishableKey||"",shieldURL:this.sdkConfiguration.shieldUrl,encryptionKey:this.sdkConfiguration?.shieldConfiguration?.shieldEncryptionKey??void 0}}async buildIFrameRequestConfiguration(){const e=await ur.fromStorage(this.storage);if(!e)throw new lr("Must be authenticated to create a signer",hr.NOT_LOGGED_IN_ERROR);const t={auth:mn.OPENFORT,authProvider:e.thirdPartyProvider,token:e.token,tokenType:e.thirdPartyTokenType};return{thirdPartyTokenType:e.thirdPartyTokenType??null,thirdPartyProvider:e.thirdPartyProvider??null,accessToken:e.token,playerID:e.player,recovery:t,chainId:null,password:null,passkey:null}}async create(e){if(!this.sdkConfiguration.shieldConfiguration)throw new Error("shieldConfiguration is required");const t=await this.ensureConnection(),r=await this.buildIFrameRequestConfiguration();r.chainId=e.chainId??null,r.password=e?.entropy?.recoveryPassword??null,r.recovery={...r.recovery,encryptionSession:e?.entropy?.encryptionSession},r.passkey=e?.entropy?.passkey??null;const n={uuid:Or(),action:an.CREATE,recovery:r.recovery,publishableKey:this.sdkConfiguration.baseConfiguration.publishableKey,shieldAPIKey:this.sdkConfiguration.shieldConfiguration?.shieldPublishableKey||"",accessToken:r.accessToken,playerID:r.playerID,thirdPartyProvider:r.thirdPartyProvider,thirdPartyTokenType:r.thirdPartyTokenType,encryptionKey:r.password,encryptionSession:r.recovery?.encryptionSession??null,passkey:r.passkey??null,openfortURL:this.sdkConfiguration.backendUrl,shieldURL:this.sdkConfiguration.shieldUrl,chainId:e.chainId??null,accountType:e.accountType,chainType:e.chainType},s=await t.create(n);return fn(s)&&this.handleError(s),"undefined"!=typeof sessionStorage&&sessionStorage.setItem("iframe-version",s.version??"undefined"),s}async recover(e){if(!this.sdkConfiguration.shieldConfiguration)throw new Error("shieldConfiguration is required");const t=await _n.fromStorage(this.storage),r=await this.ensureConnection(),n=await this.buildIFrameRequestConfiguration();n.chainId=t?.chainId??null,n.password=e?.entropy?.recoveryPassword??null,n.recovery={...n.recovery,encryptionSession:e?.entropy?.encryptionSession},n.passkey=e?.entropy?.passkey??null;const s={uuid:Or(),action:an.RECOVER,recovery:n.recovery,publishableKey:this.sdkConfiguration.baseConfiguration.publishableKey,shieldAPIKey:this.sdkConfiguration.shieldConfiguration?.shieldPublishableKey||"",accessToken:n.accessToken,playerID:n.playerID,thirdPartyProvider:n.thirdPartyProvider,thirdPartyTokenType:n.thirdPartyTokenType,encryptionKey:n.password,encryptionSession:n.recovery?.encryptionSession??null,passkey:n.passkey??null,openfortURL:this.sdkConfiguration.backendUrl,shieldURL:this.sdkConfiguration.shieldUrl,account:e.account},i=await r.recover(s);return fn(i)&&this.handleError(i),"undefined"!=typeof sessionStorage&&sessionStorage.setItem("iframe-version",i.version??"undefined"),i}async sign(e,t,r,n){kn("[iframe] ensureConnection");const s=await this.ensureConnection(),i=new un(Or(),e,await this.buildRequestConfiguration(),t,r,n);kn("[iframe] done ensureConnection");const o=await s.sign(i);return kn("[iframe] response",o),fn(o)&&this.handleError(o),"undefined"!=typeof sessionStorage&&sessionStorage.setItem("iframe-version",o.version??"undefined"),o.signature}async switchChain(e){const t=await this.ensureConnection(),r=new hn(Or(),e,await this.buildRequestConfiguration()),n=await t.switchChain(r);return fn(n)&&this.handleError(n),n}async export(){const e=await this.ensureConnection(),t=new ln(Or(),await this.buildRequestConfiguration()),r=await e.export(t);return fn(r)&&this.handleError(r),"undefined"!=typeof sessionStorage&&sessionStorage.setItem("iframe-version",r.version??"undefined"),r.key}async setRecoveryMethod(e,t,r,n,s){const i=await this.ensureConnection(),o=new dn(Or(),e,await this.buildRequestConfiguration(),t,r,n,s),a=await i.setRecoveryMethod(o);fn(a)&&this.handleError(a),"undefined"!=typeof sessionStorage&&sessionStorage.setItem("iframe-version",a.version??"undefined")}async getCurrentDevice(e){const t=await this.ensureConnection(),r=new cn(Or(),e);try{const e=await t.getCurrentDevice(r);return fn(e)&&this.handleError(e),"undefined"!=typeof sessionStorage&&sessionStorage.setItem("iframe-version",e.version??"undefined"),e}catch(e){if(e instanceof is)return null;throw e}}async updateAuthentication(){if(!this.isLoaded()||!this.remote)return void kn("IframeManager not loaded, skipping authentication update");const e=await ur.fromStorage(this.storage);if(!e)return void kn("No authentication found, skipping update");const t=new pn(Or(),e.token);kn("Updating authentication in iframe with token");const r=await this.remote.updateAuthentication(t);fn(r)&&this.handleError(r)}async disconnect(){const e=await this.ensureConnection(),t={uuid:Or()};await e.logout(t)}async onMessage(e){kn("[HANDSHAKE DEBUG] IframeManager.onMessage called with:",e),this.messenger instanceof qn?(this.isInitialized||this.connection?kn(`[HANDSHAKE DEBUG] Connection already initialized (isInitialized: ${this.isInitialized}, hasConnection: ${!!this.connection})`):(kn("[HANDSHAKE DEBUG] First message received, initializing connection..."),this.initialize().catch(e=>{kn("[HANDSHAKE DEBUG] Failed to initialize connection:",e)})),kn("[HANDSHAKE DEBUG] Passing message to ReactNativeMessenger"),this.messenger.handleMessage(e)):kn("[HANDSHAKE DEBUG] Not a ReactNativeMessenger, ignoring message")}isLoaded(){return this.isInitialized&&void 0!==this.remote}destroy(){this.connection&&this.connection.destroy(),this.messenger.destroy(),this.remote=void 0,this.isInitialized=!1,this.connection=void 0,this.initializationPromise=null}};class cs{#t;#s;#e;#n;#o;#i=new Set;#a;#r=!1;constructor({remoteWindow:e,allowedOrigins:t}){if(!e)throw new Fn("INVALID_ARGUMENT","remoteWindow must be defined");this.#t=e,this.#s=t?.length?t:[window.origin]}initialize=({log:e,validateReceivedMessage:t})=>{this.#e=e,this.#n=t,window.addEventListener("message",this.#h)};sendMessage=(e,t)=>{if(Jr(e)){const r=this.#f(e);return void this.#t.postMessage(e,{targetOrigin:r,transfer:t})}if(Yr(e)||this.#r){const r=this.#r?(e=>{if(Yr(e))return{penpal:tn.SynAck,methodNames:e.methodPaths.map(sn)};if(Xr(e))return{penpal:tn.Call,id:e.id,methodName:sn(e.methodPath),args:e.args};if($r(e))return e.isError?{penpal:tn.Reply,id:e.callId,resolution:rn.Rejected,...e.isSerializedErrorInstance?{returnValue:e.value,returnValueIsError:!0}:{returnValue:e.value}}:{penpal:tn.Reply,id:e.callId,resolution:rn.Fulfilled,returnValue:e.value};throw on(e)})(e):e,n=this.#f(e);return void this.#t.postMessage(r,{targetOrigin:n,transfer:t})}if(Qr(e)){const{port1:r,port2:n}=new MessageChannel;this.#a=r,r.addEventListener("message",this.#p),r.start();const s=[n,...t||[]],i=this.#f(e);return void this.#t.postMessage(e,{targetOrigin:i,transfer:s})}if(!this.#a)throw new Zr("Port is undefined");this.#a.postMessage(e,{transfer:t})};addMessageHandler=e=>{this.#i.add(e)};removeMessageHandler=e=>{this.#i.delete(e)};destroy=()=>{window.removeEventListener("message",this.#h),this.#u(),this.#i.clear()};#c=e=>this.#s.some(t=>t instanceof RegExp?t.test(e):t===e||"*"===t);#f=e=>{if(Jr(e))return"*";if(!this.#o)throw new Zr("Concrete remote origin not set");return"null"===this.#o&&this.#s.includes("*")?"*":this.#o};#u=()=>{this.#a?.removeEventListener("message",this.#p),this.#a?.close(),this.#a=void 0};#h=({source:e,origin:t,ports:r,data:n})=>{if(e===this.#t&&((e=>Vr(e)&&"penpal"in e)(n)&&(this.#e?.("Please upgrade the child window to the latest version of Penpal."),this.#r=!0,n=(e=>{if(e.penpal===tn.Syn)return{namespace:Kr,channel:void 0,type:"SYN",participantId:en};if(e.penpal===tn.SynAck)return{namespace:Kr,channel:void 0,type:"ACK1",methodPaths:e.methodNames.map(nn)};if(e.penpal===tn.Ack)return{namespace:Kr,channel:void 0,type:"ACK2"};if(e.penpal===tn.Call)return{namespace:Kr,channel:void 0,type:"CALL",id:e.id,methodPath:nn(e.methodName),args:e.args};if(e.penpal===tn.Reply)return e.resolution===rn.Fulfilled?{namespace:Kr,channel:void 0,type:"REPLY",callId:e.id,value:e.returnValue}:{namespace:Kr,channel:void 0,type:"REPLY",callId:e.id,isError:!0,...e.returnValueIsError?{value:e.returnValue,isSerializedErrorInstance:!0}:{value:e.returnValue}};throw on(e)})(n)),this.#n?.(n)))if(this.#c(t)){if(Jr(n)&&(this.#u(),this.#o=t),Qr(n)&&!this.#r){if([this.#a]=r,!this.#a)throw new Zr("No port received on ACK2");this.#a.addEventListener("message",this.#p),this.#a.start()}for(const e of this.#i)e(n)}else this.#e?.(`Received a message from origin \`${t}\` which did not match allowed origins \`[${this.#s.join(", ")}]\``)};#p=({data:e})=>{if(this.#n?.(e))for(const t of this.#i)t(e)}}class us{storage;validateAndRefreshToken;ensureInitialized;eventEmitter;passkeyHandler;iframeManager=null;iframeManagerPromise=null;signer=null;signerPromise=null;provider=null;messagePoster=null;messenger=null;constructor(e,t,r,n,s){this.storage=e,this.validateAndRefreshToken=t,this.ensureInitialized=r,this.eventEmitter=n,this.passkeyHandler=s,this.eventEmitter.on(pr.ON_LOGOUT,()=>{kn("Handling logout event in EmbeddedWalletApi"),this.handleLogout()})}get backendApiClients(){const e=Mr.getInstance();if(!e)throw new lr("Configuration not found",hr.INVALID_CONFIGURATION);return new ar({basePath:e.backendUrl,accessToken:e.baseConfiguration.publishableKey})}async getIframeManager(){if(kn("[HANDSHAKE DEBUG] getIframeManager called"),this.iframeManager)return kn("[HANDSHAKE DEBUG] Returning existing iframeManager instance"),this.iframeManager;if(this.iframeManagerPromise)return kn("[HANDSHAKE DEBUG] Returning existing iframeManagerPromise"),this.iframeManagerPromise;kn("[HANDSHAKE DEBUG] Creating new iframeManager"),this.iframeManagerPromise=this.createIframeManager();try{return kn("[HANDSHAKE DEBUG] Awaiting iframeManager creation"),this.iframeManager=await this.iframeManagerPromise,kn("[HANDSHAKE DEBUG] IframeManager created successfully"),this.iframeManagerPromise=null,this.iframeManager}catch(e){throw kn("[HANDSHAKE DEBUG] Error creating iframeManager:",e),this.iframeManagerPromise=null,e}}async createIframeManager(){kn("[HANDSHAKE DEBUG] createIframeManager starting");const e=Mr.getInstance();if(!e)throw kn("[HANDSHAKE DEBUG] Configuration not found"),new lr("Configuration not found",hr.INVALID_CONFIGURATION);let t;if(kn("[HANDSHAKE DEBUG] Configuration found"),this.messagePoster)kn("[HANDSHAKE DEBUG] Creating ReactNativeMessenger with messagePoster"),this.messenger=new qn(this.messagePoster),kn("[HANDSHAKE DEBUG] Created new ReactNativeMessenger instance"),t=this.messenger;else{kn("[HANDSHAKE DEBUG] Creating WindowMessenger for browser mode");const r=this.createIframe(e.iframeUrl),n=new URL(e.iframeUrl).origin;t=new cs({remoteWindow:r.contentWindow,allowedOrigins:[n]}),kn("[HANDSHAKE DEBUG] Created WindowMessenger")}return kn("[HANDSHAKE DEBUG] Creating IframeManager instance"),new as(e,this.storage,t)}async ensureSigner(){if(this.signer)return this.signer;if(this.signerPromise)return this.signerPromise;this.signerPromise=this.createSigner();try{return this.signer=await this.signerPromise,this.signer}catch(e){throw this.signerPromise=null,e}finally{this.signerPromise=null}}async createSigner(){const e=await this.getIframeManager();return new Rn(e,this.storage,this.backendApiClients,this.passkeyHandler,this.eventEmitter)}createIframe(e){if("undefined"==typeof document)throw new lr("Document is not available. Please provide a message poster for non-browser environments.",hr.INVALID_CONFIGURATION);const t=document.getElementById("openfort-iframe");t&&t.remove();const r=document.createElement("iframe");return r.style.display="none",r.id="openfort-iframe",r.src=e,document.body.appendChild(r),r}async getPasskeyKey(e){const t=await ur.fromStorage(this.storage);return await this.passkeyHandler.deriveAndExportKey({id:e,seed:t.player})}async getEntropy(e){switch(e.recoveryMethod){case mr.PASSWORD:return{recoveryPassword:e.password};case mr.AUTOMATIC:return{encryptionSession:e.encryptionSession};case mr.PASSKEY:return{passkey:e.passkeyInfo?{id:e.passkeyInfo.passkeyId,key:e.passkeyInfo.passkeyKey||await this.getPasskeyKey(e.passkeyInfo.passkeyId)}:{}};default:throw new lr("Invalid recovery method",hr.INVALID_CONFIGURATION)}}async configure(e){await this.validateAndRefreshToken();const t=e.recoveryParams??{recoveryMethod:mr.AUTOMATIC},[r,n,s]=await Promise.all([ur.fromStorage(this.storage),this.ensureSigner(),this.getEntropy(t)]),i={chainId:e.chainId,entropy:s,accountType:e.accountType??kr.SMART_ACCOUNT,chainType:e.chainType??Rr.EVM,getPasskeyKeyFn:async e=>this.getPasskeyKey(e)},o=await n.configure(i);return{id:o.id,chainId:o.chainId,user:r.player,address:o.address,ownerAddress:o.ownerAddress,chainType:o.chainType,accountType:o.accountType,implementationType:o.implementationType,createdAt:o.createdAt,recoveryMethod:_n.parseRecoveryMethod(o.recoveryMethod),recoveryMethodDetails:o.recoveryMethodDetails}}async create(e){await this.validateAndRefreshToken();const t=e.recoveryParams??{recoveryMethod:mr.AUTOMATIC},r=await ur.fromStorage(this.storage);if(!r)throw new lr("missing authentication",hr.AUTHENTICATION_ERROR);if(t.recoveryMethod===mr.PASSKEY){const e=await this.passkeyHandler.createPasskey({id:Pr.randomPasskeyName(),displayName:"Openfort - Embedded Wallet",seed:r?.player});t.passkeyInfo={passkeyId:e.id,passkeyKey:e.key}}const[n,s]=await Promise.all([this.ensureSigner(),this.getEntropy(t)]),i=await n.create({accountType:e.accountType,chainType:e.chainType,chainId:e.chainId,entropy:s}),o={id:i.id,chainId:i.chainId,user:r.player,address:i.address,ownerAddress:i.ownerAddress,chainType:i.chainType,accountType:i.accountType,implementationType:i.implementationType,createdAt:i.createdAt,recoveryMethod:_n.parseRecoveryMethod(i.recoveryMethod),recoveryMethodDetails:i.recoveryMethodDetails};return this.eventEmitter.emit(pr.ON_EMBEDDED_WALLET_CREATED,o),o}async recover(e){await this.validateAndRefreshToken();const t=e.recoveryParams??{recoveryMethod:mr.AUTOMATIC};if(t.recoveryMethod===mr.PASSKEY){if(!t.passkeyInfo?.passkeyId)throw new lr("Passkey ID must be provided for passkey recovery",hr.INVALID_CONFIGURATION);t.passkeyInfo={passkeyId:t.passkeyInfo.passkeyId}}const[r,n,s]=await Promise.all([this.ensureSigner(),this.getEntropy(t),ur.fromStorage(this.storage)]),i=await r.recover({account:e.account,entropy:n}),o={id:i.id,chainId:i.chainId,user:s.player,address:i.address,ownerAddress:i.ownerAddress,chainType:i.chainType,accountType:i.accountType,implementationType:i.implementationType,createdAt:i.createdAt,recoveryMethod:_n.parseRecoveryMethod(i.recoveryMethod),recoveryMethodDetails:i.recoveryMethodDetails};return this.eventEmitter.emit(pr.ON_EMBEDDED_WALLET_RECOVERED,o),o}async signMessage(e,t){await this.validateAndRefreshToken();const r=await this.ensureSigner(),{hashMessage:n=!0,arrayifyMessage:s=!1}=t||{},i=await _n.fromStorage(this.storage);return await r.sign(e,s,n,i?.chainType)}async signTypedData(e,t,r){await this.validateAndRefreshToken();const n=await this.ensureSigner(),s=await _n.fromStorage(this.storage);if(!s)throw new lr("No account found",hr.MISSING_SIGNER_ERROR);const i={...t};delete i.EIP712Domain;const{_TypedDataEncoder:o}=await Promise.resolve().then(function(){return Yu}),a=o.hash(e,i,r);return await Pn({hash:a,implementationType:s.implementationType||s.type,chainId:Number(s.chainId),signer:n,address:s.address,ownerAddress:s.ownerAddress,factoryAddress:s.factoryAddress,salt:s.salt})}async exportPrivateKey(){await this.validateAndRefreshToken();const e=await this.ensureSigner();return await e.export()}async setRecoveryMethod(e,t){await this.validateAndRefreshToken();const r=await this.ensureSigner(),n=await ur.fromStorage(this.storage);if(!n)throw new lr("missing authentication",hr.AUTHENTICATION_ERROR);let s,i,o,a;if(e.recoveryMethod===mr.PASSKEY){const e=await _n.fromStorage(this.storage);if(!e)throw new lr("missing account",hr.INVALID_CONFIGURATION);const t=e?.recoveryMethodDetails?.passkeyId;if(!t)throw new lr("missing passkey id for account",hr.INVALID_CONFIGURATION);o={passkeyId:t,passkeyKey:await this.passkeyHandler.deriveAndExportKey({id:t,seed:n.player})}}else if(t.recoveryMethod===mr.PASSKEY){const e=await this.passkeyHandler.createPasskey({id:Pr.randomPasskeyName(),displayName:"Openfort - Embedded Wallet",seed:n.player});o={passkeyId:e.id,passkeyKey:e.key},a={passkeyId:e.id}}if(e.recoveryMethod===mr.PASSWORD?s=e.password:t.recoveryMethod===mr.PASSWORD&&(s=t.password),e.recoveryMethod===mr.AUTOMATIC?i=e.encryptionSession:t.recoveryMethod===mr.AUTOMATIC&&(i=t.encryptionSession),!s&&!i)throw new lr("Password or encryption session is not provided",hr.INVALID_CONFIGURATION);await r.setRecoveryMethod({recoveryMethod:t.recoveryMethod,recoveryPassword:s,encryptionSession:i,passkeyInfo:o});const c=await _n.fromStorage(this.storage);c&&new _n({...c,recoveryMethod:t.recoveryMethod,recoveryMethodDetails:a}).save(this.storage)}async get(){const e=await _n.fromStorage(this.storage);if(!e)throw new lr("No signer configured",hr.MISSING_SIGNER_ERROR);const t=await ur.fromStorage(this.storage);if(!t)throw new lr("No access token found",hr.NOT_LOGGED_IN_ERROR);return{id:e.id,chainId:e.chainId,user:t.player,address:e.address,ownerAddress:e.ownerAddress,chainType:e.chainType,accountType:e.accountType,implementationType:e.implementationType,createdAt:e.createdAt,recoveryMethod:_n.parseRecoveryMethod(e.recoveryMethod),recoveryMethodDetails:e.recoveryMethodDetails}}async list(e){const t={accountType:kr.SMART_ACCOUNT,...e},r=Mr.getInstance();if(!r)throw new lr("Configuration not found",hr.INVALID_CONFIGURATION);await this.validateAndRefreshToken();const n=await ur.fromStorage(this.storage);if(!n)throw new lr("No access token found",hr.NOT_LOGGED_IN_ERROR);return dr(async()=>(await this.backendApiClients.accountsApi.getAccountsV2(t,{headers:{authorization:`Bearer ${r.baseConfiguration.publishableKey}`,"x-player-token":n.token,"x-auth-provider":n.thirdPartyProvider,"x-token-type":n.thirdPartyTokenType}})).data.data.map(e=>({user:e.user,chainType:e.chainType,id:e.id,address:e.address,ownerAddress:e.ownerAddress,accountType:e.accountType,createdAt:e.createdAt,implementationType:e.smartAccount?.implementationType,chainId:e.chainId,recoveryMethod:_n.parseRecoveryMethod(e.recoveryMethod),recoveryMethodDetails:e.recoveryMethodDetails})),{default:hr.AUTHENTICATION_ERROR})}async getEmbeddedState(){try{return await ur.fromStorage(this.storage)?await _n.fromStorage(this.storage)?fr.READY:fr.EMBEDDED_SIGNER_NOT_CONFIGURED:fr.UNAUTHENTICATED}catch(e){return kn("Failed to get embedded state:",e),fr.UNAUTHENTICATED}}async getEthereumProvider(e){await this.ensureInitialized();const t={announceProvider:!0,...e},r=await ur.fromStorage(this.storage),n=await _n.fromStorage(this.storage);return this.provider?this.provider&&t.policy&&this.provider.updatePolicy(t.policy):(this.provider=new Bn({storage:this.storage,openfortEventEmitter:this.eventEmitter,ensureSigner:this.ensureSigner.bind(this),account:n||void 0,authentication:r||void 0,backendApiClients:this.backendApiClients,policyId:t.policy,validateAndRefreshSession:this.validateAndRefreshToken.bind(this),chains:t.chains}),t.announceProvider&&function(e){if("undefined"==typeof window)return;const t=new CustomEvent("eip6963:announceProvider",{detail:Object.freeze(e)});window.dispatchEvent(t),window.addEventListener("eip6963:requestProvider",()=>window.dispatchEvent(t))}({info:{...jr,...t.providerInfo},provider:this.provider})),this.provider}async ping(e){try{e>0&&await new Promise(t=>{setTimeout(t,e)});const t=await this.getIframeManager();if(!t.isLoaded())return!1;const r=await ur.fromStorage(this.storage);if(r)try{return await t.getCurrentDevice(r.player),!0}catch(e){return!1}return t.isLoaded()}catch(e){return kn("Ping failed:",e),!1}}getURL(){const e=Mr.getInstance();if(!e)throw new lr("Configuration not found",hr.INVALID_CONFIGURATION);return e.iframeUrl}async setMessagePoster(e){if(!e||"function"!=typeof e.postMessage)throw new lr("Invalid message poster",hr.INVALID_CONFIGURATION);this.messagePoster=e,this.messenger&&this.messenger.destroy(),this.iframeManager&&this.iframeManager.destroy(),this.signer=null,this.signerPromise=null,this.iframeManager=null,this.iframeManagerPromise=null,this.messenger=null}async handleLogout(){const e=await this.ensureSigner();await e.disconnect(),this.provider=null,this.messenger=null,this.iframeManager=null,this.iframeManagerPromise=null,this.signer=null,this.signerPromise=null}async onMessage(e){if(!e||"object"!=typeof e)return void kn("Invalid message received:",e);kn("[HANDSHAKE DEBUG] EmbeddedWalletApi onMessage:",e);const t="penpal"===e.namespace&&"SYN"===e.type||e.penpal&&"string"==typeof e.penpal;if(t&&this.messenger&&this.messagePoster)return kn("[HANDSHAKE DEBUG] Passing message directly to existing ReactNativeMessenger"),void this.messenger.handleMessage(e);const r=await this.getIframeManager();kn(`[HANDSHAKE DEBUG] IframeManager obtained, isLoaded: ${r.isLoaded()}`),t&&!r.isLoaded()&&kn("[HANDSHAKE DEBUG] Received penpal message before connection initialized, setting up connection..."),kn("[HANDSHAKE DEBUG] Calling iframeManager.onMessage"),await r.onMessage(e),kn("[HANDSHAKE DEBUG] iframeManager.onMessage completed")}isReady(){return this.iframeManager?.isLoaded()||!1}}let hs=class{backendApiClients;validateAndRefreshToken;ensureInitialized;getSignerSignFunction;constructor(e,t,r,n,s){this.backendApiClients=t,this.validateAndRefreshToken=r,this.ensureInitialized=n,this.getSignerSignFunction=s}async sendSignatureTransactionIntentRequest(e,t=null,r=null,n=!1){if(await this.ensureInitialized(),!Mr.getInstance())throw new lr("Configuration not found",hr.INVALID_CONFIGURATION);await this.validateAndRefreshToken();let s=r;if(!s){if(!t)throw new lr("No signableHash or signature provided",hr.OPERATION_NOT_SUPPORTED_ERROR);if(!this.getSignerSignFunction)throw new lr("In order to sign a transaction intent, a signer must be configured",hr.MISSING_SIGNER_ERROR);const e=await this.getSignerSignFunction();s=await e(t)}const i={id:e,signatureRequest:{signature:s,optimistic:n}};return dr(async()=>(await this.backendApiClients.transactionIntentsApi.signature(i)).data,{default:hr.INTERNAL_ERROR})}async sendSignatureSessionRequest(e,t,r){await this.ensureInitialized();const n={id:e,signatureRequest:{signature:t,optimistic:r}};return dr(async()=>(await this.backendApiClients.sessionsApi.signatureSession(n)).data,{default:hr.INTERNAL_ERROR})}};class ls{storage;authManager;validateAndRefreshToken;constructor(e,t,r){this.storage=e,this.authManager=t,this.validateAndRefreshToken=r}async get(){await this.validateAndRefreshToken();const e=await ur.fromStorage(this.storage);if(!e)throw new lr("No access token found",hr.NOT_LOGGED_IN_ERROR);return await this.authManager.getUser(e)}}async function ds(e){const t=(new TextEncoder).encode(e),r=await async function(e,t){if(Sr)return Sr(e,t);if("undefined"!=typeof crypto&&crypto.subtle&&crypto.subtle.digest)return crypto.subtle.digest(e,t);throw new Error("No crypto digest function available. Please provide a crypto override for this environment.")}("SHA-256",t);return new Uint8Array(r)}function fs(e){const t=new Uint8Array(e);return crypto.getRandomValues(t),t}let ps=class e{decodedPayload;value;constructor(e){this.value=e;try{this.decodedPayload=En(e)}catch(e){throw new lr("Invalid token format",hr.AUTHENTICATION_ERROR)}}get subject(){return this.decodedPayload.sub}get expiration(){return this.decodedPayload.exp}get issuer(){return this.decodedPayload.iss}isExpired(e=30){return!this.expiration||(kn("Token expiration:",1e3*(this.expiration-e),"Current time:",Date.now()),Date.now()>=1e3*(this.expiration-e))}static parse(t){try{return new e(t)}catch{return null}}};class ms{storage;constructor(e){this.storage=e}async savePKCEData(e){this.storage.save(cr.PKCE_STATE,e.state),this.storage.save(cr.PKCE_VERIFIER,e.verifier)}async getPKCEData(){const e=await this.storage.get(cr.PKCE_STATE),t=await this.storage.get(cr.PKCE_VERIFIER);return e&&t?{state:e,verifier:t}:null}async clearPKCEData(){this.storage.remove(cr.PKCE_STATE),this.storage.remove(cr.PKCE_VERIFIER)}}class gs{deviceCredentialsManager;backendApiClientsInstance;publishableKeyInstance;constructor(e){this.deviceCredentialsManager=new ms(e)}setBackendApiClients(e,t){this.backendApiClientsInstance=e,this.publishableKeyInstance=t}get backendApiClients(){if(!this.backendApiClientsInstance)throw new lr("Backend API clients not initialized",hr.INTERNAL_ERROR);return this.backendApiClientsInstance}get publishableKey(){if(!this.publishableKeyInstance)throw new lr("Publishable key not initialized",hr.INTERNAL_ERROR);return this.publishableKeyInstance}async initOAuth(e,t,r){const n=t?.usePooling??!1,s=t?.skipBrowserRedirect??!1,{usePooling:i,skipBrowserRedirect:o,...a}=t||{},c={oAuthInitRequest:{provider:e,options:a,usePooling:n}},u=await dr(async()=>this.backendApiClients.authenticationApi.initOAuth(c,gs.getEcosystemGameOptsOrUndefined(r)),{default:hr.AUTHENTICATION_ERROR});return"undefined"==typeof window||s||window.location.assign(u.data.url),{url:u.data.url,key:u.data.key}}async registerGuest(){const e={};return dr(async()=>(await this.backendApiClients.authenticationApi.registerGuest(e)).data,{default:hr.USER_REGISTRATION_ERROR})}async poolOAuth(e){const t={key:e};for(let r=0;r<600;r++)try{const e=await dr(async()=>this.backendApiClients.authenticationApi.poolOAuth(t),{default:hr.AUTHENTICATION_ERROR});if(200===e.status)return e.data}catch(e){if(e.response&&404===e.response.status){await new Promise(e=>{setTimeout(e,500)});continue}throw e}throw new Error("Failed to pool OAuth, try again later")}async loginWithIdToken(e,t,r){const n={loginWithIdTokenRequest:{provider:e,token:t}};return dr(async()=>(await this.backendApiClients.authenticationApi.loginWithIdToken(n,gs.getEcosystemGameOptsOrUndefined(r))).data,{default:hr.AUTHENTICATION_ERROR,401:hr.AUTHENTICATION_ERROR,403:hr.USER_NOT_AUTHORIZED_ON_ECOSYSTEM},e=>{zr.captureAxiosError("loginWithIdToken",e)})}async authenticateThirdParty(e,t,r,n){const s={thirdPartyOAuthRequest:{provider:e,token:t,tokenType:r}};return dr(async()=>(await this.backendApiClients.authenticationApi.thirdParty(s,gs.getEcosystemGameOptsOrUndefined(n))).data,{default:hr.AUTHENTICATION_ERROR,401:hr.AUTHENTICATION_ERROR,403:hr.USER_NOT_AUTHORIZED_ON_ECOSYSTEM},e=>{zr.captureAxiosError("authenticateThirdParty",e)})}async initSIWE(e,t){const r={sIWERequest:{address:e}},n=await dr(async()=>this.backendApiClients.authenticationApi.initSIWE(r,gs.getEcosystemGameOptsOrUndefined(t)),{default:hr.AUTHENTICATION_ERROR});return{address:n.data.address,nonce:n.data.nonce,expiresAt:n.data.expiresAt}}async authenticateSIWE(e,t,r,n){const s={sIWEAuthenticateRequest:{signature:e,message:t,walletClientType:r,connectorType:n}};return dr(async()=>(await this.backendApiClients.authenticationApi.authenticateSIWE(s)).data,{default:hr.AUTHENTICATION_ERROR,401:hr.AUTHENTICATION_ERROR,403:hr.USER_NOT_AUTHORIZED_ON_ECOSYSTEM},e=>{zr.captureAxiosError("authenticateSIWE",e)})}static getEcosystemGameOptsOrUndefined(e){if(e)return{headers:{"x-game":e}}}async loginEmailPassword(e,t,r){const n={loginRequest:{email:e,password:t}};return dr(async()=>(await this.backendApiClients.authenticationApi.loginEmailPassword(n,gs.getEcosystemGameOptsOrUndefined(r))).data,{default:hr.AUTHENTICATION_ERROR,401:hr.AUTHENTICATION_ERROR,403:hr.USER_NOT_AUTHORIZED_ON_ECOSYSTEM},e=>{zr.captureAxiosError("loginEmailPassword",e)})}async requestResetPassword(e,t){const r=fs(32),n=An(r),s=await ds(n),i=An(s),o=fs(32),a=An(o);await this.deviceCredentialsManager.savePKCEData({state:a,verifier:n});const c={requestResetPasswordRequest:{email:e,redirectUrl:t,challenge:{codeChallenge:i,method:_r.S256}}};await dr(async()=>{await this.backendApiClients.authenticationApi.requestResetPassword(c)},{default:hr.AUTHENTICATION_ERROR})}async resetPassword(e,t,r){return dr(async()=>{const n=await this.deviceCredentialsManager.getPKCEData();if(!n)throw new Error("No code verifier or state for PKCE");const s={resetPasswordRequest:{email:e,password:t,state:r,challenge:{codeVerifier:n.verifier}}};await this.backendApiClients.authenticationApi.resetPassword(s)},{default:hr.AUTHENTICATION_ERROR})}async requestEmailVerification(e,t){const r=fs(32),n=An(r),s=await ds(n),i=An(s),o=fs(32),a=An(o);await this.deviceCredentialsManager.savePKCEData({state:a,verifier:n});const c={requestVerifyEmailRequest:{email:e,redirectUrl:t,challenge:{codeChallenge:i,method:_r.S256}}};await dr(async()=>{await this.backendApiClients.authenticationApi.requestEmailVerification(c)},{default:hr.AUTHENTICATION_ERROR})}async verifyEmail(e,t){return dr(async()=>{const r=await this.deviceCredentialsManager.getPKCEData();if(!r)throw new Error("No code verifier or state for PKCE");const n={verifyEmailRequest:{email:e,token:t,challenge:{codeVerifier:r.verifier}}};await this.backendApiClients.authenticationApi.verifyEmail(n)},{default:hr.AUTHENTICATION_ERROR})}async signupEmailPassword(e,t,r,n){const s={signupRequest:{email:e,password:t,name:r}};return dr(async()=>(await this.backendApiClients.authenticationApi.signupEmailPassword(s,gs.getEcosystemGameOptsOrUndefined(n))).data,{default:hr.USER_REGISTRATION_ERROR,401:hr.USER_REGISTRATION_ERROR,403:hr.USER_NOT_AUTHORIZED_ON_ECOSYSTEM},e=>{zr.captureAxiosError("signupEmailPassword",e)})}async validateCredentials(e,t){if(!e.refreshToken)throw new lr("No refresh token provided",hr.AUTHENTICATION_ERROR);if(t)return this.refreshTokens(e.refreshToken,t);kn("Validating credentials with token:",e.token);const r=ps.parse(e.token);return r?r.isExpired()?(kn("Token expired, refreshing..."),this.refreshTokens(e.refreshToken)):{player:r.subject,accessToken:e.token,refreshToken:e.refreshToken}:this.refreshTokens(e.refreshToken)}async refreshTokens(e,t){const r={refreshTokenRequest:{refreshToken:e,forceRefresh:t}};return dr(async()=>{const e=await this.backendApiClients.authenticationApi.refresh(r);return{player:e.data.player.id,accessToken:e.data.token,refreshToken:e.data.refreshToken}},{default:hr.REFRESH_TOKEN_ERROR})}async logout(e,t){const r={logoutRequest:{refreshToken:t}};return dr(async()=>{await this.backendApiClients.authenticationApi.logout(r,{headers:{authorization:`Bearer ${this.publishableKey}`,"x-player-token":e}})},{default:hr.LOGOUT_ERROR})}async getUser(e){return dr(async()=>(await this.backendApiClients.authenticationApi.me({headers:{authorization:`Bearer ${this.publishableKey}`,"x-player-token":e.token,"x-auth-provider":e.thirdPartyProvider,"x-token-type":e.thirdPartyTokenType}})).data,{default:hr.AUTHENTICATION_ERROR})}async linkThirdParty(e,t,r,n,s){const i={thirdPartyLinkRequest:{provider:t,token:r,tokenType:n}};return dr(async()=>(await this.backendApiClients.authenticationApi.linkThirdParty(i,{headers:{authorization:`Bearer ${this.publishableKey}`,"x-player-token":e.token,"x-auth-provider":e.thirdPartyProvider||void 0,"x-token-type":e.thirdPartyTokenType||void 0,"x-game":s||void 0}})).data,{default:hr.AUTHENTICATION_ERROR})}async linkOAuth(e,t,r,n){const s=r?.skipBrowserRedirect??!1;delete r?.skipBrowserRedirect;const i={oAuthInitRequest:{provider:t,options:r,usePooling:r?.usePooling||!1}},o=await dr(async()=>this.backendApiClients.authenticationApi.linkOAuth(i,{headers:{authorization:`Bearer ${this.publishableKey}`,"x-player-token":e.token,"x-auth-provider":e.thirdPartyProvider||void 0,"x-token-type":e.thirdPartyTokenType||void 0,"x-game":n||void 0}}),{default:hr.AUTHENTICATION_ERROR});return"undefined"==typeof window||s||window.location.assign(o.data.url),{url:o.data.url,key:o.data.key}}async unlinkOAuth(e,t){const r={unlinkOAuthRequest:{provider:e}};return dr(async()=>(await this.backendApiClients.authenticationApi.unlinkOAuth(r,{headers:{authorization:`Bearer ${this.publishableKey}`,"x-player-token":t}})).data,{default:hr.AUTHENTICATION_ERROR})}async unlinkWallet(e,t){const r={sIWERequest:{address:e}};return dr(async()=>(await this.backendApiClients.authenticationApi.unlinkSIWE(r,{headers:{authorization:`Bearer ${this.publishableKey}`,"x-player-token":t}})).data,{default:hr.AUTHENTICATION_ERROR})}async linkWallet(e,t,r,n,s){const i={sIWEAuthenticateRequest:{signature:e,message:t,walletClientType:r,connectorType:n}};return dr(async()=>(await this.backendApiClients.authenticationApi.linkSIWE(i,{headers:{authorization:`Bearer ${this.publishableKey}`,"x-player-token":s}})).data,{default:hr.AUTHENTICATION_ERROR})}async unlinkEmail(e,t){const r={unlinkEmailRequest:{email:e}};return dr(async()=>(await this.backendApiClients.authenticationApi.unlinkEmail(r,{headers:{authorization:`Bearer ${this.publishableKey}`,"x-player-token":t}})).data,{default:hr.AUTHENTICATION_ERROR})}async linkEmail(e,t,r,n){const s={loginRequest:{email:e,password:t}};return dr(async()=>(await this.backendApiClients.authenticationApi.linkEmail(s,{headers:{authorization:`Bearer ${this.publishableKey}`,"x-player-token":r,"x-game":n||void 0}})).data,{default:hr.AUTHENTICATION_ERROR})}}class ys{storage;constructor(e){this.storage=e}async get(e){return Promise.resolve(this.storage.getItem(e))}save(e,t){this.storage.setItem(e,t)}remove(e){this.storage.removeItem(e)}flush(){for(const e of Object.values(cr))this.storage.removeItem(e)}}class ws{realStorage=null;customStorage;constructor(e){this.customStorage=e}getRealStorage(){if(!this.realStorage)if(this.customStorage)this.realStorage=this.customStorage;else{if("undefined"==typeof window||"undefined"==typeof localStorage)throw new lr("Storage not available. Please provide custom storage or use in browser environment.",hr.INVALID_CONFIGURATION);this.realStorage=new ys(localStorage)}return this.realStorage}async get(e){return this.getRealStorage().get(e)}save(e,t){this.getRealStorage().save(e,t)}remove(e){this.getRealStorage().remove(e)}flush(){this.getRealStorage().flush()}}const vs={};class As{storage;authManager;eventEmitter;constructor(e,t,r){this.storage=e,this.authManager=t,this.eventEmitter=r}async getThirdPartyAuthToken(){const e=Mr.getInstance();if(!e?.thirdPartyAuth)throw new lr("No third party configuration found",hr.INTERNAL_ERROR);const{getAccessToken:t,provider:r}=e.thirdPartyAuth;if(!t||!r)throw new lr("Third party is not configured. Please configure getAccessToken and thirdPartyAuthProvider in your Openfort instance",hr.INVALID_CONFIGURATION);const n=await t();if(!n)throw new lr("Could not get access token",hr.AUTHENTICATION_ERROR);let s=(await ur.fromStorage(this.storage))?.player;if(!s){const e=await this.authManager.authenticateThirdParty(r,n,wr.ID_TOKEN);s=e?.id}return new ur("third_party",n,s,null,r,wr.ID_TOKEN).save(this.storage),n}async getAccessToken(){return Mr.getInstance()?.thirdPartyAuth?this.getThirdPartyAuthToken():(await ur.fromStorage(this.storage))?.token??null}async validateAndRefreshToken(e){return((e,t)=>{let r=vs[t];return r||(r=e().finally(()=>{delete vs[t],r=null}),vs[t]=r),r})(async()=>{if(Mr.getInstance()?.thirdPartyAuth)return void await this.getThirdPartyAuthToken();const t=await ur.fromStorage(this.storage);if(!t)throw new lr("Must be logged in to validate and refresh token",hr.NOT_LOGGED_IN_ERROR);let r;kn("validating credentials...");try{r=await this.authManager.validateCredentials(t,e)}catch(e){throw ur.clear(this.storage),this.eventEmitter.emit(pr.ON_LOGOUT),e}if(!r.player)throw new lr("No user found in credentials",hr.INTERNAL_ERROR);r.accessToken!==t.token&&(kn("tokens refreshed"),new ur("jwt",r.accessToken,r.player,r.refreshToken).save(this.storage))},"openfort.validateAndRefreshToken")}}class bs{storage;iAuthManager=null;openfortInternal;initPromise;asyncInitPromise=null;authInstance;embeddedWalletInstance;userInstance;proxyInstance;configuration;eventEmitter;iPasskeyHandler;static globalEventEmitter=null;get auth(){if(!this.authInstance)throw new lr("Openfort SDK not initialized. Please await waitForInitialization() before accessing auth.",hr.INVALID_CONFIGURATION);return this.authInstance}get embeddedWallet(){if(!this.embeddedWalletInstance)throw new lr("Openfort SDK not initialized. Please await waitForInitialization() before accessing embeddedWallet.",hr.INVALID_CONFIGURATION);return this.embeddedWalletInstance}get user(){if(!this.userInstance)throw new lr("Openfort SDK not initialized. Please await waitForInitialization() before accessing user.",hr.INVALID_CONFIGURATION);return this.userInstance}get proxy(){if(!this.proxyInstance)throw new lr("Openfort SDK not initialized. Please await waitForInitialization() before accessing proxy.",hr.INVALID_CONFIGURATION);return this.proxyInstance}initializeSynchronously(){try{this.iAuthManager=new gs(this.storage),this.openfortInternal=new As(this.storage,this.authManager,this.eventEmitter),this.authInstance=new Tr(this.storage,this.authManager,this.validateAndRefreshToken.bind(this),this.ensureInitialized.bind(this),this.eventEmitter),this.embeddedWalletInstance=new us(this.storage,this.validateAndRefreshToken.bind(this),this.ensureInitialized.bind(this),this.eventEmitter,this.passkeyHandler),this.userInstance=new ls(this.storage,this.authManager,this.validateAndRefreshToken.bind(this)),this.proxyInstance=new hs(this.storage,this.backendApiClients,this.validateAndRefreshToken.bind(this),this.ensureInitialized.bind(this),async()=>{if(!this.embeddedWalletInstance)throw new lr("Embedded wallet not initialized",hr.MISSING_SIGNER_ERROR);const e=this.embeddedWalletInstance;return t=>e.signMessage(t,{hashMessage:!0,arrayifyMessage:!0})})}catch(e){throw new lr("Openfort SDK synchronous initialization failed",hr.INVALID_CONFIGURATION)}}constructor(e){this.configuration=new Mr(e),this.storage=new ws(this.configuration.storage),this.eventEmitter=new Tn,bs.globalEventEmitter?["onAuthInit","onAuthSuccess","onAuthFailure","onLogout","onSwitchAccount","onSignedMessage","onEmbeddedWalletCreated","onEmbeddedWalletRecovered","onAuthFlowOpen","onAuthFlowClose","onAuthFlowCancel"].forEach(e=>{this.eventEmitter.on(e,(...t)=>{bs.globalEventEmitter?.emit(e,...t)})}):bs.globalEventEmitter=this.eventEmitter,this.iPasskeyHandler=new Pr({rpId:this.configuration.passkeyRpId,rpName:this.configuration.passkeyRpName,extractableKey:!0}),Hr.init({configuration:this.configuration}),this.initializeSynchronously(),this.initPromise=Promise.resolve()}static getEventEmitter(){return bs.globalEventEmitter||(bs.globalEventEmitter=new Tn),bs.globalEventEmitter}async waitForInitialization(){await this.initPromise,await this.ensureAsyncInitialized()}async getAccessToken(){return await this.ensureInitialized(),this.openfortInternal.getAccessToken()}async validateAndRefreshToken(e){return await this.ensureInitialized(),await this.openfortInternal.validateAndRefreshToken(e)}get backendApiClients(){return new ar({basePath:this.configuration.backendUrl,accessToken:this.configuration.baseConfiguration.publishableKey})}get authManager(){if(!this.iAuthManager)throw new lr("AuthManager not initialized",hr.INTERNAL_ERROR);return this.iAuthManager}get passkeyHandler(){return this.iPasskeyHandler}static async isStorageAccessible(e){try{const t=cr.TEST,r="openfort_storage_test";e.save(t,r);const n=await e.get(t);return e.remove(t),n===r}catch(e){return!1}}async initializeAsync(){try{if(!await bs.isStorageAccessible(this.storage))throw new lr("Storage is not accessible",hr.INVALID_CONFIGURATION);this.authManager.setBackendApiClients(this.backendApiClients,this.configuration.baseConfiguration.publishableKey)}catch(e){throw new lr("Openfort SDK async initialization failed",hr.INTERNAL_ERROR)}}async ensureAsyncInitialized(){this.asyncInitPromise||(this.asyncInitPromise=this.initializeAsync()),await this.asyncInitPromise}async ensureInitialized(){await this.initPromise,await this.ensureAsyncInitialized()}}bs.getEventEmitter(),window.Openfort=bs;const Es="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,_s=globalThis,ks="9.46.0";function Rs(){return Is(_s),_s}function Is(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||ks,t[ks]=t[ks]||{}}function Ts(e,t,r=_s){const n=r.__SENTRY__=r.__SENTRY__||{},s=n[ks]=n[ks]||{};return s[e]||(s[e]=t())}const Ns={};function Ss(e){if(!("console"in _s))return e();const t=_s.console,r={},n=Object.keys(Ns);n.forEach(e=>{const n=Ns[e];r[e]=t[e],t[e]=n});try{return e()}finally{n.forEach(e=>{t[e]=r[e]})}}function Ps(){return Cs().enabled}function Os(e,...t){Es&&Ps()&&Ss(()=>{_s.console[e](`Sentry Logger [${e}]:`,...t)})}function Cs(){return Es?Ts("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const xs={enable:function(){Cs().enabled=!0},disable:function(){Cs().enabled=!1},isEnabled:Ps,log:function(...e){Os("log",...e)},warn:function(...e){Os("warn",...e)},error:function(...e){Os("error",...e)}},Ms="?",Us=/\(error: (.*)\)/,Ds=/captureMessage|captureException/;function Ls(e){return e[e.length-1]||{}}const Bs="<anonymous>";const Fs=Object.prototype.toString;function qs(e){switch(Fs.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return Ys(e,Error)}}function js(e,t){return Fs.call(e)===`[object ${t}]`}function Gs(e){return js(e,"ErrorEvent")}function Hs(e){return js(e,"DOMError")}function zs(e){return js(e,"String")}function Ks(e){return"object"==typeof e&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function Vs(e){return js(e,"Object")}function Ws(e){return"undefined"!=typeof Event&&Ys(e,Event)}function Js(e){return Boolean(e?.then&&"function"==typeof e.then)}function Ys(e,t){try{return e instanceof t}catch{return!1}}const Qs=_s;function Xs(e,t){const r=e,n=[];if(!r?.tagName)return"";if(Qs.HTMLElement&&r instanceof HTMLElement&&r.dataset){if(r.dataset.sentryComponent)return r.dataset.sentryComponent;if(r.dataset.sentryElement)return r.dataset.sentryElement}n.push(r.tagName.toLowerCase());const s=t?.length?t.filter(e=>r.getAttribute(e)).map(e=>[e,r.getAttribute(e)]):null;if(s?.length)s.forEach(e=>{n.push(`[${e[0]}="${e[1]}"]`)});else{r.id&&n.push(`#${r.id}`);const e=r.className;if(e&&zs(e)){const t=e.split(/\s+/);for(const e of t)n.push(`.${e}`)}}const i=["aria-label","type","name","title","alt"];for(const e of i){const t=r.getAttribute(e);t&&n.push(`[${e}="${t}"]`)}return n.join("")}function $s(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function Zs(e,t,r){try{Object.defineProperty(e,t,{value:r,writable:!0,configurable:!0})}catch{Es&&xs.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function ei(e){if(qs(e))return{message:e.message,name:e.name,stack:e.stack,...ri(e)};if(Ws(e)){const t={type:e.type,target:ti(e.target),currentTarget:ti(e.currentTarget),...ri(e)};return"undefined"!=typeof CustomEvent&&Ys(e,CustomEvent)&&(t.detail=e.detail),t}return e}function ti(e){try{return t=e,"undefined"!=typeof Element&&Ys(t,Element)?function(e,t={}){if(!e)return"<unknown>";try{let r=e;const n=5,s=[];let i=0,o=0;const a=" > ",c=a.length;let u;const h=Array.isArray(t)?t:t.keyAttrs,l=!Array.isArray(t)&&t.maxStringLength||80;for(;r&&i++<n&&(u=Xs(r,h),!("html"===u||i>1&&o+s.length*c+u.length>=l));)s.push(u),o+=u.length,r=r.parentNode;return s.reverse().join(a)}catch{return"<unknown>"}}(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}var t}function ri(e){if("object"==typeof e&&null!==e){const t={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}return{}}function ni(e=function(){const e=_s;return e.crypto||e.msCrypto}()){let t=()=>16*Math.random();try{if(e?.randomUUID)return e.randomUUID().replace(/-/g,"");e?.getRandomValues&&(t=()=>{const t=new Uint8Array(1);return e.getRandomValues(t),t[0]})}catch{}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,e=>(e^(15&t())>>e/4).toString(16))}function si(e,t,r){const n=e.exception=e.exception||{},s=n.values=n.values||[],i=s[0]=s[0]||{};i.value||(i.value=t||""),i.type||(i.type="Error")}function ii(e,t){const r=function(e){return e.exception?.values?.[0]}(e);if(!r)return;const n=r.mechanism;if(r.mechanism={type:"generic",handled:!0,...n,...t},t&&"data"in t){const e={...n?.data,...t.data};r.mechanism.data=e}}function oi(e){if(function(e){try{return e.__sentry_captured__}catch{}}(e))return!0;try{Zs(e,"__sentry_captured__",!0)}catch{}return!1}function ai(){return Date.now()/1e3}let ci;function ui(){return(ci??(ci=function(){const{performance:e}=_s;if(!e?.now||!e.timeOrigin)return ai;const t=e.timeOrigin;return()=>(t+e.now())/1e3}()))()}function hi(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||ui(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:ni()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}function li(e,t,r=2){if(!t||"object"!=typeof t||r<=0)return t;if(e&&0===Object.keys(t).length)return e;const n={...e};for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=li(n[e],t[e],r-1));return n}function di(){return ni()}function fi(){return ni().substring(16)}const pi="_sentrySpan";function mi(e,t){t?Zs(e,pi,t):delete e[pi]}function gi(e){return e[pi]}class yi{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:di(),sampleRand:Math.random()}}clone(){const e=new yi;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,mi(e,gi(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&hi(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t="function"==typeof e?e(this):e,r=t instanceof yi?t.getScopeData():Vs(t)?e:void 0,{tags:n,extra:s,user:i,contexts:o,level:a,fingerprint:c=[],propagationContext:u}=r||{};return this._tags={...this._tags,...n},this._extra={...this._extra,...s},this._contexts={...this._contexts,...o},i&&Object.keys(i).length&&(this._user=i),a&&(this._level=a),c.length&&(this._fingerprint=c),u&&(this._propagationContext=u),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,mi(this,void 0),this._attachments=[],this.setPropagationContext({traceId:di(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(e,t){const r="number"==typeof t?t:100;if(r<=0)return this;const n={timestamp:ai(),...e,message:e.message?$s(e.message,2048):e.message};return this._breadcrumbs.push(n),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:gi(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=li(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const r=t?.event_id||ni();if(!this._client)return Es&&xs.warn("No client configured on scope - will not capture exception!"),r;const n=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:n,...t,event_id:r},this),r}captureMessage(e,t,r){const n=r?.event_id||ni();if(!this._client)return Es&&xs.warn("No client configured on scope - will not capture message!"),n;const s=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:s,...r,event_id:n},this),n}captureEvent(e,t){const r=t?.event_id||ni();return this._client?(this._client.captureEvent(e,{...t,event_id:r},this),r):(Es&&xs.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}class wi{constructor(e,t){let r,n;r=e||new yi,n=t||new yi,this._stack=[{scope:r}],this._isolationScope=n}withScope(e){const t=this._pushScope();let r;try{r=e(t)}catch(e){throw this._popScope(),e}return Js(r)?r.then(e=>(this._popScope(),e),e=>{throw this._popScope(),e}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return!(this._stack.length<=1)&&!!this._stack.pop()}}function vi(){const e=Is(Rs());return e.stack=e.stack||new wi(Ts("defaultCurrentScope",()=>new yi),Ts("defaultIsolationScope",()=>new yi))}function Ai(e){return vi().withScope(e)}function bi(e,t){const r=vi();return r.withScope(()=>(r.getStackTop().scope=e,t(e)))}function Ei(e){return vi().withScope(()=>e(vi().getIsolationScope()))}function _i(e){const t=Is(e);return t.acs?t.acs:{withIsolationScope:Ei,withScope:Ai,withSetScope:bi,withSetIsolationScope:(e,t)=>Ei(t),getCurrentScope:()=>vi().getScope(),getIsolationScope:()=>vi().getIsolationScope()}}function ki(){return _i(Rs()).getCurrentScope()}function Ri(){return _i(Rs()).getIsolationScope()}function Ii(){return Ts("globalScope",()=>new yi)}function Ti(){return ki().getClient()}function Ni(e){const t=e.getPropagationContext(),{traceId:r,parentSpanId:n,propagationSpanId:s}=t,i={trace_id:r,span_id:s||fi()};return n&&(i.parent_span_id=n),i}const Si="sentry.source",Pi="sentry.sample_rate",Oi="sentry.op",Ci="sentry.origin",xi="sentry.profile_id",Mi="sentry.exclusive_time";function Ui(e){return{scope:e._sentryScope,isolationScope:e._sentryIsolationScope}}const Di=/^sentry-/;function Li(e){const t=function(e){if(!e||!zs(e)&&!Array.isArray(e))return;if(Array.isArray(e))return e.reduce((e,t)=>{const r=Bi(t);return Object.entries(r).forEach(([t,r])=>{e[t]=r}),e},{});return Bi(e)}(e);if(!t)return;const r=Object.entries(t).reduce((e,[t,r])=>{if(t.match(Di)){e[t.slice(7)]=r}return e},{});return Object.keys(r).length>0?r:void 0}function Bi(e){return e.split(",").map(e=>e.split("=").map(e=>{try{return decodeURIComponent(e.trim())}catch{return}})).reduce((e,[t,r])=>(t&&r&&(e[t]=r),e),{})}let Fi=!1;function qi(e){const{spanId:t,traceId:r,isRemote:n}=e.spanContext(),s=n?t:zi(e).parent_span_id,i=Ui(e).scope;return{parent_span_id:s,span_id:n?i?.getPropagationContext().propagationSpanId||fi():t,trace_id:r}}function ji(e){return e&&e.length>0?e.map(({context:{spanId:e,traceId:t,traceFlags:r,...n},attributes:s})=>({span_id:e,trace_id:t,sampled:1===r,attributes:s,...n})):void 0}function Gi(e){return"number"==typeof e?Hi(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?Hi(e.getTime()):ui()}function Hi(e){return e>9999999999?e/1e3:e}function zi(e){if(function(e){return"function"==typeof e.getSpanJSON}(e))return e.getSpanJSON();const{spanId:t,traceId:r}=e.spanContext();if(function(e){const t=e;return!!(t.attributes&&t.startTime&&t.name&&t.endTime&&t.status)}(e)){const{attributes:n,startTime:s,name:i,endTime:o,status:a,links:c}=e;return{span_id:t,trace_id:r,data:n,description:i,parent_span_id:"parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?e.parentSpanContext?.spanId:void 0,start_timestamp:Gi(s),timestamp:Gi(o)||void 0,status:Ki(a),op:n[Oi],origin:n[Ci],links:ji(c)}}return{span_id:t,trace_id:r,start_timestamp:0,data:{}}}function Ki(e){if(e&&0!==e.code)return 1===e.code?"ok":e.message||"unknown_error"}function Vi(e){return e._sentryRootSpan||e}function Wi(){Fi||(Ss(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly.")}),Fi=!0)}const Ji="production",Yi=/^o(\d+)\./,Qi=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Xi(e,t=!1){const{host:r,path:n,pass:s,port:i,projectId:o,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&s?`:${s}`:""}@${r}${i?`:${i}`:""}/${n?`${n}/`:n}${o}`}function $i(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function Zi(e){const t="string"==typeof e?function(e){const t=Qi.exec(e);if(!t)return void Ss(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});const[r,n,s="",i="",o="",a=""]=t.slice(1);let c="",u=a;const h=u.split("/");if(h.length>1&&(c=h.slice(0,-1).join("/"),u=h.pop()),u){const e=u.match(/^\d+/);e&&(u=e[0])}return $i({host:i,pass:s,path:c,projectId:u,port:o,protocol:r,publicKey:n})}(e):$i(e);if(t&&function(e){if(!Es)return!0;const{port:t,projectId:r,protocol:n}=e;return!(["protocol","publicKey","host","projectId"].find(t=>!e[t]&&(xs.error(`Invalid Sentry Dsn: ${t} missing`),!0))||(r.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(n)?t&&isNaN(parseInt(t,10))&&(xs.error(`Invalid Sentry Dsn: Invalid port ${t}`),1):(xs.error(`Invalid Sentry Dsn: Invalid protocol ${n}`),1):(xs.error(`Invalid Sentry Dsn: Invalid projectId ${r}`),1)))}(t))return t}function eo(e,t){const r=t.getOptions(),{publicKey:n,host:s}=t.getDsn()||{};let i;r.orgId?i=String(r.orgId):s&&(i=function(e){const t=e.match(Yi);return t?.[1]}(s));const o={environment:r.environment||Ji,release:r.release,public_key:n,trace_id:e,org_id:i};return t.emit("createDsc",o),o}function to(e){const t=Ti();if(!t)return{};const r=Vi(e),n=zi(r),s=n.data,i=r.spanContext().traceState,o=i?.get("sentry.sample_rate")??s[Pi]??s["sentry.previous_trace_sample_rate"];function a(e){return"number"!=typeof o&&"string"!=typeof o||(e.sample_rate=`${o}`),e}const c=r._frozenDsc;if(c)return a(c);const u=i?.get("sentry.dsc"),h=u&&Li(u);if(h)return a(h);const l=eo(e.spanContext().traceId,t),d=s[Si],f=n.description;return"url"!==d&&f&&(l.transaction=f),function(e){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const t=e||Ti()?.getOptions();return!(!t||null==t.tracesSampleRate&&!t.tracesSampler)}()&&(l.sampled=String(function(e){const{traceFlags:t}=e.spanContext();return 1===t}(r)),l.sample_rand=i?.get("sentry.sample_rand")??Ui(r).scope?.getPropagationContext().sampleRand.toString()),a(l),t.emit("createDsc",l,r),l}function ro(e,t=100,r=1/0){try{return so("",e,t,r)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function no(e,t=3,r=102400){const n=ro(e,t);return s=n,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(s))>r?no(e,t-1,r):n;var s}function so(e,t,r=1/0,n=1/0,s=function(){const e=new WeakSet;function t(t){return!!e.has(t)||(e.add(t),!1)}function r(t){e.delete(t)}return[t,r]}()){const[i,o]=s;if(null==t||["boolean","string"].includes(typeof t)||"number"==typeof t&&Number.isFinite(t))return t;const a=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if("undefined"!=typeof global&&t===global)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if("object"==typeof(r=t)&&null!==r&&(r.__isVue||r._isVue))return"[VueViewModel]";if(function(e){return Vs(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}(t))return"[SyntheticEvent]";if("number"==typeof t&&!Number.isFinite(t))return`[${t}]`;if("function"==typeof t)return`[Function: ${function(e){try{return e&&"function"==typeof e&&e.name||Bs}catch{return Bs}}(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const n=function(e){const t=Object.getPrototypeOf(e);return t?.constructor?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(e){return`**non-serializable** (${e})`}var r}(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const c="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:r;if(0===c)return a.replace("object ","");if(i(t))return"[Circular ~]";const u=t;if(u&&"function"==typeof u.toJSON)try{return so("",u.toJSON(),c-1,n,s)}catch{}const h=Array.isArray(t)?[]:{};let l=0;const d=ei(t);for(const e in d){if(!Object.prototype.hasOwnProperty.call(d,e))continue;if(l>=n){h[e]="[MaxProperties ~]";break}const t=d[e];h[e]=so(e,t,c-1,n,s),l++}return o(t),h}function io(e,t=[]){return[e,t]}function oo(e,t){const[r,n]=e;return[r,[...n,t]]}function ao(e,t){const r=e[1];for(const e of r){if(t(e,e[0].type))return!0}return!1}function co(e){const t=Is(_s);return t.encodePolyfill?t.encodePolyfill(e):(new TextEncoder).encode(e)}function uo(e){const[t,r]=e;let n=JSON.stringify(t);function s(e){"string"==typeof n?n="string"==typeof e?n+e:[co(n),e]:n.push("string"==typeof e?co(e):e)}for(const e of r){const[t,r]=e;if(s(`\n${JSON.stringify(t)}\n`),"string"==typeof r||r instanceof Uint8Array)s(r);else{let e;try{e=JSON.stringify(r)}catch{e=JSON.stringify(ro(r))}s(e)}}return"string"==typeof n?n:function(e){const t=e.reduce((e,t)=>e+t.length,0),r=new Uint8Array(t);let n=0;for(const t of e)r.set(t,n),n+=t.length;return r}(n)}function ho(e){const t="string"==typeof e.data?co(e.data):e.data;return[{type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType},t]}const lo={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item"};function fo(e){return lo[e]}function po(e){if(!e?.sdk)return;const{name:t,version:r}=e.sdk;return{name:t,version:r}}function mo(e,t,r,n){const s=po(r),i=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,r?.sdk);const o=function(e,t,r,n){const s=e.sdkProcessingMetadata?.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!r&&n&&{dsn:Xi(n)},...s&&{trace:s}}}(e,s,n,t);delete e.sdkProcessingMetadata;return io(o,[[{type:i},e]])}function go(e){return new wo(t=>{t(e)})}function yo(e){return new wo((t,r)=>{r(e)})}class wo{constructor(e){this._state=0,this._handlers=[],this._runExecutor(e)}then(e,t){return new wo((r,n)=>{this._handlers.push([!1,t=>{if(e)try{r(e(t))}catch(e){n(e)}else r(t)},e=>{if(t)try{r(t(e))}catch(e){n(e)}else n(e)}]),this._executeHandlers()})}catch(e){return this.then(e=>e,e)}finally(e){return new wo((t,r)=>{let n,s;return this.then(t=>{s=!1,n=t,e&&e()},t=>{s=!0,n=t,e&&e()}).then(()=>{s?r(n):t(n)})})}_executeHandlers(){if(0===this._state)return;const e=this._handlers.slice();this._handlers=[],e.forEach(e=>{e[0]||(1===this._state&&e[1](this._value),2===this._state&&e[2](this._value),e[0]=!0)})}_runExecutor(e){const t=(e,t)=>{0===this._state&&(Js(t)?t.then(r,n):(this._state=e,this._value=t,this._executeHandlers()))},r=e=>{t(1,e)},n=e=>{t(2,e)};try{e(r,n)}catch(e){n(e)}}}function vo(e,t,r,n=0){return new wo((s,i)=>{const o=e[n];if(null===t||"function"!=typeof o)s(t);else{const a=o({...t},r);Es&&o.id&&null===a&&xs.log(`Event processor "${o.id}" dropped event`),Js(a)?a.then(t=>vo(e,t,r,n+1).then(s)).then(null,i):vo(e,a,r,n+1).then(s).then(null,i)}})}function Ao(e,t){const{fingerprint:r,span:n,breadcrumbs:s,sdkProcessingMetadata:i}=t;!function(e,t){const{extra:r,tags:n,user:s,contexts:i,level:o,transactionName:a}=t;Object.keys(r).length&&(e.extra={...r,...e.extra});Object.keys(n).length&&(e.tags={...n,...e.tags});Object.keys(s).length&&(e.user={...s,...e.user});Object.keys(i).length&&(e.contexts={...i,...e.contexts});o&&(e.level=o);a&&"transaction"!==e.type&&(e.transaction=a)}(e,t),n&&function(e,t){e.contexts={trace:qi(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:to(t),...e.sdkProcessingMetadata};const r=Vi(t),n=zi(r).description;n&&!e.transaction&&"transaction"===e.type&&(e.transaction=n)}(e,n),function(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t));e.fingerprint.length||delete e.fingerprint}(e,r),function(e,t){const r=[...e.breadcrumbs||[],...t];e.breadcrumbs=r.length?r:void 0}(e,s),function(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}(e,i)}function bo(e,t){const{extra:r,tags:n,user:s,contexts:i,level:o,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:u,eventProcessors:h,attachments:l,propagationContext:d,transactionName:f,span:p}=t;Eo(e,"extra",r),Eo(e,"tags",n),Eo(e,"user",s),Eo(e,"contexts",i),e.sdkProcessingMetadata=li(e.sdkProcessingMetadata,a,2),o&&(e.level=o),f&&(e.transactionName=f),p&&(e.span=p),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),u.length&&(e.fingerprint=[...e.fingerprint,...u]),h.length&&(e.eventProcessors=[...e.eventProcessors,...h]),l.length&&(e.attachments=[...e.attachments,...l]),e.propagationContext={...e.propagationContext,...d}}function Eo(e,t,r){e[t]=li(e[t],r,1)}let _o,ko,Ro;function Io(e,t,r,n,s,i){const{normalizeDepth:o=3,normalizeMaxBreadth:a=1e3}=e,c={...t,event_id:t.event_id||r.event_id||ni(),timestamp:t.timestamp||ai()},u=r.integrations||e.integrations.map(e=>e.name);!function(e,t){const{environment:r,release:n,dist:s,maxValueLength:i=250}=t;e.environment=e.environment||r||Ji,!e.release&&n&&(e.release=n);!e.dist&&s&&(e.dist=s);const o=e.request;o?.url&&(o.url=$s(o.url,i))}(c,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(c,u),s&&s.emit("applyFrameMetadata",t),void 0===t.type&&function(e,t){const r=function(e){const t=_s._sentryDebugIds;if(!t)return{};const r=Object.keys(t);return Ro&&r.length===ko||(ko=r.length,Ro=r.reduce((r,n)=>{_o||(_o={});const s=_o[n];if(s)r[s[0]]=s[1];else{const s=e(n);for(let e=s.length-1;e>=0;e--){const i=s[e],o=i?.filename,a=t[n];if(o&&a){r[o]=a,_o[n]=[o,a];break}}}return r},{})),Ro}(t);e.exception?.values?.forEach(e=>{e.stacktrace?.frames?.forEach(e=>{e.filename&&(e.debug_id=r[e.filename])})})}(c,e.stackParser);const h=function(e,t){if(!t)return e;const r=e?e.clone():new yi;return r.update(t),r}(n,r.captureContext);r.mechanism&&ii(c,r.mechanism);const l=s?s.getEventProcessors():[],d=Ii().getScopeData();if(i){bo(d,i.getScopeData())}if(h){bo(d,h.getScopeData())}const f=[...r.attachments||[],...d.attachments];f.length&&(r.attachments=f),Ao(c,d);return vo([...l,...d.eventProcessors],c,r).then(e=>(e&&function(e){const t={};if(e.exception?.values?.forEach(e=>{e.stacktrace?.frames?.forEach(e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)})}),0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const r=e.debug_meta.images;Object.entries(t).forEach(([e,t])=>{r.push({type:"sourcemap",code_file:e,debug_id:t})})}(e),"number"==typeof o&&o>0?function(e,t,r){if(!e)return null;const n={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(e=>({...e,...e.data&&{data:ro(e.data,t,r)}}))},...e.user&&{user:ro(e.user,t,r)},...e.contexts&&{contexts:ro(e.contexts,t,r)},...e.extra&&{extra:ro(e.extra,t,r)}};e.contexts?.trace&&n.contexts&&(n.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(n.contexts.trace.data=ro(e.contexts.trace.data,t,r)));e.spans&&(n.spans=e.spans.map(e=>({...e,...e.data&&{data:ro(e.data,t,r)}})));e.contexts?.flags&&n.contexts&&(n.contexts.flags=ro(e.contexts.flags,3,r));return n}(e,o,a):e))}function To(e,t,r){return t||`${function(e){return`${function(e){const t=e.protocol?`${e.protocol}:`:"",r=e.port?`:${e.port}`:"";return`${t}//${e.host}${r}${e.path?`/${e.path}`:""}/api/`}(e)}${e.projectId}/envelope/`}(e)}?${function(e,t){const r={sentry_version:"7"};return e.publicKey&&(r.sentry_key=e.publicKey),t&&(r.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(r).toString()}(e,r)}`}const No=[];function So(e,t){for(const r of t)r?.afterAllSetup&&r.afterAllSetup(e)}function Po(e,t,r){if(r[t.name])Es&&xs.log(`Integration skipped because it was already installed: ${t.name}`);else{if(r[t.name]=t,-1===No.indexOf(t.name)&&"function"==typeof t.setupOnce&&(t.setupOnce(),No.push(t.name)),t.setup&&"function"==typeof t.setup&&t.setup(e),"function"==typeof t.preprocessEvent){const r=t.preprocessEvent.bind(t);e.on("preprocessEvent",(t,n)=>r(t,n,e))}if("function"==typeof t.processEvent){const r=t.processEvent.bind(t),n=Object.assign((t,n)=>r(t,n,e),{id:t.name});e.addEventProcessor(n)}Es&&xs.log(`Integration installed: ${t.name}`)}}const Oo="Not capturing exception because it's already been captured.",Co="Discarded session because of missing or non-string release",xo=Symbol.for("SentryInternalError"),Mo=Symbol.for("SentryDoNotSendEventError");function Uo(e){return{message:e,[xo]:!0}}function Do(e){return{message:e,[Mo]:!0}}function Lo(e){return!!e&&"object"==typeof e&&xo in e}function Bo(e){return!!e&&"object"==typeof e&&Mo in e}class Fo{constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=Zi(e.dsn):Es&&xs.warn("No DSN provided, client will not send events."),this._dsn){const t=To(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}}captureException(e,t,r){const n=ni();if(oi(e))return Es&&xs.log(Oo),n;const s={event_id:n,...t};return this._process(this.eventFromException(e,s).then(e=>this._captureEvent(e,s,r))),s.event_id}captureMessage(e,t,r,n){const s={event_id:ni(),...r},i=Ks(e)?e:String(e),o=null===(a=e)||Ks(a)||"object"!=typeof a&&"function"!=typeof a?this.eventFromMessage(i,t,s):this.eventFromException(e,s);var a;return this._process(o.then(e=>this._captureEvent(e,s,n))),s.event_id}captureEvent(e,t,r){const n=ni();if(t?.originalException&&oi(t.originalException))return Es&&xs.log(Oo),n;const s={event_id:n,...t},i=e.sdkProcessingMetadata||{},o=i.capturedSpanScope,a=i.capturedSpanIsolationScope;return this._process(this._captureEvent(e,s,o||r,a)),s.event_id}captureSession(e){this.sendSession(e),hi(e,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?(this.emit("flush"),this._isClientDoneProcessing(e).then(r=>t.flush(e).then(e=>r&&e))):go(!0)}close(e){return this.flush(e).then(e=>(this.getOptions().enabled=!1,this.emit("close"),e))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some(({name:e})=>e.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){const t=this._integrations[e.name];Po(this,e,this._integrations),t||So(this,[e])}sendEvent(e,t={}){this.emit("beforeSendEvent",e,t);let r=mo(e,this._dsn,this._options._metadata,this._options.tunnel);for(const e of t.attachments||[])r=oo(r,ho(e));const n=this.sendEnvelope(r);n&&n.then(t=>this.emit("afterSendEvent",e,t),null)}sendSession(e){const{release:t,environment:r=Ji}=this._options;if("aggregates"in e){const n=e.attrs||{};if(!n.release&&!t)return void(Es&&xs.warn(Co));n.release=n.release||t,n.environment=n.environment||r,e.attrs=n}else{if(!e.release&&!t)return void(Es&&xs.warn(Co));e.release=e.release||t,e.environment=e.environment||r}this.emit("beforeSendSession",e);const n=function(e,t,r,n){const s=po(r);return io({sent_at:(new Date).toISOString(),...s&&{sdk:s},...!!n&&t&&{dsn:Xi(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(n)}recordDroppedEvent(e,t,r=1){if(this._options.sendClientReports){const n=`${e}:${t}`;Es&&xs.log(`Recording outcome: "${n}"${r>1?` (${r} times)`:""}`),this._outcomes[n]=(this._outcomes[n]||0)+r}}on(e,t){const r=this._hooks[e]=this._hooks[e]||[];return r.push(t),()=>{const e=r.indexOf(t);e>-1&&r.splice(e,1)}}emit(e,...t){const r=this._hooks[e];r&&r.forEach(e=>e(...t))}sendEnvelope(e){return this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport?this._transport.send(e).then(null,e=>(Es&&xs.error("Error while sending envelope:",e),e)):(Es&&xs.error("Transport disabled"),go({}))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=function(e,t){const r={};return t.forEach(t=>{t&&Po(e,t,r)}),r}(this,e),So(this,e)}_updateSessionFromEvent(e,t){let r="fatal"===t.level,n=!1;const s=t.exception?.values;if(s){n=!0;for(const e of s){const t=e.mechanism;if(!1===t?.handled){r=!0;break}}}const i="ok"===e.status;(i&&0===e.errors||i&&r)&&(hi(e,{...r&&{status:"crashed"},errors:e.errors||Number(n||r)}),this.captureSession(e))}_isClientDoneProcessing(e){return new wo(t=>{let r=0;const n=setInterval(()=>{0==this._numProcessing?(clearInterval(n),t(!0)):(r+=1,e&&r>=e&&(clearInterval(n),t(!1)))},1)})}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,r,n){const s=this.getOptions(),i=Object.keys(this._integrations);return!t.integrations&&i?.length&&(t.integrations=i),this.emit("preprocessEvent",e,t),e.type||n.setLastEventId(e.event_id||t.event_id),Io(s,e,t,r,this,n).then(e=>{if(null===e)return e;this.emit("postprocessEvent",e,t),e.contexts={trace:Ni(r),...e.contexts};const n=function(e,t){const r=t.getPropagationContext();return r.dsc||eo(r.traceId,e)}(this,r);return e.sdkProcessingMetadata={dynamicSamplingContext:n,...e.sdkProcessingMetadata},e})}_captureEvent(e,t={},r=ki(),n=Ri()){return Es&&qo(e)&&xs.log(`Captured error event \`${function(e){const t=[];e.message&&t.push(e.message);try{const r=e.exception.values[e.exception.values.length-1];r?.value&&(t.push(r.value),r.type&&t.push(`${r.type}: ${r.value}`))}catch{}return t}(e)[0]||"<unknown>"}\``),this._processEvent(e,t,r,n).then(e=>e.event_id,e=>{Es&&(Bo(e)?xs.log(e.message):Lo(e)?xs.warn(e.message):xs.warn(e))})}_processEvent(e,t,r,n){const s=this.getOptions(),{sampleRate:i}=s,o=jo(e),a=qo(e),c=e.type||"error",u=`before send for type \`${c}\``,h=void 0===i?void 0:function(e){if("boolean"==typeof e)return Number(e);const t="string"==typeof e?parseFloat(e):e;return"number"!=typeof t||isNaN(t)||t<0||t>1?void 0:t}(i);if(a&&"number"==typeof h&&Math.random()>h)return this.recordDroppedEvent("sample_rate","error"),yo(Do(`Discarding event because it's not included in the random sample (sampling rate = ${i})`));const l="replay_event"===c?"replay":c;return this._prepareEvent(e,t,r,n).then(e=>{if(null===e)throw this.recordDroppedEvent("event_processor",l),Do("An event processor returned `null`, will not send event.");if(t.data&&!0===t.data.__sentry__)return e;const r=function(e,t,r,n){const{beforeSend:s,beforeSendTransaction:i,beforeSendSpan:o}=t;let a=r;if(qo(a)&&s)return s(a,n);if(jo(a)){if(o){const e=o(function(e){const{trace_id:t,parent_span_id:r,span_id:n,status:s,origin:i,data:o,op:a}=e.contexts?.trace??{};return{data:o??{},description:e.transaction,op:a,parent_span_id:r,span_id:n??"",start_timestamp:e.start_timestamp??0,status:s,timestamp:e.timestamp,trace_id:t??"",origin:i,profile_id:o?.[xi],exclusive_time:o?.[Mi],measurements:e.measurements,is_segment:!0}}(a));if(e?a=li(r,{type:"transaction",timestamp:(c=e).timestamp,start_timestamp:c.start_timestamp,transaction:c.description,contexts:{trace:{trace_id:c.trace_id,span_id:c.span_id,parent_span_id:c.parent_span_id,op:c.op,status:c.status,origin:c.origin,data:{...c.data,...c.profile_id&&{[xi]:c.profile_id},...c.exclusive_time&&{[Mi]:c.exclusive_time}}}},measurements:c.measurements}):Wi(),a.spans){const e=[];for(const t of a.spans){const r=o(t);r?e.push(r):(Wi(),e.push(t))}a.spans=e}}if(i){if(a.spans){const e=a.spans.length;a.sdkProcessingMetadata={...r.sdkProcessingMetadata,spanCountBeforeProcessing:e}}return i(a,n)}}var c;return a}(0,s,e,t);return function(e,t){const r=`${t} must return \`null\` or a valid event.`;if(Js(e))return e.then(e=>{if(!Vs(e)&&null!==e)throw Uo(r);return e},e=>{throw Uo(`${t} rejected with ${e}`)});if(!Vs(e)&&null!==e)throw Uo(r);return e}(r,u)}).then(s=>{if(null===s){if(this.recordDroppedEvent("before_send",l),o){const t=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",t)}throw Do(`${u} returned \`null\`, will not send event.`)}const i=r.getSession()||n.getSession();if(a&&i&&this._updateSessionFromEvent(i,s),o){const e=(s.sdkProcessingMetadata?.spanCountBeforeProcessing||0)-(s.spans?s.spans.length:0);e>0&&this.recordDroppedEvent("before_send","span",e)}const c=s.transaction_info;if(o&&c&&s.transaction!==e.transaction){const e="custom";s.transaction_info={...c,source:e}}return this.sendEvent(s,t),s}).then(null,e=>{if(Bo(e)||Lo(e))throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),Uo(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)})}_process(e){this._numProcessing++,e.then(e=>(this._numProcessing--,e),e=>(this._numProcessing--,e))}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.entries(e).map(([e,t])=>{const[r,n]=e.split(":");return{reason:r,category:n,quantity:t}})}_flushOutcomes(){Es&&xs.log("Flushing outcomes...");const e=this._clearOutcomes();if(0===e.length)return void(Es&&xs.log("No outcomes to send"));if(!this._dsn)return void(Es&&xs.log("No dsn provided, will not send outcomes"));Es&&xs.log("Sending outcomes:",e);const t=(r=e,io((n=this._options.tunnel&&Xi(this._dsn))?{dsn:n}:{},[[{type:"client_report"},{timestamp:ai(),discarded_events:r}]]));var r,n;this.sendEnvelope(t)}}function qo(e){return void 0===e.type}function jo(e){return"transaction"===e.type}function Go(e,t){const r=function(e){return Ho().get(e)}(e)??[];if(0===r.length)return;const n=e.getOptions(),s=function(e,t,r,n){const s={};return t?.sdk&&(s.sdk={name:t.sdk.name,version:t.sdk.version}),r&&n&&(s.dsn=Xi(n)),io(s,[(i=e,[{type:"log",item_count:i.length,content_type:"application/vnd.sentry.items.log+json"},{items:i}])]);var i}(r,n._metadata,n.tunnel,e.getDsn());Ho().set(e,[]),e.emit("flushLogs"),e.sendEnvelope(s)}function Ho(){return Ts("clientToLogBufferMap",()=>new WeakMap)}const zo=Symbol.for("SentryBufferFullError");function Ko(e){const t=[];function r(e){return t.splice(t.indexOf(e),1)[0]||Promise.resolve(void 0)}return{$:t,add:function(n){if(!(void 0===e||t.length<e))return yo(zo);const s=n();return-1===t.indexOf(s)&&t.push(s),s.then(()=>r(s)).then(null,()=>r(s).then(null,()=>{})),s},drain:function(e){return new wo((r,n)=>{let s=t.length;if(!s)return r(!0);const i=setTimeout(()=>{e&&e>0&&r(!1)},e);t.forEach(e=>{go(e).then(()=>{--s||(clearTimeout(i),r(!0))},n)})})}}}function Vo(e,{statusCode:t,headers:r},n=Date.now()){const s={...e},i=r?.["x-sentry-rate-limits"],o=r?.["retry-after"];if(i)for(const e of i.trim().split(",")){const[t,r,,,i]=e.split(":",5),o=parseInt(t,10),a=1e3*(isNaN(o)?60:o);if(r)for(const e of r.split(";"))"metric_bucket"===e&&i&&!i.split(";").includes("custom")||(s[e]=n+a);else s.all=n+a}else o?s.all=n+function(e,t=Date.now()){const r=parseInt(`${e}`,10);if(!isNaN(r))return 1e3*r;const n=Date.parse(`${e}`);return isNaN(n)?6e4:n-t}(o,n):429===t&&(s.all=n+6e4);return s}function Wo(e,t,r=Ko(e.bufferSize||64)){let n={};return{send:function(s){const i=[];if(ao(s,(t,r)=>{const s=fo(r);!function(e,t,r=Date.now()){return function(e,t){return e[t]||e.all||0}(e,t)>r}(n,s)?i.push(t):e.recordDroppedEvent("ratelimit_backoff",s)}),0===i.length)return go({});const o=io(s[0],i),a=t=>{ao(o,(r,n)=>{e.recordDroppedEvent(t,fo(n))})};return r.add(()=>t({body:uo(o)}).then(e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&Es&&xs.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),n=Vo(n,e),e),e=>{throw a("network_error"),Es&&xs.error("Encountered error running transport request:",e),e})).then(e=>e,e=>{if(e===zo)return Es&&xs.error("Skipped sending event because buffer is full."),a("queue_overflow"),go({});throw e})},flush:e=>r.drain(e)}}function Jo(e){void 0===e.user?.ip_address&&(e.user={...e.user,ip_address:"{{auto}}"})}function Yo(e){"aggregates"in e?void 0===e.attrs?.ip_address&&(e.attrs={...e.attrs,ip_address:"{{auto}}"}):void 0===e.ipAddress&&(e.ipAddress="{{auto}}")}const Qo=_s;function Xo(e,t){const r=ea(e,t),n={type:na(t),value:sa(t)};return r.length&&(n.stacktrace={frames:r}),void 0===n.type&&""===n.value&&(n.value="Unrecoverable error caught"),n}function $o(e,t,r,n){const s=Ti(),i=s?.getOptions().normalizeDepth,o=function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const r=e[t];if(r instanceof Error)return r}return}(t),a={__serialized__:no(t,i)};if(o)return{exception:{values:[Xo(e,o)]},extra:a};const c={exception:{values:[{type:Ws(t)?t.constructor.name:n?"UnhandledRejection":"Error",value:ca(t,{isUnhandledRejection:n})}]},extra:a};if(r){const t=ea(e,r);t.length&&(c.exception.values[0].stacktrace={frames:t})}return c}function Zo(e,t){return{exception:{values:[Xo(e,t)]}}}function ea(e,t){const r=t.stacktrace||t.stack||"",n=function(e){if(e&&ta.test(e.message))return 1;return 0}(t),s=function(e){if("number"==typeof e.framesToPop)return e.framesToPop;return 0}(t);try{return e(r,n,s)}catch{}return[]}const ta=/Minified React error #\d+;/i;function ra(e){return"undefined"!=typeof WebAssembly&&void 0!==WebAssembly.Exception&&e instanceof WebAssembly.Exception}function na(e){const t=e?.name;if(!t&&ra(e)){return e.message&&Array.isArray(e.message)&&2==e.message.length?e.message[0]:"WebAssembly.Exception"}return t}function sa(e){const t=e?.message;return ra(e)?Array.isArray(e.message)&&2==e.message.length?e.message[1]:"wasm exception":t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function ia(e,t,r,n){const s=function(e,t,r,n,s){let i;if(Gs(t)&&t.error){return Zo(e,t.error)}if(Hs(t)||(o=t,js(o,"DOMException"))){const s=t;if("stack"in t)i=Zo(e,t);else{const t=s.name||(Hs(s)?"DOMError":"DOMException"),o=s.message?`${t}: ${s.message}`:t;i=aa(e,o,r,n),si(i,o)}return"code"in s&&(i.tags={...i.tags,"DOMException.code":`${s.code}`}),i}var o;if(qs(t))return Zo(e,t);if(Vs(t)||Ws(t)){return i=$o(e,t,r,s),ii(i,{synthetic:!0}),i}return i=aa(e,t,r,n),si(i,`${t}`),ii(i,{synthetic:!0}),i}(e,t,r?.syntheticException||void 0,n);return ii(s),s.level="error",r?.event_id&&(s.event_id=r.event_id),go(s)}function oa(e,t,r="info",n,s){const i=aa(e,t,n?.syntheticException||void 0,s);return i.level=r,n?.event_id&&(i.event_id=n.event_id),go(i)}function aa(e,t,r,n){const s={};if(n&&r){const n=ea(e,r);n.length&&(s.exception={values:[{value:t,stacktrace:{frames:n}}]}),ii(s,{synthetic:!0})}if(Ks(t)){const{__sentry_template_string__:e,__sentry_template_values__:r}=t;return s.logentry={message:e,params:r},s}return s.message=t,s}function ca(e,{isUnhandledRejection:t}){const r=function(e,t=40){const r=Object.keys(ei(e));r.sort();const n=r[0];if(!n)return"[object has no keys]";if(n.length>=t)return $s(n,t);for(let e=r.length;e>0;e--){const n=r.slice(0,e).join(", ");if(!(n.length>t))return e===r.length?n:$s(n,t)}return""}(e),n="exception";if(Gs(e))return`Event \`ErrorEvent\` captured as ${n} with message \`${e.message}\``;if(Ws(e)){const t=function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}(e);return`Event \`${t}\` (type=${e.type}) captured as ${n}`}return`Object captured as ${n} with keys: ${r}`}const ua="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,ha=_s,la={};function da(e){la[e]=void 0}function fa(e,t,r,n){const s={filename:e,function:"<anonymous>"===t?Ms:t,in_app:!0};return void 0!==r&&(s.lineno=r),void 0!==n&&(s.colno=n),s}const pa=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,ma=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,ga=/\((\S*)(?::(\d+))(?::(\d+))\)/,ya=[30,e=>{const t=pa.exec(e);if(t){const[,e,r,n]=t;return fa(e,Ms,+r,+n)}const r=ma.exec(e);if(r){if(r[2]&&0===r[2].indexOf("eval")){const e=ga.exec(r[2]);e&&(r[2]=e[1],r[3]=e[2],r[4]=e[3])}const[e,t]=_a(r[1]||Ms,r[2]);return fa(t,e,r[3]?+r[3]:void 0,r[4]?+r[4]:void 0)}}],wa=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,va=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Aa=[50,e=>{const t=wa.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=va.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],r=t[1]||Ms;return[r,e]=_a(r,e),fa(e,r,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],ba=[ya,Aa],Ea=function(...e){const t=e.sort((e,t)=>e[0]-t[0]).map(e=>e[1]);return(e,r=0,n=0)=>{const s=[],i=e.split("\n");for(let e=r;e<i.length;e++){const r=i[e];if(r.length>1024)continue;const o=Us.test(r)?r.replace(Us,"$1"):r;if(!o.match(/\S*Error: /)){for(const e of t){const t=e(o);if(t){s.push(t);break}}if(s.length>=50+n)break}}return function(e){if(!e.length)return[];const t=Array.from(e);/sentryWrapped/.test(Ls(t).function||"")&&t.pop();t.reverse(),Ds.test(Ls(t).function||"")&&(t.pop(),Ds.test(Ls(t).function||"")&&t.pop());return t.slice(0,50).map(e=>({...e,filename:e.filename||Ls(t).filename,function:e.function||Ms}))}(s.slice(n))}}(...ba),_a=(e,t)=>{const r=-1!==e.indexOf("safari-extension"),n=-1!==e.indexOf("safari-web-extension");return r||n?[-1!==e.indexOf("@")?e.split("@")[0]:Ms,r?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]};var ka,Ra=Object.freeze({__proto__:null,BrowserClient:class extends Fo{constructor(e){const t=(r=e,{release:"string"==typeof __SENTRY_RELEASE__?__SENTRY_RELEASE__:Qo.SENTRY_RELEASE?.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0,...r});var r;!function(e,t,r=[t],n="npm"){const s=e._metadata||{};s.sdk||(s.sdk={name:`sentry.javascript.${t}`,packages:r.map(e=>({name:`${n}:@sentry/${e}`,version:ks})),version:ks}),e._metadata=s}(t,"browser",["browser"],Qo.SENTRY_SDK_SOURCE||"npm"),super(t);const{sendDefaultPii:n,sendClientReports:s,enableLogs:i,_experiments:o}=this._options,a=i??o?.enableLogs;Qo.document&&(s||a)&&Qo.document.addEventListener("visibilitychange",()=>{"hidden"===Qo.document.visibilityState&&(s&&this._flushOutcomes(),a&&Go(this))}),a&&(this.on("flush",()=>{Go(this)}),this.on("afterCaptureLog",()=>{this._logFlushIdleTimeout&&clearTimeout(this._logFlushIdleTimeout),this._logFlushIdleTimeout=setTimeout(()=>{Go(this)},5e3)})),n&&(this.on("postprocessEvent",Jo),this.on("beforeSendSession",Yo))}eventFromException(e,t){return ia(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",r){return oa(this._options.stackParser,e,t,r,this._options.attachStacktrace)}_prepareEvent(e,t,r,n){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,r,n)}},SDK_VERSION:ks,SEMANTIC_ATTRIBUTE_SENTRY_OP:Oi,SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN:Ci,SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE:Pi,SEMANTIC_ATTRIBUTE_SENTRY_SOURCE:Si,Scope:yi,WINDOW:Qo,chromeStackLineParser:ya,createTransport:Wo,defaultStackLineParsers:ba,defaultStackParser:Ea,eventFromException:ia,eventFromMessage:oa,exceptionFromError:Xo,geckoStackLineParser:Aa,getClient:Ti,getCurrentScope:ki,getGlobalScope:Ii,getIsolationScope:Ri,getRootSpan:Vi,makeFetchTransport:function(e,t=function(e){const t=la[e];if(t)return t;let r=ha[e];if((n=r)&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(n.toString()))return la[e]=r.bind(ha);var n;const s=ha.document;if(s&&"function"==typeof s.createElement)try{const t=s.createElement("iframe");t.hidden=!0,s.head.appendChild(t);const n=t.contentWindow;n?.[e]&&(r=n[e]),s.head.removeChild(t)}catch(t){ua&&xs.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,t)}return r?la[e]=r.bind(ha):r}("fetch")){let r=0,n=0;return Wo(e,function(s){const i=s.body.length;r+=i,n++;const o={body:s.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:r<=6e4&&n<15,...e.fetchOptions};if(!t)return da("fetch"),yo("No fetch implementation available");try{return t(e.url,o).then(e=>(r-=i,n--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}}))}catch(e){return da("fetch"),r-=i,n--,yo(e)}})},spanToJSON:zi}),Ia={exports:{}};
/**
   * [js-sha3]{@link https://github.com/emn178/js-sha3}
   *
   * @version 0.8.0
   * @author Chen, Yi-Cyuan [emn178@gmail.com]
   * @copyright Chen, Yi-Cyuan 2015-2018
   * @license MIT
   */
ka=Ia,function(){var e="input is invalid type",t="object"==typeof window,r=t?window:{};r.JS_SHA3_NO_WINDOW&&(t=!1);var n=!t&&"object"==typeof self;!r.JS_SHA3_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node?r=_t:n&&(r=self);var s=!r.JS_SHA3_NO_COMMON_JS&&ka.exports,i=!r.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,o="0123456789abcdef".split(""),a=[4,1024,262144,67108864],c=[0,8,16,24],u=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],h=[224,256,384,512],l=[128,256],d=["hex","buffer","arrayBuffer","array","digest"],f={128:168,256:136};!r.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!i||!r.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});for(var p=function(e,t,r){return function(n){return new S(e,t,e).update(n)[r]()}},m=function(e,t,r){return function(n,s){return new S(e,t,s).update(n)[r]()}},g=function(e,t,r){return function(t,n,s,i){return b["cshake"+e].update(t,n,s,i)[r]()}},y=function(e,t,r){return function(t,n,s,i){return b["kmac"+e].update(t,n,s,i)[r]()}},w=function(e,t,r,n){for(var s=0;s<d.length;++s){var i=d[s];e[i]=t(r,n,i)}return e},v=function(e,t){var r=p(e,t,"hex");return r.create=function(){return new S(e,t,e)},r.update=function(e){return r.create().update(e)},w(r,p,e,t)},A=[{name:"keccak",padding:[1,256,65536,16777216],bits:h,createMethod:v},{name:"sha3",padding:[6,1536,393216,100663296],bits:h,createMethod:v},{name:"shake",padding:[31,7936,2031616,520093696],bits:l,createMethod:function(e,t){var r=m(e,t,"hex");return r.create=function(r){return new S(e,t,r)},r.update=function(e,t){return r.create(t).update(e)},w(r,m,e,t)}},{name:"cshake",padding:a,bits:l,createMethod:function(e,t){var r=f[e],n=g(e,0,"hex");return n.create=function(n,s,i){return s||i?new S(e,t,n).bytepad([s,i],r):b["shake"+e].create(n)},n.update=function(e,t,r,s){return n.create(t,r,s).update(e)},w(n,g,e,t)}},{name:"kmac",padding:a,bits:l,createMethod:function(e,t){var r=f[e],n=y(e,0,"hex");return n.create=function(n,s,i){return new P(e,t,s).bytepad(["KMAC",i],r).bytepad([n],r)},n.update=function(e,t,r,s){return n.create(e,r,s).update(t)},w(n,y,e,t)}}],b={},E=[],_=0;_<A.length;++_)for(var k=A[_],R=k.bits,I=0;I<R.length;++I){var T=k.name+"_"+R[I];if(E.push(T),b[T]=k.createMethod(R[I],k.padding),"sha3"!==k.name){var N=k.name+R[I];E.push(N),b[N]=b[T]}}function S(e,t,r){this.blocks=[],this.s=[],this.padding=t,this.outputBits=r,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(e<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=r>>5,this.extraBytes=(31&r)>>3;for(var n=0;n<50;++n)this.s[n]=0}function P(e,t,r){S.call(this,e,t,r)}S.prototype.update=function(t){if(this.finalized)throw new Error("finalize already called");var r,n=typeof t;if("string"!==n){if("object"!==n)throw new Error(e);if(null===t)throw new Error(e);if(i&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||i&&ArrayBuffer.isView(t)))throw new Error(e);r=!0}for(var s,o,a=this.blocks,u=this.byteCount,h=t.length,l=this.blockCount,d=0,f=this.s;d<h;){if(this.reset)for(this.reset=!1,a[0]=this.block,s=1;s<l+1;++s)a[s]=0;if(r)for(s=this.start;d<h&&s<u;++d)a[s>>2]|=t[d]<<c[3&s++];else for(s=this.start;d<h&&s<u;++d)(o=t.charCodeAt(d))<128?a[s>>2]|=o<<c[3&s++]:o<2048?(a[s>>2]|=(192|o>>6)<<c[3&s++],a[s>>2]|=(128|63&o)<<c[3&s++]):o<55296||o>=57344?(a[s>>2]|=(224|o>>12)<<c[3&s++],a[s>>2]|=(128|o>>6&63)<<c[3&s++],a[s>>2]|=(128|63&o)<<c[3&s++]):(o=65536+((1023&o)<<10|1023&t.charCodeAt(++d)),a[s>>2]|=(240|o>>18)<<c[3&s++],a[s>>2]|=(128|o>>12&63)<<c[3&s++],a[s>>2]|=(128|o>>6&63)<<c[3&s++],a[s>>2]|=(128|63&o)<<c[3&s++]);if(this.lastByteIndex=s,s>=u){for(this.start=s-u,this.block=a[l],s=0;s<l;++s)f[s]^=a[s];O(f),this.reset=!0}else this.start=s}return this},S.prototype.encode=function(e,t){var r=255&e,n=1,s=[r];for(r=255&(e>>=8);r>0;)s.unshift(r),r=255&(e>>=8),++n;return t?s.push(n):s.unshift(n),this.update(s),s.length},S.prototype.encodeString=function(t){var r,n=typeof t;if("string"!==n){if("object"!==n)throw new Error(e);if(null===t)throw new Error(e);if(i&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||i&&ArrayBuffer.isView(t)))throw new Error(e);r=!0}var s=0,o=t.length;if(r)s=o;else for(var a=0;a<t.length;++a){var c=t.charCodeAt(a);c<128?s+=1:c<2048?s+=2:c<55296||c>=57344?s+=3:(c=65536+((1023&c)<<10|1023&t.charCodeAt(++a)),s+=4)}return s+=this.encode(8*s),this.update(t),s},S.prototype.bytepad=function(e,t){for(var r=this.encode(t),n=0;n<e.length;++n)r+=this.encodeString(e[n]);var s=t-r%t,i=[];return i.length=s,this.update(i),this},S.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex,r=this.blockCount,n=this.s;if(e[t>>2]|=this.padding[3&t],this.lastByteIndex===this.byteCount)for(e[0]=e[r],t=1;t<r+1;++t)e[t]=0;for(e[r-1]|=2147483648,t=0;t<r;++t)n[t]^=e[t];O(n)}},S.prototype.toString=S.prototype.hex=function(){this.finalize();for(var e,t=this.blockCount,r=this.s,n=this.outputBlocks,s=this.extraBytes,i=0,a=0,c="";a<n;){for(i=0;i<t&&a<n;++i,++a)e=r[i],c+=o[e>>4&15]+o[15&e]+o[e>>12&15]+o[e>>8&15]+o[e>>20&15]+o[e>>16&15]+o[e>>28&15]+o[e>>24&15];a%t===0&&(O(r),i=0)}return s&&(e=r[i],c+=o[e>>4&15]+o[15&e],s>1&&(c+=o[e>>12&15]+o[e>>8&15]),s>2&&(c+=o[e>>20&15]+o[e>>16&15])),c},S.prototype.arrayBuffer=function(){this.finalize();var e,t=this.blockCount,r=this.s,n=this.outputBlocks,s=this.extraBytes,i=0,o=0,a=this.outputBits>>3;e=s?new ArrayBuffer(n+1<<2):new ArrayBuffer(a);for(var c=new Uint32Array(e);o<n;){for(i=0;i<t&&o<n;++i,++o)c[o]=r[i];o%t===0&&O(r)}return s&&(c[i]=r[i],e=e.slice(0,a)),e},S.prototype.buffer=S.prototype.arrayBuffer,S.prototype.digest=S.prototype.array=function(){this.finalize();for(var e,t,r=this.blockCount,n=this.s,s=this.outputBlocks,i=this.extraBytes,o=0,a=0,c=[];a<s;){for(o=0;o<r&&a<s;++o,++a)e=a<<2,t=n[o],c[e]=255&t,c[e+1]=t>>8&255,c[e+2]=t>>16&255,c[e+3]=t>>24&255;a%r===0&&O(n)}return i&&(e=a<<2,t=n[o],c[e]=255&t,i>1&&(c[e+1]=t>>8&255),i>2&&(c[e+2]=t>>16&255)),c},P.prototype=new S,P.prototype.finalize=function(){return this.encode(this.outputBits,!0),S.prototype.finalize.call(this)};var O=function(e){var t,r,n,s,i,o,a,c,h,l,d,f,p,m,g,y,w,v,A,b,E,_,k,R,I,T,N,S,P,O,C,x,M,U,D,L,B,F,q,j,G,H,z,K,V,W,J,Y,Q,X,$,Z,ee,te,re,ne,se,ie,oe,ae,ce,ue,he;for(n=0;n<48;n+=2)s=e[0]^e[10]^e[20]^e[30]^e[40],i=e[1]^e[11]^e[21]^e[31]^e[41],o=e[2]^e[12]^e[22]^e[32]^e[42],a=e[3]^e[13]^e[23]^e[33]^e[43],c=e[4]^e[14]^e[24]^e[34]^e[44],h=e[5]^e[15]^e[25]^e[35]^e[45],l=e[6]^e[16]^e[26]^e[36]^e[46],d=e[7]^e[17]^e[27]^e[37]^e[47],t=(f=e[8]^e[18]^e[28]^e[38]^e[48])^(o<<1|a>>>31),r=(p=e[9]^e[19]^e[29]^e[39]^e[49])^(a<<1|o>>>31),e[0]^=t,e[1]^=r,e[10]^=t,e[11]^=r,e[20]^=t,e[21]^=r,e[30]^=t,e[31]^=r,e[40]^=t,e[41]^=r,t=s^(c<<1|h>>>31),r=i^(h<<1|c>>>31),e[2]^=t,e[3]^=r,e[12]^=t,e[13]^=r,e[22]^=t,e[23]^=r,e[32]^=t,e[33]^=r,e[42]^=t,e[43]^=r,t=o^(l<<1|d>>>31),r=a^(d<<1|l>>>31),e[4]^=t,e[5]^=r,e[14]^=t,e[15]^=r,e[24]^=t,e[25]^=r,e[34]^=t,e[35]^=r,e[44]^=t,e[45]^=r,t=c^(f<<1|p>>>31),r=h^(p<<1|f>>>31),e[6]^=t,e[7]^=r,e[16]^=t,e[17]^=r,e[26]^=t,e[27]^=r,e[36]^=t,e[37]^=r,e[46]^=t,e[47]^=r,t=l^(s<<1|i>>>31),r=d^(i<<1|s>>>31),e[8]^=t,e[9]^=r,e[18]^=t,e[19]^=r,e[28]^=t,e[29]^=r,e[38]^=t,e[39]^=r,e[48]^=t,e[49]^=r,m=e[0],g=e[1],W=e[11]<<4|e[10]>>>28,J=e[10]<<4|e[11]>>>28,S=e[20]<<3|e[21]>>>29,P=e[21]<<3|e[20]>>>29,ae=e[31]<<9|e[30]>>>23,ce=e[30]<<9|e[31]>>>23,H=e[40]<<18|e[41]>>>14,z=e[41]<<18|e[40]>>>14,U=e[2]<<1|e[3]>>>31,D=e[3]<<1|e[2]>>>31,y=e[13]<<12|e[12]>>>20,w=e[12]<<12|e[13]>>>20,Y=e[22]<<10|e[23]>>>22,Q=e[23]<<10|e[22]>>>22,O=e[33]<<13|e[32]>>>19,C=e[32]<<13|e[33]>>>19,ue=e[42]<<2|e[43]>>>30,he=e[43]<<2|e[42]>>>30,te=e[5]<<30|e[4]>>>2,re=e[4]<<30|e[5]>>>2,L=e[14]<<6|e[15]>>>26,B=e[15]<<6|e[14]>>>26,v=e[25]<<11|e[24]>>>21,A=e[24]<<11|e[25]>>>21,X=e[34]<<15|e[35]>>>17,$=e[35]<<15|e[34]>>>17,x=e[45]<<29|e[44]>>>3,M=e[44]<<29|e[45]>>>3,R=e[6]<<28|e[7]>>>4,I=e[7]<<28|e[6]>>>4,ne=e[17]<<23|e[16]>>>9,se=e[16]<<23|e[17]>>>9,F=e[26]<<25|e[27]>>>7,q=e[27]<<25|e[26]>>>7,b=e[36]<<21|e[37]>>>11,E=e[37]<<21|e[36]>>>11,Z=e[47]<<24|e[46]>>>8,ee=e[46]<<24|e[47]>>>8,K=e[8]<<27|e[9]>>>5,V=e[9]<<27|e[8]>>>5,T=e[18]<<20|e[19]>>>12,N=e[19]<<20|e[18]>>>12,ie=e[29]<<7|e[28]>>>25,oe=e[28]<<7|e[29]>>>25,j=e[38]<<8|e[39]>>>24,G=e[39]<<8|e[38]>>>24,_=e[48]<<14|e[49]>>>18,k=e[49]<<14|e[48]>>>18,e[0]=m^~y&v,e[1]=g^~w&A,e[10]=R^~T&S,e[11]=I^~N&P,e[20]=U^~L&F,e[21]=D^~B&q,e[30]=K^~W&Y,e[31]=V^~J&Q,e[40]=te^~ne&ie,e[41]=re^~se&oe,e[2]=y^~v&b,e[3]=w^~A&E,e[12]=T^~S&O,e[13]=N^~P&C,e[22]=L^~F&j,e[23]=B^~q&G,e[32]=W^~Y&X,e[33]=J^~Q&$,e[42]=ne^~ie&ae,e[43]=se^~oe&ce,e[4]=v^~b&_,e[5]=A^~E&k,e[14]=S^~O&x,e[15]=P^~C&M,e[24]=F^~j&H,e[25]=q^~G&z,e[34]=Y^~X&Z,e[35]=Q^~$&ee,e[44]=ie^~ae&ue,e[45]=oe^~ce&he,e[6]=b^~_&m,e[7]=E^~k&g,e[16]=O^~x&R,e[17]=C^~M&I,e[26]=j^~H&U,e[27]=G^~z&D,e[36]=X^~Z&K,e[37]=$^~ee&V,e[46]=ae^~ue&te,e[47]=ce^~he&re,e[8]=_^~m&y,e[9]=k^~g&w,e[18]=x^~R&T,e[19]=M^~I&N,e[28]=H^~U&L,e[29]=z^~D&B,e[38]=Z^~K&W,e[39]=ee^~V&J,e[48]=ue^~te&ne,e[49]=he^~re&se,e[0]^=u[n],e[1]^=u[n+1]};if(s)ka.exports=b;else for(_=0;_<E.length;++_)r[E[_]]=b[E[_]]}();var Ta=kt(Ia.exports);let Na=!1,Sa=!1;const Pa={debug:1,default:2,info:2,warning:3,error:4,off:5};let Oa=Pa.default,Ca=null;const xa=function(){try{const e=[];if(["NFD","NFC","NFKD","NFKC"].forEach(t=>{try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}}),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(e){return e.message}return null}();var Ma,Ua;!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(Ma||(Ma={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(Ua||(Ua={}));const Da="0123456789abcdef";class La{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const r=e.toLowerCase();null==Pa[r]&&this.throwArgumentError("invalid log level name","logLevel",e),Oa>Pa[r]||console.log.apply(console,t)}debug(...e){this._log(La.levels.DEBUG,e)}info(...e){this._log(La.levels.INFO,e)}warn(...e){this._log(La.levels.WARNING,e)}makeError(e,t,r){if(Sa)return this.makeError("censored error",t,{});t||(t=La.errors.UNKNOWN_ERROR),r||(r={});const n=[];Object.keys(r).forEach(e=>{const t=r[e];try{if(t instanceof Uint8Array){let r="";for(let e=0;e<t.length;e++)r+=Da[t[e]>>4],r+=Da[15&t[e]];n.push(e+"=Uint8Array(0x"+r+")")}else n.push(e+"="+JSON.stringify(t))}catch(t){n.push(e+"="+JSON.stringify(r[e].toString()))}}),n.push(`code=${t}`),n.push(`version=${this.version}`);const s=e;let i="";switch(t){case Ua.NUMERIC_FAULT:{i="NUMERIC_FAULT";const t=e;switch(t){case"overflow":case"underflow":case"division-by-zero":i+="-"+t;break;case"negative-power":case"negative-width":i+="-unsupported";break;case"unbound-bitwise-result":i+="-unbound-result"}break}case Ua.CALL_EXCEPTION:case Ua.INSUFFICIENT_FUNDS:case Ua.MISSING_NEW:case Ua.NONCE_EXPIRED:case Ua.REPLACEMENT_UNDERPRICED:case Ua.TRANSACTION_REPLACED:case Ua.UNPREDICTABLE_GAS_LIMIT:i=t}i&&(e+=" [ See: https://links.ethers.org/v5-errors-"+i+" ]"),n.length&&(e+=" ("+n.join(", ")+")");const o=new Error(e);return o.reason=s,o.code=t,Object.keys(r).forEach(function(e){o[e]=r[e]}),o}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,La.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,n){e||this.throwError(t,r,n)}assertArgument(e,t,r,n){e||this.throwArgumentError(t,r,n)}checkNormalize(e){xa&&this.throwError("platform missing String.prototype.normalize",La.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:xa})}checkSafeUint53(e,t){"number"==typeof e&&(null==t&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,La.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,La.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,r){r=r?": "+r:"",e<t&&this.throwError("missing argument"+r,La.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+r,La.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){e!==Object&&null!=e||this.throwError("missing new",La.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",La.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):e!==Object&&null!=e||this.throwError("missing new",La.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return Ca||(Ca=new La("logger/5.8.0")),Ca}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",La.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),Na){if(!e)return;this.globalLogger().throwError("error censorship permanent",La.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}Sa=!!e,Na=!!t}static setLogLevel(e){const t=Pa[e.toLowerCase()];null!=t?Oa=t:La.globalLogger().warn("invalid log level - "+e)}static from(e){return new La(e)}}La.errors=Ua,La.levels=Ma;const Ba=new La("bytes/5.8.0");function Fa(e){return!!e.toHexString}function qa(e){return e.slice||(e.slice=function(){const t=Array.prototype.slice.call(arguments);return qa(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function ja(e){return Ja(e)&&!(e.length%2)||Ha(e)}function Ga(e){return"number"==typeof e&&e==e&&e%1==0}function Ha(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"==typeof e)return!1;if(!Ga(e.length)||e.length<0)return!1;for(let t=0;t<e.length;t++){const r=e[t];if(!Ga(r)||r<0||r>=256)return!1}return!0}function za(e,t){if(t||(t={}),"number"==typeof e){Ba.checkSafeUint53(e,"invalid arrayify value");const t=[];for(;e;)t.unshift(255&e),e=parseInt(String(e/256));return 0===t.length&&t.push(0),qa(new Uint8Array(t))}if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),Fa(e)&&(e=e.toHexString()),Ja(e)){let r=e.substring(2);r.length%2&&("left"===t.hexPad?r="0"+r:"right"===t.hexPad?r+="0":Ba.throwArgumentError("hex data is odd-length","value",e));const n=[];for(let e=0;e<r.length;e+=2)n.push(parseInt(r.substring(e,e+2),16));return qa(new Uint8Array(n))}return Ha(e)?qa(new Uint8Array(e)):Ba.throwArgumentError("invalid arrayify value","value",e)}function Ka(e){const t=e.map(e=>za(e)),r=t.reduce((e,t)=>e+t.length,0),n=new Uint8Array(r);return t.reduce((e,t)=>(n.set(t,e),e+t.length),0),qa(n)}function Va(e){let t=za(e);if(0===t.length)return t;let r=0;for(;r<t.length&&0===t[r];)r++;return r&&(t=t.slice(r)),t}function Wa(e,t){(e=za(e)).length>t&&Ba.throwArgumentError("value out of range","value",arguments[0]);const r=new Uint8Array(t);return r.set(e,t-e.length),qa(r)}function Ja(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}const Ya="0123456789abcdef";function Qa(e,t){if(t||(t={}),"number"==typeof e){Ba.checkSafeUint53(e,"invalid hexlify value");let t="";for(;e;)t=Ya[15&e]+t,e=Math.floor(e/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if("bigint"==typeof e)return(e=e.toString(16)).length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),Fa(e))return e.toHexString();if(Ja(e))return e.length%2&&("left"===t.hexPad?e="0x0"+e.substring(2):"right"===t.hexPad?e+="0":Ba.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if(Ha(e)){let t="0x";for(let r=0;r<e.length;r++){let n=e[r];t+=Ya[(240&n)>>4]+Ya[15&n]}return t}return Ba.throwArgumentError("invalid hexlify value","value",e)}function Xa(e){if("string"!=typeof e)e=Qa(e);else if(!Ja(e)||e.length%2)return null;return(e.length-2)/2}function $a(e,t,r){return"string"!=typeof e?e=Qa(e):(!Ja(e)||e.length%2)&&Ba.throwArgumentError("invalid hexData","value",e),t=2+2*t,null!=r?"0x"+e.substring(t,2+2*r):"0x"+e.substring(t)}function Za(e){let t="0x";return e.forEach(e=>{t+=Qa(e).substring(2)}),t}function ec(e){const t=tc(Qa(e,{hexPad:"left"}));return"0x"===t?"0x0":t}function tc(e){"string"!=typeof e&&(e=Qa(e)),Ja(e)||Ba.throwArgumentError("invalid hex string","value",e),e=e.substring(2);let t=0;for(;t<e.length&&"0"===e[t];)t++;return"0x"+e.substring(t)}function rc(e,t){for("string"!=typeof e?e=Qa(e):Ja(e)||Ba.throwArgumentError("invalid hex string","value",e),e.length>2*t+2&&Ba.throwArgumentError("value out of range","value",arguments[1]);e.length<2*t+2;)e="0x0"+e.substring(2);return e}function nc(e){const t={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(ja(e)){let r=za(e);64===r.length?(t.v=27+(r[32]>>7),r[32]&=127,t.r=Qa(r.slice(0,32)),t.s=Qa(r.slice(32,64))):65===r.length?(t.r=Qa(r.slice(0,32)),t.s=Qa(r.slice(32,64)),t.v=r[64]):Ba.throwArgumentError("invalid signature string","signature",e),t.v<27&&(0===t.v||1===t.v?t.v+=27:Ba.throwArgumentError("signature invalid v byte","signature",e)),t.recoveryParam=1-t.v%2,t.recoveryParam&&(r[32]|=128),t._vs=Qa(r.slice(32,64))}else{if(t.r=e.r,t.s=e.s,t.v=e.v,t.recoveryParam=e.recoveryParam,t._vs=e._vs,null!=t._vs){const r=Wa(za(t._vs),32);t._vs=Qa(r);const n=r[0]>=128?1:0;null==t.recoveryParam?t.recoveryParam=n:t.recoveryParam!==n&&Ba.throwArgumentError("signature recoveryParam mismatch _vs","signature",e),r[0]&=127;const s=Qa(r);null==t.s?t.s=s:t.s!==s&&Ba.throwArgumentError("signature v mismatch _vs","signature",e)}if(null==t.recoveryParam)null==t.v?Ba.throwArgumentError("signature missing v and recoveryParam","signature",e):0===t.v||1===t.v?t.recoveryParam=t.v:t.recoveryParam=1-t.v%2;else if(null==t.v)t.v=27+t.recoveryParam;else{const r=0===t.v||1===t.v?t.v:1-t.v%2;t.recoveryParam!==r&&Ba.throwArgumentError("signature recoveryParam mismatch v","signature",e)}null!=t.r&&Ja(t.r)?t.r=rc(t.r,32):Ba.throwArgumentError("signature missing or invalid r","signature",e),null!=t.s&&Ja(t.s)?t.s=rc(t.s,32):Ba.throwArgumentError("signature missing or invalid s","signature",e);const r=za(t.s);r[0]>=128&&Ba.throwArgumentError("signature s out of range","signature",e),t.recoveryParam&&(r[0]|=128);const n=Qa(r);t._vs&&(Ja(t._vs)||Ba.throwArgumentError("signature invalid _vs","signature",e),t._vs=rc(t._vs,32)),null==t._vs?t._vs=n:t._vs!==n&&Ba.throwArgumentError("signature _vs mismatch v and s","signature",e)}return t.yParityAndS=t._vs,t.compact=t.r+t.yParityAndS.substring(2),t}var sc=Object.freeze({__proto__:null,arrayify:za,concat:Ka,hexConcat:Za,hexDataLength:Xa,hexDataSlice:$a,hexStripZeros:tc,hexValue:ec,hexZeroPad:rc,hexlify:Qa,isBytes:Ha,isBytesLike:ja,isHexString:Ja,splitSignature:nc,stripZeros:Va,zeroPad:Wa});function ic(e){return"0x"+Ta.keccak_256(za(e))}var oc=Object.freeze({__proto__:null,keccak256:ic});var ac={exports:{}},cc=Rt(Object.freeze({__proto__:null,default:{}}));!function(e){!function(e,t){function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function n(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function s(e,t,r){if(s.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var i;"object"==typeof e?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;try{i="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:cc.Buffer}catch(e){}function o(e,t){var n=e.charCodeAt(t);return n>=48&&n<=57?n-48:n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:void r(!1,"Invalid character in "+e)}function a(e,t,r){var n=o(e,r);return r-1>=t&&(n|=o(e,r-1)<<4),n}function c(e,t,n,s){for(var i=0,o=0,a=Math.min(e.length,n),c=t;c<a;c++){var u=e.charCodeAt(c)-48;i*=s,o=u>=49?u-49+10:u>=17?u-17+10:u,r(u>=0&&o<s,"Invalid character"),i+=o}return i}function u(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(s.isBN=function(e){return e instanceof s||null!==e&&"object"==typeof e&&e.constructor.wordSize===s.wordSize&&Array.isArray(e.words)},s.max=function(e,t){return e.cmp(t)>0?e:t},s.min=function(e,t){return e.cmp(t)<0?e:t},s.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var s=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(s++,this.negative=1),s<e.length&&(16===t?this._parseHex(e,s,n):(this._parseBase(e,t,s),"le"===n&&this._initArray(this.toArray(),t,n)))},s.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},s.prototype._initArray=function(e,t,n){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var s=0;s<this.length;s++)this.words[s]=0;var i,o,a=0;if("be"===n)for(s=e.length-1,i=0;s>=0;s-=3)o=e[s]|e[s-1]<<8|e[s-2]<<16,this.words[i]|=o<<a&67108863,this.words[i+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,i++);else if("le"===n)for(s=0,i=0;s<e.length;s+=3)o=e[s]|e[s+1]<<8|e[s+2]<<16,this.words[i]|=o<<a&67108863,this.words[i+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,i++);return this._strip()},s.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var s,i=0,o=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)s=a(e,t,n)<<i,this.words[o]|=67108863&s,i>=18?(i-=18,o+=1,this.words[o]|=s>>>26):i+=8;else for(n=(e.length-t)%2==0?t+1:t;n<e.length;n+=2)s=a(e,t,n)<<i,this.words[o]|=67108863&s,i>=18?(i-=18,o+=1,this.words[o]|=s>>>26):i+=8;this._strip()},s.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,s=1;s<=67108863;s*=t)n++;n--,s=s/t|0;for(var i=e.length-r,o=i%n,a=Math.min(i,i-o)+r,u=0,h=r;h<a;h+=n)u=c(e,h,h+n,t),this.imuln(s),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==o){var l=1;for(u=c(e,h,e.length,t),h=0;h<o;h++)l*=t;this.imuln(l),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this._strip()},s.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},s.prototype._move=function(e){u(e,this)},s.prototype.clone=function(){var e=new s(null);return this.copy(e),e},s.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch(e){s.prototype.inspect=h}else s.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(e,t){var n;if(t=0|t||1,16===(e=e||10)||"hex"===e){n="";for(var s=0,i=0,o=0;o<this.length;o++){var a=this.words[o],c=(16777215&(a<<s|i)).toString(16);i=a>>>24-s&16777215,(s+=2)>=26&&(s-=26,o--),n=0!==i||o!==this.length-1?l[6-c.length]+c+n:c+n}for(0!==i&&(n=i.toString(16)+n);n.length%t!==0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var u=d[e],h=f[e];n="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modrn(h).toString(e);n=(p=p.idivn(h)).isZero()?m+n:l[u-m.length]+m+n}for(this.isZero()&&(n="0"+n);n.length%t!==0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},s.prototype.toJSON=function(){return this.toString(16,2)},i&&(s.prototype.toBuffer=function(e,t){return this.toArrayLike(i,e,t)}),s.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)};function p(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var s=0|e.words[0],i=0|t.words[0],o=s*i,a=67108863&o,c=o/67108864|0;r.words[0]=a;for(var u=1;u<n;u++){for(var h=c>>>26,l=67108863&c,d=Math.min(u,t.length-1),f=Math.max(0,u-e.length+1);f<=d;f++){var p=u-f|0;h+=(o=(s=0|e.words[p])*(i=0|t.words[f])+l)/67108864|0,l=67108863&o}r.words[u]=0|l,c=0|h}return 0!==c?r.words[u]=0|c:r.length--,r._strip()}s.prototype.toArrayLike=function(e,t,n){this._strip();var s=this.byteLength(),i=n||Math.max(1,s);r(s<=i,"byte array longer than desired length"),r(i>0,"Requested array length <= 0");var o=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)}(e,i);return this["_toArrayLike"+("le"===t?"LE":"BE")](o,s),o},s.prototype._toArrayLikeLE=function(e,t){for(var r=0,n=0,s=0,i=0;s<this.length;s++){var o=this.words[s]<<i|n;e[r++]=255&o,r<e.length&&(e[r++]=o>>8&255),r<e.length&&(e[r++]=o>>16&255),6===i?(r<e.length&&(e[r++]=o>>24&255),n=0,i=0):(n=o>>>24,i+=2)}if(r<e.length)for(e[r++]=n;r<e.length;)e[r++]=0},s.prototype._toArrayLikeBE=function(e,t){for(var r=e.length-1,n=0,s=0,i=0;s<this.length;s++){var o=this.words[s]<<i|n;e[r--]=255&o,r>=0&&(e[r--]=o>>8&255),r>=0&&(e[r--]=o>>16&255),6===i?(r>=0&&(e[r--]=o>>24&255),n=0,i=0):(n=o>>>24,i+=2)}if(r>=0)for(e[r--]=n;r>=0;)e[r--]=0},Math.clz32?s.prototype._countBits=function(e){return 32-Math.clz32(e)}:s.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},s.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 8191&t||(r+=13,t>>>=13),127&t||(r+=7,t>>>=7),15&t||(r+=4,t>>>=4),3&t||(r+=2,t>>>=2),1&t||r++,r},s.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},s.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},s.prototype.ior=function(e){return r(0===(this.negative|e.negative)),this.iuor(e)},s.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},s.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},s.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this._strip()},s.prototype.iand=function(e){return r(0===(this.negative|e.negative)),this.iuand(e)},s.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},s.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},s.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this._strip()},s.prototype.ixor=function(e){return r(0===(this.negative|e.negative)),this.iuxor(e)},s.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},s.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},s.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var s=0;s<t;s++)this.words[s]=67108863&~this.words[s];return n>0&&(this.words[s]=~this.words[s]&67108863>>26-n),this._strip()},s.prototype.notn=function(e){return this.clone().inotn(e)},s.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var n=e/26|0,s=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<s:this.words[n]&~(1<<s),this._strip()},s.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var s=0,i=0;i<n.length;i++)t=(0|r.words[i])+(0|n.words[i])+s,this.words[i]=67108863&t,s=t>>>26;for(;0!==s&&i<r.length;i++)t=(0|r.words[i])+s,this.words[i]=67108863&t,s=t>>>26;if(this.length=r.length,0!==s)this.words[this.length]=s,this.length++;else if(r!==this)for(;i<r.length;i++)this.words[i]=r.words[i];return this},s.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},s.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,s=this.cmp(e);if(0===s)return this.negative=0,this.length=1,this.words[0]=0,this;s>0?(r=this,n=e):(r=e,n=this);for(var i=0,o=0;o<n.length;o++)i=(t=(0|r.words[o])-(0|n.words[o])+i)>>26,this.words[o]=67108863&t;for(;0!==i&&o<r.length;o++)i=(t=(0|r.words[o])+i)>>26,this.words[o]=67108863&t;if(0===i&&o<r.length&&r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=Math.max(this.length,o),r!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(e){return this.clone().isub(e)};var m=function(e,t,r){var n,s,i,o=e.words,a=t.words,c=r.words,u=0,h=0|o[0],l=8191&h,d=h>>>13,f=0|o[1],p=8191&f,m=f>>>13,g=0|o[2],y=8191&g,w=g>>>13,v=0|o[3],A=8191&v,b=v>>>13,E=0|o[4],_=8191&E,k=E>>>13,R=0|o[5],I=8191&R,T=R>>>13,N=0|o[6],S=8191&N,P=N>>>13,O=0|o[7],C=8191&O,x=O>>>13,M=0|o[8],U=8191&M,D=M>>>13,L=0|o[9],B=8191&L,F=L>>>13,q=0|a[0],j=8191&q,G=q>>>13,H=0|a[1],z=8191&H,K=H>>>13,V=0|a[2],W=8191&V,J=V>>>13,Y=0|a[3],Q=8191&Y,X=Y>>>13,$=0|a[4],Z=8191&$,ee=$>>>13,te=0|a[5],re=8191&te,ne=te>>>13,se=0|a[6],ie=8191&se,oe=se>>>13,ae=0|a[7],ce=8191&ae,ue=ae>>>13,he=0|a[8],le=8191&he,de=he>>>13,fe=0|a[9],pe=8191&fe,me=fe>>>13;r.negative=e.negative^t.negative,r.length=19;var ge=(u+(n=Math.imul(l,j))|0)+((8191&(s=(s=Math.imul(l,G))+Math.imul(d,j)|0))<<13)|0;u=((i=Math.imul(d,G))+(s>>>13)|0)+(ge>>>26)|0,ge&=67108863,n=Math.imul(p,j),s=(s=Math.imul(p,G))+Math.imul(m,j)|0,i=Math.imul(m,G);var ye=(u+(n=n+Math.imul(l,z)|0)|0)+((8191&(s=(s=s+Math.imul(l,K)|0)+Math.imul(d,z)|0))<<13)|0;u=((i=i+Math.imul(d,K)|0)+(s>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(y,j),s=(s=Math.imul(y,G))+Math.imul(w,j)|0,i=Math.imul(w,G),n=n+Math.imul(p,z)|0,s=(s=s+Math.imul(p,K)|0)+Math.imul(m,z)|0,i=i+Math.imul(m,K)|0;var we=(u+(n=n+Math.imul(l,W)|0)|0)+((8191&(s=(s=s+Math.imul(l,J)|0)+Math.imul(d,W)|0))<<13)|0;u=((i=i+Math.imul(d,J)|0)+(s>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(A,j),s=(s=Math.imul(A,G))+Math.imul(b,j)|0,i=Math.imul(b,G),n=n+Math.imul(y,z)|0,s=(s=s+Math.imul(y,K)|0)+Math.imul(w,z)|0,i=i+Math.imul(w,K)|0,n=n+Math.imul(p,W)|0,s=(s=s+Math.imul(p,J)|0)+Math.imul(m,W)|0,i=i+Math.imul(m,J)|0;var ve=(u+(n=n+Math.imul(l,Q)|0)|0)+((8191&(s=(s=s+Math.imul(l,X)|0)+Math.imul(d,Q)|0))<<13)|0;u=((i=i+Math.imul(d,X)|0)+(s>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(_,j),s=(s=Math.imul(_,G))+Math.imul(k,j)|0,i=Math.imul(k,G),n=n+Math.imul(A,z)|0,s=(s=s+Math.imul(A,K)|0)+Math.imul(b,z)|0,i=i+Math.imul(b,K)|0,n=n+Math.imul(y,W)|0,s=(s=s+Math.imul(y,J)|0)+Math.imul(w,W)|0,i=i+Math.imul(w,J)|0,n=n+Math.imul(p,Q)|0,s=(s=s+Math.imul(p,X)|0)+Math.imul(m,Q)|0,i=i+Math.imul(m,X)|0;var Ae=(u+(n=n+Math.imul(l,Z)|0)|0)+((8191&(s=(s=s+Math.imul(l,ee)|0)+Math.imul(d,Z)|0))<<13)|0;u=((i=i+Math.imul(d,ee)|0)+(s>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul(I,j),s=(s=Math.imul(I,G))+Math.imul(T,j)|0,i=Math.imul(T,G),n=n+Math.imul(_,z)|0,s=(s=s+Math.imul(_,K)|0)+Math.imul(k,z)|0,i=i+Math.imul(k,K)|0,n=n+Math.imul(A,W)|0,s=(s=s+Math.imul(A,J)|0)+Math.imul(b,W)|0,i=i+Math.imul(b,J)|0,n=n+Math.imul(y,Q)|0,s=(s=s+Math.imul(y,X)|0)+Math.imul(w,Q)|0,i=i+Math.imul(w,X)|0,n=n+Math.imul(p,Z)|0,s=(s=s+Math.imul(p,ee)|0)+Math.imul(m,Z)|0,i=i+Math.imul(m,ee)|0;var be=(u+(n=n+Math.imul(l,re)|0)|0)+((8191&(s=(s=s+Math.imul(l,ne)|0)+Math.imul(d,re)|0))<<13)|0;u=((i=i+Math.imul(d,ne)|0)+(s>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(S,j),s=(s=Math.imul(S,G))+Math.imul(P,j)|0,i=Math.imul(P,G),n=n+Math.imul(I,z)|0,s=(s=s+Math.imul(I,K)|0)+Math.imul(T,z)|0,i=i+Math.imul(T,K)|0,n=n+Math.imul(_,W)|0,s=(s=s+Math.imul(_,J)|0)+Math.imul(k,W)|0,i=i+Math.imul(k,J)|0,n=n+Math.imul(A,Q)|0,s=(s=s+Math.imul(A,X)|0)+Math.imul(b,Q)|0,i=i+Math.imul(b,X)|0,n=n+Math.imul(y,Z)|0,s=(s=s+Math.imul(y,ee)|0)+Math.imul(w,Z)|0,i=i+Math.imul(w,ee)|0,n=n+Math.imul(p,re)|0,s=(s=s+Math.imul(p,ne)|0)+Math.imul(m,re)|0,i=i+Math.imul(m,ne)|0;var Ee=(u+(n=n+Math.imul(l,ie)|0)|0)+((8191&(s=(s=s+Math.imul(l,oe)|0)+Math.imul(d,ie)|0))<<13)|0;u=((i=i+Math.imul(d,oe)|0)+(s>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(C,j),s=(s=Math.imul(C,G))+Math.imul(x,j)|0,i=Math.imul(x,G),n=n+Math.imul(S,z)|0,s=(s=s+Math.imul(S,K)|0)+Math.imul(P,z)|0,i=i+Math.imul(P,K)|0,n=n+Math.imul(I,W)|0,s=(s=s+Math.imul(I,J)|0)+Math.imul(T,W)|0,i=i+Math.imul(T,J)|0,n=n+Math.imul(_,Q)|0,s=(s=s+Math.imul(_,X)|0)+Math.imul(k,Q)|0,i=i+Math.imul(k,X)|0,n=n+Math.imul(A,Z)|0,s=(s=s+Math.imul(A,ee)|0)+Math.imul(b,Z)|0,i=i+Math.imul(b,ee)|0,n=n+Math.imul(y,re)|0,s=(s=s+Math.imul(y,ne)|0)+Math.imul(w,re)|0,i=i+Math.imul(w,ne)|0,n=n+Math.imul(p,ie)|0,s=(s=s+Math.imul(p,oe)|0)+Math.imul(m,ie)|0,i=i+Math.imul(m,oe)|0;var _e=(u+(n=n+Math.imul(l,ce)|0)|0)+((8191&(s=(s=s+Math.imul(l,ue)|0)+Math.imul(d,ce)|0))<<13)|0;u=((i=i+Math.imul(d,ue)|0)+(s>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(U,j),s=(s=Math.imul(U,G))+Math.imul(D,j)|0,i=Math.imul(D,G),n=n+Math.imul(C,z)|0,s=(s=s+Math.imul(C,K)|0)+Math.imul(x,z)|0,i=i+Math.imul(x,K)|0,n=n+Math.imul(S,W)|0,s=(s=s+Math.imul(S,J)|0)+Math.imul(P,W)|0,i=i+Math.imul(P,J)|0,n=n+Math.imul(I,Q)|0,s=(s=s+Math.imul(I,X)|0)+Math.imul(T,Q)|0,i=i+Math.imul(T,X)|0,n=n+Math.imul(_,Z)|0,s=(s=s+Math.imul(_,ee)|0)+Math.imul(k,Z)|0,i=i+Math.imul(k,ee)|0,n=n+Math.imul(A,re)|0,s=(s=s+Math.imul(A,ne)|0)+Math.imul(b,re)|0,i=i+Math.imul(b,ne)|0,n=n+Math.imul(y,ie)|0,s=(s=s+Math.imul(y,oe)|0)+Math.imul(w,ie)|0,i=i+Math.imul(w,oe)|0,n=n+Math.imul(p,ce)|0,s=(s=s+Math.imul(p,ue)|0)+Math.imul(m,ce)|0,i=i+Math.imul(m,ue)|0;var ke=(u+(n=n+Math.imul(l,le)|0)|0)+((8191&(s=(s=s+Math.imul(l,de)|0)+Math.imul(d,le)|0))<<13)|0;u=((i=i+Math.imul(d,de)|0)+(s>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(B,j),s=(s=Math.imul(B,G))+Math.imul(F,j)|0,i=Math.imul(F,G),n=n+Math.imul(U,z)|0,s=(s=s+Math.imul(U,K)|0)+Math.imul(D,z)|0,i=i+Math.imul(D,K)|0,n=n+Math.imul(C,W)|0,s=(s=s+Math.imul(C,J)|0)+Math.imul(x,W)|0,i=i+Math.imul(x,J)|0,n=n+Math.imul(S,Q)|0,s=(s=s+Math.imul(S,X)|0)+Math.imul(P,Q)|0,i=i+Math.imul(P,X)|0,n=n+Math.imul(I,Z)|0,s=(s=s+Math.imul(I,ee)|0)+Math.imul(T,Z)|0,i=i+Math.imul(T,ee)|0,n=n+Math.imul(_,re)|0,s=(s=s+Math.imul(_,ne)|0)+Math.imul(k,re)|0,i=i+Math.imul(k,ne)|0,n=n+Math.imul(A,ie)|0,s=(s=s+Math.imul(A,oe)|0)+Math.imul(b,ie)|0,i=i+Math.imul(b,oe)|0,n=n+Math.imul(y,ce)|0,s=(s=s+Math.imul(y,ue)|0)+Math.imul(w,ce)|0,i=i+Math.imul(w,ue)|0,n=n+Math.imul(p,le)|0,s=(s=s+Math.imul(p,de)|0)+Math.imul(m,le)|0,i=i+Math.imul(m,de)|0;var Re=(u+(n=n+Math.imul(l,pe)|0)|0)+((8191&(s=(s=s+Math.imul(l,me)|0)+Math.imul(d,pe)|0))<<13)|0;u=((i=i+Math.imul(d,me)|0)+(s>>>13)|0)+(Re>>>26)|0,Re&=67108863,n=Math.imul(B,z),s=(s=Math.imul(B,K))+Math.imul(F,z)|0,i=Math.imul(F,K),n=n+Math.imul(U,W)|0,s=(s=s+Math.imul(U,J)|0)+Math.imul(D,W)|0,i=i+Math.imul(D,J)|0,n=n+Math.imul(C,Q)|0,s=(s=s+Math.imul(C,X)|0)+Math.imul(x,Q)|0,i=i+Math.imul(x,X)|0,n=n+Math.imul(S,Z)|0,s=(s=s+Math.imul(S,ee)|0)+Math.imul(P,Z)|0,i=i+Math.imul(P,ee)|0,n=n+Math.imul(I,re)|0,s=(s=s+Math.imul(I,ne)|0)+Math.imul(T,re)|0,i=i+Math.imul(T,ne)|0,n=n+Math.imul(_,ie)|0,s=(s=s+Math.imul(_,oe)|0)+Math.imul(k,ie)|0,i=i+Math.imul(k,oe)|0,n=n+Math.imul(A,ce)|0,s=(s=s+Math.imul(A,ue)|0)+Math.imul(b,ce)|0,i=i+Math.imul(b,ue)|0,n=n+Math.imul(y,le)|0,s=(s=s+Math.imul(y,de)|0)+Math.imul(w,le)|0,i=i+Math.imul(w,de)|0;var Ie=(u+(n=n+Math.imul(p,pe)|0)|0)+((8191&(s=(s=s+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;u=((i=i+Math.imul(m,me)|0)+(s>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul(B,W),s=(s=Math.imul(B,J))+Math.imul(F,W)|0,i=Math.imul(F,J),n=n+Math.imul(U,Q)|0,s=(s=s+Math.imul(U,X)|0)+Math.imul(D,Q)|0,i=i+Math.imul(D,X)|0,n=n+Math.imul(C,Z)|0,s=(s=s+Math.imul(C,ee)|0)+Math.imul(x,Z)|0,i=i+Math.imul(x,ee)|0,n=n+Math.imul(S,re)|0,s=(s=s+Math.imul(S,ne)|0)+Math.imul(P,re)|0,i=i+Math.imul(P,ne)|0,n=n+Math.imul(I,ie)|0,s=(s=s+Math.imul(I,oe)|0)+Math.imul(T,ie)|0,i=i+Math.imul(T,oe)|0,n=n+Math.imul(_,ce)|0,s=(s=s+Math.imul(_,ue)|0)+Math.imul(k,ce)|0,i=i+Math.imul(k,ue)|0,n=n+Math.imul(A,le)|0,s=(s=s+Math.imul(A,de)|0)+Math.imul(b,le)|0,i=i+Math.imul(b,de)|0;var Te=(u+(n=n+Math.imul(y,pe)|0)|0)+((8191&(s=(s=s+Math.imul(y,me)|0)+Math.imul(w,pe)|0))<<13)|0;u=((i=i+Math.imul(w,me)|0)+(s>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(B,Q),s=(s=Math.imul(B,X))+Math.imul(F,Q)|0,i=Math.imul(F,X),n=n+Math.imul(U,Z)|0,s=(s=s+Math.imul(U,ee)|0)+Math.imul(D,Z)|0,i=i+Math.imul(D,ee)|0,n=n+Math.imul(C,re)|0,s=(s=s+Math.imul(C,ne)|0)+Math.imul(x,re)|0,i=i+Math.imul(x,ne)|0,n=n+Math.imul(S,ie)|0,s=(s=s+Math.imul(S,oe)|0)+Math.imul(P,ie)|0,i=i+Math.imul(P,oe)|0,n=n+Math.imul(I,ce)|0,s=(s=s+Math.imul(I,ue)|0)+Math.imul(T,ce)|0,i=i+Math.imul(T,ue)|0,n=n+Math.imul(_,le)|0,s=(s=s+Math.imul(_,de)|0)+Math.imul(k,le)|0,i=i+Math.imul(k,de)|0;var Ne=(u+(n=n+Math.imul(A,pe)|0)|0)+((8191&(s=(s=s+Math.imul(A,me)|0)+Math.imul(b,pe)|0))<<13)|0;u=((i=i+Math.imul(b,me)|0)+(s>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,n=Math.imul(B,Z),s=(s=Math.imul(B,ee))+Math.imul(F,Z)|0,i=Math.imul(F,ee),n=n+Math.imul(U,re)|0,s=(s=s+Math.imul(U,ne)|0)+Math.imul(D,re)|0,i=i+Math.imul(D,ne)|0,n=n+Math.imul(C,ie)|0,s=(s=s+Math.imul(C,oe)|0)+Math.imul(x,ie)|0,i=i+Math.imul(x,oe)|0,n=n+Math.imul(S,ce)|0,s=(s=s+Math.imul(S,ue)|0)+Math.imul(P,ce)|0,i=i+Math.imul(P,ue)|0,n=n+Math.imul(I,le)|0,s=(s=s+Math.imul(I,de)|0)+Math.imul(T,le)|0,i=i+Math.imul(T,de)|0;var Se=(u+(n=n+Math.imul(_,pe)|0)|0)+((8191&(s=(s=s+Math.imul(_,me)|0)+Math.imul(k,pe)|0))<<13)|0;u=((i=i+Math.imul(k,me)|0)+(s>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(B,re),s=(s=Math.imul(B,ne))+Math.imul(F,re)|0,i=Math.imul(F,ne),n=n+Math.imul(U,ie)|0,s=(s=s+Math.imul(U,oe)|0)+Math.imul(D,ie)|0,i=i+Math.imul(D,oe)|0,n=n+Math.imul(C,ce)|0,s=(s=s+Math.imul(C,ue)|0)+Math.imul(x,ce)|0,i=i+Math.imul(x,ue)|0,n=n+Math.imul(S,le)|0,s=(s=s+Math.imul(S,de)|0)+Math.imul(P,le)|0,i=i+Math.imul(P,de)|0;var Pe=(u+(n=n+Math.imul(I,pe)|0)|0)+((8191&(s=(s=s+Math.imul(I,me)|0)+Math.imul(T,pe)|0))<<13)|0;u=((i=i+Math.imul(T,me)|0)+(s>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,n=Math.imul(B,ie),s=(s=Math.imul(B,oe))+Math.imul(F,ie)|0,i=Math.imul(F,oe),n=n+Math.imul(U,ce)|0,s=(s=s+Math.imul(U,ue)|0)+Math.imul(D,ce)|0,i=i+Math.imul(D,ue)|0,n=n+Math.imul(C,le)|0,s=(s=s+Math.imul(C,de)|0)+Math.imul(x,le)|0,i=i+Math.imul(x,de)|0;var Oe=(u+(n=n+Math.imul(S,pe)|0)|0)+((8191&(s=(s=s+Math.imul(S,me)|0)+Math.imul(P,pe)|0))<<13)|0;u=((i=i+Math.imul(P,me)|0)+(s>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,n=Math.imul(B,ce),s=(s=Math.imul(B,ue))+Math.imul(F,ce)|0,i=Math.imul(F,ue),n=n+Math.imul(U,le)|0,s=(s=s+Math.imul(U,de)|0)+Math.imul(D,le)|0,i=i+Math.imul(D,de)|0;var Ce=(u+(n=n+Math.imul(C,pe)|0)|0)+((8191&(s=(s=s+Math.imul(C,me)|0)+Math.imul(x,pe)|0))<<13)|0;u=((i=i+Math.imul(x,me)|0)+(s>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,n=Math.imul(B,le),s=(s=Math.imul(B,de))+Math.imul(F,le)|0,i=Math.imul(F,de);var xe=(u+(n=n+Math.imul(U,pe)|0)|0)+((8191&(s=(s=s+Math.imul(U,me)|0)+Math.imul(D,pe)|0))<<13)|0;u=((i=i+Math.imul(D,me)|0)+(s>>>13)|0)+(xe>>>26)|0,xe&=67108863;var Me=(u+(n=Math.imul(B,pe))|0)+((8191&(s=(s=Math.imul(B,me))+Math.imul(F,pe)|0))<<13)|0;return u=((i=Math.imul(F,me))+(s>>>13)|0)+(Me>>>26)|0,Me&=67108863,c[0]=ge,c[1]=ye,c[2]=we,c[3]=ve,c[4]=Ae,c[5]=be,c[6]=Ee,c[7]=_e,c[8]=ke,c[9]=Re,c[10]=Ie,c[11]=Te,c[12]=Ne,c[13]=Se,c[14]=Pe,c[15]=Oe,c[16]=Ce,c[17]=xe,c[18]=Me,0!==u&&(c[19]=u,r.length++),r};function g(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,s=0,i=0;i<r.length-1;i++){var o=s;s=0;for(var a=67108863&n,c=Math.min(i,t.length-1),u=Math.max(0,i-e.length+1);u<=c;u++){var h=i-u,l=(0|e.words[h])*(0|t.words[u]),d=67108863&l;a=67108863&(d=d+a|0),s+=(o=(o=o+(l/67108864|0)|0)+(d>>>26)|0)>>>26,o&=67108863}r.words[i]=a,n=o,o=s}return 0!==n?r.words[i]=n:r.length--,r._strip()}function y(e,t,r){return g(e,t,r)}Math.imul||(m=p),s.prototype.mulTo=function(e,t){var r=this.length+e.length;return 10===this.length&&10===e.length?m(this,e,t):r<63?p(this,e,t):r<1024?g(this,e,t):y(this,e,t)},s.prototype.mul=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},s.prototype.mulf=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),y(this,e,t)},s.prototype.imul=function(e){return this.clone().mulTo(e,this)},s.prototype.imuln=function(e){var t=e<0;t&&(e=-e),r("number"==typeof e),r(e<67108864);for(var n=0,s=0;s<this.length;s++){var i=(0|this.words[s])*e,o=(67108863&i)+(67108863&n);n>>=26,n+=i/67108864|0,n+=o>>>26,this.words[s]=67108863&o}return 0!==n&&(this.words[s]=n,this.length++),this.length=0===e?1:this.length,t?this.ineg():this},s.prototype.muln=function(e){return this.clone().imuln(e)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,s=r%26;t[r]=e.words[n]>>>s&1}return t}(e);if(0===t.length)return new s(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var i=r.sqr();n<t.length;n++,i=i.sqr())0!==t[n]&&(r=r.mul(i));return r},s.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,n=e%26,s=(e-n)/26,i=67108863>>>26-n<<26-n;if(0!==n){var o=0;for(t=0;t<this.length;t++){var a=this.words[t]&i,c=(0|this.words[t])-a<<n;this.words[t]=c|o,o=a>>>26-n}o&&(this.words[t]=o,this.length++)}if(0!==s){for(t=this.length-1;t>=0;t--)this.words[t+s]=this.words[t];for(t=0;t<s;t++)this.words[t]=0;this.length+=s}return this._strip()},s.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},s.prototype.iushrn=function(e,t,n){var s;r("number"==typeof e&&e>=0),s=t?(t-t%26)/26:0;var i=e%26,o=Math.min((e-i)/26,this.length),a=67108863^67108863>>>i<<i,c=n;if(s-=o,s=Math.max(0,s),c){for(var u=0;u<o;u++)c.words[u]=this.words[u];c.length=o}if(0===o);else if(this.length>o)for(this.length-=o,u=0;u<this.length;u++)this.words[u]=this.words[u+o];else this.words[0]=0,this.length=1;var h=0;for(u=this.length-1;u>=0&&(0!==h||u>=s);u--){var l=0|this.words[u];this.words[u]=h<<26-i|l>>>i,h=l&a}return c&&0!==h&&(c.words[c.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(e,t,n){return r(0===this.negative),this.iushrn(e,t,n)},s.prototype.shln=function(e){return this.clone().ishln(e)},s.prototype.ushln=function(e){return this.clone().iushln(e)},s.prototype.shrn=function(e){return this.clone().ishrn(e)},s.prototype.ushrn=function(e){return this.clone().iushrn(e)},s.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,s=1<<t;return!(this.length<=n)&&!!(this.words[n]&s)},s.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var s=67108863^67108863>>>t<<t;this.words[this.length-1]&=s}return this._strip()},s.prototype.maskn=function(e){return this.clone().imaskn(e)},s.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},s.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},s.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},s.prototype.addn=function(e){return this.clone().iaddn(e)},s.prototype.subn=function(e){return this.clone().isubn(e)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(e,t,n){var s,i,o=e.length+n;this._expand(o);var a=0;for(s=0;s<e.length;s++){i=(0|this.words[s+n])+a;var c=(0|e.words[s])*t;a=((i-=67108863&c)>>26)-(c/67108864|0),this.words[s+n]=67108863&i}for(;s<this.length-n;s++)a=(i=(0|this.words[s+n])+a)>>26,this.words[s+n]=67108863&i;if(0===a)return this._strip();for(r(-1===a),a=0,s=0;s<this.length;s++)a=(i=-(0|this.words[s])+a)>>26,this.words[s]=67108863&i;return this.negative=1,this._strip()},s.prototype._wordDiv=function(e,t){var r=(this.length,e.length),n=this.clone(),i=e,o=0|i.words[i.length-1];0!==(r=26-this._countBits(o))&&(i=i.ushln(r),n.iushln(r),o=0|i.words[i.length-1]);var a,c=n.length-i.length;if("mod"!==t){(a=new s(null)).length=c+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var h=n.clone()._ishlnsubmul(i,1,c);0===h.negative&&(n=h,a&&(a.words[c]=1));for(var l=c-1;l>=0;l--){var d=67108864*(0|n.words[i.length+l])+(0|n.words[i.length+l-1]);for(d=Math.min(d/o|0,67108863),n._ishlnsubmul(i,d,l);0!==n.negative;)d--,n.negative=0,n._ishlnsubmul(i,1,l),n.isZero()||(n.negative^=1);a&&(a.words[l]=d)}return a&&a._strip(),n._strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},s.prototype.divmod=function(e,t,n){return r(!e.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(i=a.div.neg()),"div"!==t&&(o=a.mod.neg(),n&&0!==o.negative&&o.iadd(e)),{div:i,mod:o}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(i=a.div.neg()),{div:i,mod:a.mod}):0!==(this.negative&e.negative)?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(o=a.mod.neg(),n&&0!==o.negative&&o.isub(e)),{div:a.div,mod:o}):e.length>this.length||this.cmp(e)<0?{div:new s(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new s(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new s(this.modrn(e.words[0]))}:this._wordDiv(e,t);var i,o,a},s.prototype.div=function(e){return this.divmod(e,"div",!1).div},s.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},s.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},s.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),s=e.andln(1),i=r.cmp(n);return i<0||1===s&&0===i?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},s.prototype.modrn=function(e){var t=e<0;t&&(e=-e),r(e<=67108863);for(var n=(1<<26)%e,s=0,i=this.length-1;i>=0;i--)s=(n*s+(0|this.words[i]))%e;return t?-s:s},s.prototype.modn=function(e){return this.modrn(e)},s.prototype.idivn=function(e){var t=e<0;t&&(e=-e),r(e<=67108863);for(var n=0,s=this.length-1;s>=0;s--){var i=(0|this.words[s])+67108864*n;this.words[s]=i/e|0,n=i%e}return this._strip(),t?this.ineg():this},s.prototype.divn=function(e){return this.clone().idivn(e)},s.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new s(1),o=new s(0),a=new s(0),c=new s(1),u=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++u;for(var h=n.clone(),l=t.clone();!t.isZero();){for(var d=0,f=1;0===(t.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(t.iushrn(d);d-- >0;)(i.isOdd()||o.isOdd())&&(i.iadd(h),o.isub(l)),i.iushrn(1),o.iushrn(1);for(var p=0,m=1;0===(n.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(a.isOdd()||c.isOdd())&&(a.iadd(h),c.isub(l)),a.iushrn(1),c.iushrn(1);t.cmp(n)>=0?(t.isub(n),i.isub(a),o.isub(c)):(n.isub(t),a.isub(i),c.isub(o))}return{a:a,b:c,gcd:n.iushln(u)}},s.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,o=new s(1),a=new s(0),c=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var u=0,h=1;0===(t.words[0]&h)&&u<26;++u,h<<=1);if(u>0)for(t.iushrn(u);u-- >0;)o.isOdd()&&o.iadd(c),o.iushrn(1);for(var l=0,d=1;0===(n.words[0]&d)&&l<26;++l,d<<=1);if(l>0)for(n.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);t.cmp(n)>=0?(t.isub(n),o.isub(a)):(n.isub(t),a.isub(o))}return(i=0===t.cmpn(1)?o:a).cmpn(0)<0&&i.iadd(e),i},s.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var s=t.cmp(r);if(s<0){var i=t;t=r,r=i}else if(0===s||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},s.prototype.invm=function(e){return this.egcd(e).a.umod(e)},s.prototype.isEven=function(){return!(1&this.words[0])},s.prototype.isOdd=function(){return!(1&~this.words[0])},s.prototype.andln=function(e){return this.words[0]&e},s.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,n=(e-t)/26,s=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=s,this;for(var i=s,o=n;0!==i&&o<this.length;o++){var a=0|this.words[o];i=(a+=i)>>>26,a&=67108863,this.words[o]=a}return 0!==i&&(this.words[o]=i,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this._strip(),this.length>1)t=1;else{n&&(e=-e),r(e<=67108863,"Number is too big");var s=0|this.words[0];t=s===e?0:s<e?-1:1}return 0!==this.negative?0|-t:t},s.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},s.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],s=0|e.words[r];if(n!==s){n<s?t=-1:n>s&&(t=1);break}}return t},s.prototype.gtn=function(e){return 1===this.cmpn(e)},s.prototype.gt=function(e){return 1===this.cmp(e)},s.prototype.gten=function(e){return this.cmpn(e)>=0},s.prototype.gte=function(e){return this.cmp(e)>=0},s.prototype.ltn=function(e){return-1===this.cmpn(e)},s.prototype.lt=function(e){return-1===this.cmp(e)},s.prototype.lten=function(e){return this.cmpn(e)<=0},s.prototype.lte=function(e){return this.cmp(e)<=0},s.prototype.eqn=function(e){return 0===this.cmpn(e)},s.prototype.eq=function(e){return 0===this.cmp(e)},s.red=function(e){return new k(e)},s.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},s.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(e){return this.red=e,this},s.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},s.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},s.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},s.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},s.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},s.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},s.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},s.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},s.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var w={k256:null,p224:null,p192:null,p25519:null};function v(e,t){this.name=e,this.p=new s(t,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function A(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function E(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function _(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function k(e){if("string"==typeof e){var t=s._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function R(e){k.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var e=new s(null);return e.words=new Array(Math.ceil(this.n/13)),e},v.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},v.prototype.split=function(e,t){e.iushrn(this.n,0,t)},v.prototype.imulK=function(e){return e.imul(this.k)},n(A,v),A.prototype.split=function(e,t){for(var r=4194303,n=Math.min(e.length,9),s=0;s<n;s++)t.words[s]=e.words[s];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var i=e.words[9];for(t.words[t.length++]=i&r,s=10;s<e.length;s++){var o=0|e.words[s];e.words[s-10]=(o&r)<<4|i>>>22,i=o}i>>>=22,e.words[s-10]=i,0===i&&e.length>10?e.length-=10:e.length-=9},A.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},n(b,v),n(E,v),n(_,v),_.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,s=67108863&n;n>>>=26,e.words[r]=s,t=n}return 0!==t&&(e.words[e.length++]=t),e},s._prime=function(e){if(w[e])return w[e];var t;if("k256"===e)t=new A;else if("p224"===e)t=new b;else if("p192"===e)t=new E;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new _}return w[e]=t,t},k.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},k.prototype._verify2=function(e,t){r(0===(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},k.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(u(e,e.umod(this.m)._forceRed(this)),e)},k.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},k.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},k.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},k.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},k.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},k.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},k.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},k.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},k.prototype.isqr=function(e){return this.imul(e,e.clone())},k.prototype.sqr=function(e){return this.mul(e,e)},k.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var n=this.m.add(new s(1)).iushrn(2);return this.pow(e,n)}for(var i=this.m.subn(1),o=0;!i.isZero()&&0===i.andln(1);)o++,i.iushrn(1);r(!i.isZero());var a=new s(1).toRed(this),c=a.redNeg(),u=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new s(2*h*h).toRed(this);0!==this.pow(h,u).cmp(c);)h.redIAdd(c);for(var l=this.pow(h,i),d=this.pow(e,i.addn(1).iushrn(1)),f=this.pow(e,i),p=o;0!==f.cmp(a);){for(var m=f,g=0;0!==m.cmp(a);g++)m=m.redSqr();r(g<p);var y=this.pow(l,new s(1).iushln(p-g-1));d=d.redMul(y),l=y.redSqr(),f=f.redMul(l),p=g}return d},k.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},k.prototype.pow=function(e,t){if(t.isZero())return new s(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new s(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var i=r[0],o=0,a=0,c=t.bitLength()%26;for(0===c&&(c=26),n=t.length-1;n>=0;n--){for(var u=t.words[n],h=c-1;h>=0;h--){var l=u>>h&1;i!==r[0]&&(i=this.sqr(i)),0!==l||0!==o?(o<<=1,o|=l,(4===++a||0===n&&0===h)&&(i=this.mul(i,r[o]),a=0,o=0)):a=0}c=26}return i},k.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},k.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},s.mont=function(e){return new R(e)},n(R,k),R.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},R.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},R.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=r.isub(n).iushrn(this.shift),i=s;return s.cmp(this.m)>=0?i=s.isub(this.m):s.cmpn(0)<0&&(i=s.iadd(this.m)),i._forceRed(this)},R.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new s(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},R.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,_t)}(ac);var uc=kt(ac.exports);var hc=uc.BN;const lc=new La("bignumber/5.8.0"),dc={},fc=9007199254740991;let pc=!1;class mc{constructor(e,t){e!==dc&&lc.throwError("cannot call constructor directly; use BigNumber.from",La.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=t,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return yc(wc(this).fromTwos(e))}toTwos(e){return yc(wc(this).toTwos(e))}abs(){return"-"===this._hex[0]?mc.from(this._hex.substring(1)):this}add(e){return yc(wc(this).add(wc(e)))}sub(e){return yc(wc(this).sub(wc(e)))}div(e){return mc.from(e).isZero()&&vc("division-by-zero","div"),yc(wc(this).div(wc(e)))}mul(e){return yc(wc(this).mul(wc(e)))}mod(e){const t=wc(e);return t.isNeg()&&vc("division-by-zero","mod"),yc(wc(this).umod(t))}pow(e){const t=wc(e);return t.isNeg()&&vc("negative-power","pow"),yc(wc(this).pow(t))}and(e){const t=wc(e);return(this.isNegative()||t.isNeg())&&vc("unbound-bitwise-result","and"),yc(wc(this).and(t))}or(e){const t=wc(e);return(this.isNegative()||t.isNeg())&&vc("unbound-bitwise-result","or"),yc(wc(this).or(t))}xor(e){const t=wc(e);return(this.isNegative()||t.isNeg())&&vc("unbound-bitwise-result","xor"),yc(wc(this).xor(t))}mask(e){return(this.isNegative()||e<0)&&vc("negative-width","mask"),yc(wc(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&vc("negative-width","shl"),yc(wc(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&vc("negative-width","shr"),yc(wc(this).shrn(e))}eq(e){return wc(this).eq(wc(e))}lt(e){return wc(this).lt(wc(e))}lte(e){return wc(this).lte(wc(e))}gt(e){return wc(this).gt(wc(e))}gte(e){return wc(this).gte(wc(e))}isNegative(){return"-"===this._hex[0]}isZero(){return wc(this).isZero()}toNumber(){try{return wc(this).toNumber()}catch(e){vc("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch(e){}return lc.throwError("this platform does not support BigInt",La.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(10===arguments[0]?pc||(pc=!0,lc.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):16===arguments[0]?lc.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",La.errors.UNEXPECTED_ARGUMENT,{}):lc.throwError("BigNumber.toString does not accept parameters",La.errors.UNEXPECTED_ARGUMENT,{})),wc(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof mc)return e;if("string"==typeof e)return e.match(/^-?0x[0-9a-f]+$/i)?new mc(dc,gc(e)):e.match(/^-?[0-9]+$/)?new mc(dc,gc(new hc(e))):lc.throwArgumentError("invalid BigNumber string","value",e);if("number"==typeof e)return e%1&&vc("underflow","BigNumber.from",e),(e>=fc||e<=-fc)&&vc("overflow","BigNumber.from",e),mc.from(String(e));const t=e;if("bigint"==typeof t)return mc.from(t.toString());if(Ha(t))return mc.from(Qa(t));if(t)if(t.toHexString){const e=t.toHexString();if("string"==typeof e)return mc.from(e)}else{let e=t._hex;if(null==e&&"BigNumber"===t.type&&(e=t.hex),"string"==typeof e&&(Ja(e)||"-"===e[0]&&Ja(e.substring(1))))return mc.from(e)}return lc.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!(!e||!e._isBigNumber)}}function gc(e){if("string"!=typeof e)return gc(e.toString(16));if("-"===e[0])return"-"===(e=e.substring(1))[0]&&lc.throwArgumentError("invalid hex","value",e),"0x00"===(e=gc(e))?e:"-"+e;if("0x"!==e.substring(0,2)&&(e="0x"+e),"0x"===e)return"0x00";for(e.length%2&&(e="0x0"+e.substring(2));e.length>4&&"0x00"===e.substring(0,4);)e="0x"+e.substring(4);return e}function yc(e){return mc.from(gc(e))}function wc(e){const t=mc.from(e).toHexString();return"-"===t[0]?new hc("-"+t.substring(3),16):new hc(t.substring(2),16)}function vc(e,t,r){const n={fault:e,operation:t};return null!=r&&(n.value=r),lc.throwError(e,La.errors.NUMERIC_FAULT,n)}const Ac=mc.from(-1),bc=mc.from(0),Ec=mc.from(1),_c=mc.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),kc=new La("strings/5.8.0");var Rc,Ic;function Tc(e,t,r,n,s){if(e===Ic.BAD_PREFIX||e===Ic.UNEXPECTED_CONTINUE){let e=0;for(let n=t+1;n<r.length&&r[n]>>6==2;n++)e++;return e}return e===Ic.OVERRUN?r.length-t-1:0}!function(e){e.current="",e.NFC="NFC",e.NFD="NFD",e.NFKC="NFKC",e.NFKD="NFKD"}(Rc||(Rc={})),function(e){e.UNEXPECTED_CONTINUE="unexpected continuation byte",e.BAD_PREFIX="bad codepoint prefix",e.OVERRUN="string overrun",e.MISSING_CONTINUE="missing continuation byte",e.OUT_OF_RANGE="out of UTF-8 range",e.UTF16_SURROGATE="UTF-16 surrogate",e.OVERLONG="overlong representation"}(Ic||(Ic={}));const Nc=Object.freeze({error:function(e,t,r,n,s){return kc.throwArgumentError(`invalid codepoint at offset ${t}; ${e}`,"bytes",r)},ignore:Tc,replace:function(e,t,r,n,s){return e===Ic.OVERLONG?(n.push(s),0):(n.push(65533),Tc(e,t,r))}});function Sc(e,t){null==t&&(t=Nc.error),e=za(e);const r=[];let n=0;for(;n<e.length;){const s=e[n++];if(!(s>>7)){r.push(s);continue}let i=null,o=null;if(192==(224&s))i=1,o=127;else if(224==(240&s))i=2,o=2047;else{if(240!=(248&s)){n+=t(128==(192&s)?Ic.UNEXPECTED_CONTINUE:Ic.BAD_PREFIX,n-1,e,r);continue}i=3,o=65535}if(n-1+i>=e.length){n+=t(Ic.OVERRUN,n-1,e,r);continue}let a=s&(1<<8-i-1)-1;for(let s=0;s<i;s++){let s=e[n];if(128!=(192&s)){n+=t(Ic.MISSING_CONTINUE,n,e,r),a=null;break}a=a<<6|63&s,n++}null!==a&&(a>1114111?n+=t(Ic.OUT_OF_RANGE,n-1-i,e,r,a):a>=55296&&a<=57343?n+=t(Ic.UTF16_SURROGATE,n-1-i,e,r,a):a<=o?n+=t(Ic.OVERLONG,n-1-i,e,r,a):r.push(a))}return r}function Pc(e,t=Rc.current){t!=Rc.current&&(kc.checkNormalize(),e=e.normalize(t));let r=[];for(let t=0;t<e.length;t++){const n=e.charCodeAt(t);if(n<128)r.push(n);else if(n<2048)r.push(n>>6|192),r.push(63&n|128);else if(55296==(64512&n)){t++;const s=e.charCodeAt(t);if(t>=e.length||56320!=(64512&s))throw new Error("invalid utf-8 string");const i=65536+((1023&n)<<10)+(1023&s);r.push(i>>18|240),r.push(i>>12&63|128),r.push(i>>6&63|128),r.push(63&i|128)}else r.push(n>>12|224),r.push(n>>6&63|128),r.push(63&n|128)}return za(r)}function Oc(e,t){return Sc(e,t).map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10&1023),56320+(1023&e)))).join("")}function Cc(e){return ic(Pc(e))}const xc="hash/5.8.0";function Mc(e){e=atob(e);const t=[];for(let r=0;r<e.length;r++)t.push(e.charCodeAt(r));return za(t)}function Uc(e){e=za(e);let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}function Dc(e,t){null==t&&(t=1);const r=[],n=r.forEach,s=function(e,t){n.call(e,function(e){t>0&&Array.isArray(e)?s(e,t-1):r.push(e)})};return s(e,t),r}function Lc(e){return function(e){let t=0;return()=>e[t++]}(function(e){let t=0;function r(){return e[t++]<<8|e[t++]}let n=r(),s=1,i=[0,1];for(let e=1;e<n;e++)i.push(s+=r());let o=r(),a=t;t+=o;let c=0,u=0;function h(){return 0==c&&(u=u<<8|e[t++],c=8),u>>--c&1}const l=Math.pow(2,31),d=l>>>1,f=d>>1,p=l-1;let m=0;for(let e=0;e<31;e++)m=m<<1|h();let g=[],y=0,w=l;for(;;){let e=Math.floor(((m-y+1)*s-1)/w),t=0,r=n;for(;r-t>1;){let n=t+r>>>1;e<i[n]?r=n:t=n}if(0==t)break;g.push(t);let o=y+Math.floor(w*i[t]/s),a=y+Math.floor(w*i[t+1]/s)-1;for(;0==((o^a)&d);)m=m<<1&p|h(),o=o<<1&p,a=a<<1&p|1;for(;o&~a&f;)m=m&d|m<<1&p>>>1|h(),o=o<<1^d,a=(a^d)<<1|d|1;y=o,w=1+a-o}let v=n-4;return g.map(t=>{switch(t-v){case 3:return v+65792+(e[a++]<<16|e[a++]<<8|e[a++]);case 2:return v+256+(e[a++]<<8|e[a++]);case 1:return v+e[a++];default:return t-1}})}(e))}function Bc(e){return 1&e?~e>>1:e>>1}function Fc(e,t){let r=Array(e);for(let n=0,s=-1;n<e;n++)r[n]=s+=1+t();return r}function qc(e,t){let r=Array(e);for(let n=0,s=0;n<e;n++)r[n]=s+=Bc(t());return r}function jc(e,t){let r=Fc(e(),e),n=e(),s=Fc(n,e),i=function(e,t){let r=Array(e);for(let n=0;n<e;n++)r[n]=1+t();return r}(n,e);for(let e=0;e<n;e++)for(let t=0;t<i[e];t++)r.push(s[e]+t);return t?r.map(e=>t[e]):r}function Gc(e,t,r){let n=Array(e).fill(void 0).map(()=>[]);for(let s=0;s<t;s++)qc(e,r).forEach((e,t)=>n[t].push(e));return n}function Hc(e,t){let r=1+t(),n=t(),s=function(e){let t=[];for(;;){let r=e();if(0==r)break;t.push(r)}return t}(t);return Dc(Gc(s.length,1+e,t).map((e,t)=>{const i=e[0],o=e.slice(1);return Array(s[t]).fill(void 0).map((e,t)=>{let s=t*n;return[i+t*r,o.map(e=>e+s)]})}))}function zc(e,t){return Gc(1+t(),1+e,t).map(e=>[e[0],e.slice(1)])}const Kc=Lc(Mc("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA==")),Vc=new Set(jc(Kc)),Wc=new Set(jc(Kc)),Jc=function(e){let t=[];for(;;){let r=e();if(0==r)break;t.push(Hc(r,e))}for(;;){let r=e()-1;if(r<0)break;t.push(zc(r,e))}return function(e){const t={};for(let r=0;r<e.length;r++){const n=e[r];t[n[0]]=n[1]}return t}(Dc(t))}(Kc),Yc=function(e){let t=jc(e).sort((e,t)=>e-t);return function r(){let n=[];for(;;){let s=jc(e,t);if(0==s.length)break;n.push({set:new Set(s),node:r()})}n.sort((e,t)=>t.set.size-e.set.size);let s=e(),i=s%3;s=s/3|0;let o=!!(1&s);return s>>=1,{branches:n,valid:i,fe0f:o,save:1==s,check:2==s}}()}(Kc);function Qc(e){return function(e,t=Rc.current){return Sc(Pc(e,t))}(e)}function Xc(e){return e.filter(e=>65039!=e)}function $c(e){for(let t of e.split(".")){let e=Qc(t);try{for(let t=e.lastIndexOf(95)-1;t>=0;t--)if(95!==e[t])throw new Error("underscore only allowed at start");if(e.length>=4&&e.every(e=>e<128)&&45===e[2]&&45===e[3])throw new Error("invalid label extension")}catch(e){throw new Error(`Invalid label "${t}": ${e.message}`)}}return e}function Zc(e){return $c(function(e,t){let r=Qc(e).reverse(),n=[];for(;r.length;){let e=eu(r);if(e){n.push(...t(e));continue}let s=r.pop();if(Vc.has(s)){n.push(s);continue}if(Wc.has(s))continue;let i=Jc[s];if(!i)throw new Error(`Disallowed codepoint: 0x${s.toString(16).toUpperCase()}`);n.push(...i)}return $c(function(e){return e.normalize("NFC")}(String.fromCodePoint(...n)))}(e,Xc))}function eu(e,t){var r;let n,s,i=Yc,o=[],a=e.length;for(;a;){let t=e[--a];if(i=null===(r=i.branches.find(e=>e.set.has(t)))||void 0===r?void 0:r.node,!i)break;if(i.save)s=t;else if(i.check&&t===s)break;o.push(t),i.fe0f&&(o.push(65039),a>0&&65039==e[a-1]&&a--),i.valid&&(n=o.slice(),2==i.valid&&n.splice(1,1),e.length=a)}return n}const tu=new La(xc),ru=new Uint8Array(32);function nu(e){if(0===e.length)throw new Error("invalid ENS name; empty component");return e}function su(e){const t=Pc(Zc(e)),r=[];if(0===e.length)return r;let n=0;for(let e=0;e<t.length;e++){46===t[e]&&(r.push(nu(t.slice(n,e))),n=e+1)}if(n>=t.length)throw new Error("invalid ENS name; empty component");return r.push(nu(t.slice(n))),r}function iu(e){"string"!=typeof e&&tu.throwArgumentError("invalid ENS name; not a string","name",e);let t=ru;const r=su(e);for(;r.length;)t=ic(Ka([t,ic(r.pop())]));return Qa(t)}function ou(e){return Qa(Ka(su(e).map(e=>{if(e.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const t=new Uint8Array(e.length+1);return t.set(e,1),t[0]=t.length-1,t})))+"00"}ru.fill(0);const au="Ethereum Signed Message:\n";const cu=new La("rlp/5.8.0");function uu(e){const t=[];for(;e;)t.unshift(255&e),e>>=8;return t}function hu(e,t,r){let n=0;for(let s=0;s<r;s++)n=256*n+e[t+s];return n}function lu(e){if(Array.isArray(e)){let t=[];if(e.forEach(function(e){t=t.concat(lu(e))}),t.length<=55)return t.unshift(192+t.length),t;const r=uu(t.length);return r.unshift(247+r.length),r.concat(t)}ja(e)||cu.throwArgumentError("RLP object must be BytesLike","object",e);const t=Array.prototype.slice.call(za(e));if(1===t.length&&t[0]<=127)return t;if(t.length<=55)return t.unshift(128+t.length),t;const r=uu(t.length);return r.unshift(183+r.length),r.concat(t)}function du(e){return Qa(lu(e))}function fu(e,t,r,n){const s=[];for(;r<t+1+n;){const i=pu(e,r);s.push(i.result),(r+=i.consumed)>t+1+n&&cu.throwError("child data too short",La.errors.BUFFER_OVERRUN,{})}return{consumed:1+n,result:s}}function pu(e,t){if(0===e.length&&cu.throwError("data too short",La.errors.BUFFER_OVERRUN,{}),e[t]>=248){const r=e[t]-247;t+1+r>e.length&&cu.throwError("data short segment too short",La.errors.BUFFER_OVERRUN,{});const n=hu(e,t+1,r);return t+1+r+n>e.length&&cu.throwError("data long segment too short",La.errors.BUFFER_OVERRUN,{}),fu(e,t,t+1+r,r+n)}if(e[t]>=192){const r=e[t]-192;return t+1+r>e.length&&cu.throwError("data array too short",La.errors.BUFFER_OVERRUN,{}),fu(e,t,t+1,r)}if(e[t]>=184){const r=e[t]-183;t+1+r>e.length&&cu.throwError("data array too short",La.errors.BUFFER_OVERRUN,{});const n=hu(e,t+1,r);t+1+r+n>e.length&&cu.throwError("data array too short",La.errors.BUFFER_OVERRUN,{});return{consumed:1+r+n,result:Qa(e.slice(t+1+r,t+1+r+n))}}if(e[t]>=128){const r=e[t]-128;t+1+r>e.length&&cu.throwError("data too short",La.errors.BUFFER_OVERRUN,{});return{consumed:1+r,result:Qa(e.slice(t+1,t+1+r))}}return{consumed:1,result:Qa(e[t])}}function mu(e){const t=za(e),r=pu(t,0);return r.consumed!==t.length&&cu.throwArgumentError("invalid rlp data","data",e),r.result}const gu=new La("address/5.8.0");function yu(e){Ja(e,20)||gu.throwArgumentError("invalid address","address",e);const t=(e=e.toLowerCase()).substring(2).split(""),r=new Uint8Array(40);for(let e=0;e<40;e++)r[e]=t[e].charCodeAt(0);const n=za(ic(r));for(let e=0;e<40;e+=2)n[e>>1]>>4>=8&&(t[e]=t[e].toUpperCase()),(15&n[e>>1])>=8&&(t[e+1]=t[e+1].toUpperCase());return"0x"+t.join("")}const wu={};for(let e=0;e<10;e++)wu[String(e)]=String(e);for(let e=0;e<26;e++)wu[String.fromCharCode(65+e)]=String(10+e);const vu=Math.floor(function(e){return Math.log10?Math.log10(e):Math.log(e)/Math.LN10}(9007199254740991));function Au(e){let t=null;if("string"!=typeof e&&gu.throwArgumentError("invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/))"0x"!==e.substring(0,2)&&(e="0x"+e),t=yu(e),e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&t!==e&&gu.throwArgumentError("bad address checksum","address",e);else if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(e.substring(2,4)!==function(e){let t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map(e=>wu[e]).join("");for(;t.length>=vu;){let e=t.substring(0,vu);t=parseInt(e,10)%97+t.substring(e.length)}let r=String(98-parseInt(t,10)%97);for(;r.length<2;)r="0"+r;return r}(e)&&gu.throwArgumentError("bad icap checksum","address",e),r=e.substring(4),t=new hc(r,36).toString(16);t.length<40;)t="0"+t;t=yu("0x"+t)}else gu.throwArgumentError("invalid address","address",e);var r;return t}var bu=function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})};const Eu=new La("properties/5.8.0");function _u(e,t,r){Object.defineProperty(e,t,{enumerable:!0,value:r,writable:!1})}function ku(e,t){for(let r=0;r<32;r++){if(e[t])return e[t];if(!e.prototype||"object"!=typeof e.prototype)break;e=Object.getPrototypeOf(e.prototype).constructor}return null}function Ru(e){return bu(this,void 0,void 0,function*(){const t=Object.keys(e).map(t=>{const r=e[t];return Promise.resolve(r).then(e=>({key:t,value:e}))});return(yield Promise.all(t)).reduce((e,t)=>(e[t.key]=t.value,e),{})})}function Iu(e,t){e&&"object"==typeof e||Eu.throwArgumentError("invalid object","object",e),Object.keys(e).forEach(r=>{t[r]||Eu.throwArgumentError("invalid object key - "+r,"transaction:"+r,e)})}function Tu(e){const t={};for(const r in e)t[r]=e[r];return t}const Nu={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function Su(e){if(null==e||Nu[typeof e])return!0;if(Array.isArray(e)||"object"==typeof e){if(!Object.isFrozen(e))return!1;const t=Object.keys(e);for(let r=0;r<t.length;r++){let n=null;try{n=e[t[r]]}catch(e){continue}if(!Su(n))return!1}return!0}return Eu.throwArgumentError("Cannot deepCopy "+typeof e,"object",e)}function Pu(e){if(Su(e))return e;if(Array.isArray(e))return Object.freeze(e.map(e=>Ou(e)));if("object"==typeof e){const t={};for(const r in e){const n=e[r];void 0!==n&&_u(t,r,Ou(n))}return t}return Eu.throwArgumentError("Cannot deepCopy "+typeof e,"object",e)}function Ou(e){return Pu(e)}class Cu{constructor(e){for(const t in e)this[t]=Ou(e[t])}}var xu=function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})};const Mu=new La(xc),Uu=new Uint8Array(32);Uu.fill(0);const Du=mc.from(-1),Lu=mc.from(0),Bu=mc.from(1),Fu=mc.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const qu=rc(Bu.toHexString(),32),ju=rc(Lu.toHexString(),32),Gu={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Hu=["name","version","chainId","verifyingContract","salt"];function zu(e){return function(t){return"string"!=typeof t&&Mu.throwArgumentError(`invalid domain value for ${JSON.stringify(e)}`,`domain.${e}`,t),t}}const Ku={name:zu("name"),version:zu("version"),chainId:function(e){try{return mc.from(e).toString()}catch(e){}return Mu.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",e)},verifyingContract:function(e){try{return Au(e).toLowerCase()}catch(e){}return Mu.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",e)},salt:function(e){try{const t=za(e);if(32!==t.length)throw new Error("bad length");return Qa(t)}catch(e){}return Mu.throwArgumentError('invalid domain value "salt"',"domain.salt",e)}};function Vu(e){{const t=e.match(/^(u?)int(\d*)$/);if(t){const r=""===t[1],n=parseInt(t[2]||"256");(n%8!=0||n>256||t[2]&&t[2]!==String(n))&&Mu.throwArgumentError("invalid numeric width","type",e);const s=Fu.mask(r?n-1:n),i=r?s.add(Bu).mul(Du):Lu;return function(t){const r=mc.from(t);return(r.lt(i)||r.gt(s))&&Mu.throwArgumentError(`value out-of-bounds for ${e}`,"value",t),rc(r.toTwos(256).toHexString(),32)}}}{const t=e.match(/^bytes(\d+)$/);if(t){const r=parseInt(t[1]);return(0===r||r>32||t[1]!==String(r))&&Mu.throwArgumentError("invalid bytes width","type",e),function(t){return za(t).length!==r&&Mu.throwArgumentError(`invalid length for ${e}`,"value",t),function(e){const t=za(e),r=t.length%32;return r?Za([t,Uu.slice(r)]):Qa(t)}(t)}}}switch(e){case"address":return function(e){return rc(Au(e),32)};case"bool":return function(e){return e?qu:ju};case"bytes":return function(e){return ic(e)};case"string":return function(e){return Cc(e)}}return null}function Wu(e,t){return`${e}(${t.map(({name:e,type:t})=>t+" "+e).join(",")})`}class Ju{constructor(e){_u(this,"types",Object.freeze(Ou(e))),_u(this,"_encoderCache",{}),_u(this,"_types",{});const t={},r={},n={};Object.keys(e).forEach(e=>{t[e]={},r[e]=[],n[e]={}});for(const n in e){const s={};e[n].forEach(i=>{s[i.name]&&Mu.throwArgumentError(`duplicate variable name ${JSON.stringify(i.name)} in ${JSON.stringify(n)}`,"types",e),s[i.name]=!0;const o=i.type.match(/^([^\x5b]*)(\x5b|$)/)[1];o===n&&Mu.throwArgumentError(`circular type reference to ${JSON.stringify(o)}`,"types",e);Vu(o)||(r[o]||Mu.throwArgumentError(`unknown type ${JSON.stringify(o)}`,"types",e),r[o].push(n),t[n][o]=!0)})}const s=Object.keys(r).filter(e=>0===r[e].length);0===s.length?Mu.throwArgumentError("missing primary type","types",e):s.length>1&&Mu.throwArgumentError(`ambiguous primary types or unused types: ${s.map(e=>JSON.stringify(e)).join(", ")}`,"types",e),_u(this,"primaryType",s[0]),function s(i,o){o[i]&&Mu.throwArgumentError(`circular type reference to ${JSON.stringify(i)}`,"types",e),o[i]=!0,Object.keys(t[i]).forEach(e=>{r[e]&&(s(e,o),Object.keys(o).forEach(t=>{n[t][e]=!0}))}),delete o[i]}(this.primaryType,{});for(const t in n){const r=Object.keys(n[t]);r.sort(),this._types[t]=Wu(t,e[t])+r.map(t=>Wu(t,e[t])).join("")}}getEncoder(e){let t=this._encoderCache[e];return t||(t=this._encoderCache[e]=this._getEncoder(e)),t}_getEncoder(e){{const t=Vu(e);if(t)return t}const t=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(t){const e=t[1],r=this.getEncoder(e),n=parseInt(t[3]);return t=>{n>=0&&t.length!==n&&Mu.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",t);let s=t.map(r);return this._types[e]&&(s=s.map(ic)),ic(Za(s))}}const r=this.types[e];if(r){const t=Cc(this._types[e]);return e=>{const n=r.map(({name:t,type:r})=>{const n=this.getEncoder(r)(e[t]);return this._types[r]?ic(n):n});return n.unshift(t),Za(n)}}return Mu.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const t=this._types[e];return t||Mu.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return ic(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,r){if(Vu(e))return r(e,t);const n=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(n){const e=n[1],s=parseInt(n[3]);return s>=0&&t.length!==s&&Mu.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",t),t.map(t=>this._visit(e,t,r))}const s=this.types[e];return s?s.reduce((e,{name:n,type:s})=>(e[n]=this._visit(s,t[n],r),e),{}):Mu.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new Ju(e)}static getPrimaryType(e){return Ju.from(e).primaryType}static hashStruct(e,t,r){return Ju.from(t).hashStruct(e,r)}static hashDomain(e){const t=[];for(const r in e){const n=Gu[r];n||Mu.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),t.push({name:r,type:n})}return t.sort((e,t)=>Hu.indexOf(e.name)-Hu.indexOf(t.name)),Ju.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,r){return Za(["0x1901",Ju.hashDomain(e),Ju.from(t).hash(r)])}static hash(e,t,r){return ic(Ju.encode(e,t,r))}static resolveNames(e,t,r,n){return xu(this,void 0,void 0,function*(){e=Tu(e);const s={};e.verifyingContract&&!Ja(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const i=Ju.from(t);i.visit(r,(e,t)=>("address"!==e||Ja(t,20)||(s[t]="0x"),t));for(const e in s)s[e]=yield n(e);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),r=i.visit(r,(e,t)=>"address"===e&&s[t]?s[t]:t),{domain:e,value:r}})}static getPayload(e,t,r){Ju.hashDomain(e);const n={},s=[];Hu.forEach(t=>{const r=e[t];null!=r&&(n[t]=Ku[t](r),s.push({name:t,type:Gu[t]}))});const i=Ju.from(t),o=Tu(t);return o.EIP712Domain?Mu.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",t):o.EIP712Domain=s,i.encode(r),{types:o,domain:n,primaryType:i.primaryType,message:i.visit(r,(e,t)=>{if(e.match(/^bytes(\d*)/))return Qa(za(t));if(e.match(/^u?int/))return mc.from(t).toString();switch(e){case"address":return t.toLowerCase();case"bool":return!!t;case"string":return"string"!=typeof t&&Mu.throwArgumentError("invalid string","value",t),t}return Mu.throwArgumentError("unsupported type","type",e)})}}}var Yu=Object.freeze({__proto__:null,_TypedDataEncoder:Ju,dnsEncode:ou,hashMessage:function(e){return"string"==typeof e&&(e=Pc(e)),ic(Ka([Pc(au),Pc(String(e.length)),e]))},id:Cc,messagePrefix:au,namehash:iu});const Qu="abi/5.8.0",Xu=new La(Qu),$u={};let Zu={calldata:!0,memory:!0,storage:!0},eh={calldata:!0,memory:!0};function th(e,t){if("bytes"===e||"string"===e){if(Zu[t])return!0}else if("address"===e){if("payable"===t)return!0}else if((e.indexOf("[")>=0||"tuple"===e)&&eh[t])return!0;return(Zu[t]||"payable"===t)&&Xu.throwArgumentError("invalid modifier","name",t),!1}function rh(e,t){for(let r in t)_u(e,r,t[r])}const nh=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),sh=new RegExp(/^(.*)\[([0-9]*)\]$/);class ih{constructor(e,t){e!==$u&&Xu.throwError("use fromString",La.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),rh(this,t);let r=this.type.match(sh);rh(this,r?{arrayLength:parseInt(r[2]||"-1"),arrayChildren:ih.fromObject({type:r[1],components:this.components}),baseType:"array"}:{arrayLength:null,arrayChildren:null,baseType:null!=this.components?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(e){if(e||(e=nh.sighash),nh[e]||Xu.throwArgumentError("invalid format type","format",e),e===nh.json){let t={type:"tuple"===this.baseType?"tuple":this.type,name:this.name||void 0};return"boolean"==typeof this.indexed&&(t.indexed=this.indexed),this.components&&(t.components=this.components.map(t=>JSON.parse(t.format(e)))),JSON.stringify(t)}let t="";return"array"===this.baseType?(t+=this.arrayChildren.format(e),t+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):"tuple"===this.baseType?(e!==nh.sighash&&(t+=this.type),t+="("+this.components.map(t=>t.format(e)).join(e===nh.full?", ":",")+")"):t+=this.type,e!==nh.sighash&&(!0===this.indexed&&(t+=" indexed"),e===nh.full&&this.name&&(t+=" "+this.name)),t}static from(e,t){return"string"==typeof e?ih.fromString(e,t):ih.fromObject(e)}static fromObject(e){return ih.isParamType(e)?e:new ih($u,{name:e.name||null,type:oh(e.type),indexed:null==e.indexed?null:!!e.indexed,components:e.components?e.components.map(ih.fromObject):null})}static fromString(e,t){return r=function(e,t){let r=e;function n(t){Xu.throwArgumentError(`unexpected character at position ${t}`,"param",e)}function s(e){let r={type:"",name:"",parent:e,state:{allowType:!0}};return t&&(r.indexed=!1),r}e=e.replace(/\s/g," ");let i={type:"",name:"",state:{allowType:!0}},o=i;for(let r=0;r<e.length;r++){let i=e[r];switch(i){case"(":o.state.allowType&&""===o.type?o.type="tuple":o.state.allowParams||n(r),o.state.allowType=!1,o.type=oh(o.type),o.components=[s(o)],o=o.components[0];break;case")":delete o.state,"indexed"===o.name&&(t||n(r),o.indexed=!0,o.name=""),th(o.type,o.name)&&(o.name=""),o.type=oh(o.type);let e=o;o=o.parent,o||n(r),delete e.parent,o.state.allowParams=!1,o.state.allowName=!0,o.state.allowArray=!0;break;case",":delete o.state,"indexed"===o.name&&(t||n(r),o.indexed=!0,o.name=""),th(o.type,o.name)&&(o.name=""),o.type=oh(o.type);let a=s(o.parent);o.parent.components.push(a),delete o.parent,o=a;break;case" ":o.state.allowType&&""!==o.type&&(o.type=oh(o.type),delete o.state.allowType,o.state.allowName=!0,o.state.allowParams=!0),o.state.allowName&&""!==o.name&&("indexed"===o.name?(t||n(r),o.indexed&&n(r),o.indexed=!0,o.name=""):th(o.type,o.name)?o.name="":o.state.allowName=!1);break;case"[":o.state.allowArray||n(r),o.type+=i,o.state.allowArray=!1,o.state.allowName=!1,o.state.readArray=!0;break;case"]":o.state.readArray||n(r),o.type+=i,o.state.readArray=!1,o.state.allowArray=!0,o.state.allowName=!0;break;default:o.state.allowType?(o.type+=i,o.state.allowParams=!0,o.state.allowArray=!0):o.state.allowName?(o.name+=i,delete o.state.allowArray):o.state.readArray?o.type+=i:n(r)}}return o.parent&&Xu.throwArgumentError("unexpected eof","param",e),delete i.state,"indexed"===o.name?(t||n(r.length-7),o.indexed&&n(r.length-7),o.indexed=!0,o.name=""):th(o.type,o.name)&&(o.name=""),i.type=oh(i.type),i}(e,!!t),ih.fromObject({name:r.name,type:r.type,indexed:r.indexed,components:r.components});var r}static isParamType(e){return!(null==e||!e._isParamType)}}function oh(e){return e.match(/^uint($|[^1-9])/)?e="uint256"+e.substring(4):e.match(/^int($|[^1-9])/)&&(e="int256"+e.substring(3)),e}const ah=new La(Qu);class ch{constructor(e,t,r,n){this.name=e,this.type=t,this.localName=r,this.dynamic=n}_throwError(e,t){ah.throwArgumentError(e,this.localName,t)}}class uh{constructor(e){_u(this,"wordSize",e||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(e)}get data(){return Za(this._data)}get length(){return this._dataLength}_writeData(e){return this._data.push(e),this._dataLength+=e.length,e.length}appendWriter(e){return this._writeData(Ka(e._data))}writeBytes(e){let t=za(e);const r=t.length%this.wordSize;return r&&(t=Ka([t,this._padding.slice(r)])),this._writeData(t)}_getValue(e){let t=za(mc.from(e));return t.length>this.wordSize&&ah.throwError("value out-of-bounds",La.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:t.length}),t.length%this.wordSize&&(t=Ka([this._padding.slice(t.length%this.wordSize),t])),t}writeValue(e){return this._writeData(this._getValue(e))}writeUpdatableValue(){const e=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,t=>{this._data[e]=this._getValue(t)}}}class hh{constructor(e,t,r,n){_u(this,"_data",za(e)),_u(this,"wordSize",t||32),_u(this,"_coerceFunc",r),_u(this,"allowLoose",n),this._offset=0}get data(){return Qa(this._data)}get consumed(){return this._offset}static coerce(e,t){let r=e.match("^u?int([0-9]+)$");return r&&parseInt(r[1])<=48&&(t=t.toNumber()),t}coerce(e,t){return this._coerceFunc?this._coerceFunc(e,t):hh.coerce(e,t)}_peekBytes(e,t,r){let n=Math.ceil(t/this.wordSize)*this.wordSize;return this._offset+n>this._data.length&&(this.allowLoose&&r&&this._offset+t<=this._data.length?n=t:ah.throwError("data out-of-bounds",La.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+n})),this._data.slice(this._offset,this._offset+n)}subReader(e){return new hh(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(e,t){let r=this._peekBytes(0,e,!!t);return this._offset+=r.length,r.slice(0,e)}readValue(){return mc.from(this.readBytes(this.wordSize))}}class lh extends ch{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){try{t=Au(t)}catch(e){this._throwError(e.message,t)}return e.writeValue(t)}decode(e){return Au(rc(e.readValue().toHexString(),20))}}class dh extends ch{constructor(e){super(e.name,e.type,void 0,e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}const fh=new La(Qu);function ph(e,t,r){let n=null;if(Array.isArray(r))n=r;else if(r&&"object"==typeof r){let e={};n=t.map(t=>{const n=t.localName;return n||fh.throwError("cannot encode object for signature with missing names",La.errors.INVALID_ARGUMENT,{argument:"values",coder:t,value:r}),e[n]&&fh.throwError("cannot encode object for signature with duplicate names",La.errors.INVALID_ARGUMENT,{argument:"values",coder:t,value:r}),e[n]=!0,r[n]})}else fh.throwArgumentError("invalid tuple value","tuple",r);t.length!==n.length&&fh.throwArgumentError("types/value length mismatch","tuple",r);let s=new uh(e.wordSize),i=new uh(e.wordSize),o=[];t.forEach((e,t)=>{let r=n[t];if(e.dynamic){let t=i.length;e.encode(i,r);let n=s.writeUpdatableValue();o.push(e=>{n(e+t)})}else e.encode(s,r)}),o.forEach(e=>{e(s.length)});let a=e.appendWriter(s);return a+=e.appendWriter(i),a}function mh(e,t){let r=[],n=e.subReader(0);t.forEach(t=>{let s=null;if(t.dynamic){let r=e.readValue(),i=n.subReader(r.toNumber());try{s=t.decode(i)}catch(e){if(e.code===La.errors.BUFFER_OVERRUN)throw e;s=e,s.baseType=t.name,s.name=t.localName,s.type=t.type}}else try{s=t.decode(e)}catch(e){if(e.code===La.errors.BUFFER_OVERRUN)throw e;s=e,s.baseType=t.name,s.name=t.localName,s.type=t.type}null!=s&&r.push(s)});const s=t.reduce((e,t)=>{const r=t.localName;return r&&(e[r]||(e[r]=0),e[r]++),e},{});t.forEach((e,t)=>{let n=e.localName;if(!n||1!==s[n])return;if("length"===n&&(n="_length"),null!=r[n])return;const i=r[t];i instanceof Error?Object.defineProperty(r,n,{enumerable:!0,get:()=>{throw i}}):r[n]=i});for(let e=0;e<r.length;e++){const t=r[e];t instanceof Error&&Object.defineProperty(r,e,{enumerable:!0,get:()=>{throw t}})}return Object.freeze(r)}class gh extends ch{constructor(e,t,r){super("array",e.type+"["+(t>=0?t:"")+"]",r,-1===t||e.dynamic),this.coder=e,this.length=t}defaultValue(){const e=this.coder.defaultValue(),t=[];for(let r=0;r<this.length;r++)t.push(e);return t}encode(e,t){Array.isArray(t)||this._throwError("expected array value",t);let r=this.length;-1===r&&(r=t.length,e.writeValue(t.length)),fh.checkArgumentCount(t.length,r,"coder array"+(this.localName?" "+this.localName:""));let n=[];for(let e=0;e<t.length;e++)n.push(this.coder);return ph(e,n,t)}decode(e){let t=this.length;-1===t&&(t=e.readValue().toNumber(),32*t>e._data.length&&fh.throwError("insufficient data length",La.errors.BUFFER_OVERRUN,{length:e._data.length,count:t}));let r=[];for(let e=0;e<t;e++)r.push(new dh(this.coder));return e.coerce(this.name,mh(e,r))}}class yh extends ch{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){return e.writeValue(t?1:0)}decode(e){return e.coerce(this.type,!e.readValue().isZero())}}class wh extends ch{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=za(t);let r=e.writeValue(t.length);return r+=e.writeBytes(t),r}decode(e){return e.readBytes(e.readValue().toNumber(),!0)}}class vh extends wh{constructor(e){super("bytes",e)}decode(e){return e.coerce(this.name,Qa(super.decode(e)))}}class Ah extends ch{constructor(e,t){let r="bytes"+String(e);super(r,r,t,!1),this.size=e}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(e,t){let r=za(t);return r.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(r)}decode(e){return e.coerce(this.name,Qa(e.readBytes(this.size)))}}class bh extends ch{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return null!=t&&this._throwError("not null",t),e.writeBytes([])}decode(e){return e.readBytes(0),e.coerce(this.name,null)}}class Eh extends ch{constructor(e,t,r){const n=(t?"int":"uint")+8*e;super(n,n,r,!1),this.size=e,this.signed=t}defaultValue(){return 0}encode(e,t){let r=mc.from(t),n=_c.mask(8*e.wordSize);if(this.signed){let e=n.mask(8*this.size-1);(r.gt(e)||r.lt(e.add(Ec).mul(Ac)))&&this._throwError("value out-of-bounds",t)}else(r.lt(bc)||r.gt(n.mask(8*this.size)))&&this._throwError("value out-of-bounds",t);return r=r.toTwos(8*this.size).mask(8*this.size),this.signed&&(r=r.fromTwos(8*this.size).toTwos(8*e.wordSize)),e.writeValue(r)}decode(e){let t=e.readValue().mask(8*this.size);return this.signed&&(t=t.fromTwos(8*this.size)),e.coerce(this.name,t)}}class _h extends wh{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,Pc(t))}decode(e){return Oc(super.decode(e))}}class kh extends ch{constructor(e,t){let r=!1;const n=[];e.forEach(e=>{e.dynamic&&(r=!0),n.push(e.type)});super("tuple","tuple("+n.join(",")+")",t,r),this.coders=e}defaultValue(){const e=[];this.coders.forEach(t=>{e.push(t.defaultValue())});const t=this.coders.reduce((e,t)=>{const r=t.localName;return r&&(e[r]||(e[r]=0),e[r]++),e},{});return this.coders.forEach((r,n)=>{let s=r.localName;s&&1===t[s]&&("length"===s&&(s="_length"),null==e[s]&&(e[s]=e[n]))}),Object.freeze(e)}encode(e,t){return ph(e,this.coders,t)}decode(e){return e.coerce(this.name,mh(e,this.coders))}}const Rh=new La(Qu),Ih=new RegExp(/^bytes([0-9]*)$/),Th=new RegExp(/^(u?int)([0-9]*)$/);class Nh{constructor(e){_u(this,"coerceFunc",e||null)}_getCoder(e){switch(e.baseType){case"address":return new lh(e.name);case"bool":return new yh(e.name);case"string":return new _h(e.name);case"bytes":return new vh(e.name);case"array":return new gh(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new kh((e.components||[]).map(e=>this._getCoder(e)),e.name);case"":return new bh(e.name)}let t=e.type.match(Th);if(t){let r=parseInt(t[2]||"256");return(0===r||r>256||r%8!=0)&&Rh.throwArgumentError("invalid "+t[1]+" bit length","param",e),new Eh(r/8,"int"===t[1],e.name)}if(t=e.type.match(Ih),t){let r=parseInt(t[1]);return(0===r||r>32)&&Rh.throwArgumentError("invalid bytes length","param",e),new Ah(r,e.name)}return Rh.throwArgumentError("invalid type","type",e.type)}_getWordSize(){return 32}_getReader(e,t){return new hh(e,this._getWordSize(),this.coerceFunc,t)}_getWriter(){return new uh(this._getWordSize())}getDefaultValue(e){const t=e.map(e=>this._getCoder(ih.from(e)));return new kh(t,"_").defaultValue()}encode(e,t){e.length!==t.length&&Rh.throwError("types/values length mismatch",La.errors.INVALID_ARGUMENT,{count:{types:e.length,values:t.length},value:{types:e,values:t}});const r=e.map(e=>this._getCoder(ih.from(e))),n=new kh(r,"_"),s=this._getWriter();return n.encode(s,t),s.data}decode(e,t,r){const n=e.map(e=>this._getCoder(ih.from(e)));return new kh(n,"_").decode(this._getReader(za(t),r))}}const Sh=new Nh;var Ph=Object.freeze({__proto__:null,AbiCoder:Nh,FormatTypes:nh,ParamType:ih,defaultAbiCoder:Sh});var Oh=function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})};const Ch=new La("abstract-provider/5.8.0");class xh extends Cu{static isForkEvent(e){return!(!e||!e._isForkEvent)}}class Mh{constructor(){Ch.checkAbstract(new.target,Mh),_u(this,"_isProvider",!0)}getFeeData(){return Oh(this,void 0,void 0,function*(){const{block:e,gasPrice:t}=yield Ru({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(e=>null)});let r=null,n=null,s=null;return e&&e.baseFeePerGas&&(r=e.baseFeePerGas,s=mc.from("1500000000"),n=e.baseFeePerGas.mul(2).add(s)),{lastBaseFeePerGas:r,maxFeePerGas:n,maxPriorityFeePerGas:s,gasPrice:t}})}addListener(e,t){return this.on(e,t)}removeListener(e,t){return this.off(e,t)}static isProvider(e){return!(!e||!e._isProvider)}}const Uh=new La("networks/5.8.0");function Dh(e){const t=function(t,r){null==r&&(r={});const n=[];if(t.InfuraProvider&&"-"!==r.infura)try{n.push(new t.InfuraProvider(e,r.infura))}catch(e){}if(t.EtherscanProvider&&"-"!==r.etherscan)try{n.push(new t.EtherscanProvider(e,r.etherscan))}catch(e){}if(t.AlchemyProvider&&"-"!==r.alchemy)try{n.push(new t.AlchemyProvider(e,r.alchemy))}catch(e){}if(t.PocketProvider&&"-"!==r.pocket){const s=["goerli","ropsten","rinkeby","sepolia"];try{const i=new t.PocketProvider(e,r.pocket);i.network&&-1===s.indexOf(i.network.name)&&n.push(i)}catch(e){}}if(t.CloudflareProvider&&"-"!==r.cloudflare)try{n.push(new t.CloudflareProvider(e))}catch(e){}if(t.AnkrProvider&&"-"!==r.ankr)try{const s=["ropsten"],i=new t.AnkrProvider(e,r.ankr);i.network&&-1===s.indexOf(i.network.name)&&n.push(i)}catch(e){}if(t.QuickNodeProvider&&"-"!==r.quicknode)try{n.push(new t.QuickNodeProvider(e,r.quicknode))}catch(e){}if(0===n.length)return null;if(t.FallbackProvider){let s=1;return null!=r.quorum?s=r.quorum:"homestead"===e&&(s=2),new t.FallbackProvider(n,s)}return n[0]};return t.renetwork=function(e){return Dh(e)},t}function Lh(e,t){const r=function(r,n){return r.JsonRpcProvider?new r.JsonRpcProvider(e,t):null};return r.renetwork=function(t){return Lh(e,t)},r}const Bh={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:Dh("homestead")},Fh={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:Dh("ropsten")},qh={chainId:63,name:"classicMordor",_defaultProvider:Lh("https://www.ethercluster.com/mordor","classicMordor")},jh={unspecified:{chainId:0,name:"unspecified"},homestead:Bh,mainnet:Bh,morden:{chainId:2,name:"morden"},ropsten:Fh,testnet:Fh,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:Dh("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:Dh("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:Dh("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"sepolia",_defaultProvider:Dh("sepolia")},holesky:{chainId:17e3,name:"holesky",_defaultProvider:Dh("holesky")},classic:{chainId:61,name:"classic",_defaultProvider:Lh("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:qh,classicTestnet:qh,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:Lh("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:Dh("matic")},maticmum:{chainId:80001,name:"maticmum",_defaultProvider:Dh("maticmum")},optimism:{chainId:10,name:"optimism",_defaultProvider:Dh("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},"optimism-sepolia":{chainId:11155420,name:"optimism-sepolia"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},"arbitrum-sepolia":{chainId:421614,name:"arbitrum-sepolia"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function Gh(e){if(null==e)return null;if("number"==typeof e){for(const t in jh){const r=jh[t];if(r.chainId===e)return{name:r.name,chainId:r.chainId,ensAddress:r.ensAddress||null,_defaultProvider:r._defaultProvider||null}}return{chainId:e,name:"unknown"}}if("string"==typeof e){const t=jh[e];return null==t?null:{name:t.name,chainId:t.chainId,ensAddress:t.ensAddress,_defaultProvider:t._defaultProvider||null}}const t=jh[e.name];if(!t)return"number"!=typeof e.chainId&&Uh.throwArgumentError("invalid network chainId","network",e),e;0!==e.chainId&&e.chainId!==t.chainId&&Uh.throwArgumentError("network chainId mismatch","network",e);let r=e._defaultProvider||null;var n;return null==r&&t._defaultProvider&&(r=(n=t._defaultProvider)&&"function"==typeof n.renetwork?t._defaultProvider.renetwork(e):t._defaultProvider),{name:e.name,chainId:t.chainId,ensAddress:e.ensAddress||t.ensAddress||null,_defaultProvider:r}}class Hh{constructor(e){_u(this,"alphabet",e),_u(this,"base",e.length),_u(this,"_alphabetMap",{}),_u(this,"_leader",e.charAt(0));for(let t=0;t<e.length;t++)this._alphabetMap[e.charAt(t)]=t}encode(e){let t=za(e);if(0===t.length)return"";let r=[0];for(let e=0;e<t.length;++e){let n=t[e];for(let e=0;e<r.length;++e)n+=r[e]<<8,r[e]=n%this.base,n=n/this.base|0;for(;n>0;)r.push(n%this.base),n=n/this.base|0}let n="";for(let e=0;0===t[e]&&e<t.length-1;++e)n+=this._leader;for(let e=r.length-1;e>=0;--e)n+=this.alphabet[r[e]];return n}decode(e){if("string"!=typeof e)throw new TypeError("Expected String");let t=[];if(0===e.length)return new Uint8Array(t);t.push(0);for(let r=0;r<e.length;r++){let n=this._alphabetMap[e[r]];if(void 0===n)throw new Error("Non-base"+this.base+" character");let s=n;for(let e=0;e<t.length;++e)s+=t[e]*this.base,t[e]=255&s,s>>=8;for(;s>0;)t.push(255&s),s>>=8}for(let r=0;e[r]===this._leader&&r<e.length-1;++r)t.push(0);return za(new Uint8Array(t.reverse()))}}new Hh("abcdefghijklmnopqrstuvwxyz234567");const zh=new Hh("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var Kh={},Vh={},Wh=Jh;function Jh(e,t){if(!e)throw new Error(t||"Assertion failed")}Jh.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var Yh={exports:{}};"function"==typeof Object.create?Yh.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Yh.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}};var Qh=Yh.exports,Xh=Wh,$h=Qh;function Zh(e,t){return 55296==(64512&e.charCodeAt(t))&&(!(t<0||t+1>=e.length)&&56320==(64512&e.charCodeAt(t+1)))}function el(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function tl(e){return 1===e.length?"0"+e:e}function rl(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}Vh.inherits=$h,Vh.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"==typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),s=0;s<e.length;s+=2)r.push(parseInt(e[s]+e[s+1],16))}else for(var n=0,s=0;s<e.length;s++){var i=e.charCodeAt(s);i<128?r[n++]=i:i<2048?(r[n++]=i>>6|192,r[n++]=63&i|128):Zh(e,s)?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++s)),r[n++]=i>>18|240,r[n++]=i>>12&63|128,r[n++]=i>>6&63|128,r[n++]=63&i|128):(r[n++]=i>>12|224,r[n++]=i>>6&63|128,r[n++]=63&i|128)}else for(s=0;s<e.length;s++)r[s]=0|e[s];return r},Vh.toHex=function(e){for(var t="",r=0;r<e.length;r++)t+=tl(e[r].toString(16));return t},Vh.htonl=el,Vh.toHex32=function(e,t){for(var r="",n=0;n<e.length;n++){var s=e[n];"little"===t&&(s=el(s)),r+=rl(s.toString(16))}return r},Vh.zero2=tl,Vh.zero8=rl,Vh.join32=function(e,t,r,n){var s=r-t;Xh(s%4==0);for(var i=new Array(s/4),o=0,a=t;o<i.length;o++,a+=4){var c;c="big"===n?e[a]<<24|e[a+1]<<16|e[a+2]<<8|e[a+3]:e[a+3]<<24|e[a+2]<<16|e[a+1]<<8|e[a],i[o]=c>>>0}return i},Vh.split32=function(e,t){for(var r=new Array(4*e.length),n=0,s=0;n<e.length;n++,s+=4){var i=e[n];"big"===t?(r[s]=i>>>24,r[s+1]=i>>>16&255,r[s+2]=i>>>8&255,r[s+3]=255&i):(r[s+3]=i>>>24,r[s+2]=i>>>16&255,r[s+1]=i>>>8&255,r[s]=255&i)}return r},Vh.rotr32=function(e,t){return e>>>t|e<<32-t},Vh.rotl32=function(e,t){return e<<t|e>>>32-t},Vh.sum32=function(e,t){return e+t>>>0},Vh.sum32_3=function(e,t,r){return e+t+r>>>0},Vh.sum32_4=function(e,t,r,n){return e+t+r+n>>>0},Vh.sum32_5=function(e,t,r,n,s){return e+t+r+n+s>>>0},Vh.sum64=function(e,t,r,n){var s=e[t],i=n+e[t+1]>>>0,o=(i<n?1:0)+r+s;e[t]=o>>>0,e[t+1]=i},Vh.sum64_hi=function(e,t,r,n){return(t+n>>>0<t?1:0)+e+r>>>0},Vh.sum64_lo=function(e,t,r,n){return t+n>>>0},Vh.sum64_4_hi=function(e,t,r,n,s,i,o,a){var c=0,u=t;return c+=(u=u+n>>>0)<t?1:0,c+=(u=u+i>>>0)<i?1:0,e+r+s+o+(c+=(u=u+a>>>0)<a?1:0)>>>0},Vh.sum64_4_lo=function(e,t,r,n,s,i,o,a){return t+n+i+a>>>0},Vh.sum64_5_hi=function(e,t,r,n,s,i,o,a,c,u){var h=0,l=t;return h+=(l=l+n>>>0)<t?1:0,h+=(l=l+i>>>0)<i?1:0,h+=(l=l+a>>>0)<a?1:0,e+r+s+o+c+(h+=(l=l+u>>>0)<u?1:0)>>>0},Vh.sum64_5_lo=function(e,t,r,n,s,i,o,a,c,u){return t+n+i+a+u>>>0},Vh.rotr64_hi=function(e,t,r){return(t<<32-r|e>>>r)>>>0},Vh.rotr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0},Vh.shr64_hi=function(e,t,r){return e>>>r},Vh.shr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0};var nl={},sl=Vh,il=Wh;function ol(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}nl.BlockHash=ol,ol.prototype.update=function(e,t){if(e=sl.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var r=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-r,e.length),0===this.pending.length&&(this.pending=null),e=sl.join32(e,0,e.length-r,this.endian);for(var n=0;n<e.length;n+=this._delta32)this._update(e,n,n+this._delta32)}return this},ol.prototype.digest=function(e){return this.update(this._pad()),il(null===this.pending),this._digest(e)},ol.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,n=new Array(r+this.padLength);n[0]=128;for(var s=1;s<r;s++)n[s]=0;if(e<<=3,"big"===this.endian){for(var i=8;i<this.padLength;i++)n[s++]=0;n[s++]=0,n[s++]=0,n[s++]=0,n[s++]=0,n[s++]=e>>>24&255,n[s++]=e>>>16&255,n[s++]=e>>>8&255,n[s++]=255&e}else for(n[s++]=255&e,n[s++]=e>>>8&255,n[s++]=e>>>16&255,n[s++]=e>>>24&255,n[s++]=0,n[s++]=0,n[s++]=0,n[s++]=0,i=8;i<this.padLength;i++)n[s++]=0;return n};var al={},cl={},ul=Vh.rotr32;function hl(e,t,r){return e&t^~e&r}function ll(e,t,r){return e&t^e&r^t&r}function dl(e,t,r){return e^t^r}cl.ft_1=function(e,t,r,n){return 0===e?hl(t,r,n):1===e||3===e?dl(t,r,n):2===e?ll(t,r,n):void 0},cl.ch32=hl,cl.maj32=ll,cl.p32=dl,cl.s0_256=function(e){return ul(e,2)^ul(e,13)^ul(e,22)},cl.s1_256=function(e){return ul(e,6)^ul(e,11)^ul(e,25)},cl.g0_256=function(e){return ul(e,7)^ul(e,18)^e>>>3},cl.g1_256=function(e){return ul(e,17)^ul(e,19)^e>>>10};var fl=Vh,pl=nl,ml=cl,gl=fl.rotl32,yl=fl.sum32,wl=fl.sum32_5,vl=ml.ft_1,Al=pl.BlockHash,bl=[1518500249,1859775393,2400959708,3395469782];function El(){if(!(this instanceof El))return new El;Al.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}fl.inherits(El,Al);var _l=El;El.blockSize=512,El.outSize=160,El.hmacStrength=80,El.padLength=64,El.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=gl(r[n-3]^r[n-8]^r[n-14]^r[n-16],1);var s=this.h[0],i=this.h[1],o=this.h[2],a=this.h[3],c=this.h[4];for(n=0;n<r.length;n++){var u=~~(n/20),h=wl(gl(s,5),vl(u,i,o,a),c,r[n],bl[u]);c=a,a=o,o=gl(i,30),i=s,s=h}this.h[0]=yl(this.h[0],s),this.h[1]=yl(this.h[1],i),this.h[2]=yl(this.h[2],o),this.h[3]=yl(this.h[3],a),this.h[4]=yl(this.h[4],c)},El.prototype._digest=function(e){return"hex"===e?fl.toHex32(this.h,"big"):fl.split32(this.h,"big")};var kl=Vh,Rl=nl,Il=cl,Tl=Wh,Nl=kl.sum32,Sl=kl.sum32_4,Pl=kl.sum32_5,Ol=Il.ch32,Cl=Il.maj32,xl=Il.s0_256,Ml=Il.s1_256,Ul=Il.g0_256,Dl=Il.g1_256,Ll=Rl.BlockHash,Bl=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Fl(){if(!(this instanceof Fl))return new Fl;Ll.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=Bl,this.W=new Array(64)}kl.inherits(Fl,Ll);var ql=Fl;Fl.blockSize=512,Fl.outSize=256,Fl.hmacStrength=192,Fl.padLength=64,Fl.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=Sl(Dl(r[n-2]),r[n-7],Ul(r[n-15]),r[n-16]);var s=this.h[0],i=this.h[1],o=this.h[2],a=this.h[3],c=this.h[4],u=this.h[5],h=this.h[6],l=this.h[7];for(Tl(this.k.length===r.length),n=0;n<r.length;n++){var d=Pl(l,Ml(c),Ol(c,u,h),this.k[n],r[n]),f=Nl(xl(s),Cl(s,i,o));l=h,h=u,u=c,c=Nl(a,d),a=o,o=i,i=s,s=Nl(d,f)}this.h[0]=Nl(this.h[0],s),this.h[1]=Nl(this.h[1],i),this.h[2]=Nl(this.h[2],o),this.h[3]=Nl(this.h[3],a),this.h[4]=Nl(this.h[4],c),this.h[5]=Nl(this.h[5],u),this.h[6]=Nl(this.h[6],h),this.h[7]=Nl(this.h[7],l)},Fl.prototype._digest=function(e){return"hex"===e?kl.toHex32(this.h,"big"):kl.split32(this.h,"big")};var jl=Vh,Gl=ql;function Hl(){if(!(this instanceof Hl))return new Hl;Gl.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}jl.inherits(Hl,Gl);var zl=Hl;Hl.blockSize=512,Hl.outSize=224,Hl.hmacStrength=192,Hl.padLength=64,Hl.prototype._digest=function(e){return"hex"===e?jl.toHex32(this.h.slice(0,7),"big"):jl.split32(this.h.slice(0,7),"big")};var Kl=Vh,Vl=nl,Wl=Wh,Jl=Kl.rotr64_hi,Yl=Kl.rotr64_lo,Ql=Kl.shr64_hi,Xl=Kl.shr64_lo,$l=Kl.sum64,Zl=Kl.sum64_hi,ed=Kl.sum64_lo,td=Kl.sum64_4_hi,rd=Kl.sum64_4_lo,nd=Kl.sum64_5_hi,sd=Kl.sum64_5_lo,id=Vl.BlockHash,od=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function ad(){if(!(this instanceof ad))return new ad;id.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=od,this.W=new Array(160)}Kl.inherits(ad,id);var cd=ad;function ud(e,t,r,n,s){var i=e&r^~e&s;return i<0&&(i+=4294967296),i}function hd(e,t,r,n,s,i){var o=t&n^~t&i;return o<0&&(o+=4294967296),o}function ld(e,t,r,n,s){var i=e&r^e&s^r&s;return i<0&&(i+=4294967296),i}function dd(e,t,r,n,s,i){var o=t&n^t&i^n&i;return o<0&&(o+=4294967296),o}function fd(e,t){var r=Jl(e,t,28)^Jl(t,e,2)^Jl(t,e,7);return r<0&&(r+=4294967296),r}function pd(e,t){var r=Yl(e,t,28)^Yl(t,e,2)^Yl(t,e,7);return r<0&&(r+=4294967296),r}function md(e,t){var r=Jl(e,t,14)^Jl(e,t,18)^Jl(t,e,9);return r<0&&(r+=4294967296),r}function gd(e,t){var r=Yl(e,t,14)^Yl(e,t,18)^Yl(t,e,9);return r<0&&(r+=4294967296),r}function yd(e,t){var r=Jl(e,t,1)^Jl(e,t,8)^Ql(e,t,7);return r<0&&(r+=4294967296),r}function wd(e,t){var r=Yl(e,t,1)^Yl(e,t,8)^Xl(e,t,7);return r<0&&(r+=4294967296),r}function vd(e,t){var r=Jl(e,t,19)^Jl(t,e,29)^Ql(e,t,6);return r<0&&(r+=4294967296),r}function Ad(e,t){var r=Yl(e,t,19)^Yl(t,e,29)^Xl(e,t,6);return r<0&&(r+=4294967296),r}ad.blockSize=1024,ad.outSize=512,ad.hmacStrength=192,ad.padLength=128,ad.prototype._prepareBlock=function(e,t){for(var r=this.W,n=0;n<32;n++)r[n]=e[t+n];for(;n<r.length;n+=2){var s=vd(r[n-4],r[n-3]),i=Ad(r[n-4],r[n-3]),o=r[n-14],a=r[n-13],c=yd(r[n-30],r[n-29]),u=wd(r[n-30],r[n-29]),h=r[n-32],l=r[n-31];r[n]=td(s,i,o,a,c,u,h,l),r[n+1]=rd(s,i,o,a,c,u,h,l)}},ad.prototype._update=function(e,t){this._prepareBlock(e,t);var r=this.W,n=this.h[0],s=this.h[1],i=this.h[2],o=this.h[3],a=this.h[4],c=this.h[5],u=this.h[6],h=this.h[7],l=this.h[8],d=this.h[9],f=this.h[10],p=this.h[11],m=this.h[12],g=this.h[13],y=this.h[14],w=this.h[15];Wl(this.k.length===r.length);for(var v=0;v<r.length;v+=2){var A=y,b=w,E=md(l,d),_=gd(l,d),k=ud(l,d,f,p,m),R=hd(l,d,f,p,m,g),I=this.k[v],T=this.k[v+1],N=r[v],S=r[v+1],P=nd(A,b,E,_,k,R,I,T,N,S),O=sd(A,b,E,_,k,R,I,T,N,S);A=fd(n,s),b=pd(n,s),E=ld(n,s,i,o,a),_=dd(n,s,i,o,a,c);var C=Zl(A,b,E,_),x=ed(A,b,E,_);y=m,w=g,m=f,g=p,f=l,p=d,l=Zl(u,h,P,O),d=ed(h,h,P,O),u=a,h=c,a=i,c=o,i=n,o=s,n=Zl(P,O,C,x),s=ed(P,O,C,x)}$l(this.h,0,n,s),$l(this.h,2,i,o),$l(this.h,4,a,c),$l(this.h,6,u,h),$l(this.h,8,l,d),$l(this.h,10,f,p),$l(this.h,12,m,g),$l(this.h,14,y,w)},ad.prototype._digest=function(e){return"hex"===e?Kl.toHex32(this.h,"big"):Kl.split32(this.h,"big")};var bd=Vh,Ed=cd;function _d(){if(!(this instanceof _d))return new _d;Ed.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}bd.inherits(_d,Ed);var kd=_d;_d.blockSize=1024,_d.outSize=384,_d.hmacStrength=192,_d.padLength=128,_d.prototype._digest=function(e){return"hex"===e?bd.toHex32(this.h.slice(0,12),"big"):bd.split32(this.h.slice(0,12),"big")},al.sha1=_l,al.sha224=zl,al.sha256=ql,al.sha384=kd,al.sha512=cd;var Rd={},Id=Vh,Td=nl,Nd=Id.rotl32,Sd=Id.sum32,Pd=Id.sum32_3,Od=Id.sum32_4,Cd=Td.BlockHash;function xd(){if(!(this instanceof xd))return new xd;Cd.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function Md(e,t,r,n){return e<=15?t^r^n:e<=31?t&r|~t&n:e<=47?(t|~r)^n:e<=63?t&n|r&~n:t^(r|~n)}function Ud(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function Dd(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}Id.inherits(xd,Cd),Rd.ripemd160=xd,xd.blockSize=512,xd.outSize=160,xd.hmacStrength=192,xd.padLength=64,xd.prototype._update=function(e,t){for(var r=this.h[0],n=this.h[1],s=this.h[2],i=this.h[3],o=this.h[4],a=r,c=n,u=s,h=i,l=o,d=0;d<80;d++){var f=Sd(Nd(Od(r,Md(d,n,s,i),e[Ld[d]+t],Ud(d)),Fd[d]),o);r=o,o=i,i=Nd(s,10),s=n,n=f,f=Sd(Nd(Od(a,Md(79-d,c,u,h),e[Bd[d]+t],Dd(d)),qd[d]),l),a=l,l=h,h=Nd(u,10),u=c,c=f}f=Pd(this.h[1],s,h),this.h[1]=Pd(this.h[2],i,l),this.h[2]=Pd(this.h[3],o,a),this.h[3]=Pd(this.h[4],r,c),this.h[4]=Pd(this.h[0],n,u),this.h[0]=f},xd.prototype._digest=function(e){return"hex"===e?Id.toHex32(this.h,"little"):Id.split32(this.h,"little")};var Ld=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],Bd=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Fd=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],qd=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],jd=Vh,Gd=Wh;function Hd(e,t,r){if(!(this instanceof Hd))return new Hd(e,t,r);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(jd.toArray(t,r))}var zd=Hd;Hd.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),Gd(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},Hd.prototype.update=function(e,t){return this.inner.update(e,t),this},Hd.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)},function(e){var t=e;t.utils=Vh,t.common=nl,t.sha=al,t.ripemd=Rd,t.hmac=zd,t.sha1=t.sha.sha1,t.sha256=t.sha.sha256,t.sha224=t.sha.sha224,t.sha384=t.sha.sha384,t.sha512=t.sha.sha512,t.ripemd160=t.ripemd.ripemd160}(Kh);var Kd=kt(Kh);function Vd(e){return"0x"+Kd.sha256().update(za(e)).digest("hex")}var Wd=function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})};function Jd(e,t){return Wd(this,void 0,void 0,function*(){null==t&&(t={});const r={method:t.method||"GET",headers:t.headers||{},body:t.body||void 0};if(!0!==t.skipFetchSetup&&(r.mode="cors",r.cache="no-cache",r.credentials="same-origin",r.redirect="follow",r.referrer="client"),null!=t.fetchOptions){const e=t.fetchOptions;e.mode&&(r.mode=e.mode),e.cache&&(r.cache=e.cache),e.credentials&&(r.credentials=e.credentials),e.redirect&&(r.redirect=e.redirect),e.referrer&&(r.referrer=e.referrer)}const n=yield fetch(e,r),s=yield n.arrayBuffer(),i={};return n.headers.forEach?n.headers.forEach((e,t)=>{i[t.toLowerCase()]=e}):n.headers.keys().forEach(e=>{i[e.toLowerCase()]=n.headers.get(e)}),{headers:i,statusCode:n.status,statusMessage:n.statusText,body:za(new Uint8Array(s))}})}var Yd=function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})};const Qd=new La("web/5.8.0");function Xd(e){return new Promise(t=>{setTimeout(t,e)})}function $d(e,t){if(null==e)return null;if("string"==typeof e)return e;if(ja(e)){if(t&&("text"===t.split("/")[0]||"application/json"===t.split(";")[0].trim()))try{return Oc(e)}catch(e){}return Qa(e)}return e}function Zd(e,t,r){let n=null;if(null!=t){n=Pc(t);const r="string"==typeof e?{url:e}:Tu(e);if(r.headers){0!==Object.keys(r.headers).filter(e=>"content-type"===e.toLowerCase()).length||(r.headers=Tu(r.headers),r.headers["content-type"]="application/json")}else r.headers={"content-type":"application/json"};e=r}return function(e,t,r){const n="object"==typeof e&&null!=e.throttleLimit?e.throttleLimit:12;Qd.assertArgument(n>0&&n%1==0,"invalid connection throttle limit","connection.throttleLimit",n);const s="object"==typeof e?e.throttleCallback:null,i="object"==typeof e&&"number"==typeof e.throttleSlotInterval?e.throttleSlotInterval:100;Qd.assertArgument(i>0&&i%1==0,"invalid connection throttle slot interval","connection.throttleSlotInterval",i);const o="object"==typeof e&&!!e.errorPassThrough,a={};let c=null;const u={method:"GET"};let h=!1,l=12e4;if("string"==typeof e)c=e;else if("object"==typeof e){if(null!=e&&null!=e.url||Qd.throwArgumentError("missing URL","connection.url",e),c=e.url,"number"==typeof e.timeout&&e.timeout>0&&(l=e.timeout),e.headers)for(const t in e.headers)a[t.toLowerCase()]={key:t,value:String(e.headers[t])},["if-none-match","if-modified-since"].indexOf(t.toLowerCase())>=0&&(h=!0);if(u.allowGzip=!!e.allowGzip,null!=e.user&&null!=e.password){"https:"!==c.substring(0,6)&&!0!==e.allowInsecureAuthentication&&Qd.throwError("basic authentication requires a secure https url",La.errors.INVALID_ARGUMENT,{argument:"url",url:c,user:e.user,password:"[REDACTED]"});const t=e.user+":"+e.password;a.authorization={key:"Authorization",value:"Basic "+Uc(Pc(t))}}null!=e.skipFetchSetup&&(u.skipFetchSetup=!!e.skipFetchSetup),null!=e.fetchOptions&&(u.fetchOptions=Tu(e.fetchOptions))}const d=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),f=c?c.match(d):null;if(f)try{const e={statusCode:200,statusMessage:"OK",headers:{"content-type":f[1]||"text/plain"},body:f[2]?Mc(f[3]):(p=f[3],Pc(p.replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16)))))};let t=e.body;return r&&(t=r(e.body,e)),Promise.resolve(t)}catch(e){Qd.throwError("processing response error",La.errors.SERVER_ERROR,{body:$d(f[1],f[2]),error:e,requestBody:null,requestMethod:"GET",url:c})}var p;t&&(u.method="POST",u.body=t,null==a["content-type"]&&(a["content-type"]={key:"Content-Type",value:"application/octet-stream"}),null==a["content-length"]&&(a["content-length"]={key:"Content-Length",value:String(t.length)}));const m={};Object.keys(a).forEach(e=>{const t=a[e];m[t.key]=t.value}),u.headers=m;const g=function(){let e=null;return{promise:new Promise(function(t,r){l&&(e=setTimeout(()=>{null!=e&&(e=null,r(Qd.makeError("timeout",La.errors.TIMEOUT,{requestBody:$d(u.body,m["content-type"]),requestMethod:u.method,timeout:l,url:c})))},l))}),cancel:function(){null!=e&&(clearTimeout(e),e=null)}}}(),y=function(){return Yd(this,void 0,void 0,function*(){for(let e=0;e<n;e++){let t=null;try{if(t=yield Jd(c,u),e<n)if(301===t.statusCode||302===t.statusCode){const e=t.headers.location||"";if("GET"===u.method&&e.match(/^https:/)){c=t.headers.location;continue}}else if(429===t.statusCode){let r=!0;if(s&&(r=yield s(e,c)),r){let r=0;const n=t.headers["retry-after"];r="string"==typeof n&&n.match(/^[1-9][0-9]*$/)?1e3*parseInt(n):i*parseInt(String(Math.random()*Math.pow(2,e))),yield Xd(r);continue}}}catch(e){t=e.response,null==t&&(g.cancel(),Qd.throwError("missing response",La.errors.SERVER_ERROR,{requestBody:$d(u.body,m["content-type"]),requestMethod:u.method,serverError:e,url:c}))}let a=t.body;if(h&&304===t.statusCode?a=null:!o&&(t.statusCode<200||t.statusCode>=300)&&(g.cancel(),Qd.throwError("bad response",La.errors.SERVER_ERROR,{status:t.statusCode,headers:t.headers,body:$d(a,t.headers?t.headers["content-type"]:null),requestBody:$d(u.body,m["content-type"]),requestMethod:u.method,url:c})),r)try{const e=yield r(a,t);return g.cancel(),e}catch(r){if(r.throttleRetry&&e<n){let t=!0;if(s&&(t=yield s(e,c)),t){const t=i*parseInt(String(Math.random()*Math.pow(2,e)));yield Xd(t);continue}}g.cancel(),Qd.throwError("processing response error",La.errors.SERVER_ERROR,{body:$d(a,t.headers?t.headers["content-type"]:null),error:r,requestBody:$d(u.body,m["content-type"]),requestMethod:u.method,url:c})}return g.cancel(),a}return Qd.throwError("failed response",La.errors.SERVER_ERROR,{requestBody:$d(u.body,m["content-type"]),requestMethod:u.method,url:c})})}();return Promise.race([g.promise,y])}(e,n,(e,t)=>{let n=null;if(null!=e)try{n=JSON.parse(Oc(e))}catch(t){Qd.throwError("invalid JSON",La.errors.SERVER_ERROR,{body:e,error:t})}return r&&(n=r(n,t)),n})}function ef(e,t){return t||(t={}),null==(t=Tu(t)).floor&&(t.floor=0),null==t.ceiling&&(t.ceiling=1e4),null==t.interval&&(t.interval=250),new Promise(function(r,n){let s=null,i=!1;const o=()=>!i&&(i=!0,s&&clearTimeout(s),!0);t.timeout&&(s=setTimeout(()=>{o()&&n(new Error("timeout"))},t.timeout));const a=t.retryLimit;let c=0;!function s(){return e().then(function(e){if(void 0!==e)o()&&r(e);else if(t.oncePoll)t.oncePoll.once("poll",s);else if(t.onceBlock)t.onceBlock.once("block",s);else if(!i){if(c++,c>a)return void(o()&&n(new Error("retry limit reached")));let e=t.interval*parseInt(String(Math.random()*Math.pow(2,c)));e<t.floor&&(e=t.floor),e>t.ceiling&&(e=t.ceiling),setTimeout(s,e)}return null},function(e){o()&&n(e)})}()})}for(var tf="qpzry9x8gf2tvdw0s3jn54khce6mua7l",rf={},nf=0;nf<32;nf++){var sf=tf.charAt(nf);if(void 0!==rf[sf])throw new TypeError(sf+" is ambiguous");rf[sf]=nf}function of(e){var t=e>>25;return(33554431&e)<<5^996825010&-(1&t)^642813549&-(t>>1&1)^513874426&-(t>>2&1)^1027748829&-(t>>3&1)^705979059&-(t>>4&1)}function af(e){for(var t=1,r=0;r<e.length;++r){var n=e.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+e+")";t=of(t)^n>>5}for(t=of(t),r=0;r<e.length;++r){var s=e.charCodeAt(r);t=of(t)^31&s}return t}function cf(e,t){if(t=t||90,e.length<8)return e+" too short";if(e.length>t)return"Exceeds length limit";var r=e.toLowerCase(),n=e.toUpperCase();if(e!==r&&e!==n)return"Mixed-case string "+e;var s=(e=r).lastIndexOf("1");if(-1===s)return"No separator character for "+e;if(0===s)return"Missing prefix for "+e;var i=e.slice(0,s),o=e.slice(s+1);if(o.length<6)return"Data too short";var a=af(i);if("string"==typeof a)return a;for(var c=[],u=0;u<o.length;++u){var h=o.charAt(u),l=rf[h];if(void 0===l)return"Unknown character "+h;a=of(a)^l,u+6>=o.length||c.push(l)}return 1!==a?"Invalid checksum for "+e:{prefix:i,words:c}}function uf(e,t,r,n){for(var s=0,i=0,o=(1<<r)-1,a=[],c=0;c<e.length;++c)for(s=s<<t|e[c],i+=t;i>=r;)i-=r,a.push(s>>i&o);if(n)i>0&&a.push(s<<r-i&o);else{if(i>=t)return"Excess padding";if(s<<r-i&o)return"Non-zero padding"}return a}var hf={decodeUnsafe:function(){var e=cf.apply(null,arguments);if("object"==typeof e)return e},decode:function(e){var t=cf.apply(null,arguments);if("object"==typeof t)return t;throw new Error(t)},encode:function(e,t,r){if(r=r||90,e.length+7+t.length>r)throw new TypeError("Exceeds length limit");var n=af(e=e.toLowerCase());if("string"==typeof n)throw new Error(n);for(var s=e+"1",i=0;i<t.length;++i){var o=t[i];if(o>>5)throw new Error("Non 5-bit word");n=of(n)^o,s+=tf.charAt(o)}for(i=0;i<6;++i)n=of(n);for(n^=1,i=0;i<6;++i){s+=tf.charAt(n>>5*(5-i)&31)}return s},toWordsUnsafe:function(e){var t=uf(e,8,5,!0);if(Array.isArray(t))return t},toWords:function(e){var t=uf(e,8,5,!0);if(Array.isArray(t))return t;throw new Error(t)},fromWordsUnsafe:function(e){var t=uf(e,5,8,!1);if(Array.isArray(t))return t},fromWords:function(e){var t=uf(e,5,8,!1);if(Array.isArray(t))return t;throw new Error(t)}},lf=kt(hf);const df="providers/5.8.0";function ff(e,t,r){return r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&r.path)}},e(r,r.exports),r.exports}var pf=mf;function mf(e,t){if(!e)throw new Error(t||"Assertion failed")}mf.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var gf=ff(function(e,t){var r=t;function n(e){return 1===e.length?"0"+e:e}function s(e){for(var t="",r=0;r<e.length;r++)t+=n(e[r].toString(16));return t}r.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"!=typeof e){for(var n=0;n<e.length;n++)r[n]=0|e[n];return r}if("hex"===t){(e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e);for(n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16))}else for(n=0;n<e.length;n++){var s=e.charCodeAt(n),i=s>>8,o=255&s;i?r.push(i,o):r.push(o)}return r},r.zero2=n,r.toHex=s,r.encode=function(e,t){return"hex"===t?s(e):e}}),yf=ff(function(e,t){var r=t;r.assert=pf,r.toArray=gf.toArray,r.zero2=gf.zero2,r.toHex=gf.toHex,r.encode=gf.encode,r.getNAF=function(e,t,r){var n,s=new Array(Math.max(e.bitLength(),r)+1);for(n=0;n<s.length;n+=1)s[n]=0;var i=1<<t+1,o=e.clone();for(n=0;n<s.length;n++){var a,c=o.andln(i-1);o.isOdd()?(a=c>(i>>1)-1?(i>>1)-c:c,o.isubn(a)):a=0,s[n]=a,o.iushrn(1)}return s},r.getJSF=function(e,t){var r=[[],[]];e=e.clone(),t=t.clone();for(var n,s=0,i=0;e.cmpn(-s)>0||t.cmpn(-i)>0;){var o,a,c=e.andln(3)+s&3,u=t.andln(3)+i&3;3===c&&(c=-1),3===u&&(u=-1),o=1&c?3!==(n=e.andln(7)+s&7)&&5!==n||2!==u?c:-c:0,r[0].push(o),a=1&u?3!==(n=t.andln(7)+i&7)&&5!==n||2!==c?u:-u:0,r[1].push(a),2*s===o+1&&(s=1-s),2*i===a+1&&(i=1-i),e.iushrn(1),t.iushrn(1)}return r},r.cachedProperty=function(e,t,r){var n="_"+t;e.prototype[t]=function(){return void 0!==this[n]?this[n]:this[n]=r.call(this)}},r.parseBytes=function(e){return"string"==typeof e?r.toArray(e,"hex"):e},r.intFromLE=function(e){return new uc(e,"hex","le")}}),wf=yf.getNAF,vf=yf.getJSF,Af=yf.assert;function bf(e,t){this.type=e,this.p=new uc(t.p,16),this.red=t.prime?uc.red(t.prime):uc.mont(this.p),this.zero=new uc(0).toRed(this.red),this.one=new uc(1).toRed(this.red),this.two=new uc(2).toRed(this.red),this.n=t.n&&new uc(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Ef=bf;function _f(e,t){this.curve=e,this.type=t,this.precomputed=null}bf.prototype.point=function(){throw new Error("Not implemented")},bf.prototype.validate=function(){throw new Error("Not implemented")},bf.prototype._fixedNafMul=function(e,t){Af(e.precomputed);var r=e._getDoubles(),n=wf(t,1,this._bitLength),s=(1<<r.step+1)-(r.step%2==0?2:1);s/=3;var i,o,a=[];for(i=0;i<n.length;i+=r.step){o=0;for(var c=i+r.step-1;c>=i;c--)o=(o<<1)+n[c];a.push(o)}for(var u=this.jpoint(null,null,null),h=this.jpoint(null,null,null),l=s;l>0;l--){for(i=0;i<a.length;i++)(o=a[i])===l?h=h.mixedAdd(r.points[i]):o===-l&&(h=h.mixedAdd(r.points[i].neg()));u=u.add(h)}return u.toP()},bf.prototype._wnafMul=function(e,t){var r=4,n=e._getNAFPoints(r);r=n.wnd;for(var s=n.points,i=wf(t,r,this._bitLength),o=this.jpoint(null,null,null),a=i.length-1;a>=0;a--){for(var c=0;a>=0&&0===i[a];a--)c++;if(a>=0&&c++,o=o.dblp(c),a<0)break;var u=i[a];Af(0!==u),o="affine"===e.type?u>0?o.mixedAdd(s[u-1>>1]):o.mixedAdd(s[-u-1>>1].neg()):u>0?o.add(s[u-1>>1]):o.add(s[-u-1>>1].neg())}return"affine"===e.type?o.toP():o},bf.prototype._wnafMulAdd=function(e,t,r,n,s){var i,o,a,c=this._wnafT1,u=this._wnafT2,h=this._wnafT3,l=0;for(i=0;i<n;i++){var d=(a=t[i])._getNAFPoints(e);c[i]=d.wnd,u[i]=d.points}for(i=n-1;i>=1;i-=2){var f=i-1,p=i;if(1===c[f]&&1===c[p]){var m=[t[f],null,null,t[p]];0===t[f].y.cmp(t[p].y)?(m[1]=t[f].add(t[p]),m[2]=t[f].toJ().mixedAdd(t[p].neg())):0===t[f].y.cmp(t[p].y.redNeg())?(m[1]=t[f].toJ().mixedAdd(t[p]),m[2]=t[f].add(t[p].neg())):(m[1]=t[f].toJ().mixedAdd(t[p]),m[2]=t[f].toJ().mixedAdd(t[p].neg()));var g=[-3,-1,-5,-7,0,7,5,1,3],y=vf(r[f],r[p]);for(l=Math.max(y[0].length,l),h[f]=new Array(l),h[p]=new Array(l),o=0;o<l;o++){var w=0|y[0][o],v=0|y[1][o];h[f][o]=g[3*(w+1)+(v+1)],h[p][o]=0,u[f]=m}}else h[f]=wf(r[f],c[f],this._bitLength),h[p]=wf(r[p],c[p],this._bitLength),l=Math.max(h[f].length,l),l=Math.max(h[p].length,l)}var A=this.jpoint(null,null,null),b=this._wnafT4;for(i=l;i>=0;i--){for(var E=0;i>=0;){var _=!0;for(o=0;o<n;o++)b[o]=0|h[o][i],0!==b[o]&&(_=!1);if(!_)break;E++,i--}if(i>=0&&E++,A=A.dblp(E),i<0)break;for(o=0;o<n;o++){var k=b[o];0!==k&&(k>0?a=u[o][k-1>>1]:k<0&&(a=u[o][-k-1>>1].neg()),A="affine"===a.type?A.mixedAdd(a):A.add(a))}}for(i=0;i<n;i++)u[i]=null;return s?A:A.toP()},bf.BasePoint=_f,_f.prototype.eq=function(){throw new Error("Not implemented")},_f.prototype.validate=function(){return this.curve.validate(this)},bf.prototype.decodePoint=function(e,t){e=yf.toArray(e,t);var r=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*r)return 6===e[0]?Af(e[e.length-1]%2==0):7===e[0]&&Af(e[e.length-1]%2==1),this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));if((2===e[0]||3===e[0])&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),3===e[0]);throw new Error("Unknown point format")},_f.prototype.encodeCompressed=function(e){return this.encode(e,!0)},_f.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))},_f.prototype.encode=function(e,t){return yf.encode(this._encode(t),e)},_f.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},_f.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},_f.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,s=0;s<t;s+=e){for(var i=0;i<e;i++)n=n.dbl();r.push(n)}return{step:e,points:r}},_f.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,n=1===r?null:this.dbl(),s=1;s<r;s++)t[s]=t[s-1].add(n);return{wnd:e,points:t}},_f.prototype._getBeta=function(){return null},_f.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t};var kf=ff(function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}}),Rf=yf.assert;function If(e){Ef.call(this,"short",e),this.a=new uc(e.a,16).toRed(this.red),this.b=new uc(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}kf(If,Ef);var Tf=If;function Nf(e,t,r,n){Ef.BasePoint.call(this,e,"affine"),null===t&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new uc(t,16),this.y=new uc(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function Sf(e,t,r,n){Ef.BasePoint.call(this,e,"jacobian"),null===t&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new uc(0)):(this.x=new uc(t,16),this.y=new uc(r,16),this.z=new uc(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}If.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,r;if(e.beta)t=new uc(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);t=(t=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(e.lambda)r=new uc(e.lambda,16);else{var s=this._getEndoRoots(this.n);0===this.g.mul(s[0]).x.cmp(this.g.x.redMul(t))?r=s[0]:(r=s[1],Rf(0===this.g.mul(r).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:r,basis:e.basis?e.basis.map(function(e){return{a:new uc(e.a,16),b:new uc(e.b,16)}}):this._getEndoBasis(r)}}},If.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:uc.mont(e),r=new uc(2).toRed(t).redInvm(),n=r.redNeg(),s=new uc(3).toRed(t).redNeg().redSqrt().redMul(r);return[n.redAdd(s).fromRed(),n.redSub(s).fromRed()]},If.prototype._getEndoBasis=function(e){for(var t,r,n,s,i,o,a,c,u,h=this.n.ushrn(Math.floor(this.n.bitLength()/2)),l=e,d=this.n.clone(),f=new uc(1),p=new uc(0),m=new uc(0),g=new uc(1),y=0;0!==l.cmpn(0);){var w=d.div(l);c=d.sub(w.mul(l)),u=m.sub(w.mul(f));var v=g.sub(w.mul(p));if(!n&&c.cmp(h)<0)t=a.neg(),r=f,n=c.neg(),s=u;else if(n&&2===++y)break;a=c,d=l,l=c,m=f,f=u,g=p,p=v}i=c.neg(),o=u;var A=n.sqr().add(s.sqr());return i.sqr().add(o.sqr()).cmp(A)>=0&&(i=t,o=r),n.negative&&(n=n.neg(),s=s.neg()),i.negative&&(i=i.neg(),o=o.neg()),[{a:n,b:s},{a:i,b:o}]},If.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],n=t[1],s=n.b.mul(e).divRound(this.n),i=r.b.neg().mul(e).divRound(this.n),o=s.mul(r.a),a=i.mul(n.a),c=s.mul(r.b),u=i.mul(n.b);return{k1:e.sub(o).sub(a),k2:c.add(u).neg()}},If.prototype.pointFromX=function(e,t){(e=new uc(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(0!==n.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var s=n.fromRed().isOdd();return(t&&!s||!t&&s)&&(n=n.redNeg()),this.point(e,n)},If.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,n=this.a.redMul(t),s=t.redSqr().redMul(t).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(s).cmpn(0)},If.prototype._endoWnafMulAdd=function(e,t,r){for(var n=this._endoWnafT1,s=this._endoWnafT2,i=0;i<e.length;i++){var o=this._endoSplit(t[i]),a=e[i],c=a._getBeta();o.k1.negative&&(o.k1.ineg(),a=a.neg(!0)),o.k2.negative&&(o.k2.ineg(),c=c.neg(!0)),n[2*i]=a,n[2*i+1]=c,s[2*i]=o.k1,s[2*i+1]=o.k2}for(var u=this._wnafMulAdd(1,n,s,2*i,r),h=0;h<2*i;h++)n[h]=null,s[h]=null;return u},kf(Nf,Ef.BasePoint),If.prototype.point=function(e,t,r){return new Nf(this,e,t,r)},If.prototype.pointFromJSON=function(e,t){return Nf.fromJSON(this,e,t)},Nf.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,n=function(e){return r.point(e.x.redMul(r.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return t}},Nf.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},Nf.fromJSON=function(e,t,r){"string"==typeof t&&(t=JSON.parse(t));var n=e.point(t[0],t[1],r);if(!t[2])return n;function s(t){return e.point(t[0],t[1],r)}var i=t[2];return n.precomputed={beta:null,doubles:i.doubles&&{step:i.doubles.step,points:[n].concat(i.doubles.points.map(s))},naf:i.naf&&{wnd:i.naf.wnd,points:[n].concat(i.naf.points.map(s))}},n},Nf.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},Nf.prototype.isInfinity=function(){return this.inf},Nf.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),n=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},Nf.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),n=e.redInvm(),s=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(n),i=s.redSqr().redISub(this.x.redAdd(this.x)),o=s.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,o)},Nf.prototype.getX=function(){return this.x.fromRed()},Nf.prototype.getY=function(){return this.y.fromRed()},Nf.prototype.mul=function(e){return e=new uc(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},Nf.prototype.mulAdd=function(e,t,r){var n=[this,t],s=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,s):this.curve._wnafMulAdd(1,n,s,2)},Nf.prototype.jmulAdd=function(e,t,r){var n=[this,t],s=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,s,!0):this.curve._wnafMulAdd(1,n,s,2,!0)},Nf.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},Nf.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,n=function(e){return e.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return t},Nf.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},kf(Sf,Ef.BasePoint),If.prototype.jpoint=function(e,t,r){return new Sf(this,e,t,r)},Sf.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),n=this.y.redMul(t).redMul(e);return this.curve.point(r,n)},Sf.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},Sf.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(t),s=e.x.redMul(r),i=this.y.redMul(t.redMul(e.z)),o=e.y.redMul(r.redMul(this.z)),a=n.redSub(s),c=i.redSub(o);if(0===a.cmpn(0))return 0!==c.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),h=u.redMul(a),l=n.redMul(u),d=c.redSqr().redIAdd(h).redISub(l).redISub(l),f=c.redMul(l.redISub(d)).redISub(i.redMul(h)),p=this.z.redMul(e.z).redMul(a);return this.curve.jpoint(d,f,p)},Sf.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,n=e.x.redMul(t),s=this.y,i=e.y.redMul(t).redMul(this.z),o=r.redSub(n),a=s.redSub(i);if(0===o.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=o.redSqr(),u=c.redMul(o),h=r.redMul(c),l=a.redSqr().redIAdd(u).redISub(h).redISub(h),d=a.redMul(h.redISub(l)).redISub(s.redMul(u)),f=this.z.redMul(o);return this.curve.jpoint(l,d,f)},Sf.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var r=this;for(t=0;t<e;t++)r=r.dbl();return r}var n=this.curve.a,s=this.curve.tinv,i=this.x,o=this.y,a=this.z,c=a.redSqr().redSqr(),u=o.redAdd(o);for(t=0;t<e;t++){var h=i.redSqr(),l=u.redSqr(),d=l.redSqr(),f=h.redAdd(h).redIAdd(h).redIAdd(n.redMul(c)),p=i.redMul(l),m=f.redSqr().redISub(p.redAdd(p)),g=p.redISub(m),y=f.redMul(g);y=y.redIAdd(y).redISub(d);var w=u.redMul(a);t+1<e&&(c=c.redMul(d)),i=m,a=w,u=y}return this.curve.jpoint(i,u.redMul(s),a)},Sf.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},Sf.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),s=this.y.redSqr(),i=s.redSqr(),o=this.x.redAdd(s).redSqr().redISub(n).redISub(i);o=o.redIAdd(o);var a=n.redAdd(n).redIAdd(n),c=a.redSqr().redISub(o).redISub(o),u=i.redIAdd(i);u=(u=u.redIAdd(u)).redIAdd(u),e=c,t=a.redMul(o.redISub(c)).redISub(u),r=this.y.redAdd(this.y)}else{var h=this.x.redSqr(),l=this.y.redSqr(),d=l.redSqr(),f=this.x.redAdd(l).redSqr().redISub(h).redISub(d);f=f.redIAdd(f);var p=h.redAdd(h).redIAdd(h),m=p.redSqr(),g=d.redIAdd(d);g=(g=g.redIAdd(g)).redIAdd(g),e=m.redISub(f).redISub(f),t=p.redMul(f.redISub(e)).redISub(g),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(e,t,r)},Sf.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),s=this.y.redSqr(),i=s.redSqr(),o=this.x.redAdd(s).redSqr().redISub(n).redISub(i);o=o.redIAdd(o);var a=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),c=a.redSqr().redISub(o).redISub(o);e=c;var u=i.redIAdd(i);u=(u=u.redIAdd(u)).redIAdd(u),t=a.redMul(o.redISub(c)).redISub(u),r=this.y.redAdd(this.y)}else{var h=this.z.redSqr(),l=this.y.redSqr(),d=this.x.redMul(l),f=this.x.redSub(h).redMul(this.x.redAdd(h));f=f.redAdd(f).redIAdd(f);var p=d.redIAdd(d),m=(p=p.redIAdd(p)).redAdd(p);e=f.redSqr().redISub(m),r=this.y.redAdd(this.z).redSqr().redISub(l).redISub(h);var g=l.redSqr();g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g),t=f.redMul(p.redISub(e)).redISub(g)}return this.curve.jpoint(e,t,r)},Sf.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,n=this.z,s=n.redSqr().redSqr(),i=t.redSqr(),o=r.redSqr(),a=i.redAdd(i).redIAdd(i).redIAdd(e.redMul(s)),c=t.redAdd(t),u=(c=c.redIAdd(c)).redMul(o),h=a.redSqr().redISub(u.redAdd(u)),l=u.redISub(h),d=o.redSqr();d=(d=(d=d.redIAdd(d)).redIAdd(d)).redIAdd(d);var f=a.redMul(l).redISub(d),p=r.redAdd(r).redMul(n);return this.curve.jpoint(h,f,p)},Sf.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),n=t.redSqr(),s=e.redAdd(e).redIAdd(e),i=s.redSqr(),o=this.x.redAdd(t).redSqr().redISub(e).redISub(n),a=(o=(o=(o=o.redIAdd(o)).redAdd(o).redIAdd(o)).redISub(i)).redSqr(),c=n.redIAdd(n);c=(c=(c=c.redIAdd(c)).redIAdd(c)).redIAdd(c);var u=s.redIAdd(o).redSqr().redISub(i).redISub(a).redISub(c),h=t.redMul(u);h=(h=h.redIAdd(h)).redIAdd(h);var l=this.x.redMul(a).redISub(h);l=(l=l.redIAdd(l)).redIAdd(l);var d=this.y.redMul(u.redMul(c.redISub(u)).redISub(o.redMul(a)));d=(d=(d=d.redIAdd(d)).redIAdd(d)).redIAdd(d);var f=this.z.redAdd(o).redSqr().redISub(r).redISub(a);return this.curve.jpoint(l,d,f)},Sf.prototype.mul=function(e,t){return e=new uc(e,t),this.curve._wnafMul(this,e)},Sf.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var n=t.redMul(this.z),s=r.redMul(e.z);return 0===this.y.redMul(s).redISub(e.y.redMul(n)).cmpn(0)},Sf.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(r))return!0;for(var n=e.clone(),s=this.curve.redN.redMul(t);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(s),0===this.x.cmp(r))return!0}},Sf.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},Sf.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var Pf=ff(function(e,t){var r=t;r.base=Ef,r.short=Tf,r.mont=null,r.edwards=null}),Of=ff(function(e,t){var r,n=t,s=yf.assert;function i(e){"short"===e.type?this.curve=new Pf.short(e):"edwards"===e.type?this.curve=new Pf.edwards(e):this.curve=new Pf.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function o(e,t){Object.defineProperty(n,e,{configurable:!0,enumerable:!0,get:function(){var r=new i(t);return Object.defineProperty(n,e,{configurable:!0,enumerable:!0,value:r}),r}})}n.PresetCurve=i,o("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Kd.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),o("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Kd.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),o("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Kd.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),o("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Kd.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),o("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Kd.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),o("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Kd.sha256,gRed:!1,g:["9"]}),o("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Kd.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=null.crash()}catch(e){r=void 0}o("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Kd.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})});function Cf(e){if(!(this instanceof Cf))return new Cf(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=gf.toArray(e.entropy,e.entropyEnc||"hex"),r=gf.toArray(e.nonce,e.nonceEnc||"hex"),n=gf.toArray(e.pers,e.persEnc||"hex");pf(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,n)}var xf=Cf;Cf.prototype._init=function(e,t,r){var n=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},Cf.prototype._hmac=function(){return new Kd.hmac(this.hash,this.K)},Cf.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},Cf.prototype.reseed=function(e,t,r,n){"string"!=typeof t&&(n=r,r=t,t=null),e=gf.toArray(e,t),r=gf.toArray(r,n),pf(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1},Cf.prototype.generate=function(e,t,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(n=r,r=t,t=null),r&&(r=gf.toArray(r,n||"hex"),this._update(r));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var i=s.slice(0,e);return this._update(r),this._reseed++,gf.encode(i,t)};var Mf=yf.assert;function Uf(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var Df=Uf;Uf.fromPublic=function(e,t,r){return t instanceof Uf?t:new Uf(e,{pub:t,pubEnc:r})},Uf.fromPrivate=function(e,t,r){return t instanceof Uf?t:new Uf(e,{priv:t,privEnc:r})},Uf.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},Uf.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},Uf.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},Uf.prototype._importPrivate=function(e,t){this.priv=new uc(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},Uf.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?Mf(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||Mf(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},Uf.prototype.derive=function(e){return e.validate()||Mf(e.validate(),"public point not validated"),e.mul(this.priv).getX()},Uf.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},Uf.prototype.verify=function(e,t,r){return this.ec.verify(e,t,this,void 0,r)},Uf.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var Lf=yf.assert;function Bf(e,t){if(e instanceof Bf)return e;this._importDER(e,t)||(Lf(e.r&&e.s,"Signature without r or s"),this.r=new uc(e.r,16),this.s=new uc(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}var Ff=Bf;function qf(){this.place=0}function jf(e,t){var r=e[t.place++];if(!(128&r))return r;var n=15&r;if(0===n||n>4)return!1;if(0===e[t.place])return!1;for(var s=0,i=0,o=t.place;i<n;i++,o++)s<<=8,s|=e[o],s>>>=0;return!(s<=127)&&(t.place=o,s)}function Gf(e){for(var t=0,r=e.length-1;!e[t]&&!(128&e[t+1])&&t<r;)t++;return 0===t?e:e.slice(t)}function Hf(e,t){if(t<128)e.push(t);else{var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|r);--r;)e.push(t>>>(r<<3)&255);e.push(t)}}Bf.prototype._importDER=function(e,t){e=yf.toArray(e,t);var r=new qf;if(48!==e[r.place++])return!1;var n=jf(e,r);if(!1===n)return!1;if(n+r.place!==e.length)return!1;if(2!==e[r.place++])return!1;var s=jf(e,r);if(!1===s)return!1;if(128&e[r.place])return!1;var i=e.slice(r.place,s+r.place);if(r.place+=s,2!==e[r.place++])return!1;var o=jf(e,r);if(!1===o)return!1;if(e.length!==o+r.place)return!1;if(128&e[r.place])return!1;var a=e.slice(r.place,o+r.place);if(0===i[0]){if(!(128&i[1]))return!1;i=i.slice(1)}if(0===a[0]){if(!(128&a[1]))return!1;a=a.slice(1)}return this.r=new uc(i),this.s=new uc(a),this.recoveryParam=null,!0},Bf.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&r[0]&&(r=[0].concat(r)),t=Gf(t),r=Gf(r);!(r[0]||128&r[1]);)r=r.slice(1);var n=[2];Hf(n,t.length),(n=n.concat(t)).push(2),Hf(n,r.length);var s=n.concat(r),i=[48];return Hf(i,s.length),i=i.concat(s),yf.encode(i,e)};var zf=function(){throw new Error("unsupported")},Kf=yf.assert;function Vf(e){if(!(this instanceof Vf))return new Vf(e);"string"==typeof e&&(Kf(Object.prototype.hasOwnProperty.call(Of,e),"Unknown curve "+e),e=Of[e]),e instanceof Of.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}var Wf=Vf;Vf.prototype.keyPair=function(e){return new Df(this,e)},Vf.prototype.keyFromPrivate=function(e,t){return Df.fromPrivate(this,e,t)},Vf.prototype.keyFromPublic=function(e,t){return Df.fromPublic(this,e,t)},Vf.prototype.genKeyPair=function(e){e||(e={});for(var t=new xf({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||zf(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),n=this.n.sub(new uc(2));;){var s=new uc(t.generate(r));if(!(s.cmp(n)>0))return s.iaddn(1),this.keyFromPrivate(s)}},Vf.prototype._truncateToN=function(e,t,r){var n;if(uc.isBN(e)||"number"==typeof e)n=(e=new uc(e,16)).byteLength();else if("object"==typeof e)n=e.length,e=new uc(e,16);else{var s=e.toString();n=s.length+1>>>1,e=new uc(s,16)}"number"!=typeof r&&(r=8*n);var i=r-this.n.bitLength();return i>0&&(e=e.ushrn(i)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},Vf.prototype.sign=function(e,t,r,n){if("object"==typeof r&&(n=r,r=null),n||(n={}),"string"!=typeof e&&"number"!=typeof e&&!uc.isBN(e)){Kf("object"==typeof e&&e&&"number"==typeof e.length,"Expected message to be an array-like, a hex string, or a BN instance"),Kf(e.length>>>0===e.length);for(var s=0;s<e.length;s++)Kf((255&e[s])===e[s])}t=this.keyFromPrivate(t,r),e=this._truncateToN(e,!1,n.msgBitLength),Kf(!e.isNeg(),"Can not sign a negative message");var i=this.n.byteLength(),o=t.getPrivate().toArray("be",i),a=e.toArray("be",i);Kf(new uc(a).eq(e),"Can not sign message");for(var c=new xf({hash:this.hash,entropy:o,nonce:a,pers:n.pers,persEnc:n.persEnc||"utf8"}),u=this.n.sub(new uc(1)),h=0;;h++){var l=n.k?n.k(h):new uc(c.generate(this.n.byteLength()));if(!((l=this._truncateToN(l,!0)).cmpn(1)<=0||l.cmp(u)>=0)){var d=this.g.mul(l);if(!d.isInfinity()){var f=d.getX(),p=f.umod(this.n);if(0!==p.cmpn(0)){var m=l.invm(this.n).mul(p.mul(t.getPrivate()).iadd(e));if(0!==(m=m.umod(this.n)).cmpn(0)){var g=(d.getY().isOdd()?1:0)|(0!==f.cmp(p)?2:0);return n.canonical&&m.cmp(this.nh)>0&&(m=this.n.sub(m),g^=1),new Ff({r:p,s:m,recoveryParam:g})}}}}}},Vf.prototype.verify=function(e,t,r,n,s){s||(s={}),e=this._truncateToN(e,!1,s.msgBitLength),r=this.keyFromPublic(r,n);var i=(t=new Ff(t,"hex")).r,o=t.s;if(i.cmpn(1)<0||i.cmp(this.n)>=0)return!1;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var a,c=o.invm(this.n),u=c.mul(e).umod(this.n),h=c.mul(i).umod(this.n);return this.curve._maxwellTrick?!(a=this.g.jmulAdd(u,r.getPublic(),h)).isInfinity()&&a.eqXToP(i):!(a=this.g.mulAdd(u,r.getPublic(),h)).isInfinity()&&0===a.getX().umod(this.n).cmp(i)},Vf.prototype.recoverPubKey=function(e,t,r,n){Kf((3&r)===r,"The recovery param is more than two bits"),t=new Ff(t,n);var s=this.n,i=new uc(e),o=t.r,a=t.s,c=1&r,u=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&u)throw new Error("Unable to find sencond key candinate");o=u?this.curve.pointFromX(o.add(this.curve.n),c):this.curve.pointFromX(o,c);var h=t.r.invm(s),l=s.sub(i).mul(h).umod(s),d=a.mul(h).umod(s);return this.g.mulAdd(l,o,d)},Vf.prototype.getKeyRecoveryParam=function(e,t,r,n){if(null!==(t=new Ff(t,n)).recoveryParam)return t.recoveryParam;for(var s=0;s<4;s++){var i;try{i=this.recoverPubKey(e,t,s)}catch(e){continue}if(i.eq(r))return s}throw new Error("Unable to find valid recovery factor")};var Jf=ff(function(e,t){var r=t;r.version="6.6.1",r.utils=yf,r.rand=function(){throw new Error("unsupported")},r.curve=Pf,r.curves=Of,r.ec=Wf,r.eddsa=null}).ec;const Yf=new La("signing-key/5.8.0");let Qf=null;function Xf(){return Qf||(Qf=new Jf("secp256k1")),Qf}class $f{constructor(e){_u(this,"curve","secp256k1"),_u(this,"privateKey",Qa(e)),32!==Xa(this.privateKey)&&Yf.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const t=Xf().keyFromPrivate(za(this.privateKey));_u(this,"publicKey","0x"+t.getPublic(!1,"hex")),_u(this,"compressedPublicKey","0x"+t.getPublic(!0,"hex")),_u(this,"_isSigningKey",!0)}_addPoint(e){const t=Xf().keyFromPublic(za(this.publicKey)),r=Xf().keyFromPublic(za(e));return"0x"+t.pub.add(r.pub).encodeCompressed("hex")}signDigest(e){const t=Xf().keyFromPrivate(za(this.privateKey)),r=za(e);32!==r.length&&Yf.throwArgumentError("bad digest length","digest",e);const n=t.sign(r,{canonical:!0});return nc({recoveryParam:n.recoveryParam,r:rc("0x"+n.r.toString(16),32),s:rc("0x"+n.s.toString(16),32)})}computeSharedSecret(e){const t=Xf().keyFromPrivate(za(this.privateKey)),r=Xf().keyFromPublic(za(Zf(e)));return rc("0x"+t.derive(r.getPublic()).toString(16),32)}static isSigningKey(e){return!(!e||!e._isSigningKey)}}function Zf(e,t){const r=za(e);if(32===r.length){return new $f(r).publicKey}return 33===r.length?"0x"+Xf().keyFromPublic(r).getPublic(!1,"hex"):65===r.length?Qa(r):Yf.throwArgumentError("invalid public or private key","key","[REDACTED]")}const ep=new La("transactions/5.8.0");var tp;function rp(e){return"0x"===e?null:Au(e)}function np(e){return"0x"===e?bc:mc.from(e)}!function(e){e[e.legacy=0]="legacy",e[e.eip2930=1]="eip2930",e[e.eip1559=2]="eip1559"}(tp||(tp={}));const sp=[{name:"nonce",maxLength:32,numeric:!0},{name:"gasPrice",maxLength:32,numeric:!0},{name:"gasLimit",maxLength:32,numeric:!0},{name:"to",length:20},{name:"value",maxLength:32,numeric:!0},{name:"data"}],ip={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,type:!0,value:!0};function op(e){return Au($a(ic($a(Zf(e),1)),12))}function ap(e,t){return op(function(e,t){const r=nc(t),n={r:za(r.r),s:za(r.s)};return"0x"+Xf().recoverPubKey(za(e),n,r.recoveryParam).encode("hex",!1)}(za(e),t))}function cp(e,t){const r=Va(mc.from(e).toHexString());return r.length>32&&ep.throwArgumentError("invalid length for "+t,"transaction:"+t,e),r}function up(e,t){return{address:Au(e),storageKeys:(t||[]).map((t,r)=>(32!==Xa(t)&&ep.throwArgumentError("invalid access list storageKey",`accessList[${e}:${r}]`,t),t.toLowerCase()))}}function hp(e){if(Array.isArray(e))return e.map((e,t)=>Array.isArray(e)?(e.length>2&&ep.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${t}]`,e),up(e[0],e[1])):up(e.address,e.storageKeys));const t=Object.keys(e).map(t=>{const r=e[t].reduce((e,t)=>(e[t]=!0,e),{});return up(t,Object.keys(r).sort())});return t.sort((e,t)=>e.address.localeCompare(t.address)),t}function lp(e){return hp(e).map(e=>[e.address,e.storageKeys])}function dp(e,t){if(null!=e.gasPrice){const t=mc.from(e.gasPrice),r=mc.from(e.maxFeePerGas||0);t.eq(r)||ep.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:t,maxFeePerGas:r})}const r=[cp(e.chainId||0,"chainId"),cp(e.nonce||0,"nonce"),cp(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),cp(e.maxFeePerGas||0,"maxFeePerGas"),cp(e.gasLimit||0,"gasLimit"),null!=e.to?Au(e.to):"0x",cp(e.value||0,"value"),e.data||"0x",lp(e.accessList||[])];if(t){const e=nc(t);r.push(cp(e.recoveryParam,"recoveryParam")),r.push(Va(e.r)),r.push(Va(e.s))}return Za(["0x02",du(r)])}function fp(e,t){const r=[cp(e.chainId||0,"chainId"),cp(e.nonce||0,"nonce"),cp(e.gasPrice||0,"gasPrice"),cp(e.gasLimit||0,"gasLimit"),null!=e.to?Au(e.to):"0x",cp(e.value||0,"value"),e.data||"0x",lp(e.accessList||[])];if(t){const e=nc(t);r.push(cp(e.recoveryParam,"recoveryParam")),r.push(Va(e.r)),r.push(Va(e.s))}return Za(["0x01",du(r)])}function pp(e,t,r){try{const r=np(t[0]).toNumber();if(0!==r&&1!==r)throw new Error("bad recid");e.v=r}catch(e){ep.throwArgumentError("invalid v for transaction type: 1","v",t[0])}e.r=rc(t[1],32),e.s=rc(t[2],32);try{const t=ic(r(e));e.from=ap(t,{r:e.r,s:e.s,recoveryParam:e.v})}catch(e){}}function mp(e){const t=za(e);if(t[0]>127)return function(e){const t=mu(e);9!==t.length&&6!==t.length&&ep.throwArgumentError("invalid raw transaction","rawTransaction",e);const r={nonce:np(t[0]).toNumber(),gasPrice:np(t[1]),gasLimit:np(t[2]),to:rp(t[3]),value:np(t[4]),data:t[5],chainId:0};if(6===t.length)return r;try{r.v=mc.from(t[6]).toNumber()}catch(e){return r}if(r.r=rc(t[7],32),r.s=rc(t[8],32),mc.from(r.r).isZero()&&mc.from(r.s).isZero())r.chainId=r.v,r.v=0;else{r.chainId=Math.floor((r.v-35)/2),r.chainId<0&&(r.chainId=0);let n=r.v-27;const s=t.slice(0,6);0!==r.chainId&&(s.push(Qa(r.chainId)),s.push("0x"),s.push("0x"),n-=2*r.chainId+8);const i=ic(du(s));try{r.from=ap(i,{r:Qa(r.r),s:Qa(r.s),recoveryParam:n})}catch(e){}r.hash=ic(e)}return r.type=null,r}(t);switch(t[0]){case 1:return function(e){const t=mu(e.slice(1));8!==t.length&&11!==t.length&&ep.throwArgumentError("invalid component count for transaction type: 1","payload",Qa(e));const r={type:1,chainId:np(t[0]).toNumber(),nonce:np(t[1]).toNumber(),gasPrice:np(t[2]),gasLimit:np(t[3]),to:rp(t[4]),value:np(t[5]),data:t[6],accessList:hp(t[7])};return 8===t.length||(r.hash=ic(e),pp(r,t.slice(8),fp)),r}(t);case 2:return function(e){const t=mu(e.slice(1));9!==t.length&&12!==t.length&&ep.throwArgumentError("invalid component count for transaction type: 2","payload",Qa(e));const r=np(t[2]),n=np(t[3]),s={type:2,chainId:np(t[0]).toNumber(),nonce:np(t[1]).toNumber(),maxPriorityFeePerGas:r,maxFeePerGas:n,gasPrice:null,gasLimit:np(t[4]),to:rp(t[5]),value:np(t[6]),data:t[7],accessList:hp(t[8])};return 9===t.length||(s.hash=ic(e),pp(s,t.slice(9),dp)),s}(t)}return ep.throwError(`unsupported transaction type: ${t[0]}`,La.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:t[0]})}var gp=Object.freeze({__proto__:null,get TransactionTypes(){return tp},accessListify:hp,computeAddress:op,parse:mp,recoverAddress:ap,serialize:function(e,t){if(null==e.type||0===e.type)return null!=e.accessList&&ep.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",e),function(e,t){Iu(e,ip);const r=[];sp.forEach(function(t){let n=e[t.name]||[];const s={};t.numeric&&(s.hexPad="left"),n=za(Qa(n,s)),t.length&&n.length!==t.length&&n.length>0&&ep.throwArgumentError("invalid length for "+t.name,"transaction:"+t.name,n),t.maxLength&&(n=Va(n),n.length>t.maxLength&&ep.throwArgumentError("invalid length for "+t.name,"transaction:"+t.name,n)),r.push(Qa(n))});let n=0;if(null!=e.chainId?(n=e.chainId,"number"!=typeof n&&ep.throwArgumentError("invalid transaction.chainId","transaction",e)):t&&!ja(t)&&t.v>28&&(n=Math.floor((t.v-35)/2)),0!==n&&(r.push(Qa(n)),r.push("0x"),r.push("0x")),!t)return du(r);const s=nc(t);let i=27+s.recoveryParam;return 0!==n?(r.pop(),r.pop(),r.pop(),i+=2*n+8,s.v>28&&s.v!==i&&ep.throwArgumentError("transaction.chainId/signature.v mismatch","signature",t)):s.v!==i&&ep.throwArgumentError("transaction.chainId/signature.v mismatch","signature",t),r.push(Qa(i)),r.push(Va(za(s.r))),r.push(Va(za(s.s))),du(r)}(e,t);switch(e.type){case 1:return fp(e,t);case 2:return dp(e,t)}return ep.throwError(`unsupported transaction type: ${e.type}`,La.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:e.type})}});const yp=new La(df);class wp{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const e={},t=this.address.bind(this),r=this.bigNumber.bind(this),n=this.blockTag.bind(this),s=this.data.bind(this),i=this.hash.bind(this),o=this.hex.bind(this),a=this.number.bind(this),c=this.type.bind(this);return e.transaction={hash:i,type:c,accessList:wp.allowNull(this.accessList.bind(this),null),blockHash:wp.allowNull(i,null),blockNumber:wp.allowNull(a,null),transactionIndex:wp.allowNull(a,null),confirmations:wp.allowNull(a,null),from:t,gasPrice:wp.allowNull(r),maxPriorityFeePerGas:wp.allowNull(r),maxFeePerGas:wp.allowNull(r),gasLimit:r,to:wp.allowNull(t,null),value:r,nonce:a,data:s,r:wp.allowNull(this.uint256),s:wp.allowNull(this.uint256),v:wp.allowNull(a),creates:wp.allowNull(t,null),raw:wp.allowNull(s)},e.transactionRequest={from:wp.allowNull(t),nonce:wp.allowNull(a),gasLimit:wp.allowNull(r),gasPrice:wp.allowNull(r),maxPriorityFeePerGas:wp.allowNull(r),maxFeePerGas:wp.allowNull(r),to:wp.allowNull(t),value:wp.allowNull(r),data:wp.allowNull(e=>this.data(e,!0)),type:wp.allowNull(a),accessList:wp.allowNull(this.accessList.bind(this),null)},e.receiptLog={transactionIndex:a,blockNumber:a,transactionHash:i,address:t,topics:wp.arrayOf(i),data:s,logIndex:a,blockHash:i},e.receipt={to:wp.allowNull(this.address,null),from:wp.allowNull(this.address,null),contractAddress:wp.allowNull(t,null),transactionIndex:a,root:wp.allowNull(o),gasUsed:r,logsBloom:wp.allowNull(s),blockHash:i,transactionHash:i,logs:wp.arrayOf(this.receiptLog.bind(this)),blockNumber:a,confirmations:wp.allowNull(a,null),cumulativeGasUsed:r,effectiveGasPrice:wp.allowNull(r),status:wp.allowNull(a),type:c},e.block={hash:wp.allowNull(i),parentHash:i,number:a,timestamp:a,nonce:wp.allowNull(o),difficulty:this.difficulty.bind(this),gasLimit:r,gasUsed:r,miner:wp.allowNull(t),extraData:s,transactions:wp.allowNull(wp.arrayOf(i)),baseFeePerGas:wp.allowNull(r)},e.blockWithTransactions=Tu(e.block),e.blockWithTransactions.transactions=wp.allowNull(wp.arrayOf(this.transactionResponse.bind(this))),e.filter={fromBlock:wp.allowNull(n,void 0),toBlock:wp.allowNull(n,void 0),blockHash:wp.allowNull(i,void 0),address:wp.allowNull(t,void 0),topics:wp.allowNull(this.topics.bind(this),void 0)},e.filterLog={blockNumber:wp.allowNull(a),blockHash:wp.allowNull(i),transactionIndex:a,removed:wp.allowNull(this.boolean.bind(this)),address:t,data:wp.allowFalsish(s,"0x"),topics:wp.arrayOf(i),transactionHash:i,logIndex:a},e}accessList(e){return hp(e||[])}number(e){return"0x"===e?0:mc.from(e).toNumber()}type(e){return"0x"===e||null==e?0:mc.from(e).toNumber()}bigNumber(e){return mc.from(e)}boolean(e){if("boolean"==typeof e)return e;if("string"==typeof e){if("true"===(e=e.toLowerCase()))return!0;if("false"===e)return!1}throw new Error("invalid boolean - "+e)}hex(e,t){return"string"==typeof e&&(t||"0x"===e.substring(0,2)||(e="0x"+e),Ja(e))?e.toLowerCase():yp.throwArgumentError("invalid hash","value",e)}data(e,t){const r=this.hex(e,t);if(r.length%2!=0)throw new Error("invalid data; odd-length - "+e);return r}address(e){return Au(e)}callAddress(e){if(!Ja(e,32))return null;const t=Au($a(e,12));return"0x0000000000000000000000000000000000000000"===t?null:t}contractAddress(e){return function(e){let t=null;try{t=Au(e.from)}catch(t){gu.throwArgumentError("missing from address","transaction",e)}return Au($a(ic(du([t,Va(za(mc.from(e.nonce).toHexString()))])),12))}(e)}blockTag(e){if(null==e)return"latest";if("earliest"===e)return"0x0";switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}if("number"==typeof e||Ja(e))return ec(e);throw new Error("invalid blockTag")}hash(e,t){const r=this.hex(e,t);return 32!==Xa(r)?yp.throwArgumentError("invalid hash","value",e):r}difficulty(e){if(null==e)return null;const t=mc.from(e);try{return t.toNumber()}catch(e){}return null}uint256(e){if(!Ja(e))throw new Error("invalid uint256");return rc(e,32)}_block(e,t){null!=e.author&&null==e.miner&&(e.miner=e.author);const r=null!=e._difficulty?e._difficulty:e.difficulty,n=wp.check(t,e);return n._difficulty=null==r?null:mc.from(r),n}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return wp.check(this.formats.transactionRequest,e)}transactionResponse(e){null!=e.gas&&null==e.gasLimit&&(e.gasLimit=e.gas),e.to&&mc.from(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),null!=e.input&&null==e.data&&(e.data=e.input),null==e.to&&null==e.creates&&(e.creates=this.contractAddress(e)),1!==e.type&&2!==e.type||null!=e.accessList||(e.accessList=[]);const t=wp.check(this.formats.transaction,e);if(null!=e.chainId){let r=e.chainId;Ja(r)&&(r=mc.from(r).toNumber()),t.chainId=r}else{let r=e.networkId;null==r&&null==t.v&&(r=e.chainId),Ja(r)&&(r=mc.from(r).toNumber()),"number"!=typeof r&&null!=t.v&&(r=(t.v-35)/2,r<0&&(r=0),r=parseInt(r)),"number"!=typeof r&&(r=0),t.chainId=r}return t.blockHash&&"x"===t.blockHash.replace(/0/g,"")&&(t.blockHash=null),t}transaction(e){return mp(e)}receiptLog(e){return wp.check(this.formats.receiptLog,e)}receipt(e){const t=wp.check(this.formats.receipt,e);if(null!=t.root)if(t.root.length<=4){const e=mc.from(t.root).toNumber();0===e||1===e?(null!=t.status&&t.status!==e&&yp.throwArgumentError("alt-root-status/status mismatch","value",{root:t.root,status:t.status}),t.status=e,delete t.root):yp.throwArgumentError("invalid alt-root-status","value.root",t.root)}else 66!==t.root.length&&yp.throwArgumentError("invalid root hash","value.root",t.root);return null!=t.status&&(t.byzantium=!0),t}topics(e){return Array.isArray(e)?e.map(e=>this.topics(e)):null!=e?this.hash(e,!0):null}filter(e){return wp.check(this.formats.filter,e)}filterLog(e){return wp.check(this.formats.filterLog,e)}static check(e,t){const r={};for(const n in e)try{const s=e[n](t[n]);void 0!==s&&(r[n]=s)}catch(e){throw e.checkKey=n,e.checkValue=t[n],e}return r}static allowNull(e,t){return function(r){return null==r?t:e(r)}}static allowFalsish(e,t){return function(r){return r?e(r):t}}static arrayOf(e){return function(t){if(!Array.isArray(t))throw new Error("not an array");const r=[];return t.forEach(function(t){r.push(e(t))}),r}}}function vp(e){return e&&"function"==typeof e.isCommunityResource}function Ap(e){return vp(e)&&e.isCommunityResource()}let bp=!1;function Ep(){bp||(bp=!0,console.log("========= NOTICE ========="),console.log("Request-Rate Exceeded  (this message will not be repeated)"),console.log(""),console.log("The default API keys for each service are provided as a highly-throttled,"),console.log("community resource for low-traffic projects and early prototyping."),console.log(""),console.log("While your application will continue to function, we highly recommended"),console.log("signing up for your own API keys to improve performance, increase your"),console.log("request rate/limit and enable other perks, such as metrics and advanced APIs."),console.log(""),console.log("For more details: https://docs.ethers.io/api-keys/"),console.log("=========================="))}var _p=function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})};const kp=new La(df);function Rp(e){return null==e?"null":(32!==Xa(e)&&kp.throwArgumentError("invalid topic","topic",e),e.toLowerCase())}function Ip(e){for(e=e.slice();e.length>0&&null==e[e.length-1];)e.pop();return e.map(e=>{if(Array.isArray(e)){const t={};e.forEach(e=>{t[Rp(e)]=!0});const r=Object.keys(t);return r.sort(),r.join("|")}return Rp(e)}).join("&")}function Tp(e){if("string"==typeof e){if(32===Xa(e=e.toLowerCase()))return"tx:"+e;if(-1===e.indexOf(":"))return e}else{if(Array.isArray(e))return"filter:*:"+Ip(e);if(xh.isForkEvent(e))throw kp.warn("not implemented"),new Error("not implemented");if(e&&"object"==typeof e)return"filter:"+(e.address||"*")+":"+Ip(e.topics||[])}throw new Error("invalid event - "+e)}function Np(){return(new Date).getTime()}function Sp(e){return new Promise(t=>{setTimeout(t,e)})}const Pp=["block","network","pending","poll"];let Op=class{constructor(e,t,r){_u(this,"tag",e),_u(this,"listener",t),_u(this,"once",r),this._lastBlockNumber=-2,this._inflight=!1}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const e=this.tag.split(":");return"tx"!==e[0]?null:e[1]}get filter(){const e=this.tag.split(":");if("filter"!==e[0])return null;const t=e[1],r=""===(n=e[2])?[]:n.split(/&/g).map(e=>{if(""===e)return[];const t=e.split("|").map(e=>"null"===e?null:e);return 1===t.length?t[0]:t});var n;const s={};return r.length>0&&(s.topics=r),t&&"*"!==t&&(s.address=t),s}pollable(){return this.tag.indexOf(":")>=0||Pp.indexOf(this.tag)>=0}};const Cp={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function xp(e){return rc(mc.from(e).toHexString(),32)}function Mp(e){return zh.encode(Ka([e,$a(Vd(Vd(e)),0,4)]))}const Up=new RegExp("^(ipfs)://(.*)$","i"),Dp=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Up,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function Lp(e,t){try{return Oc(Bp(e,t))}catch(e){}return null}function Bp(e,t){if("0x"===e)return null;const r=mc.from($a(e,t,t+32)).toNumber(),n=mc.from($a(e,r,r+32)).toNumber();return $a(e,r+32,r+32+n)}function Fp(e){return e.match(/^ipfs:\/\/ipfs\//i)?e=e.substring(12):e.match(/^ipfs:\/\//i)?e=e.substring(7):kp.throwArgumentError("unsupported IPFS format","link",e),`https://gateway.ipfs.io/ipfs/${e}`}function qp(e){const t=za(e);if(t.length>32)throw new Error("internal; should not happen");const r=new Uint8Array(32);return r.set(t,32-t.length),r}function jp(e){if(e.length%32==0)return e;const t=new Uint8Array(32*Math.ceil(e.length/32));return t.set(e),t}function Gp(e){const t=[];let r=0;for(let n=0;n<e.length;n++)t.push(null),r+=32;for(let n=0;n<e.length;n++){const s=za(e[n]);t[n]=qp(r),t.push(qp(s.length)),t.push(jp(s)),r+=32+32*Math.ceil(s.length/32)}return Za(t)}class Hp{constructor(e,t,r,n){_u(this,"provider",e),_u(this,"name",r),_u(this,"address",e.formatter.address(t)),_u(this,"_resolvedAddress",n)}supportsWildcard(){return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then(e=>mc.from(e).eq(1)).catch(e=>{if(e.code===La.errors.CALL_EXCEPTION)return!1;throw this._supportsEip2544=null,e})),this._supportsEip2544}_fetch(e,t){return _p(this,void 0,void 0,function*(){const r={to:this.address,ccipReadEnabled:!0,data:Za([e,iu(this.name),t||"0x"])};let n=!1;(yield this.supportsWildcard())&&(n=!0,r.data=Za(["0x9061b923",Gp([ou(this.name),r.data])]));try{let e=yield this.provider.call(r);return za(e).length%32==4&&kp.throwError("resolver threw error",La.errors.CALL_EXCEPTION,{transaction:r,data:e}),n&&(e=Bp(e,0)),e}catch(e){if(e.code===La.errors.CALL_EXCEPTION)return null;throw e}})}_fetchBytes(e,t){return _p(this,void 0,void 0,function*(){const r=yield this._fetch(e,t);return null!=r?Bp(r,0):null})}_getAddress(e,t){const r=Cp[String(e)];if(null==r&&kp.throwError(`unsupported coin type: ${e}`,La.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`}),"eth"===r.ilk)return this.provider.formatter.address(t);const n=za(t);if(null!=r.p2pkh){const e=t.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(e){const t=parseInt(e[1],16);if(e[2].length===2*t&&t>=1&&t<=75)return Mp(Ka([[r.p2pkh],"0x"+e[2]]))}}if(null!=r.p2sh){const e=t.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(e){const t=parseInt(e[1],16);if(e[2].length===2*t&&t>=1&&t<=75)return Mp(Ka([[r.p2sh],"0x"+e[2]]))}}if(null!=r.prefix){const e=n[1];let t=n[0];if(0===t?20!==e&&32!==e&&(t=-1):t=-1,t>=0&&n.length===2+e&&e>=1&&e<=75){const e=lf.toWords(n.slice(2));return e.unshift(t),lf.encode(r.prefix,e)}}return null}getAddress(e){return _p(this,void 0,void 0,function*(){if(null==e&&(e=60),60===e)try{const e=yield this._fetch("0x3b3b57de");return"0x"===e||"0x0000000000000000000000000000000000000000000000000000000000000000"===e?null:this.provider.formatter.callAddress(e)}catch(e){if(e.code===La.errors.CALL_EXCEPTION)return null;throw e}const t=yield this._fetchBytes("0xf1cb7e06",xp(e));if(null==t||"0x"===t)return null;const r=this._getAddress(e,t);return null==r&&kp.throwError("invalid or unsupported coin data",La.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:t}),r})}getAvatar(){return _p(this,void 0,void 0,function*(){const e=[{type:"name",content:this.name}];try{const t=yield this.getText("avatar");if(null==t)return null;for(let r=0;r<Dp.length;r++){const n=t.match(Dp[r]);if(null==n)continue;const s=n[1].toLowerCase();switch(s){case"https":return e.push({type:"url",content:t}),{linkage:e,url:t};case"data":return e.push({type:"data",content:t}),{linkage:e,url:t};case"ipfs":return e.push({type:"ipfs",content:t}),{linkage:e,url:Fp(t)};case"erc721":case"erc1155":{const r="erc721"===s?"0xc87b56dd":"0x0e89341c";e.push({type:s,content:t});const i=this._resolvedAddress||(yield this.getAddress()),o=(n[2]||"").split("/");if(2!==o.length)return null;const a=yield this.provider.formatter.address(o[0]),c=rc(mc.from(o[1]).toHexString(),32);if("erc721"===s){const t=this.provider.formatter.callAddress(yield this.provider.call({to:a,data:Za(["0x6352211e",c])}));if(i!==t)return null;e.push({type:"owner",content:t})}else if("erc1155"===s){const t=mc.from(yield this.provider.call({to:a,data:Za(["0x00fdd58e",rc(i,32),c])}));if(t.isZero())return null;e.push({type:"balance",content:t.toString()})}const u={to:this.provider.formatter.address(o[0]),data:Za([r,c])};let h=Lp(yield this.provider.call(u),0);if(null==h)return null;e.push({type:"metadata-url-base",content:h}),"erc1155"===s&&(h=h.replace("{id}",c.substring(2)),e.push({type:"metadata-url-expanded",content:h})),h.match(/^ipfs:/i)&&(h=Fp(h)),e.push({type:"metadata-url",content:h});const l=yield Zd(h);if(!l)return null;e.push({type:"metadata",content:JSON.stringify(l)});let d=l.image;if("string"!=typeof d)return null;if(d.match(/^(https:\/\/|data:)/i));else{if(null==d.match(Up))return null;e.push({type:"url-ipfs",content:d}),d=Fp(d)}return e.push({type:"url",content:d}),{linkage:e,url:d}}}}}catch(e){}return null})}getContentHash(){return _p(this,void 0,void 0,function*(){const e=yield this._fetchBytes("0xbc1c58d1");if(null==e||"0x"===e)return null;const t=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const e=parseInt(t[3],16);if(t[4].length===2*e)return"ipfs://"+zh.encode("0x"+t[1])}const r=e.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(r){const e=parseInt(r[3],16);if(r[4].length===2*e)return"ipns://"+zh.encode("0x"+r[1])}const n=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(n&&64===n[1].length)return"bzz://"+n[1];const s=e.match(/^0x90b2c605([0-9a-f]*)$/);if(s&&68===s[1].length){const e={"=":"","+":"-","/":"_"},t=Uc("0x"+s[1]).replace(/[=+\/]/g,t=>e[t]);return"sia://"+t}return kp.throwError("invalid or unsupported content hash data",La.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})})}getText(e){return _p(this,void 0,void 0,function*(){let t=Pc(e);t=Ka([xp(64),xp(t.length),t]),t.length%32!=0&&(t=Ka([t,rc("0x",32-e.length%32)]));const r=yield this._fetchBytes("0x59d1d43c",Qa(t));return null==r||"0x"===r?null:Oc(r)})}}let zp=null,Kp=1;class Vp extends Mh{constructor(e){if(super(),this._events=[],this._emitted={block:-2},this.disableCcipRead=!1,this.formatter=new.target.getFormatter(),_u(this,"anyNetwork","any"===e),this.anyNetwork&&(e=this.detectNetwork()),e instanceof Promise)this._networkPromise=e,e.catch(e=>{}),this._ready().catch(e=>{});else{const t=ku(new.target,"getNetwork")(e);t?(_u(this,"_network",t),this.emit("network",t,null)):kp.throwArgumentError("invalid network","network",e)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._maxFilterBlockRange=10,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return _p(this,void 0,void 0,function*(){if(null==this._network){let e=null;if(this._networkPromise)try{e=yield this._networkPromise}catch(e){}null==e&&(e=yield this.detectNetwork()),e||kp.throwError("no network detected",La.errors.UNKNOWN_ERROR,{}),null==this._network&&(this.anyNetwork?this._network=e:_u(this,"_network",e),this.emit("network",e,null))}return this._network})}get ready(){return ef(()=>this._ready().then(e=>e,e=>{if(e.code!==La.errors.NETWORK_ERROR||"noNetwork"!==e.event)throw e}))}static getFormatter(){return null==zp&&(zp=new wp),zp}static getNetwork(e){return Gh(null==e?"homestead":e)}ccipReadFetch(e,t,r){return _p(this,void 0,void 0,function*(){if(this.disableCcipRead||0===r.length)return null;const n=e.to.toLowerCase(),s=t.toLowerCase(),i=[];for(let e=0;e<r.length;e++){const t=r[e],o=t.replace("{sender}",n).replace("{data}",s),a=t.indexOf("{data}")>=0?null:JSON.stringify({data:s,sender:n}),c=yield Zd({url:o,errorPassThrough:!0},a,(e,t)=>(e.status=t.statusCode,e));if(c.data)return c.data;const u=c.message||"unknown error";if(c.status>=400&&c.status<500)return kp.throwError(`response not found during CCIP fetch: ${u}`,La.errors.SERVER_ERROR,{url:t,errorMessage:u});i.push(u)}return kp.throwError(`error encountered during CCIP fetch: ${i.map(e=>JSON.stringify(e)).join(", ")}`,La.errors.SERVER_ERROR,{urls:r,errorMessages:i})})}_getInternalBlockNumber(e){return _p(this,void 0,void 0,function*(){if(yield this._ready(),e>0)for(;this._internalBlockNumber;){const t=this._internalBlockNumber;try{const r=yield t;if(Np()-r.respTime<=e)return r.blockNumber;break}catch(e){if(this._internalBlockNumber===t)break}}const t=Np(),r=Ru({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then(e=>null,e=>e)}).then(({blockNumber:e,networkError:n})=>{if(n)throw this._internalBlockNumber===r&&(this._internalBlockNumber=null),n;const s=Np();return(e=mc.from(e).toNumber())<this._maxInternalBlockNumber&&(e=this._maxInternalBlockNumber),this._maxInternalBlockNumber=e,this._setFastBlockNumber(e),{blockNumber:e,reqTime:t,respTime:s}});return this._internalBlockNumber=r,r.catch(e=>{this._internalBlockNumber===r&&(this._internalBlockNumber=null)}),(yield r).blockNumber})}poll(){return _p(this,void 0,void 0,function*(){const e=Kp++,t=[];let r=null;try{r=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(e){return void this.emit("error",e)}if(this._setFastBlockNumber(r),this.emit("poll",e,r),r!==this._lastBlockNumber){if(-2===this._emitted.block&&(this._emitted.block=r-1),Math.abs(this._emitted.block-r)>1e3)kp.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${r})`),this.emit("error",kp.makeError("network block skew detected",La.errors.NETWORK_ERROR,{blockNumber:r,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",r);else for(let e=this._emitted.block+1;e<=r;e++)this.emit("block",e);this._emitted.block!==r&&(this._emitted.block=r,Object.keys(this._emitted).forEach(e=>{if("block"===e)return;const t=this._emitted[e];"pending"!==t&&r-t>12&&delete this._emitted[e]})),-2===this._lastBlockNumber&&(this._lastBlockNumber=r-1),this._events.forEach(e=>{switch(e.type){case"tx":{const r=e.hash;let n=this.getTransactionReceipt(r).then(e=>e&&null!=e.blockNumber?(this._emitted["t:"+r]=e.blockNumber,this.emit(r,e),null):null).catch(e=>{this.emit("error",e)});t.push(n);break}case"filter":if(!e._inflight){e._inflight=!0,-2===e._lastBlockNumber&&(e._lastBlockNumber=r-1);const n=e.filter;n.fromBlock=e._lastBlockNumber+1,n.toBlock=r;const s=n.toBlock-this._maxFilterBlockRange;s>n.fromBlock&&(n.fromBlock=s),n.fromBlock<0&&(n.fromBlock=0);const i=this.getLogs(n).then(t=>{e._inflight=!1,0!==t.length&&t.forEach(t=>{t.blockNumber>e._lastBlockNumber&&(e._lastBlockNumber=t.blockNumber),this._emitted["b:"+t.blockHash]=t.blockNumber,this._emitted["t:"+t.transactionHash]=t.blockNumber,this.emit(n,t)})}).catch(t=>{this.emit("error",t),e._inflight=!1});t.push(i)}}}),this._lastBlockNumber=r,Promise.all(t).then(()=>{this.emit("didPoll",e)}).catch(e=>{this.emit("error",e)})}else this.emit("didPoll",e)})}resetEventsBlock(e){this._lastBlockNumber=e-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return _p(this,void 0,void 0,function*(){return kp.throwError("provider does not support network detection",La.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})})}getNetwork(){return _p(this,void 0,void 0,function*(){const e=yield this._ready(),t=yield this.detectNetwork();if(e.chainId!==t.chainId){if(this.anyNetwork)return this._network=t,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",t,e),yield Sp(0),this._network;const r=kp.makeError("underlying network changed",La.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:t});throw this.emit("error",r),r}return e})}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then(e=>{this._setFastBlockNumber(e)},e=>{}),null!=this._fastBlockNumber?this._fastBlockNumber:-1}get polling(){return null!=this._poller}set polling(e){e&&!this._poller?(this._poller=setInterval(()=>{this.poll()},this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout(()=>{this.poll(),this._bootstrapPoll=setTimeout(()=>{this._poller||this.poll(),this._bootstrapPoll=null},this.pollingInterval)},0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if("number"!=typeof e||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval(()=>{this.poll()},this._pollingInterval))}_getFastBlockNumber(){const e=Np();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then(e=>((null==this._fastBlockNumber||e>this._fastBlockNumber)&&(this._fastBlockNumber=e),this._fastBlockNumber))),this._fastBlockNumberPromise}_setFastBlockNumber(e){null!=this._fastBlockNumber&&e<this._fastBlockNumber||(this._fastQueryDate=Np(),(null==this._fastBlockNumber||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))}waitForTransaction(e,t,r){return _p(this,void 0,void 0,function*(){return this._waitForTransaction(e,null==t?1:t,r||0,null)})}_waitForTransaction(e,t,r,n){return _p(this,void 0,void 0,function*(){const s=yield this.getTransactionReceipt(e);return(s?s.confirmations:0)>=t?s:new Promise((s,i)=>{const o=[];let a=!1;const c=function(){return!!a||(a=!0,o.forEach(e=>{e()}),!1)},u=e=>{e.confirmations<t||c()||s(e)};if(this.on(e,u),o.push(()=>{this.removeListener(e,u)}),n){let r=n.startBlock,s=null;const u=o=>_p(this,void 0,void 0,function*(){a||(yield Sp(1e3),this.getTransactionCount(n.from).then(h=>_p(this,void 0,void 0,function*(){if(!a){if(h<=n.nonce)r=o;else{{const t=yield this.getTransaction(e);if(t&&null!=t.blockNumber)return}for(null==s&&(s=r-3,s<n.startBlock&&(s=n.startBlock));s<=o;){if(a)return;const r=yield this.getBlockWithTransactions(s);for(let s=0;s<r.transactions.length;s++){const o=r.transactions[s];if(o.hash===e)return;if(o.from===n.from&&o.nonce===n.nonce){if(a)return;const r=yield this.waitForTransaction(o.hash,t);if(c())return;let s="replaced";return o.data===n.data&&o.to===n.to&&o.value.eq(n.value)?s="repriced":"0x"===o.data&&o.from===o.to&&o.value.isZero()&&(s="cancelled"),void i(kp.makeError("transaction was replaced",La.errors.TRANSACTION_REPLACED,{cancelled:"replaced"===s||"cancelled"===s,reason:s,replacement:this._wrapTransaction(o),hash:e,receipt:r}))}}s++}}a||this.once("block",u)}}),e=>{a||this.once("block",u)}))});if(a)return;this.once("block",u),o.push(()=>{this.removeListener("block",u)})}if("number"==typeof r&&r>0){const e=setTimeout(()=>{c()||i(kp.makeError("timeout exceeded",La.errors.TIMEOUT,{timeout:r}))},r);e.unref&&e.unref(),o.push(()=>{clearTimeout(e)})}})})}getBlockNumber(){return _p(this,void 0,void 0,function*(){return this._getInternalBlockNumber(0)})}getGasPrice(){return _p(this,void 0,void 0,function*(){yield this.getNetwork();const e=yield this.perform("getGasPrice",{});try{return mc.from(e)}catch(t){return kp.throwError("bad result from backend",La.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:t})}})}getBalance(e,t){return _p(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Ru({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),n=yield this.perform("getBalance",r);try{return mc.from(n)}catch(e){return kp.throwError("bad result from backend",La.errors.SERVER_ERROR,{method:"getBalance",params:r,result:n,error:e})}})}getTransactionCount(e,t){return _p(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Ru({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),n=yield this.perform("getTransactionCount",r);try{return mc.from(n).toNumber()}catch(e){return kp.throwError("bad result from backend",La.errors.SERVER_ERROR,{method:"getTransactionCount",params:r,result:n,error:e})}})}getCode(e,t){return _p(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Ru({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),n=yield this.perform("getCode",r);try{return Qa(n)}catch(e){return kp.throwError("bad result from backend",La.errors.SERVER_ERROR,{method:"getCode",params:r,result:n,error:e})}})}getStorageAt(e,t,r){return _p(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield Ru({address:this._getAddress(e),blockTag:this._getBlockTag(r),position:Promise.resolve(t).then(e=>ec(e))}),s=yield this.perform("getStorageAt",n);try{return Qa(s)}catch(e){return kp.throwError("bad result from backend",La.errors.SERVER_ERROR,{method:"getStorageAt",params:n,result:s,error:e})}})}_wrapTransaction(e,t,r){if(null!=t&&32!==Xa(t))throw new Error("invalid response - sendTransaction");const n=e;return null!=t&&e.hash!==t&&kp.throwError("Transaction hash mismatch from Provider.sendTransaction.",La.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:t}),n.wait=(t,n)=>_p(this,void 0,void 0,function*(){let s;null==t&&(t=1),null==n&&(n=0),0!==t&&null!=r&&(s={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:r});const i=yield this._waitForTransaction(e.hash,t,n,s);return null==i&&0===t?null:(this._emitted["t:"+e.hash]=i.blockNumber,0===i.status&&kp.throwError("transaction failed",La.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:i}),i)}),n}sendTransaction(e){return _p(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Promise.resolve(e).then(e=>Qa(e)),r=this.formatter.transaction(e);null==r.confirmations&&(r.confirmations=0);const n=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const e=yield this.perform("sendTransaction",{signedTransaction:t});return this._wrapTransaction(r,e,n)}catch(e){throw e.transaction=r,e.transactionHash=r.hash,e}})}_getTransactionRequest(e){return _p(this,void 0,void 0,function*(){const t=yield e,r={};return["from","to"].forEach(e=>{null!=t[e]&&(r[e]=Promise.resolve(t[e]).then(e=>e?this._getAddress(e):null))}),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach(e=>{null!=t[e]&&(r[e]=Promise.resolve(t[e]).then(e=>e?mc.from(e):null))}),["type"].forEach(e=>{null!=t[e]&&(r[e]=Promise.resolve(t[e]).then(e=>null!=e?e:null))}),t.accessList&&(r.accessList=this.formatter.accessList(t.accessList)),["data"].forEach(e=>{null!=t[e]&&(r[e]=Promise.resolve(t[e]).then(e=>e?Qa(e):null))}),this.formatter.transactionRequest(yield Ru(r))})}_getFilter(e){return _p(this,void 0,void 0,function*(){e=yield e;const t={};return null!=e.address&&(t.address=this._getAddress(e.address)),["blockHash","topics"].forEach(r=>{null!=e[r]&&(t[r]=e[r])}),["fromBlock","toBlock"].forEach(r=>{null!=e[r]&&(t[r]=this._getBlockTag(e[r]))}),this.formatter.filter(yield Ru(t))})}_call(e,t,r){return _p(this,void 0,void 0,function*(){r>=10&&kp.throwError("CCIP read exceeded maximum redirections",La.errors.SERVER_ERROR,{redirects:r,transaction:e});const n=e.to,s=yield this.perform("call",{transaction:e,blockTag:t});if(r>=0&&"latest"===t&&null!=n&&"0x556f1830"===s.substring(0,10)&&Xa(s)%32==4)try{const i=$a(s,4),o=$a(i,0,32);mc.from(o).eq(n)||kp.throwError("CCIP Read sender did not match",La.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const a=[],c=mc.from($a(i,32,64)).toNumber(),u=mc.from($a(i,c,c+32)).toNumber(),h=$a(i,c+32);for(let t=0;t<u;t++){const r=Lp(h,32*t);null==r&&kp.throwError("CCIP Read contained corrupt URL string",La.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s}),a.push(r)}const l=Bp(i,64);mc.from($a(i,100,128)).isZero()||kp.throwError("CCIP Read callback selector included junk",La.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const d=$a(i,96,100),f=Bp(i,128),p=yield this.ccipReadFetch(e,l,a);null==p&&kp.throwError("CCIP Read disabled or provided no URLs",La.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const m={to:n,data:Za([d,Gp([p,f])])};return this._call(m,t,r+1)}catch(e){if(e.code===La.errors.SERVER_ERROR)throw e}try{return Qa(s)}catch(r){return kp.throwError("bad result from backend",La.errors.SERVER_ERROR,{method:"call",params:{transaction:e,blockTag:t},result:s,error:r})}})}call(e,t){return _p(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Ru({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(t),ccipReadEnabled:Promise.resolve(e.ccipReadEnabled)});return this._call(r.transaction,r.blockTag,r.ccipReadEnabled?0:-1)})}estimateGas(e){return _p(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Ru({transaction:this._getTransactionRequest(e)}),r=yield this.perform("estimateGas",t);try{return mc.from(r)}catch(e){return kp.throwError("bad result from backend",La.errors.SERVER_ERROR,{method:"estimateGas",params:t,result:r,error:e})}})}_getAddress(e){return _p(this,void 0,void 0,function*(){"string"!=typeof(e=yield e)&&kp.throwArgumentError("invalid address or ENS name","name",e);const t=yield this.resolveName(e);return null==t&&kp.throwError("ENS name not configured",La.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`}),t})}_getBlock(e,t){return _p(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;let r=-128;const n={includeTransactions:!!t};if(Ja(e,32))n.blockHash=e;else try{n.blockTag=yield this._getBlockTag(e),Ja(n.blockTag)&&(r=parseInt(n.blockTag.substring(2),16))}catch(t){kp.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}return ef(()=>_p(this,void 0,void 0,function*(){const e=yield this.perform("getBlock",n);if(null==e)return null!=n.blockHash&&null==this._emitted["b:"+n.blockHash]||null!=n.blockTag&&r>this._emitted.block?null:void 0;if(t){let t=null;for(let r=0;r<e.transactions.length;r++){const n=e.transactions[r];if(null==n.blockNumber)n.confirmations=0;else if(null==n.confirmations){null==t&&(t=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let e=t-n.blockNumber+1;e<=0&&(e=1),n.confirmations=e}}const r=this.formatter.blockWithTransactions(e);return r.transactions=r.transactions.map(e=>this._wrapTransaction(e)),r}return this.formatter.block(e)}),{oncePoll:this})})}getBlock(e){return this._getBlock(e,!1)}getBlockWithTransactions(e){return this._getBlock(e,!0)}getTransaction(e){return _p(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return ef(()=>_p(this,void 0,void 0,function*(){const r=yield this.perform("getTransaction",t);if(null==r)return null==this._emitted["t:"+e]?null:void 0;const n=this.formatter.transactionResponse(r);if(null==n.blockNumber)n.confirmations=0;else if(null==n.confirmations){let e=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-n.blockNumber+1;e<=0&&(e=1),n.confirmations=e}return this._wrapTransaction(n)}),{oncePoll:this})})}getTransactionReceipt(e){return _p(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return ef(()=>_p(this,void 0,void 0,function*(){const r=yield this.perform("getTransactionReceipt",t);if(null==r)return null==this._emitted["t:"+e]?null:void 0;if(null==r.blockHash)return;const n=this.formatter.receipt(r);if(null==n.blockNumber)n.confirmations=0;else if(null==n.confirmations){let e=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-n.blockNumber+1;e<=0&&(e=1),n.confirmations=e}return n}),{oncePoll:this})})}getLogs(e){return _p(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Ru({filter:this._getFilter(e)}),r=yield this.perform("getLogs",t);return r.forEach(e=>{null==e.removed&&(e.removed=!1)}),wp.arrayOf(this.formatter.filterLog.bind(this.formatter))(r)})}getEtherPrice(){return _p(this,void 0,void 0,function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})})}_getBlockTag(e){return _p(this,void 0,void 0,function*(){if("number"==typeof(e=yield e)&&e<0){e%1&&kp.throwArgumentError("invalid BlockTag","blockTag",e);let t=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return t+=e,t<0&&(t=0),this.formatter.blockTag(t)}return this.formatter.blockTag(e)})}getResolver(e){return _p(this,void 0,void 0,function*(){let t=e;for(;;){if(""===t||"."===t)return null;if("eth"!==e&&"eth"===t)return null;const r=yield this._getResolver(t,"getResolver");if(null!=r){const n=new Hp(this,r,e);return t===e||(yield n.supportsWildcard())?n:null}t=t.split(".").slice(1).join(".")}})}_getResolver(e,t){return _p(this,void 0,void 0,function*(){null==t&&(t="ENS");const r=yield this.getNetwork();r.ensAddress||kp.throwError("network does not support ENS",La.errors.UNSUPPORTED_OPERATION,{operation:t,network:r.name});try{const t=yield this.call({to:r.ensAddress,data:"0x0178b8bf"+iu(e).substring(2)});return this.formatter.callAddress(t)}catch(e){}return null})}resolveName(e){return _p(this,void 0,void 0,function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(t){if(Ja(e))throw t}"string"!=typeof e&&kp.throwArgumentError("invalid ENS name","name",e);const t=yield this.getResolver(e);return t?yield t.getAddress():null})}lookupAddress(e){return _p(this,void 0,void 0,function*(){e=yield e;const t=(e=this.formatter.address(e)).substring(2).toLowerCase()+".addr.reverse",r=yield this._getResolver(t,"lookupAddress");if(null==r)return null;const n=Lp(yield this.call({to:r,data:"0x691f3431"+iu(t).substring(2)}),0);return(yield this.resolveName(n))!=e?null:n})}getAvatar(e){return _p(this,void 0,void 0,function*(){let t=null;if(Ja(e)){const r=this.formatter.address(e).substring(2).toLowerCase()+".addr.reverse",n=yield this._getResolver(r,"getAvatar");if(!n)return null;t=new Hp(this,n,r);try{const e=yield t.getAvatar();if(e)return e.url}catch(e){if(e.code!==La.errors.CALL_EXCEPTION)throw e}try{const e=Lp(yield this.call({to:n,data:"0x691f3431"+iu(r).substring(2)}),0);t=yield this.getResolver(e)}catch(e){if(e.code!==La.errors.CALL_EXCEPTION)throw e;return null}}else if(t=yield this.getResolver(e),!t)return null;const r=yield t.getAvatar();return null==r?null:r.url})}perform(e,t){return kp.throwError(e+" not implemented",La.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter(e=>e.pollable()).length>0}_stopEvent(e){this.polling=this._events.filter(e=>e.pollable()).length>0}_addEventListener(e,t,r){const n=new Op(Tp(e),t,r);return this._events.push(n),this._startEvent(n),this}on(e,t){return this._addEventListener(e,t,!1)}once(e,t){return this._addEventListener(e,t,!0)}emit(e,...t){let r=!1,n=[],s=Tp(e);return this._events=this._events.filter(e=>e.tag!==s||(setTimeout(()=>{e.listener.apply(this,t)},0),r=!0,!e.once||(n.push(e),!1))),n.forEach(e=>{this._stopEvent(e)}),r}listenerCount(e){if(!e)return this._events.length;let t=Tp(e);return this._events.filter(e=>e.tag===t).length}listeners(e){if(null==e)return this._events.map(e=>e.listener);let t=Tp(e);return this._events.filter(e=>e.tag===t).map(e=>e.listener)}off(e,t){if(null==t)return this.removeAllListeners(e);const r=[];let n=!1,s=Tp(e);return this._events=this._events.filter(e=>e.tag!==s||e.listener!=t||(!!n||(n=!0,r.push(e),!1))),r.forEach(e=>{this._stopEvent(e)}),this}removeAllListeners(e){let t=[];if(null==e)t=this._events,this._events=[];else{const r=Tp(e);this._events=this._events.filter(e=>e.tag!==r||(t.push(e),!1))}return t.forEach(e=>{this._stopEvent(e)}),this}}var Wp=function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})};const Jp=new La("abstract-signer/5.8.0"),Yp=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],Qp=[La.errors.INSUFFICIENT_FUNDS,La.errors.NONCE_EXPIRED,La.errors.REPLACEMENT_UNDERPRICED];class Xp{constructor(){Jp.checkAbstract(new.target,Xp),_u(this,"_isSigner",!0)}getBalance(e){return Wp(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)})}getTransactionCount(e){return Wp(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)})}estimateGas(e){return Wp(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const t=yield Ru(this.checkTransaction(e));return yield this.provider.estimateGas(t)})}call(e,t){return Wp(this,void 0,void 0,function*(){this._checkProvider("call");const r=yield Ru(this.checkTransaction(e));return yield this.provider.call(r,t)})}sendTransaction(e){return Wp(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const t=yield this.populateTransaction(e),r=yield this.signTransaction(t);return yield this.provider.sendTransaction(r)})}getChainId(){return Wp(this,void 0,void 0,function*(){this._checkProvider("getChainId");return(yield this.provider.getNetwork()).chainId})}getGasPrice(){return Wp(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return Wp(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(e){return Wp(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)})}checkTransaction(e){for(const t in e)-1===Yp.indexOf(t)&&Jp.throwArgumentError("invalid transaction key: "+t,"transaction",e);const t=Tu(e);return null==t.from?t.from=this.getAddress():t.from=Promise.all([Promise.resolve(t.from),this.getAddress()]).then(t=>(t[0].toLowerCase()!==t[1].toLowerCase()&&Jp.throwArgumentError("from address mismatch","transaction",e),t[0])),t}populateTransaction(e){return Wp(this,void 0,void 0,function*(){const t=yield Ru(this.checkTransaction(e));null!=t.to&&(t.to=Promise.resolve(t.to).then(e=>Wp(this,void 0,void 0,function*(){if(null==e)return null;const t=yield this.resolveName(e);return null==t&&Jp.throwArgumentError("provided ENS name resolves to null","tx.to",e),t})),t.to.catch(e=>{}));const r=null!=t.maxFeePerGas||null!=t.maxPriorityFeePerGas;if(null==t.gasPrice||2!==t.type&&!r?0!==t.type&&1!==t.type||!r||Jp.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e):Jp.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e),2!==t.type&&null!=t.type||null==t.maxFeePerGas||null==t.maxPriorityFeePerGas)if(0===t.type||1===t.type)null==t.gasPrice&&(t.gasPrice=this.getGasPrice());else{const e=yield this.getFeeData();if(null==t.type)if(null!=e.maxFeePerGas&&null!=e.maxPriorityFeePerGas)if(t.type=2,null!=t.gasPrice){const e=t.gasPrice;delete t.gasPrice,t.maxFeePerGas=e,t.maxPriorityFeePerGas=e}else null==t.maxFeePerGas&&(t.maxFeePerGas=e.maxFeePerGas),null==t.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas);else null!=e.gasPrice?(r&&Jp.throwError("network does not support EIP-1559",La.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),null==t.gasPrice&&(t.gasPrice=e.gasPrice),t.type=0):Jp.throwError("failed to get consistent fee data",La.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else 2===t.type&&(null==t.maxFeePerGas&&(t.maxFeePerGas=e.maxFeePerGas),null==t.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas))}else t.type=2;return null==t.nonce&&(t.nonce=this.getTransactionCount("pending")),null==t.gasLimit&&(t.gasLimit=this.estimateGas(t).catch(e=>{if(Qp.indexOf(e.code)>=0)throw e;return Jp.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",La.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,tx:t})})),null==t.chainId?t.chainId=this.getChainId():t.chainId=Promise.all([Promise.resolve(t.chainId),this.getChainId()]).then(t=>(0!==t[1]&&t[0]!==t[1]&&Jp.throwArgumentError("chainId address mismatch","transaction",e),t[0])),yield Ru(t)})}_checkProvider(e){this.provider||Jp.throwError("missing provider",La.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!(!e||!e._isSigner)}}var $p=function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})};const Zp=new La(df),em=["call","estimateGas"];function tm(e,t){if(null==e)return null;if("string"==typeof e.message&&e.message.match("reverted")){const r=Ja(e.data)?e.data:null;if(!t||r)return{message:e.message,data:r}}if("object"==typeof e){for(const r in e){const n=tm(e[r],t);if(n)return n}return null}if("string"==typeof e)try{return tm(JSON.parse(e),t)}catch(e){}return null}function rm(e,t,r){const n=r.transaction||r.signedTransaction;if("call"===e){const e=tm(t,!0);if(e)return e.data;Zp.throwError("missing revert data in call exception; Transaction reverted without a reason string",La.errors.CALL_EXCEPTION,{data:"0x",transaction:n,error:t})}if("estimateGas"===e){let r=tm(t.body,!1);null==r&&(r=tm(t,!1)),r&&Zp.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",La.errors.UNPREDICTABLE_GAS_LIMIT,{reason:r.message,method:e,transaction:n,error:t})}let s=t.message;throw t.code===La.errors.SERVER_ERROR&&t.error&&"string"==typeof t.error.message?s=t.error.message:"string"==typeof t.body?s=t.body:"string"==typeof t.responseText&&(s=t.responseText),s=(s||"").toLowerCase(),s.match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)&&Zp.throwError("insufficient funds for intrinsic transaction cost",La.errors.INSUFFICIENT_FUNDS,{error:t,method:e,transaction:n}),s.match(/nonce (is )?too low/i)&&Zp.throwError("nonce has already been used",La.errors.NONCE_EXPIRED,{error:t,method:e,transaction:n}),s.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&Zp.throwError("replacement fee too low",La.errors.REPLACEMENT_UNDERPRICED,{error:t,method:e,transaction:n}),s.match(/only replay-protected/i)&&Zp.throwError("legacy pre-eip-155 transactions not supported",La.errors.UNSUPPORTED_OPERATION,{error:t,method:e,transaction:n}),em.indexOf(e)>=0&&s.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)&&Zp.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",La.errors.UNPREDICTABLE_GAS_LIMIT,{error:t,method:e,transaction:n}),t}function nm(e){return new Promise(function(t){setTimeout(t,e)})}function sm(e){if(e.error){const t=new Error(e.error.message);throw t.code=e.error.code,t.data=e.error.data,t}return e.result}function im(e){return e?e.toLowerCase():e}const om={};class am extends Xp{constructor(e,t,r){if(super(),e!==om)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");_u(this,"provider",t),null==r&&(r=0),"string"==typeof r?(_u(this,"_address",this.provider.formatter.address(r)),_u(this,"_index",null)):"number"==typeof r?(_u(this,"_index",r),_u(this,"_address",null)):Zp.throwArgumentError("invalid address or index","addressOrIndex",r)}connect(e){return Zp.throwError("cannot alter JSON-RPC Signer connection",La.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new cm(om,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then(e=>(e.length<=this._index&&Zp.throwError("unknown account #"+this._index,La.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(e[this._index])))}sendUncheckedTransaction(e){e=Tu(e);const t=this.getAddress().then(e=>(e&&(e=e.toLowerCase()),e));if(null==e.gasLimit){const r=Tu(e);r.from=t,e.gasLimit=this.provider.estimateGas(r)}return null!=e.to&&(e.to=Promise.resolve(e.to).then(e=>$p(this,void 0,void 0,function*(){if(null==e)return null;const t=yield this.provider.resolveName(e);return null==t&&Zp.throwArgumentError("provided ENS name resolves to null","tx.to",e),t}))),Ru({tx:Ru(e),sender:t}).then(({tx:t,sender:r})=>{null!=t.from?t.from.toLowerCase()!==r&&Zp.throwArgumentError("from address mismatch","transaction",e):t.from=r;const n=this.provider.constructor.hexlifyTransaction(t,{from:!0});return this.provider.send("eth_sendTransaction",[n]).then(e=>e,e=>("string"==typeof e.message&&e.message.match(/user denied/i)&&Zp.throwError("user rejected transaction",La.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:t}),rm("sendTransaction",e,n)))})}signTransaction(e){return Zp.throwError("signing transactions is unsupported",La.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return $p(this,void 0,void 0,function*(){const t=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),r=yield this.sendUncheckedTransaction(e);try{return yield ef(()=>$p(this,void 0,void 0,function*(){const e=yield this.provider.getTransaction(r);if(null!==e)return this.provider._wrapTransaction(e,r,t)}),{oncePoll:this.provider})}catch(e){throw e.transactionHash=r,e}})}signMessage(e){return $p(this,void 0,void 0,function*(){const t="string"==typeof e?Pc(e):e,r=yield this.getAddress();try{return yield this.provider.send("personal_sign",[Qa(t),r.toLowerCase()])}catch(t){throw"string"==typeof t.message&&t.message.match(/user denied/i)&&Zp.throwError("user rejected signing",La.errors.ACTION_REJECTED,{action:"signMessage",from:r,messageData:e}),t}})}_legacySignMessage(e){return $p(this,void 0,void 0,function*(){const t="string"==typeof e?Pc(e):e,r=yield this.getAddress();try{return yield this.provider.send("eth_sign",[r.toLowerCase(),Qa(t)])}catch(t){throw"string"==typeof t.message&&t.message.match(/user denied/i)&&Zp.throwError("user rejected signing",La.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:r,messageData:e}),t}})}_signTypedData(e,t,r){return $p(this,void 0,void 0,function*(){const n=yield Ju.resolveNames(e,t,r,e=>this.provider.resolveName(e)),s=yield this.getAddress();try{return yield this.provider.send("eth_signTypedData_v4",[s.toLowerCase(),JSON.stringify(Ju.getPayload(n.domain,t,n.value))])}catch(e){throw"string"==typeof e.message&&e.message.match(/user denied/i)&&Zp.throwError("user rejected signing",La.errors.ACTION_REJECTED,{action:"_signTypedData",from:s,messageData:{domain:n.domain,types:t,value:n.value}}),e}})}unlock(e){return $p(this,void 0,void 0,function*(){const t=this.provider,r=yield this.getAddress();return t.send("personal_unlockAccount",[r.toLowerCase(),e,null])})}}class cm extends am{sendTransaction(e){return this.sendUncheckedTransaction(e).then(e=>({hash:e,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:t=>this.provider.waitForTransaction(e,t)}))}}const um={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class hm extends Vp{constructor(e,t){let r=t;null==r&&(r=new Promise((e,t)=>{setTimeout(()=>{this.detectNetwork().then(t=>{e(t)},e=>{t(e)})},0)})),super(r),e||(e=ku(this.constructor,"defaultUrl")()),_u(this,"connection","string"==typeof e?Object.freeze({url:e}):Object.freeze(Tu(e))),this._nextId=42}get _cache(){return null==this._eventLoopCache&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout(()=>{this._cache.detectNetwork=null},0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return $p(this,void 0,void 0,function*(){yield nm(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch(t){try{e=yield this.send("net_version",[])}catch(e){}}if(null!=e){const t=ku(this.constructor,"getNetwork");try{return t(mc.from(e).toNumber())}catch(t){return Zp.throwError("could not detect network",La.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:t})}}return Zp.throwError("could not detect network",La.errors.NETWORK_ERROR,{event:"noNetwork"})})}getSigner(e){return new am(om,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then(e=>e.map(e=>this.formatter.address(e)))}send(e,t){const r={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:Ou(r),provider:this});const n=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(n&&this._cache[e])return this._cache[e];const s=Zd(this.connection,JSON.stringify(r),sm).then(e=>(this.emit("debug",{action:"response",request:r,response:e,provider:this}),e),e=>{throw this.emit("debug",{action:"response",error:e,request:r,provider:this}),e});return n&&(this._cache[e]=s,setTimeout(()=>{this._cache[e]=null},0)),s}prepareRequest(e,t){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[im(t.address),t.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[im(t.address),t.blockTag]];case"getCode":return["eth_getCode",[im(t.address),t.blockTag]];case"getStorageAt":return["eth_getStorageAt",[im(t.address),rc(t.position,32),t.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[t.signedTransaction]];case"getBlock":return t.blockTag?["eth_getBlockByNumber",[t.blockTag,!!t.includeTransactions]]:t.blockHash?["eth_getBlockByHash",[t.blockHash,!!t.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[t.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[t.transactionHash]];case"call":return["eth_call",[ku(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0}),t.blockTag]];case"estimateGas":return["eth_estimateGas",[ku(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0})]];case"getLogs":return t.filter&&null!=t.filter.address&&(t.filter.address=im(t.filter.address)),["eth_getLogs",[t.filter]]}return null}perform(e,t){return $p(this,void 0,void 0,function*(){if("call"===e||"estimateGas"===e){const e=t.transaction;if(e&&null!=e.type&&mc.from(e.type).isZero()&&null==e.maxFeePerGas&&null==e.maxPriorityFeePerGas){const r=yield this.getFeeData();null==r.maxFeePerGas&&null==r.maxPriorityFeePerGas&&((t=Tu(t)).transaction=Tu(e),delete t.transaction.type)}}const r=this.prepareRequest(e,t);null==r&&Zp.throwError(e+" not implemented",La.errors.NOT_IMPLEMENTED,{operation:e});try{return yield this.send(r[0],r[1])}catch(r){return rm(e,r,t)}})}_startEvent(e){"pending"===e.tag&&this._startPending(),super._startEvent(e)}_startPending(){if(null!=this._pendingFilter)return;const e=this,t=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=t,t.then(function(r){return function n(){e.send("eth_getFilterChanges",[r]).then(function(r){if(e._pendingFilter!=t)return null;let n=Promise.resolve();return r.forEach(function(t){e._emitted["t:"+t.toLowerCase()]="pending",n=n.then(function(){return e.getTransaction(t).then(function(t){return e.emit("pending",t),null})})}),n.then(function(){return nm(1e3)})}).then(function(){if(e._pendingFilter==t)return setTimeout(function(){n()},0),null;e.send("eth_uninstallFilter",[r])}).catch(e=>{})}(),r}).catch(e=>{})}_stopEvent(e){"pending"===e.tag&&0===this.listenerCount("pending")&&(this._pendingFilter=null),super._stopEvent(e)}static hexlifyTransaction(e,t){const r=Tu(um);if(t)for(const e in t)t[e]&&(r[e]=!0);Iu(e,r);const n={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(function(t){if(null==e[t])return;const r=ec(mc.from(e[t]));"gasLimit"===t&&(t="gas"),n[t]=r}),["from","to","data"].forEach(function(t){null!=e[t]&&(n[t]=Qa(e[t]))}),e.accessList&&(n.accessList=hp(e.accessList)),n}}let lm=null;try{if(lm=WebSocket,null==lm)throw new Error("inject please")}catch(e){const t=new La(df);lm=function(){t.throwError("WebSockets not supported in this environment",La.errors.UNSUPPORTED_OPERATION,{operation:"new WebSocket()"})}}var dm=function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})};const fm=new La(df);let pm=1;class mm extends hm{constructor(e,t){"any"===t&&fm.throwError("WebSocketProvider does not support 'any' network yet",La.errors.UNSUPPORTED_OPERATION,{operation:"network:any"}),super("string"==typeof e?e:"_websocket",t),this._pollingInterval=-1,this._wsReady=!1,_u(this,"_websocket","string"==typeof e?new lm(this.connection.url):e),_u(this,"_requests",{}),_u(this,"_subs",{}),_u(this,"_subIds",{}),_u(this,"_detectNetwork",super.detectNetwork()),this.websocket.onopen=()=>{this._wsReady=!0,Object.keys(this._requests).forEach(e=>{this.websocket.send(this._requests[e].payload)})},this.websocket.onmessage=e=>{const t=e.data,r=JSON.parse(t);if(null!=r.id){const e=String(r.id),n=this._requests[e];if(delete this._requests[e],void 0!==r.result)n.callback(null,r.result),this.emit("debug",{action:"response",request:JSON.parse(n.payload),response:r.result,provider:this});else{let e=null;r.error?(e=new Error(r.error.message||"unknown error"),_u(e,"code",r.error.code||null),_u(e,"response",t)):e=new Error("unknown error"),n.callback(e,void 0),this.emit("debug",{action:"response",error:e,request:JSON.parse(n.payload),provider:this})}}else if("eth_subscription"===r.method){const e=this._subs[r.params.subscription];e&&e.processFunc(r.params.result)}else console.warn("this should not happen")};const r=setInterval(()=>{this.emit("poll")},1e3);r.unref&&r.unref()}get websocket(){return this._websocket}detectNetwork(){return this._detectNetwork}get pollingInterval(){return 0}resetEventsBlock(e){fm.throwError("cannot reset events block on WebSocketProvider",La.errors.UNSUPPORTED_OPERATION,{operation:"resetEventBlock"})}set pollingInterval(e){fm.throwError("cannot set polling interval on WebSocketProvider",La.errors.UNSUPPORTED_OPERATION,{operation:"setPollingInterval"})}poll(){return dm(this,void 0,void 0,function*(){return null})}set polling(e){e&&fm.throwError("cannot set polling on WebSocketProvider",La.errors.UNSUPPORTED_OPERATION,{operation:"setPolling"})}send(e,t){const r=pm++;return new Promise((n,s)=>{const i=JSON.stringify({method:e,params:t,id:r,jsonrpc:"2.0"});this.emit("debug",{action:"request",request:JSON.parse(i),provider:this}),this._requests[String(r)]={callback:function(e,t){return e?s(e):n(t)},payload:i},this._wsReady&&this.websocket.send(i)})}static defaultUrl(){return"ws://localhost:8546"}_subscribe(e,t,r){return dm(this,void 0,void 0,function*(){let n=this._subIds[e];null==n&&(n=Promise.all(t).then(e=>this.send("eth_subscribe",e)),this._subIds[e]=n);const s=yield n;this._subs[s]={tag:e,processFunc:r}})}_startEvent(e){switch(e.type){case"block":this._subscribe("block",["newHeads"],e=>{const t=mc.from(e.number).toNumber();this._emitted.block=t,this.emit("block",t)});break;case"pending":this._subscribe("pending",["newPendingTransactions"],e=>{this.emit("pending",e)});break;case"filter":this._subscribe(e.tag,["logs",this._getFilter(e.filter)],t=>{null==t.removed&&(t.removed=!1),this.emit(e.filter,this.formatter.filterLog(t))});break;case"tx":{const t=e=>{const t=e.hash;this.getTransactionReceipt(t).then(e=>{e&&this.emit(t,e)})};t(e),this._subscribe("tx",["newHeads"],e=>{this._events.filter(e=>"tx"===e.type).forEach(t)});break}case"debug":case"poll":case"willPoll":case"didPoll":case"error":break;default:console.log("unhandled:",e)}}_stopEvent(e){let t=e.tag;if("tx"===e.type){if(this._events.filter(e=>"tx"===e.type).length)return;t="tx"}else if(this.listenerCount(e.event))return;const r=this._subIds[t];r&&(delete this._subIds[t],r.then(e=>{this._subs[e]&&(delete this._subs[e],this.send("eth_unsubscribe",[e]))}))}destroy(){return dm(this,void 0,void 0,function*(){this.websocket.readyState===lm.CONNECTING&&(yield new Promise(e=>{this.websocket.onopen=function(){e(!0)},this.websocket.onerror=function(){e(!1)}})),this.websocket.close(1e3)})}}var gm=function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})};const ym=new La(df);class wm extends hm{detectNetwork(){const e=Object.create(null,{detectNetwork:{get:()=>super.detectNetwork}});return gm(this,void 0,void 0,function*(){let t=this.network;return null==t&&(t=yield e.detectNetwork.call(this),t||ym.throwError("no network detected",La.errors.UNKNOWN_ERROR,{}),null==this._network&&(_u(this,"_network",t),this.emit("network",t,null))),t})}}class vm extends wm{constructor(e,t){ym.checkAbstract(new.target,vm),e=ku(new.target,"getNetwork")(e),t=ku(new.target,"getApiKey")(t);super(ku(new.target,"getUrl")(e,t),e),"string"==typeof t?_u(this,"apiKey",t):null!=t&&Object.keys(t).forEach(e=>{_u(this,e,t[e])})}_startPending(){ym.warn("WARNING: API provider does not support pending filters")}isCommunityResource(){return!1}getSigner(e){return ym.throwError("API provider does not support signing",La.errors.UNSUPPORTED_OPERATION,{operation:"getSigner"})}listAccounts(){return Promise.resolve([])}static getApiKey(e){return e}static getUrl(e,t){return ym.throwError("not implemented; sub-classes must override getUrl",La.errors.NOT_IMPLEMENTED,{operation:"getUrl"})}}const Am=new La(df),bm="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC";class Em extends mm{constructor(e,t){const r=new _m(e,t);super(r.connection.url.replace(/^http/i,"ws").replace(".alchemyapi.",".ws.alchemyapi."),r.network),_u(this,"apiKey",r.apiKey)}isCommunityResource(){return this.apiKey===bm}}class _m extends vm{static getWebSocketProvider(e,t){return new Em(e,t)}static getApiKey(e){return null==e?bm:(e&&"string"!=typeof e&&Am.throwArgumentError("invalid apiKey","apiKey",e),e)}static getUrl(e,t){let r=null;switch(e.name){case"homestead":r="eth-mainnet.alchemyapi.io/v2/";break;case"goerli":r="eth-goerli.g.alchemy.com/v2/";break;case"sepolia":r="eth-sepolia.g.alchemy.com/v2/";break;case"matic":r="polygon-mainnet.g.alchemy.com/v2/";break;case"maticmum":r="polygon-mumbai.g.alchemy.com/v2/";break;case"arbitrum":r="arb-mainnet.g.alchemy.com/v2/";break;case"arbitrum-goerli":r="arb-goerli.g.alchemy.com/v2/";break;case"arbitrum-sepolia":r="arb-sepolia.g.alchemy.com/v2/";break;case"optimism":r="opt-mainnet.g.alchemy.com/v2/";break;case"optimism-goerli":r="opt-goerli.g.alchemy.com/v2/";break;case"optimism-sepolia":r="opt-sepolia.g.alchemy.com/v2/";break;default:Am.throwArgumentError("unsupported network","network",arguments[0])}return{allowGzip:!0,url:"https://"+r+t,throttleCallback:(e,r)=>(t===bm&&Ep(),Promise.resolve(!0))}}isCommunityResource(){return this.apiKey===bm}}const km=new La(df),Rm="9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972";function Im(e){switch(e){case"homestead":return"rpc.ankr.com/eth/";case"ropsten":return"rpc.ankr.com/eth_ropsten/";case"rinkeby":return"rpc.ankr.com/eth_rinkeby/";case"goerli":return"rpc.ankr.com/eth_goerli/";case"sepolia":return"rpc.ankr.com/eth_sepolia/";case"matic":return"rpc.ankr.com/polygon/";case"maticmum":return"rpc.ankr.com/polygon_mumbai/";case"optimism":return"rpc.ankr.com/optimism/";case"optimism-goerli":return"rpc.ankr.com/optimism_testnet/";case"optimism-sepolia":return"rpc.ankr.com/optimism_sepolia/";case"arbitrum":return"rpc.ankr.com/arbitrum/"}return km.throwArgumentError("unsupported network","name",e)}class Tm extends vm{isCommunityResource(){return this.apiKey===Rm}static getApiKey(e){return null==e?Rm:e}static getUrl(e,t){null==t&&(t=Rm);const r={allowGzip:!0,url:"https://"+Im(e.name)+t,throttleCallback:(e,r)=>(t.apiKey===Rm&&Ep(),Promise.resolve(!0))};return null!=t.projectSecret&&(r.user="",r.password=t.projectSecret),r}}var Nm=function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})};const Sm=new La(df);class Pm extends vm{static getApiKey(e){return null!=e&&Sm.throwArgumentError("apiKey not supported for cloudflare","apiKey",e),null}static getUrl(e,t){let r=null;if("homestead"===e.name)r="https://cloudflare-eth.com/";else Sm.throwArgumentError("unsupported network","network",arguments[0]);return r}perform(e,t){const r=Object.create(null,{perform:{get:()=>super.perform}});return Nm(this,void 0,void 0,function*(){if("getBlockNumber"===e){return(yield r.perform.call(this,"getBlock",{blockTag:"latest"})).number}return r.perform.call(this,e,t)})}}var Om=function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})};const Cm=new La(df);function xm(e){const t={};for(let r in e){if(null==e[r])continue;let n=e[r];"type"===r&&0===n||(n={type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0}[r]?ec(Qa(n)):"accessList"===r?"["+hp(n).map(e=>`{address:"${e.address}",storageKeys:["${e.storageKeys.join('","')}"]}`).join(",")+"]":Qa(n),t[r]=n)}return t}function Mm(e){if(0==e.status&&("No records found"===e.message||"No transactions found"===e.message))return e.result;if(1!=e.status||"string"!=typeof e.message||!e.message.match(/^OK/)){const t=new Error("invalid response");throw t.result=JSON.stringify(e),(e.result||"").toLowerCase().indexOf("rate limit")>=0&&(t.throttleRetry=!0),t}return e.result}function Um(e){if(e&&0==e.status&&"NOTOK"==e.message&&(e.result||"").toLowerCase().indexOf("rate limit")>=0){const t=new Error("throttled response");throw t.result=JSON.stringify(e),t.throttleRetry=!0,t}if("2.0"!=e.jsonrpc){const t=new Error("invalid response");throw t.result=JSON.stringify(e),t}if(e.error){const t=new Error(e.error.message||"unknown error");throw e.error.code&&(t.code=e.error.code),e.error.data&&(t.data=e.error.data),t}return e.result}function Dm(e){if("pending"===e)throw new Error("pending not supported");return"latest"===e?e:parseInt(e.substring(2),16)}function Lm(e,t,r){if("call"===e&&t.code===La.errors.SERVER_ERROR){const e=t.error;if(e&&(e.message.match(/reverted/i)||e.message.match(/VM execution error/i))){let r=e.data;if(r&&(r="0x"+r.replace(/^.*0x/i,"")),Ja(r))return r;Cm.throwError("missing revert data in call exception",La.errors.CALL_EXCEPTION,{error:t,data:"0x"})}}let n=t.message;throw t.code===La.errors.SERVER_ERROR&&(t.error&&"string"==typeof t.error.message?n=t.error.message:"string"==typeof t.body?n=t.body:"string"==typeof t.responseText&&(n=t.responseText)),n=(n||"").toLowerCase(),n.match(/insufficient funds/)&&Cm.throwError("insufficient funds for intrinsic transaction cost",La.errors.INSUFFICIENT_FUNDS,{error:t,method:e,transaction:r}),n.match(/same hash was already imported|transaction nonce is too low|nonce too low/)&&Cm.throwError("nonce has already been used",La.errors.NONCE_EXPIRED,{error:t,method:e,transaction:r}),n.match(/another transaction with same nonce/)&&Cm.throwError("replacement fee too low",La.errors.REPLACEMENT_UNDERPRICED,{error:t,method:e,transaction:r}),n.match(/execution failed due to an exception|execution reverted/)&&Cm.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",La.errors.UNPREDICTABLE_GAS_LIMIT,{error:t,method:e,transaction:r}),t}class Bm extends Vp{constructor(e,t){super(e),_u(this,"baseUrl",this.getBaseUrl()),_u(this,"apiKey",t||null)}getBaseUrl(){switch(this.network?this.network.name:"invalid"){case"homestead":return"https://api.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"sepolia":return"https://api-sepolia.etherscan.io";case"matic":return"https://api.polygonscan.com";case"maticmum":return"https://api-testnet.polygonscan.com";case"arbitrum":return"https://api.arbiscan.io";case"arbitrum-goerli":return"https://api-goerli.arbiscan.io";case"optimism":return"https://api-optimistic.etherscan.io";case"optimism-goerli":return"https://api-goerli-optimistic.etherscan.io"}return Cm.throwArgumentError("unsupported network","network",this.network.name)}getUrl(e,t){const r=Object.keys(t).reduce((e,r)=>{const n=t[r];return null!=n&&(e+=`&${r}=${n}`),e},""),n=this.apiKey?`&apikey=${this.apiKey}`:"";return`${this.baseUrl}/api?module=${e}${r}${n}`}getPostUrl(){return`${this.baseUrl}/api`}getPostData(e,t){return t.module=e,t.apikey=this.apiKey,t}fetch(e,t,r){return Om(this,void 0,void 0,function*(){const n=r?this.getPostUrl():this.getUrl(e,t),s=r?this.getPostData(e,t):null,i="proxy"===e?Um:Mm;this.emit("debug",{action:"request",request:n,provider:this});const o={url:n,throttleSlotInterval:1e3,throttleCallback:(e,t)=>(this.isCommunityResource()&&Ep(),Promise.resolve(!0))};let a=null;s&&(o.headers={"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},a=Object.keys(s).map(e=>`${e}=${s[e]}`).join("&"));const c=yield Zd(o,a,i||Um);return this.emit("debug",{action:"response",request:n,response:Ou(c),provider:this}),c})}detectNetwork(){return Om(this,void 0,void 0,function*(){return this.network})}perform(e,t){const r=Object.create(null,{perform:{get:()=>super.perform}});return Om(this,void 0,void 0,function*(){switch(e){case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getBalance":return this.fetch("account",{action:"balance",address:t.address,tag:t.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:t.address,tag:t.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:t.address,tag:t.blockTag});case"getStorageAt":return this.fetch("proxy",{action:"eth_getStorageAt",address:t.address,position:t.position,tag:t.blockTag});case"sendTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:t.signedTransaction},!0).catch(e=>Lm("sendTransaction",e,t.signedTransaction));case"getBlock":if(t.blockTag)return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:t.blockTag,boolean:t.includeTransactions?"true":"false"});throw new Error("getBlock by blockHash not implemented");case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:t.transactionHash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:t.transactionHash});case"call":{if("latest"!==t.blockTag)throw new Error("EtherscanProvider does not support blockTag for call");const e=xm(t.transaction);e.module="proxy",e.action="eth_call";try{return yield this.fetch("proxy",e,!0)}catch(e){return Lm("call",e,t.transaction)}}case"estimateGas":{const e=xm(t.transaction);e.module="proxy",e.action="eth_estimateGas";try{return yield this.fetch("proxy",e,!0)}catch(e){return Lm("estimateGas",e,t.transaction)}}case"getLogs":{const e={action:"getLogs"};if(t.filter.fromBlock&&(e.fromBlock=Dm(t.filter.fromBlock)),t.filter.toBlock&&(e.toBlock=Dm(t.filter.toBlock)),t.filter.address&&(e.address=t.filter.address),t.filter.topics&&t.filter.topics.length>0&&(t.filter.topics.length>1&&Cm.throwError("unsupported topic count",La.errors.UNSUPPORTED_OPERATION,{topics:t.filter.topics}),1===t.filter.topics.length)){const r=t.filter.topics[0];"string"==typeof r&&66===r.length||Cm.throwError("unsupported topic format",La.errors.UNSUPPORTED_OPERATION,{topic0:r}),e.topic0=r}const r=yield this.fetch("logs",e);let n={};for(let e=0;e<r.length;e++){const t=r[e];if(null==t.blockHash){if(null==n[t.blockNumber]){const e=yield this.getBlock(t.blockNumber);e&&(n[t.blockNumber]=e.hash)}t.blockHash=n[t.blockNumber]}}return r}case"getEtherPrice":return"homestead"!==this.network.name?0:parseFloat((yield this.fetch("stats",{action:"ethprice"})).ethusd)}return r.perform.call(this,e,t)})}getHistory(e,t,r){return Om(this,void 0,void 0,function*(){const n={action:"txlist",address:yield this.resolveName(e),startblock:null==t?0:t,endblock:null==r?99999999:r,sort:"asc"};return(yield this.fetch("account",n)).map(e=>{["contractAddress","to"].forEach(function(t){""==e[t]&&delete e[t]}),null==e.creates&&null!=e.contractAddress&&(e.creates=e.contractAddress);const t=this.formatter.transactionResponse(e);return e.timeStamp&&(t.timestamp=parseInt(e.timeStamp)),t})})}isCommunityResource(){return null==this.apiKey}}var Fm=function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})};const qm=new La(df);function jm(){return(new Date).getTime()}function Gm(e){let t=null;for(let r=0;r<e.length;r++){const n=e[r];if(null==n)return null;t?t.name===n.name&&t.chainId===n.chainId&&(t.ensAddress===n.ensAddress||null==t.ensAddress&&null==n.ensAddress)||qm.throwArgumentError("provider mismatch","networks",e):t=n}return t}function Hm(e,t){e=e.slice().sort();const r=Math.floor(e.length/2);if(e.length%2)return e[r];const n=e[r-1],s=e[r];return null!=t&&Math.abs(n-s)>t?null:(n+s)/2}function zm(e){if(null===e)return"null";if("number"==typeof e||"boolean"==typeof e)return JSON.stringify(e);if("string"==typeof e)return e;if(mc.isBigNumber(e))return e.toString();if(Array.isArray(e))return JSON.stringify(e.map(e=>zm(e)));if("object"==typeof e){const t=Object.keys(e);return t.sort(),"{"+t.map(t=>{let r=e[t];return r="function"==typeof r?"[function]":zm(r),JSON.stringify(t)+":"+r}).join(",")+"}"}throw new Error("unknown value type: "+typeof e)}let Km=1;function Vm(e){let t=null,r=null,n=new Promise(n=>{t=function(){r&&(clearTimeout(r),r=null),n()},r=setTimeout(t,e)});return{cancel:t,getPromise:function(){return n},wait:e=>(n=n.then(e),n)}}const Wm=[La.errors.CALL_EXCEPTION,La.errors.INSUFFICIENT_FUNDS,La.errors.NONCE_EXPIRED,La.errors.REPLACEMENT_UNDERPRICED,La.errors.UNPREDICTABLE_GAS_LIMIT],Jm=["address","args","errorArgs","errorSignature","method","transaction"];function Ym(e,t){const r={weight:e.weight};return Object.defineProperty(r,"provider",{get:()=>e.provider}),e.start&&(r.start=e.start),t&&(r.duration=t-e.start),e.done&&(e.error?r.error=e.error:r.result=e.result||null),r}function Qm(e,t,r){let n=zm;switch(t){case"getBlockNumber":return function(t){const r=t.map(e=>e.result);let n=Hm(t.map(e=>e.result),2);if(null!=n)return n=Math.ceil(n),r.indexOf(n+1)>=0&&n++,n>=e._highestBlockNumber&&(e._highestBlockNumber=n),e._highestBlockNumber};case"getGasPrice":return function(e){const t=e.map(e=>e.result);return t.sort(),t[Math.floor(t.length/2)]};case"getEtherPrice":return function(e){return Hm(e.map(e=>e.result))};case"getBalance":case"getTransactionCount":case"getCode":case"getStorageAt":case"call":case"estimateGas":case"getLogs":break;case"getTransaction":case"getTransactionReceipt":n=function(e){return null==e?null:((e=Tu(e)).confirmations=-1,zm(e))};break;case"getBlock":n=r.includeTransactions?function(e){return null==e?null:((e=Tu(e)).transactions=e.transactions.map(e=>((e=Tu(e)).confirmations=-1,e)),zm(e))}:function(e){return null==e?null:zm(e)};break;default:throw new Error("unknown method: "+t)}return function(e,t){return function(r){const n={};r.forEach(t=>{const r=e(t.result);n[r]||(n[r]={count:0,result:t.result}),n[r].count++});const s=Object.keys(n);for(let e=0;e<s.length;e++){const r=n[s[e]];if(r.count>=t)return r.result}}}(n,e.quorum)}function Xm(e,t){return Fm(this,void 0,void 0,function*(){const r=e.provider;return null!=r.blockNumber&&r.blockNumber>=t||-1===t?r:ef(()=>new Promise((n,s)=>{setTimeout(function(){return r.blockNumber>=t?n(r):e.cancelled?n(null):n(void 0)},0)}),{oncePoll:r})})}function $m(e,t,r,n){return Fm(this,void 0,void 0,function*(){let s=e.provider;switch(r){case"getBlockNumber":case"getGasPrice":return s[r]();case"getEtherPrice":if(s.getEtherPrice)return s.getEtherPrice();break;case"getBalance":case"getTransactionCount":case"getCode":return n.blockTag&&Ja(n.blockTag)&&(s=yield Xm(e,t)),s[r](n.address,n.blockTag||"latest");case"getStorageAt":return n.blockTag&&Ja(n.blockTag)&&(s=yield Xm(e,t)),s.getStorageAt(n.address,n.position,n.blockTag||"latest");case"getBlock":return n.blockTag&&Ja(n.blockTag)&&(s=yield Xm(e,t)),s[n.includeTransactions?"getBlockWithTransactions":"getBlock"](n.blockTag||n.blockHash);case"call":case"estimateGas":return n.blockTag&&Ja(n.blockTag)&&(s=yield Xm(e,t)),"call"===r&&n.blockTag?s[r](n.transaction,n.blockTag):s[r](n.transaction);case"getTransaction":case"getTransactionReceipt":return s[r](n.transactionHash);case"getLogs":{let r=n.filter;return(r.fromBlock&&Ja(r.fromBlock)||r.toBlock&&Ja(r.toBlock))&&(s=yield Xm(e,t)),s.getLogs(r)}}return qm.throwError("unknown method error",La.errors.UNKNOWN_ERROR,{method:r,params:n})})}class Zm extends Vp{constructor(e,t){0===e.length&&qm.throwArgumentError("missing providers","providers",e);const r=e.map((e,t)=>{if(Mh.isProvider(e)){const t=Ap(e)?2e3:750,r=1;return Object.freeze({provider:e,weight:1,stallTimeout:t,priority:r})}const r=Tu(e);null==r.priority&&(r.priority=1),null==r.stallTimeout&&(r.stallTimeout=Ap(e)?2e3:750),null==r.weight&&(r.weight=1);const n=r.weight;return(n%1||n>512||n<1)&&qm.throwArgumentError("invalid weight; must be integer in [1, 512]",`providers[${t}].weight`,n),Object.freeze(r)}),n=r.reduce((e,t)=>e+t.weight,0);null==t?t=n/2:t>n&&qm.throwArgumentError("quorum will always fail; larger than total weight","quorum",t);let s=Gm(r.map(e=>e.provider.network));null==s&&(s=new Promise((e,t)=>{setTimeout(()=>{this.detectNetwork().then(e,t)},0)})),super(s),_u(this,"providerConfigs",Object.freeze(r)),_u(this,"quorum",t),this._highestBlockNumber=-1}detectNetwork(){return Fm(this,void 0,void 0,function*(){const e=yield Promise.all(this.providerConfigs.map(e=>e.provider.getNetwork()));return Gm(e)})}perform(e,t){return Fm(this,void 0,void 0,function*(){if("sendTransaction"===e){const e=yield Promise.all(this.providerConfigs.map(e=>e.provider.sendTransaction(t.signedTransaction).then(e=>e.hash,e=>e)));for(let t=0;t<e.length;t++){const r=e[t];if("string"==typeof r)return r}throw e[0]}-1===this._highestBlockNumber&&"getBlockNumber"!==e&&(yield this.getBlockNumber());const r=Qm(this,e,t),n=function(e){for(let t=(e=e.slice()).length-1;t>0;t--){const r=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[r],e[r]=n}return e}(this.providerConfigs.map(Tu));n.sort((e,t)=>e.priority-t.priority);const s=this._highestBlockNumber;let i=0,o=!0;for(;;){const a=jm();let c=n.filter(e=>e.runner&&a-e.start<e.stallTimeout).reduce((e,t)=>e+t.weight,0);for(;c<this.quorum&&i<n.length;){const r=n[i++],o=Km++;r.start=jm(),r.staller=Vm(r.stallTimeout),r.staller.wait(()=>{r.staller=null}),r.runner=$m(r,s,e,t).then(n=>{r.done=!0,r.result=n,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:o,backend:Ym(r,jm()),request:{method:e,params:Ou(t)},provider:this})},n=>{r.done=!0,r.error=n,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:o,backend:Ym(r,jm()),request:{method:e,params:Ou(t)},provider:this})}),this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:o,backend:Ym(r,null),request:{method:e,params:Ou(t)},provider:this}),c+=r.weight}const u=[];n.forEach(e=>{!e.done&&e.runner&&(u.push(e.runner),e.staller&&u.push(e.staller.getPromise()))}),u.length&&(yield Promise.race(u));const h=n.filter(e=>e.done&&null==e.error);if(h.length>=this.quorum){const e=r(h);if(void 0!==e)return n.forEach(e=>{e.staller&&e.staller.cancel(),e.cancelled=!0}),e;o||(yield Vm(100).getPromise()),o=!1}const l=n.reduce((e,t)=>{if(!t.done||null==t.error)return e;const r=t.error.code;return Wm.indexOf(r)>=0&&(e[r]||(e[r]={error:t.error,weight:0}),e[r].weight+=t.weight),e},{});if(Object.keys(l).forEach(e=>{const t=l[e];if(t.weight<this.quorum)return;n.forEach(e=>{e.staller&&e.staller.cancel(),e.cancelled=!0});const r=t.error,s={};Jm.forEach(e=>{null!=r[e]&&(s[e]=r[e])}),qm.throwError(r.reason||r.message,e,s)}),0===n.filter(e=>!e.done).length)break}return n.forEach(e=>{e.staller&&e.staller.cancel(),e.cancelled=!0}),qm.throwError("failed to meet quorum",La.errors.SERVER_ERROR,{method:e,params:t,results:n.map(e=>Ym(e)),provider:this})})}}const eg=new La(df),tg="84842078b09946638c03157f83405213";class rg extends mm{constructor(e,t){const r=new ng(e,t),n=r.connection;n.password&&eg.throwError("INFURA WebSocket project secrets unsupported",La.errors.UNSUPPORTED_OPERATION,{operation:"InfuraProvider.getWebSocketProvider()"});super(n.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/"),e),_u(this,"apiKey",r.projectId),_u(this,"projectId",r.projectId),_u(this,"projectSecret",r.projectSecret)}isCommunityResource(){return this.projectId===tg}}class ng extends vm{static getWebSocketProvider(e,t){return new rg(e,t)}static getApiKey(e){const t={apiKey:tg,projectId:tg,projectSecret:null};return null==e||("string"==typeof e?t.projectId=e:null!=e.projectSecret?(eg.assertArgument("string"==typeof e.projectId,"projectSecret requires a projectId","projectId",e.projectId),eg.assertArgument("string"==typeof e.projectSecret,"invalid projectSecret","projectSecret","[REDACTED]"),t.projectId=e.projectId,t.projectSecret=e.projectSecret):e.projectId&&(t.projectId=e.projectId),t.apiKey=t.projectId),t}static getUrl(e,t){let r=null;switch(e?e.name:"unknown"){case"homestead":r="mainnet.infura.io";break;case"goerli":r="goerli.infura.io";break;case"sepolia":r="sepolia.infura.io";break;case"matic":r="polygon-mainnet.infura.io";break;case"maticmum":r="polygon-mumbai.infura.io";break;case"optimism":r="optimism-mainnet.infura.io";break;case"optimism-goerli":r="optimism-goerli.infura.io";break;case"optimism-sepolia":r="optimism-sepolia.infura.io";break;case"arbitrum":r="arbitrum-mainnet.infura.io";break;case"arbitrum-goerli":r="arbitrum-goerli.infura.io";break;case"arbitrum-sepolia":r="arbitrum-sepolia.infura.io";break;default:eg.throwError("unsupported network",La.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const n={allowGzip:!0,url:"https://"+r+"/v3/"+t.projectId,throttleCallback:(e,r)=>(t.projectId===tg&&Ep(),Promise.resolve(!0))};return null!=t.projectSecret&&(n.user="",n.password=t.projectSecret),n}isCommunityResource(){return this.projectId===tg}}const sg=new La(df);class ig extends vm{static getApiKey(e){return e&&"string"!=typeof e&&sg.throwArgumentError("invalid apiKey","apiKey",e),e||"ETHERS_JS_SHARED"}static getUrl(e,t){sg.warn("NodeSmith will be discontinued on 2019-12-20; please migrate to another platform.");let r=null;switch(e.name){case"homestead":r="https://ethereum.api.nodesmith.io/v1/mainnet/jsonrpc";break;case"ropsten":r="https://ethereum.api.nodesmith.io/v1/ropsten/jsonrpc";break;case"rinkeby":r="https://ethereum.api.nodesmith.io/v1/rinkeby/jsonrpc";break;case"goerli":r="https://ethereum.api.nodesmith.io/v1/goerli/jsonrpc";break;case"kovan":r="https://ethereum.api.nodesmith.io/v1/kovan/jsonrpc";break;default:sg.throwArgumentError("unsupported network","network",arguments[0])}return r+"?apiKey="+t}}const og=new La(df),ag="62e1ad51b37b8e00394bda3b";class cg extends vm{static getApiKey(e){const t={applicationId:null,loadBalancer:!0,applicationSecretKey:null};return null==e?t.applicationId=ag:"string"==typeof e?t.applicationId=e:null!=e.applicationSecretKey?(t.applicationId=e.applicationId,t.applicationSecretKey=e.applicationSecretKey):e.applicationId?t.applicationId=e.applicationId:og.throwArgumentError("unsupported PocketProvider apiKey","apiKey",e),t}static getUrl(e,t){let r=null;switch(e?e.name:"unknown"){case"goerli":r="eth-goerli.gateway.pokt.network";break;case"homestead":r="eth-mainnet.gateway.pokt.network";break;case"kovan":r="poa-kovan.gateway.pokt.network";break;case"matic":r="poly-mainnet.gateway.pokt.network";break;case"maticmum":r="polygon-mumbai-rpc.gateway.pokt.network";break;case"rinkeby":r="eth-rinkeby.gateway.pokt.network";break;case"ropsten":r="eth-ropsten.gateway.pokt.network";break;default:og.throwError("unsupported network",La.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const n={headers:{},url:`https://${r}/v1/lb/${t.applicationId}`};return null!=t.applicationSecretKey&&(n.user="",n.password=t.applicationSecretKey),n}isCommunityResource(){return this.applicationId===ag}}const ug=new La(df);class hg extends vm{static getApiKey(e){return e&&"string"!=typeof e&&ug.throwArgumentError("invalid apiKey","apiKey",e),e||"919b412a057b5e9c9b6dce193c5a60242d6efadb"}static getUrl(e,t){let r=null;switch(e.name){case"homestead":r="ethers.quiknode.pro";break;case"goerli":r="ethers.ethereum-goerli.quiknode.pro";break;case"sepolia":r="ethers.ethereum-sepolia.quiknode.pro";break;case"holesky":r="ethers.ethereum-holesky.quiknode.pro";break;case"arbitrum":r="ethers.arbitrum-mainnet.quiknode.pro";break;case"arbitrum-goerli":r="ethers.arbitrum-goerli.quiknode.pro";break;case"arbitrum-sepolia":r="ethers.arbitrum-sepolia.quiknode.pro";break;case"base":r="ethers.base-mainnet.quiknode.pro";break;case"base-goerli":r="ethers.base-goerli.quiknode.pro";break;case"base-spolia":r="ethers.base-sepolia.quiknode.pro";break;case"bnb":r="ethers.bsc.quiknode.pro";break;case"bnbt":r="ethers.bsc-testnet.quiknode.pro";break;case"matic":r="ethers.matic.quiknode.pro";break;case"maticmum":r="ethers.matic-testnet.quiknode.pro";break;case"optimism":r="ethers.optimism.quiknode.pro";break;case"optimism-goerli":r="ethers.optimism-goerli.quiknode.pro";break;case"optimism-sepolia":r="ethers.optimism-sepolia.quiknode.pro";break;case"xdai":r="ethers.xdai.quiknode.pro";break;default:ug.throwArgumentError("unsupported network","network",arguments[0])}return"https://"+r+"/"+t}}const lg=new La(df);let dg=1;function fg(e,t){const r="Web3LegacyFetcher";return function(e,n){const s={method:e,params:n,id:dg++,jsonrpc:"2.0"};return new Promise((e,n)=>{this.emit("debug",{action:"request",fetcher:r,request:Ou(s),provider:this}),t(s,(t,i)=>{if(t)return this.emit("debug",{action:"response",fetcher:r,error:t,request:s,provider:this}),n(t);if(this.emit("debug",{action:"response",fetcher:r,request:s,response:i,provider:this}),i.error){const e=new Error(i.error.message);return e.code=i.error.code,e.data=i.error.data,n(e)}e(i.result)})})}}class pg extends hm{constructor(e,t){null==e&&lg.throwArgumentError("missing provider","provider",e);let r=null,n=null,s=null;"function"==typeof e?(r="unknown:",n=e):(r=e.host||e.path||"",!r&&e.isMetaMask&&(r="metamask"),s=e,e.request?(""===r&&(r="eip-1193:"),n=function(e){return function(t,r){null==r&&(r=[]);const n={method:t,params:r};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:Ou(n),provider:this}),e.request(n).then(e=>(this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,response:e,provider:this}),e),e=>{throw this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,error:e,provider:this}),e})}}(e)):e.sendAsync?n=fg(0,e.sendAsync.bind(e)):e.send?n=fg(0,e.send.bind(e)):lg.throwArgumentError("unsupported provider","provider",e),r||(r="unknown:")),super(r,t),_u(this,"jsonRpcFetchFunc",n),_u(this,"provider",s)}send(e,t){return this.jsonRpcFetchFunc(e,t)}}const mg=new La(df);var gg=Object.freeze({__proto__:null,AlchemyProvider:_m,AlchemyWebSocketProvider:Em,AnkrProvider:Tm,BaseProvider:Vp,CloudflareProvider:Pm,EtherscanProvider:Bm,FallbackProvider:Zm,Formatter:wp,InfuraProvider:ng,InfuraWebSocketProvider:rg,IpcProvider:null,JsonRpcBatchProvider:class extends hm{send(e,t){const r={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};null==this._pendingBatch&&(this._pendingBatch=[]);const n={request:r,resolve:null,reject:null},s=new Promise((e,t)=>{n.resolve=e,n.reject=t});return this._pendingBatch.push(n),this._pendingBatchAggregator||(this._pendingBatchAggregator=setTimeout(()=>{const e=this._pendingBatch;this._pendingBatch=null,this._pendingBatchAggregator=null;const t=e.map(e=>e.request);return this.emit("debug",{action:"requestBatch",request:Ou(t),provider:this}),Zd(this.connection,JSON.stringify(t)).then(r=>{this.emit("debug",{action:"response",request:t,response:r,provider:this}),e.forEach((e,t)=>{const n=r[t];if(n.error){const t=new Error(n.error.message);t.code=n.error.code,t.data=n.error.data,e.reject(t)}else e.resolve(n.result)})},r=>{this.emit("debug",{action:"response",error:r,request:t,provider:this}),e.forEach(e=>{e.reject(r)})})},10)),s}},JsonRpcProvider:hm,JsonRpcSigner:am,NodesmithProvider:ig,PocketProvider:cg,Provider:Mh,QuickNodeProvider:hg,Resolver:Hp,StaticJsonRpcProvider:wm,UrlJsonRpcProvider:vm,Web3Provider:pg,WebSocketProvider:mm,getDefaultProvider:function(e,t){if(null==e&&(e="homestead"),"string"==typeof e){const t=e.match(/^(ws|http)s?:/i);if(t)switch(t[1].toLowerCase()){case"http":case"https":return new hm(e);case"ws":case"wss":return new mm(e);default:mg.throwArgumentError("unsupported URL scheme","network",e)}}const r=Gh(e);return r&&r._defaultProvider||mg.throwError("unsupported getDefaultProvider network",La.errors.NETWORK_ERROR,{operation:"getDefaultProvider",network:e}),r._defaultProvider({FallbackProvider:Zm,AlchemyProvider:_m,AnkrProvider:Tm,CloudflareProvider:Pm,EtherscanProvider:Bm,InfuraProvider:ng,JsonRpcProvider:hm,NodesmithProvider:ig,PocketProvider:cg,QuickNodeProvider:hg,Web3Provider:pg,IpcProvider:null},t)},getNetwork:Gh,isCommunityResourcable:vp,isCommunityResource:Ap,showThrottleMessage:Ep})}();
//# sourceMappingURL=index.js.map
