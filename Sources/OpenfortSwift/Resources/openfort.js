!function(){"use strict";function e(e,t){return function(){return e.apply(t,arguments)}}const{toString:t}=Object.prototype,{getPrototypeOf:r}=Object,{iterator:n,toStringTag:s}=Symbol,i=(o=Object.create(null),e=>{const r=t.call(e);return o[r]||(o[r]=r.slice(8,-1).toLowerCase())});var o;const a=e=>(e=e.toLowerCase(),t=>i(t)===e),c=e=>t=>typeof t===e,{isArray:h}=Array,u=c("undefined");function l(e){return null!==e&&!u(e)&&null!==e.constructor&&!u(e.constructor)&&p(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const d=a("ArrayBuffer");const f=c("string"),p=c("function"),m=c("number"),g=e=>null!==e&&"object"==typeof e,y=e=>{if("object"!==i(e))return!1;const t=r(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||s in e||n in e)},w=a("Date"),v=a("File"),A=a("Blob"),b=a("FileList"),E=a("URLSearchParams"),[_,P,S,I]=["ReadableStream","Request","Response","Headers"].map(a);function k(e,t,{allOwnKeys:r=!1}={}){if(null==e)return;let n,s;if("object"!=typeof e&&(e=[e]),h(e))for(n=0,s=e.length;n<s;n++)t.call(null,e[n],n,e);else{if(l(e))return;const s=r?Object.getOwnPropertyNames(e):Object.keys(e),i=s.length;let o;for(n=0;n<i;n++)o=s[n],t.call(null,e[o],o,e)}}function R(e,t){if(l(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n,s=r.length;for(;s-- >0;)if(n=r[s],t===n.toLowerCase())return n;return null}const T="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,N=e=>!u(e)&&e!==T;const O=(C="undefined"!=typeof Uint8Array&&r(Uint8Array),e=>C&&e instanceof C);var C;const x=a("HTMLFormElement"),M=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),U=a("RegExp"),D=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};k(r,(r,s)=>{let i;!1!==(i=t(r,s,e))&&(n[s]=i||r)}),Object.defineProperties(e,n)};const L=a("AsyncFunction"),B=(F="function"==typeof setImmediate,q=p(T.postMessage),F?setImmediate:q?(j=`axios@${Math.random()}`,G=[],T.addEventListener("message",({source:e,data:t})=>{e===T&&t===j&&G.length&&G.shift()()},!1),e=>{G.push(e),T.postMessage(j,"*")}):e=>setTimeout(e));var F,q,j,G;const H="undefined"!=typeof queueMicrotask?queueMicrotask.bind(T):"undefined"!=typeof process&&process.nextTick||B;var z={isArray:h,isArrayBuffer:d,isBuffer:l,isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||p(e.append)&&("formdata"===(t=i(e))||"object"===t&&p(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&d(e.buffer),t},isString:f,isNumber:m,isBoolean:e=>!0===e||!1===e,isObject:g,isPlainObject:y,isEmptyObject:e=>{if(!g(e)||l(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(e){return!1}},isReadableStream:_,isRequest:P,isResponse:S,isHeaders:I,isUndefined:u,isDate:w,isFile:v,isBlob:A,isRegExp:U,isFunction:p,isStream:e=>g(e)&&p(e.pipe),isURLSearchParams:E,isTypedArray:O,isFileList:b,forEach:k,merge:function e(){const{caseless:t,skipUndefined:r}=N(this)&&this||{},n={},s=(s,i)=>{const o=t&&R(n,i)||i;y(n[o])&&y(s)?n[o]=e(n[o],s):y(s)?n[o]=e({},s):h(s)?n[o]=s.slice():r&&u(s)||(n[o]=s)};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&k(arguments[e],s);return n},extend:(t,r,n,{allOwnKeys:s}={})=>(k(r,(r,s)=>{n&&p(r)?Object.defineProperty(t,s,{value:e(r,n),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(t,s,{value:r,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:s}),t),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,n,s)=>{let i,o,a;const c={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)a=i[o],s&&!s(a,e,t)||c[a]||(t[a]=e[a],c[a]=!0);e=!1!==n&&r(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:i,kindOfTest:a,endsWith:(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return-1!==n&&n===r},toArray:e=>{if(!e)return null;if(h(e))return e;let t=e.length;if(!m(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{const r=(e&&e[n]).call(e);let s;for(;(s=r.next())&&!s.done;){const r=s.value;t.call(e,r[0],r[1])}},matchAll:(e,t)=>{let r;const n=[];for(;null!==(r=e.exec(t));)n.push(r);return n},isHTMLForm:x,hasOwnProperty:M,hasOwnProp:M,reduceDescriptors:D,freezeMethods:e=>{D(e,(t,r)=>{if(p(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;const n=e[r];p(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))})},toObjectSet:(e,t)=>{const r={},n=e=>{e.forEach(e=>{r[e]=!0})};return h(e)?n(e):n(String(e).split(t)),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,r){return t.toUpperCase()+r}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:R,global:T,isContextDefined:N,isSpecCompliantForm:function(e){return!!(e&&p(e.append)&&"FormData"===e[s]&&e[n])},toJSONObject:e=>{const t=new Array(10),r=(e,n)=>{if(g(e)){if(t.indexOf(e)>=0)return;if(l(e))return e;if(!("toJSON"in e)){t[n]=e;const s=h(e)?[]:{};return k(e,(e,t)=>{const i=r(e,n+1);!u(i)&&(s[t]=i)}),t[n]=void 0,s}}return e};return r(e,0)},isAsyncFn:L,isThenable:e=>e&&(g(e)||p(e))&&p(e.then)&&p(e.catch),setImmediate:B,asap:H,isIterable:e=>null!=e&&p(e[n])};let V=class e extends Error{static from(t,r,n,s,i,o){const a=new e(t.message,r||t.code,n,s,i);return a.cause=t,a.name=t.name,o&&Object.assign(a,o),a}constructor(e,t,r,n,s){super(e),this.name="AxiosError",this.isAxiosError=!0,t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s,this.status=s.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:z.toJSONObject(this.config),code:this.code,status:this.status}}};V.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE",V.ERR_BAD_OPTION="ERR_BAD_OPTION",V.ECONNABORTED="ECONNABORTED",V.ETIMEDOUT="ETIMEDOUT",V.ERR_NETWORK="ERR_NETWORK",V.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS",V.ERR_DEPRECATED="ERR_DEPRECATED",V.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE",V.ERR_BAD_REQUEST="ERR_BAD_REQUEST",V.ERR_CANCELED="ERR_CANCELED",V.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT",V.ERR_INVALID_URL="ERR_INVALID_URL";function K(e){return z.isPlainObject(e)||z.isArray(e)}function W(e){return z.endsWith(e,"[]")?e.slice(0,-2):e}function Y(e,t,r){return e?e.concat(t).map(function(e,t){return e=W(e),!r&&t?"["+e+"]":e}).join(r?".":""):t}const J=z.toFlatObject(z,{},null,function(e){return/^is[A-Z]/.test(e)});function Q(e,t,r){if(!z.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const n=(r=z.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!z.isUndefined(t[e])})).metaTokens,s=r.visitor||h,i=r.dots,o=r.indexes,a=(r.Blob||"undefined"!=typeof Blob&&Blob)&&z.isSpecCompliantForm(t);if(!z.isFunction(s))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(z.isDate(e))return e.toISOString();if(z.isBoolean(e))return e.toString();if(!a&&z.isBlob(e))throw new V("Blob is not supported. Use a Buffer instead.");return z.isArrayBuffer(e)||z.isTypedArray(e)?a&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function h(e,r,s){let a=e;if(e&&!s&&"object"==typeof e)if(z.endsWith(r,"{}"))r=n?r:r.slice(0,-2),e=JSON.stringify(e);else if(z.isArray(e)&&function(e){return z.isArray(e)&&!e.some(K)}(e)||(z.isFileList(e)||z.endsWith(r,"[]"))&&(a=z.toArray(e)))return r=W(r),a.forEach(function(e,n){!z.isUndefined(e)&&null!==e&&t.append(!0===o?Y([r],n,i):null===o?r:r+"[]",c(e))}),!1;return!!K(e)||(t.append(Y(s,r,i),c(e)),!1)}const u=[],l=Object.assign(J,{defaultVisitor:h,convertValue:c,isVisitable:K});if(!z.isObject(e))throw new TypeError("data must be an object");return function e(r,n){if(!z.isUndefined(r)){if(-1!==u.indexOf(r))throw Error("Circular reference detected in "+n.join("."));u.push(r),z.forEach(r,function(r,i){!0===(!(z.isUndefined(r)||null===r)&&s.call(t,r,z.isString(i)?i.trim():i,n,l))&&e(r,n?n.concat(i):[i])}),u.pop()}}(e),t}function $(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function X(e,t){this._pairs=[],e&&Q(e,this,t)}const Z=X.prototype;function ee(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function te(e,t,r){if(!t)return e;const n=r&&r.encode||ee,s=z.isFunction(r)?{serialize:r}:r,i=s&&s.serialize;let o;if(o=i?i(t,s):z.isURLSearchParams(t)?t.toString():new X(t,s).toString(n),o){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}Z.append=function(e,t){this._pairs.push([e,t])},Z.toString=function(e){const t=e?function(t){return e.call(this,t,$)}:$;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};class re{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){z.forEach(this.handlers,function(t){null!==t&&e(t)})}}var ne={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},se={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:X,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]};const ie="undefined"!=typeof window&&"undefined"!=typeof document,oe="object"==typeof navigator&&navigator||void 0,ae=ie&&(!oe||["ReactNative","NativeScript","NS"].indexOf(oe.product)<0),ce="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,he=ie&&window.location.href||"http://localhost";var ue={...Object.freeze({__proto__:null,hasBrowserEnv:ie,hasStandardBrowserEnv:ae,hasStandardBrowserWebWorkerEnv:ce,navigator:oe,origin:he}),...se};function le(e){function t(e,r,n,s){let i=e[s++];if("__proto__"===i)return!0;const o=Number.isFinite(+i),a=s>=e.length;if(i=!i&&z.isArray(n)?n.length:i,a)return z.hasOwnProp(n,i)?n[i]=[n[i],r]:n[i]=r,!o;n[i]&&z.isObject(n[i])||(n[i]=[]);return t(e,r,n[i],s)&&z.isArray(n[i])&&(n[i]=function(e){const t={},r=Object.keys(e);let n;const s=r.length;let i;for(n=0;n<s;n++)i=r[n],t[i]=e[i];return t}(n[i])),!o}if(z.isFormData(e)&&z.isFunction(e.entries)){const r={};return z.forEachEntry(e,(e,n)=>{t(function(e){return z.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),n,r,0)}),r}return null}const de={transitional:ne,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",n=r.indexOf("application/json")>-1,s=z.isObject(e);s&&z.isHTMLForm(e)&&(e=new FormData(e));if(z.isFormData(e))return n?JSON.stringify(le(e)):e;if(z.isArrayBuffer(e)||z.isBuffer(e)||z.isStream(e)||z.isFile(e)||z.isBlob(e)||z.isReadableStream(e))return e;if(z.isArrayBufferView(e))return e.buffer;if(z.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Q(e,new ue.classes.URLSearchParams,{visitor:function(e,t,r,n){return ue.isNode&&z.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)},...t})}(e,this.formSerializer).toString();if((i=z.isFileList(e))||r.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Q(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return s||n?(t.setContentType("application/json",!1),function(e,t,r){if(z.isString(e))try{return(t||JSON.parse)(e),z.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(r||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||de.transitional,r=t&&t.forcedJSONParsing,n="json"===this.responseType;if(z.isResponse(e)||z.isReadableStream(e))return e;if(e&&z.isString(e)&&(r&&!this.responseType||n)){const r=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e,this.parseReviver)}catch(e){if(r){if("SyntaxError"===e.name)throw V.from(e,V.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ue.classes.FormData,Blob:ue.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};z.forEach(["delete","get","head","post","put","patch"],e=>{de.headers[e]={}});const fe=z.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);const pe=Symbol("internals");function me(e){return e&&String(e).trim().toLowerCase()}function ge(e){return!1===e||null==e?e:z.isArray(e)?e.map(ge):String(e)}function ye(e,t,r,n,s){return z.isFunction(n)?n.call(this,t,r):(s&&(t=r),z.isString(t)?z.isString(n)?-1!==t.indexOf(n):z.isRegExp(n)?n.test(t):void 0:void 0)}let we=class{constructor(e){e&&this.set(e)}set(e,t,r){const n=this;function s(e,t,r){const s=me(t);if(!s)throw new Error("header name must be a non-empty string");const i=z.findKey(n,s);(!i||void 0===n[i]||!0===r||void 0===r&&!1!==n[i])&&(n[i||t]=ge(e))}const i=(e,t)=>z.forEach(e,(e,r)=>s(e,r,t));if(z.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(z.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))i((e=>{const t={};let r,n,s;return e&&e.split("\n").forEach(function(e){s=e.indexOf(":"),r=e.substring(0,s).trim().toLowerCase(),n=e.substring(s+1).trim(),!r||t[r]&&fe[r]||("set-cookie"===r?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t})(e),t);else if(z.isObject(e)&&z.isIterable(e)){let r,n,s={};for(const t of e){if(!z.isArray(t))throw TypeError("Object iterator must return a key-value pair");s[n=t[0]]=(r=s[n])?z.isArray(r)?[...r,t[1]]:[r,t[1]]:t[1]}i(s,t)}else null!=e&&s(t,e,r);return this}get(e,t){if(e=me(e)){const r=z.findKey(this,e);if(r){const e=this[r];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}(e);if(z.isFunction(t))return t.call(this,e,r);if(z.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=me(e)){const r=z.findKey(this,e);return!(!r||void 0===this[r]||t&&!ye(0,this[r],r,t))}return!1}delete(e,t){const r=this;let n=!1;function s(e){if(e=me(e)){const s=z.findKey(r,e);!s||t&&!ye(0,r[s],s,t)||(delete r[s],n=!0)}}return z.isArray(e)?e.forEach(s):s(e),n}clear(e){const t=Object.keys(this);let r=t.length,n=!1;for(;r--;){const s=t[r];e&&!ye(0,this[s],s,e,!0)||(delete this[s],n=!0)}return n}normalize(e){const t=this,r={};return z.forEach(this,(n,s)=>{const i=z.findKey(r,s);if(i)return t[i]=ge(n),void delete t[s];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}(s):String(s).trim();o!==s&&delete t[s],t[o]=ge(n),r[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return z.forEach(this,(r,n)=>{null!=r&&!1!==r&&(t[n]=e&&z.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(e=>r.set(e)),r}static accessor(e){const t=(this[pe]=this[pe]={accessors:{}}).accessors,r=this.prototype;function n(e){const n=me(e);t[n]||(!function(e,t){const r=z.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(e,r,s){return this[n].call(this,t,e,r,s)},configurable:!0})})}(r,e),t[n]=!0)}return z.isArray(e)?e.forEach(n):n(e),this}};function ve(e,t){const r=this||de,n=t||r,s=we.from(n.headers);let i=n.data;return z.forEach(e,function(e){i=e.call(r,i,s.normalize(),t?t.status:void 0)}),s.normalize(),i}function Ae(e){return!(!e||!e.__CANCEL__)}we.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),z.reduceDescriptors(we.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[r]=e}}}),z.freezeMethods(we);let be=class extends V{constructor(e,t,r){super(null==e?"canceled":e,V.ERR_CANCELED,t,r),this.name="CanceledError",this.__CANCEL__=!0}};function Ee(e,t,r){const n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(new V("Request failed with status code "+r.status,[V.ERR_BAD_REQUEST,V.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}const _e=(e,t,r=3)=>{let n=0;const s=function(e,t){e=e||10;const r=new Array(e),n=new Array(e);let s,i=0,o=0;return t=void 0!==t?t:1e3,function(a){const c=Date.now(),h=n[o];s||(s=c),r[i]=a,n[i]=c;let u=o,l=0;for(;u!==i;)l+=r[u++],u%=e;if(i=(i+1)%e,i===o&&(o=(o+1)%e),c-s<t)return;const d=h&&c-h;return d?Math.round(1e3*l/d):void 0}}(50,250);return function(e,t){let r,n,s=0,i=1e3/t;const o=(t,i=Date.now())=>{s=i,r=null,n&&(clearTimeout(n),n=null),e(...t)};return[(...e)=>{const t=Date.now(),a=t-s;a>=i?o(e,t):(r=e,n||(n=setTimeout(()=>{n=null,o(r)},i-a)))},()=>r&&o(r)]}(r=>{const i=r.loaded,o=r.lengthComputable?r.total:void 0,a=i-n,c=s(a);n=i;e({loaded:i,total:o,progress:o?i/o:void 0,bytes:a,rate:c||void 0,estimated:c&&o&&i<=o?(o-i)/c:void 0,event:r,lengthComputable:null!=o,[t?"download":"upload"]:!0})},r)},Pe=(e,t)=>{const r=null!=e;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},Se=e=>(...t)=>z.asap(()=>e(...t));var Ie=ue.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,ue.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(ue.origin),ue.navigator&&/(msie|trident)/i.test(ue.navigator.userAgent)):()=>!0,ke=ue.hasStandardBrowserEnv?{write(e,t,r,n,s,i,o){if("undefined"==typeof document)return;const a=[`${e}=${encodeURIComponent(t)}`];z.isNumber(r)&&a.push(`expires=${new Date(r).toUTCString()}`),z.isString(n)&&a.push(`path=${n}`),z.isString(s)&&a.push(`domain=${s}`),!0===i&&a.push("secure"),z.isString(o)&&a.push(`SameSite=${o}`),document.cookie=a.join("; ")},read(e){if("undefined"==typeof document)return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read:()=>null,remove(){}};function Re(e,t,r){let n=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(n||0==r)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Te=e=>e instanceof we?{...e}:e;function Ne(e,t){t=t||{};const r={};function n(e,t,r,n){return z.isPlainObject(e)&&z.isPlainObject(t)?z.merge.call({caseless:n},e,t):z.isPlainObject(t)?z.merge({},t):z.isArray(t)?t.slice():t}function s(e,t,r,s){return z.isUndefined(t)?z.isUndefined(e)?void 0:n(void 0,e,0,s):n(e,t,0,s)}function i(e,t){if(!z.isUndefined(t))return n(void 0,t)}function o(e,t){return z.isUndefined(t)?z.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function a(r,s,i){return i in t?n(r,s):i in e?n(void 0,r):void 0}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(e,t,r)=>s(Te(e),Te(t),0,!0)};return z.forEach(Object.keys({...e,...t}),function(n){const i=c[n]||s,o=i(e[n],t[n],n);z.isUndefined(o)&&i!==a||(r[n]=o)}),r}var Oe=e=>{const t=Ne({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:a}=t;if(t.headers=o=we.from(o),t.url=te(Re(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),z.isFormData(r))if(ue.hasStandardBrowserEnv||ue.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(z.isFunction(r.getHeaders)){const e=r.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(([e,r])=>{t.includes(e.toLowerCase())&&o.set(e,r)})}if(ue.hasStandardBrowserEnv&&(n&&z.isFunction(n)&&(n=n(t)),n||!1!==n&&Ie(t.url))){const e=s&&i&&ke.read(i);e&&o.set(s,e)}return t};var Ce="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise(function(t,r){const n=Oe(e);let s=n.data;const i=we.from(n.headers).normalize();let o,a,c,h,u,{responseType:l,onUploadProgress:d,onDownloadProgress:f}=n;function p(){h&&h(),u&&u(),n.cancelToken&&n.cancelToken.unsubscribe(o),n.signal&&n.signal.removeEventListener("abort",o)}let m=new XMLHttpRequest;function g(){if(!m)return;const n=we.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());Ee(function(e){t(e),p()},function(e){r(e),p()},{data:l&&"text"!==l&&"json"!==l?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:n,config:e,request:m}),m=null}m.open(n.method.toUpperCase(),n.url,!0),m.timeout=n.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(r(new V("Request aborted",V.ECONNABORTED,e,m)),m=null)},m.onerror=function(t){const n=t&&t.message?t.message:"Network Error",s=new V(n,V.ERR_NETWORK,e,m);s.event=t||null,r(s),m=null},m.ontimeout=function(){let t=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const s=n.transitional||ne;n.timeoutErrorMessage&&(t=n.timeoutErrorMessage),r(new V(t,s.clarifyTimeoutError?V.ETIMEDOUT:V.ECONNABORTED,e,m)),m=null},void 0===s&&i.setContentType(null),"setRequestHeader"in m&&z.forEach(i.toJSON(),function(e,t){m.setRequestHeader(t,e)}),z.isUndefined(n.withCredentials)||(m.withCredentials=!!n.withCredentials),l&&"json"!==l&&(m.responseType=n.responseType),f&&([c,u]=_e(f,!0),m.addEventListener("progress",c)),d&&m.upload&&([a,h]=_e(d),m.upload.addEventListener("progress",a),m.upload.addEventListener("loadend",h)),(n.cancelToken||n.signal)&&(o=t=>{m&&(r(!t||t.type?new be(null,e,m):t),m.abort(),m=null)},n.cancelToken&&n.cancelToken.subscribe(o),n.signal&&(n.signal.aborted?o():n.signal.addEventListener("abort",o)));const y=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(n.url);y&&-1===ue.protocols.indexOf(y)?r(new V("Unsupported protocol "+y+":",V.ERR_BAD_REQUEST,e)):m.send(s||null)})};const xe=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let r,n=new AbortController;const s=function(e){if(!r){r=!0,o();const t=e instanceof Error?e:this.reason;n.abort(t instanceof V?t:new be(t instanceof Error?t.message:t))}};let i=t&&setTimeout(()=>{i=null,s(new V(`timeout of ${t}ms exceeded`,V.ETIMEDOUT))},t);const o=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(s):e.removeEventListener("abort",s)}),e=null)};e.forEach(e=>e.addEventListener("abort",s));const{signal:a}=n;return a.unsubscribe=()=>z.asap(o),a}},Me=function*(e,t){let r=e.byteLength;if(r<t)return void(yield e);let n,s=0;for(;s<r;)n=s+t,yield e.slice(s,n),s=n},Ue=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:r}=await t.read();if(e)break;yield r}}finally{await t.cancel()}},De=(e,t,r,n)=>{const s=async function*(e,t){for await(const r of Ue(e))yield*Me(r,t)}(e,t);let i,o=0,a=e=>{i||(i=!0,n&&n(e))};return new ReadableStream({async pull(e){try{const{done:t,value:n}=await s.next();if(t)return a(),void e.close();let i=n.byteLength;if(r){let e=o+=i;r(e)}e.enqueue(new Uint8Array(n))}catch(e){throw a(e),e}},cancel:e=>(a(e),s.return())},{highWaterMark:2})},{isFunction:Le}=z,Be=(({Request:e,Response:t})=>({Request:e,Response:t}))(z.global),{ReadableStream:Fe,TextEncoder:qe}=z.global,je=(e,...t)=>{try{return!!e(...t)}catch(e){return!1}},Ge=e=>{e=z.merge.call({skipUndefined:!0},Be,e);const{fetch:t,Request:r,Response:n}=e,s=t?Le(t):"function"==typeof fetch,i=Le(r),o=Le(n);if(!s)return!1;const a=s&&Le(Fe),c=s&&("function"==typeof qe?(h=new qe,e=>h.encode(e)):async e=>new Uint8Array(await new r(e).arrayBuffer()));var h;const u=i&&a&&je(()=>{let e=!1;const t=new r(ue.origin,{body:new Fe,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),l=o&&a&&je(()=>z.isReadableStream(new n("").body)),d={stream:l&&(e=>e.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!d[e]&&(d[e]=(t,r)=>{let n=t&&t[e];if(n)return n.call(t);throw new V(`Response type '${e}' is not supported`,V.ERR_NOT_SUPPORT,r)})});const f=async(e,t)=>{const n=z.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(z.isBlob(e))return e.size;if(z.isSpecCompliantForm(e)){const t=new r(ue.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return z.isArrayBufferView(e)||z.isArrayBuffer(e)?e.byteLength:(z.isURLSearchParams(e)&&(e+=""),z.isString(e)?(await c(e)).byteLength:void 0)})(t):n};return async e=>{let{url:s,method:o,data:a,signal:c,cancelToken:h,timeout:p,onDownloadProgress:m,onUploadProgress:g,responseType:y,headers:w,withCredentials:v="same-origin",fetchOptions:A}=Oe(e),b=t||fetch;y=y?(y+"").toLowerCase():"text";let E=xe([c,h&&h.toAbortSignal()],p),_=null;const P=E&&E.unsubscribe&&(()=>{E.unsubscribe()});let S;try{if(g&&u&&"get"!==o&&"head"!==o&&0!==(S=await f(w,a))){let e,t=new r(s,{method:"POST",body:a,duplex:"half"});if(z.isFormData(a)&&(e=t.headers.get("content-type"))&&w.setContentType(e),t.body){const[e,r]=Pe(S,_e(Se(g)));a=De(t.body,65536,e,r)}}z.isString(v)||(v=v?"include":"omit");const t=i&&"credentials"in r.prototype,c={...A,signal:E,method:o.toUpperCase(),headers:w.normalize().toJSON(),body:a,duplex:"half",credentials:t?v:void 0};_=i&&new r(s,c);let h=await(i?b(_,A):b(s,c));const p=l&&("stream"===y||"response"===y);if(l&&(m||p&&P)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=h[t]});const t=z.toFiniteNumber(h.headers.get("content-length")),[r,s]=m&&Pe(t,_e(Se(m),!0))||[];h=new n(De(h.body,65536,r,()=>{s&&s(),P&&P()}),e)}y=y||"text";let I=await d[z.findKey(d,y)||"text"](h,e);return!p&&P&&P(),await new Promise((t,r)=>{Ee(t,r,{data:I,headers:we.from(h.headers),status:h.status,statusText:h.statusText,config:e,request:_})})}catch(t){if(P&&P(),t&&"TypeError"===t.name&&/Load failed|fetch/i.test(t.message))throw Object.assign(new V("Network Error",V.ERR_NETWORK,e,_),{cause:t.cause||t});throw V.from(t,t&&t.code,e,_)}}},He=new Map,ze=e=>{let t=e&&e.env||{};const{fetch:r,Request:n,Response:s}=t,i=[n,s,r];let o,a,c=i.length,h=He;for(;c--;)o=i[c],a=h.get(o),void 0===a&&h.set(o,a=c?new Map:Ge(t)),h=a;return a};ze();const Ve={http:null,xhr:Ce,fetch:{get:ze}};z.forEach(Ve,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}});const Ke=e=>`- ${e}`,We=e=>z.isFunction(e)||null===e||!1===e;var Ye={getAdapter:function(e,t){e=z.isArray(e)?e:[e];const{length:r}=e;let n,s;const i={};for(let o=0;o<r;o++){let r;if(n=e[o],s=n,!We(n)&&(s=Ve[(r=String(n)).toLowerCase()],void 0===s))throw new V(`Unknown adapter '${r}'`);if(s&&(z.isFunction(s)||(s=s.get(t))))break;i[r||"#"+o]=s}if(!s){const e=Object.entries(i).map(([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build"));let t=r?e.length>1?"since :\n"+e.map(Ke).join("\n"):" "+Ke(e[0]):"as no adapter specified";throw new V("There is no suitable adapter to dispatch the request "+t,"ERR_NOT_SUPPORT")}return s},adapters:Ve};function Je(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new be(null,e)}function Qe(e){Je(e),e.headers=we.from(e.headers),e.data=ve.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Ye.getAdapter(e.adapter||de.adapter,e)(e).then(function(t){return Je(e),t.data=ve.call(e,e.transformResponse,t),t.headers=we.from(t.headers),t},function(t){return Ae(t)||(Je(e),t&&t.response&&(t.response.data=ve.call(e,e.transformResponse,t.response),t.response.headers=we.from(t.response.headers))),Promise.reject(t)})}const $e="1.13.4",Xe={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Xe[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const Ze={};Xe.transitional=function(e,t,r){function n(e,t){return"[Axios v"+$e+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return(r,s,i)=>{if(!1===e)throw new V(n(s," has been removed"+(t?" in "+t:"")),V.ERR_DEPRECATED);return t&&!Ze[s]&&(Ze[s]=!0,console.warn(n(s," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,s,i)}},Xe.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};var et={assertOptions:function(e,t,r){if("object"!=typeof e)throw new V("options must be an object",V.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let s=n.length;for(;s-- >0;){const i=n[s],o=t[i];if(o){const t=e[i],r=void 0===t||o(t,i,e);if(!0!==r)throw new V("option "+i+" must be "+r,V.ERR_BAD_OPTION_VALUE);continue}if(!0!==r)throw new V("Unknown option "+i,V.ERR_BAD_OPTION)}},validators:Xe};const tt=et.validators;let rt=class{constructor(e){this.defaults=e||{},this.interceptors={request:new re,response:new re}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=new Error;const r=t.stack?t.stack.replace(/^.+\n/,""):"";try{e.stack?r&&!String(e.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+r):e.stack=r}catch(e){}}throw e}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=Ne(this.defaults,t);const{transitional:r,paramsSerializer:n,headers:s}=t;void 0!==r&&et.assertOptions(r,{silentJSONParsing:tt.transitional(tt.boolean),forcedJSONParsing:tt.transitional(tt.boolean),clarifyTimeoutError:tt.transitional(tt.boolean)},!1),null!=n&&(z.isFunction(n)?t.paramsSerializer={serialize:n}:et.assertOptions(n,{encode:tt.function,serialize:tt.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),et.assertOptions(t,{baseUrl:tt.spelling("baseURL"),withXsrfToken:tt.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=s&&z.merge(s.common,s[t.method]);s&&z.forEach(["delete","get","head","post","put","patch","common"],e=>{delete s[e]}),t.headers=we.concat(i,s);const o=[];let a=!0;this.interceptors.request.forEach(function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,o.unshift(e.fulfilled,e.rejected))});const c=[];let h;this.interceptors.response.forEach(function(e){c.push(e.fulfilled,e.rejected)});let u,l=0;if(!a){const e=[Qe.bind(this),void 0];for(e.unshift(...o),e.push(...c),u=e.length,h=Promise.resolve(t);l<u;)h=h.then(e[l++],e[l++]);return h}u=o.length;let d=t;for(;l<u;){const e=o[l++],t=o[l++];try{d=e(d)}catch(e){t.call(this,e);break}}try{h=Qe.call(this,d)}catch(e){return Promise.reject(e)}for(l=0,u=c.length;l<u;)h=h.then(c[l++],c[l++]);return h}getUri(e){return te(Re((e=Ne(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}};z.forEach(["delete","get","head","options"],function(e){rt.prototype[e]=function(t,r){return this.request(Ne(r||{},{method:e,url:t,data:(r||{}).data}))}}),z.forEach(["post","put","patch"],function(e){function t(t){return function(r,n,s){return this.request(Ne(s||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}rt.prototype[e]=t(),rt.prototype[e+"Form"]=t(!0)});const nt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(nt).forEach(([e,t])=>{nt[t]=e});const st=function t(r){const n=new rt(r),s=e(rt.prototype.request,n);return z.extend(s,rt.prototype,n,{allOwnKeys:!0}),z.extend(s,n,null,{allOwnKeys:!0}),s.create=function(e){return t(Ne(r,e))},s}(de);st.Axios=rt,st.CanceledError=be,st.CancelToken=class e{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const r=this;this.promise.then(e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null}),this.promise.then=e=>{let t;const n=new Promise(e=>{r.subscribe(e),t=e}).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e(function(e,n,s){r.reason||(r.reason=new be(e,n,s),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let t;const r=new e(function(e){t=e});return{token:r,cancel:t}}},st.isCancel=Ae,st.VERSION=$e,st.toFormData=Q,st.AxiosError=V,st.Cancel=st.CanceledError,st.all=function(e){return Promise.all(e)},st.spread=function(e){return function(t){return e.apply(null,t)}},st.isAxiosError=function(e){return z.isObject(e)&&!0===e.isAxiosError},st.mergeConfig=Ne,st.AxiosHeaders=we,st.formToJSON=e=>le(z.isHTMLForm(e)?new FormData(e):e),st.getAdapter=Ye.getAdapter,st.HttpStatusCode=nt,st.default=st;const{Axios:it,AxiosError:ot,CanceledError:at,isCancel:ct,CancelToken:ht,VERSION:ut,all:lt,Cancel:dt,isAxiosError:ft,spread:pt,toFormData:mt,AxiosHeaders:gt,HttpStatusCode:yt,formToJSON:wt,getAdapter:vt,mergeConfig:At}=st;var bt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Et(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function _t(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var r=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}),r}const Pt=new Set(["ENOTFOUND","ENETUNREACH","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED","HOSTNAME_MISMATCH"]);var St=e=>!Pt.has(e&&e.code),It=Et(St);const kt="axios-retry";function Rt(e){return!e.response&&(!!e.code&&(!["ERR_CANCELED","ECONNABORTED"].includes(e.code)&&It(e)))}const Tt=["get","head","options"],Nt=Tt.concat(["put","delete"]);function Ot(e){return"ECONNABORTED"!==e.code&&(!e.response||429===e.response.status||e.response.status>=500&&e.response.status<=599)}function Ct(e){return!!e.config?.method&&(Ot(e)&&-1!==Nt.indexOf(e.config.method))}function xt(e){return Rt(e)||Ct(e)}function Mt(e=void 0){const t=e?.response?.headers["retry-after"];if(!t)return 0;let r=1e3*(Number(t)||0);return 0===r&&(r=(new Date(t).valueOf()||0)-Date.now()),Math.max(0,r)}const Ut={retries:3,retryCondition:xt,retryDelay:function(e=0,t=void 0){return Math.max(0,Mt(t))},shouldResetTimeout:!1,onRetry:()=>{},onMaxRetryTimesExceeded:()=>{},validateResponse:null};function Dt(e,t,r=!1){const n=function(e,t){return{...Ut,...t,...e[kt]}}(e,t||{});return n.retryCount=n.retryCount||0,n.lastRequestTime&&!r||(n.lastRequestTime=Date.now()),e[kt]=n,n}const Lt=(e,t)=>{const r=e.interceptors.request.use(e=>(Dt(e,t,!0),e[kt]?.validateResponse&&(e.validateStatus=()=>!1),e)),n=e.interceptors.response.use(null,async r=>{const{config:n}=r;if(!n)return Promise.reject(r);const s=Dt(n,t);return r.response&&s.validateResponse?.(r.response)?r.response:await async function(e,t){const{retries:r,retryCondition:n}=e,s=(e.retryCount||0)<r&&n(t);if("object"==typeof s)try{return!1!==await s}catch(e){return!1}return s}(s,r)?async function(e,t,r,n){t.retryCount+=1;const{retryDelay:s,shouldResetTimeout:i,onRetry:o}=t,a=s(t.retryCount,r);if(function(e,t){e.defaults.agent===t.agent&&delete t.agent,e.defaults.httpAgent===t.httpAgent&&delete t.httpAgent,e.defaults.httpsAgent===t.httpsAgent&&delete t.httpsAgent}(e,n),!i&&n.timeout&&t.lastRequestTime){const e=Date.now()-t.lastRequestTime,s=n.timeout-e-a;if(s<=0)return Promise.reject(r);n.timeout=s}return n.transformRequest=[e=>e],await o(t.retryCount,r,n),n.signal?.aborted?Promise.resolve(e(n)):new Promise(t=>{const r=()=>{clearTimeout(s),t(e(n))},s=setTimeout(()=>{t(e(n)),n.signal?.removeEventListener&&n.signal.removeEventListener("abort",r)},a);n.signal?.addEventListener&&n.signal.addEventListener("abort",r,{once:!0})})}(e,s,r,n):(await async function(e,t){e.retryCount>=e.retries&&await e.onMaxRetryTimesExceeded(t,e.retryCount)}(s,r),Promise.reject(r))});return{requestInterceptorId:r,responseInterceptorId:n}};Lt.isNetworkError=Rt,Lt.isSafeRequestError=function(e){return!!e.config?.method&&(Ot(e)&&-1!==Tt.indexOf(e.config.method))},Lt.isIdempotentRequestError=Ct,Lt.isNetworkOrIdempotentRequestError=xt,Lt.exponentialDelay=function(e=0,t=void 0,r=100){const n=2**e*r,s=Math.max(n,Mt(t));return s+.2*s*Math.random()},Lt.linearDelay=function(e=100){return(t=0,r=void 0)=>{const n=t*e;return Math.max(n,Mt(r))}},Lt.isRetryableError=Ot;const Bt="https://api.openfort.io".replace(/\/+$/,"");let Ft=class{basePath;axios;configuration;constructor(e,t=Bt,r=st){this.basePath=t,this.axios=r,e&&(this.configuration=e,this.basePath=e.basePath||this.basePath)}},qt=class extends Error{field;constructor(e,t){super(t),this.field=e,this.name="RequiredError"}};const jt="https://example.com",Gt=function(e,t,r){if(null==r)throw new qt(t,`Required parameter ${t} was null or undefined when calling ${e}.`)},Ht=async function(e,t){if(t&&t.accessToken){const r="function"==typeof t.accessToken?await t.accessToken():await t.accessToken;e.Authorization="Bearer "+r}};function zt(e,t,r=""){null!=t&&("object"==typeof t?Array.isArray(t)?t.forEach(t=>zt(e,t,r)):Object.keys(t).forEach(n=>zt(e,t[n],`${r}${""!==r?".":""}${n}`)):e.has(r)?e.append(r,t):e.set(r,t))}const Vt=function(e,...t){const r=new URLSearchParams(e.search);zt(r,t),e.search=r.toString()},Kt=function(e,t,r){const n="string"!=typeof e;return(n&&r&&r.isJsonMime?r.isJsonMime(t.headers["Content-Type"]):n)?JSON.stringify(void 0!==e?e:{}):e||""},Wt=function(e){return e.pathname+e.search+e.hash},Yt=function(e,t,r,n){return(s=t,i=r)=>{const o={...e.options,url:(n?.basePath||s.defaults.baseURL||i)+e.url};return s.request(o)}},Jt=function(e){const t=function(e){return{cancelTransferOwnership:async(t,r,n={})=>{Gt("cancelTransferOwnership","id",t),Gt("cancelTransferOwnership","cancelTransferOwnershipRequest",r);const s="/v1/accounts/{id}/cancel_transfer_ownership".replace("{id}",encodeURIComponent(String(t))),i=new URL(s,jt);let o;e&&(o=e.baseOptions);const a={method:"POST",...o,...n},c={};await Ht(c,e),c["Content-Type"]="application/json",Vt(i,{});let h=o&&o.headers?o.headers:{};return a.headers={...c,...h,...n.headers},a.data=Kt(r,a,e),{url:Wt(i),options:a}},completeRecovery:async(t,r,n={})=>{Gt("completeRecovery","id",t),Gt("completeRecovery","completeRecoveryRequest",r);const s="/v1/accounts/{id}/complete_recovery".replace("{id}",encodeURIComponent(String(t))),i=new URL(s,jt);let o;e&&(o=e.baseOptions);const a={method:"POST",...o,...n},c={};await Ht(c,e),c["Content-Type"]="application/json",Vt(i,{});let h=o&&o.headers?o.headers:{};return a.headers={...c,...h,...n.headers},a.data=Kt(r,a,e),{url:Wt(i),options:a}},createAccount:async(t,r={})=>{Gt("createAccount","createAccountRequest",t);const n=new URL("/v1/accounts",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r},o={};await Ht(o,e),o["Content-Type"]="application/json",Vt(n,{});let a=s&&s.headers?s.headers:{};return i.headers={...o,...a,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},deployAccount:async(t,r,n={})=>{Gt("deployAccount","id",t),Gt("deployAccount","deployRequest",r);const s="/v1/accounts/{id}/deploy".replace("{id}",encodeURIComponent(String(t))),i=new URL(s,jt);let o;e&&(o=e.baseOptions);const a={method:"POST",...o,...n},c={};await Ht(c,e),c["Content-Type"]="application/json",Vt(i,{});let h=o&&o.headers?o.headers:{};return a.headers={...c,...h,...n.headers},a.data=Kt(r,a,e),{url:Wt(i),options:a}},disableAccount:async(t,r={})=>{Gt("disableAccount","id",t);const n="/v1/accounts/{id}/disable".replace("{id}",encodeURIComponent(String(t))),s=new URL(n,jt);let i;e&&(i=e.baseOptions);const o={method:"POST",...i,...r},a={};await Ht(a,e),Vt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...r.headers},{url:Wt(s),options:o}},getAccount:async(t,r,n={})=>{Gt("getAccount","id",t);const s="/v1/accounts/{id}".replace("{id}",encodeURIComponent(String(t))),i=new URL(s,jt);let o;e&&(o=e.baseOptions);const a={method:"GET",...o,...n},c={},h={};await Ht(c,e),r&&(h.expand=r),Vt(i,h);let u=o&&o.headers?o.headers:{};return a.headers={...c,...u,...n.headers},{url:Wt(i),options:a}},getAccounts:async(t,r,n,s,i,o,a,c={})=>{const h=new URL("/v1/accounts",jt);let u;e&&(u=e.baseOptions);const l={method:"GET",...u,...c},d={},f={};await Ht(d,e),void 0!==t&&(f.limit=t),void 0!==r&&(f.skip=r),void 0!==n&&(f.order=n),void 0!==s&&(f.chainId=s),void 0!==i&&(f.player=i),void 0!==o&&(f.address=o),a&&(f.expand=a),Vt(h,f);let p=u&&u.headers?u.headers:{};return l.headers={...d,...p,...c.headers},{url:Wt(h),options:l}},requestTransferOwnership:async(t,r,n={})=>{Gt("requestTransferOwnership","id",t),Gt("requestTransferOwnership","transferOwnershipRequest",r);const s="/v1/accounts/{id}/request_transfer_ownership".replace("{id}",encodeURIComponent(String(t))),i=new URL(s,jt);let o;e&&(o=e.baseOptions);const a={method:"POST",...o,...n},c={};await Ht(c,e),c["Content-Type"]="application/json",Vt(i,{});let h=o&&o.headers?o.headers:{};return a.headers={...c,...h,...n.headers},a.data=Kt(r,a,e),{url:Wt(i),options:a}},signPayload:async(t,r,n={})=>{Gt("signPayload","id",t),Gt("signPayload","signPayloadRequest",r);const s="/v1/accounts/{id}/sign_payload".replace("{id}",encodeURIComponent(String(t))),i=new URL(s,jt);let o;e&&(o=e.baseOptions);const a={method:"POST",...o,...n},c={};await Ht(c,e),c["Content-Type"]="application/json",Vt(i,{});let h=o&&o.headers?o.headers:{};return a.headers={...c,...h,...n.headers},a.data=Kt(r,a,e),{url:Wt(i),options:a}},startRecovery:async(t,r,n={})=>{Gt("startRecovery","id",t),Gt("startRecovery","startRecoveryRequest",r);const s="/v1/accounts/{id}/start_recovery".replace("{id}",encodeURIComponent(String(t))),i=new URL(s,jt);let o;e&&(o=e.baseOptions);const a={method:"POST",...o,...n},c={};await Ht(c,e),c["Content-Type"]="application/json",Vt(i,{});let h=o&&o.headers?o.headers:{};return a.headers={...c,...h,...n.headers},a.data=Kt(r,a,e),{url:Wt(i),options:a}},syncAccount:async(t,r={})=>{Gt("syncAccount","id",t);const n="/v1/accounts/{id}/sync".replace("{id}",encodeURIComponent(String(t))),s=new URL(n,jt);let i;e&&(i=e.baseOptions);const o={method:"POST",...i,...r},a={};await Ht(a,e),Vt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...r.headers},{url:Wt(s),options:o}}}}(e);return{async cancelTransferOwnership(r,n,s){const i=await t.cancelTransferOwnership(r,n,s);return Yt(i,st,Bt,e)},async completeRecovery(r,n,s){const i=await t.completeRecovery(r,n,s);return Yt(i,st,Bt,e)},async createAccount(r,n){const s=await t.createAccount(r,n);return Yt(s,st,Bt,e)},async deployAccount(r,n,s){const i=await t.deployAccount(r,n,s);return Yt(i,st,Bt,e)},async disableAccount(r,n){const s=await t.disableAccount(r,n);return Yt(s,st,Bt,e)},async getAccount(r,n,s){const i=await t.getAccount(r,n,s);return Yt(i,st,Bt,e)},async getAccounts(r,n,s,i,o,a,c,h){const u=await t.getAccounts(r,n,s,i,o,a,c,h);return Yt(u,st,Bt,e)},async requestTransferOwnership(r,n,s){const i=await t.requestTransferOwnership(r,n,s);return Yt(i,st,Bt,e)},async signPayload(r,n,s){const i=await t.signPayload(r,n,s);return Yt(i,st,Bt,e)},async startRecovery(r,n,s){const i=await t.startRecovery(r,n,s);return Yt(i,st,Bt,e)},async syncAccount(r,n){const s=await t.syncAccount(r,n);return Yt(s,st,Bt,e)}}};class Qt extends Ft{cancelTransferOwnership(e,t){return Jt(this.configuration).cancelTransferOwnership(e.id,e.cancelTransferOwnershipRequest,t).then(e=>e(this.axios,this.basePath))}completeRecovery(e,t){return Jt(this.configuration).completeRecovery(e.id,e.completeRecoveryRequest,t).then(e=>e(this.axios,this.basePath))}createAccount(e,t){return Jt(this.configuration).createAccount(e.createAccountRequest,t).then(e=>e(this.axios,this.basePath))}deployAccount(e,t){return Jt(this.configuration).deployAccount(e.id,e.deployRequest,t).then(e=>e(this.axios,this.basePath))}disableAccount(e,t){return Jt(this.configuration).disableAccount(e.id,t).then(e=>e(this.axios,this.basePath))}getAccount(e,t){return Jt(this.configuration).getAccount(e.id,e.expand,t).then(e=>e(this.axios,this.basePath))}getAccounts(e={},t){return Jt(this.configuration).getAccounts(e.limit,e.skip,e.order,e.chainId,e.player,e.address,e.expand,t).then(e=>e(this.axios,this.basePath))}requestTransferOwnership(e,t){return Jt(this.configuration).requestTransferOwnership(e.id,e.transferOwnershipRequest,t).then(e=>e(this.axios,this.basePath))}signPayload(e,t){return Jt(this.configuration).signPayload(e.id,e.signPayloadRequest,t).then(e=>e(this.axios,this.basePath))}startRecovery(e,t){return Jt(this.configuration).startRecovery(e.id,e.startRecoveryRequest,t).then(e=>e(this.axios,this.basePath))}syncAccount(e,t){return Jt(this.configuration).syncAccount(e.id,t).then(e=>e(this.axios,this.basePath))}}const $t=function(e){const t=function(e){return{createAccountV2:async(t,r={})=>{Gt("createAccountV2","createAccountRequestV2",t);const n=new URL("/v2/accounts",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r},o={};await Ht(o,e),o["Content-Type"]="application/json",Vt(n,{});let a=s&&s.headers?s.headers:{};return i.headers={...o,...a,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},getAccountV2:async(t,r={})=>{Gt("getAccountV2","id",t);const n="/v2/accounts/{id}".replace("{id}",encodeURIComponent(String(t))),s=new URL(n,jt);let i;e&&(i=e.baseOptions);const o={method:"GET",...i,...r},a={};await Ht(a,e),Vt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...r.headers},{url:Wt(s),options:o}},getAccountsV2:async(t,r,n,s,i,o,a,c,h,u={})=>{const l=new URL("/v2/accounts",jt);let d;e&&(d=e.baseOptions);const f={method:"GET",...d,...u},p={},m={};await Ht(p,e),void 0!==t&&(m.limit=t),void 0!==r&&(m.skip=r),void 0!==n&&(m.order=n),void 0!==s&&(m.chainId=s),void 0!==i&&(m.user=i),void 0!==o&&(m.chainType=o),void 0!==a&&(m.accountType=a),void 0!==c&&(m.custody=c),void 0!==h&&(m.address=h),Vt(l,m);let g=d&&d.headers?d.headers:{};return f.headers={...p,...g,...u.headers},{url:Wt(l),options:f}},getSignerIdByAddress:async(t,r={})=>{Gt("getSignerIdByAddress","address",t);const n=new URL("/v2/accounts/signer",jt);let s;e&&(s=e.baseOptions);const i={method:"GET",...s,...r},o={},a={};await Ht(o,e),void 0!==t&&(a.address=t),Vt(n,a);let c=s&&s.headers?s.headers:{};return i.headers={...o,...c,...r.headers},{url:Wt(n),options:i}},removeAccount:async(t,r={})=>{Gt("removeAccount","id",t);const n="/v2/accounts/{id}".replace("{id}",encodeURIComponent(String(t))),s=new URL(n,jt);let i;e&&(i=e.baseOptions);const o={method:"DELETE",...i,...r},a={};await Ht(a,e),Vt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...r.headers},{url:Wt(s),options:o}},switchChainV2:async(t,r={})=>{Gt("switchChainV2","switchChainQueriesV2",t);const n=new URL("/v2/accounts/switch-chain",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r},o={};await Ht(o,e),o["Content-Type"]="application/json",Vt(n,{});let a=s&&s.headers?s.headers:{};return i.headers={...o,...a,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}}}}(e);return{async createAccountV2(r,n){const s=await t.createAccountV2(r,n);return Yt(s,st,Bt,e)},async getAccountV2(r,n){const s=await t.getAccountV2(r,n);return Yt(s,st,Bt,e)},async getAccountsV2(r,n,s,i,o,a,c,h,u,l){const d=await t.getAccountsV2(r,n,s,i,o,a,c,h,u,l);return Yt(d,st,Bt,e)},async getSignerIdByAddress(r,n){const s=await t.getSignerIdByAddress(r,n);return Yt(s,st,Bt,e)},async removeAccount(r,n){const s=await t.removeAccount(r,n);return Yt(s,st,Bt,e)},async switchChainV2(r,n){const s=await t.switchChainV2(r,n);return Yt(s,st,Bt,e)}}};let Xt=class extends Ft{createAccountV2(e,t){return $t(this.configuration).createAccountV2(e.createAccountRequestV2,t).then(e=>e(this.axios,this.basePath))}getAccountV2(e,t){return $t(this.configuration).getAccountV2(e.id,t).then(e=>e(this.axios,this.basePath))}getAccountsV2(e={},t){return $t(this.configuration).getAccountsV2(e.limit,e.skip,e.order,e.chainId,e.user,e.chainType,e.accountType,e.custody,e.address,t).then(e=>e(this.axios,this.basePath))}getSignerIdByAddress(e,t){return $t(this.configuration).getSignerIdByAddress(e.address,t).then(e=>e(this.axios,this.basePath))}removeAccount(e,t){return $t(this.configuration).removeAccount(e.id,t).then(e=>e(this.axios,this.basePath))}switchChainV2(e,t){return $t(this.configuration).switchChainV2(e.switchChainQueriesV2,t).then(e=>e(this.axios,this.basePath))}};const Zt=function(e){const t=function(e){return{authenticateSIWE:async(t,r={})=>{Gt("authenticateSIWE","sIWEAuthenticateRequest",t);const n=new URL("/iam/v1/siwe/authenticate",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r},o={};await Ht(o,e),o["Content-Type"]="application/json",Vt(n,{});let a=s&&s.headers?s.headers:{};return i.headers={...o,...a,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},getJwks:async(t,r={})=>{Gt("getJwks","publishableKey",t);const n="/iam/v1/{publishable_key}/jwks.json".replace("{publishable_key}",encodeURIComponent(String(t))),s=new URL(n,jt);let i;e&&(i=e.baseOptions);const o={method:"GET",...i,...r};Vt(s,{});let a=i&&i.headers?i.headers:{};return o.headers={...a,...r.headers},{url:Wt(s),options:o}},initOAuth:async(t,r,n={})=>{Gt("initOAuth","oAuthInitRequest",t);const s=new URL("/iam/v1/oauth/init",jt);let i;e&&(i=e.baseOptions);const o={method:"POST",...i,...n},a={};await Ht(a,e),null!=r&&(a["x-game"]=String(r)),a["Content-Type"]="application/json",Vt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...n.headers},o.data=Kt(t,o,e),{url:Wt(s),options:o}},initSIWE:async(t,r,n={})=>{Gt("initSIWE","sIWERequest",t);const s=new URL("/iam/v1/siwe/init",jt);let i;e&&(i=e.baseOptions);const o={method:"POST",...i,...n},a={};await Ht(a,e),null!=r&&(a["x-game"]=String(r)),a["Content-Type"]="application/json",Vt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...n.headers},o.data=Kt(t,o,e),{url:Wt(s),options:o}},linkEmail:async(t,r,n={})=>{Gt("linkEmail","loginRequest",t);const s=new URL("/iam/v1/password/link",jt);let i;e&&(i=e.baseOptions);const o={method:"POST",...i,...n},a={};null!=r&&(a["x-game"]=String(r)),a["Content-Type"]="application/json",Vt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...n.headers},o.data=Kt(t,o,e),{url:Wt(s),options:o}},linkOAuth:async(t,r,n={})=>{Gt("linkOAuth","oAuthInitRequest",t);const s=new URL("/iam/v1/oauth/init_link",jt);let i;e&&(i=e.baseOptions);const o={method:"POST",...i,...n},a={};null!=r&&(a["x-game"]=String(r)),a["Content-Type"]="application/json",Vt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...n.headers},o.data=Kt(t,o,e),{url:Wt(s),options:o}},linkSIWE:async(t,r={})=>{Gt("linkSIWE","sIWEAuthenticateRequest",t);const n=new URL("/iam/v1/siwe/link",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Vt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},linkThirdParty:async(t,r,n={})=>{Gt("linkThirdParty","thirdPartyLinkRequest",t);const s=new URL("/iam/v1/oauth/link",jt);let i;e&&(i=e.baseOptions);const o={method:"POST",...i,...n},a={};null!=r&&(a["x-game"]=String(r)),a["Content-Type"]="application/json",Vt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...n.headers},o.data=Kt(t,o,e),{url:Wt(s),options:o}},loginEmailPassword:async(t,r,n={})=>{Gt("loginEmailPassword","loginRequest",t);const s=new URL("/iam/v1/password/login",jt);let i;e&&(i=e.baseOptions);const o={method:"POST",...i,...n},a={};await Ht(a,e),null!=r&&(a["x-game"]=String(r)),a["Content-Type"]="application/json",Vt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...n.headers},o.data=Kt(t,o,e),{url:Wt(s),options:o}},loginOIDC:async(t,r,n={})=>{Gt("loginOIDC","loginOIDCRequest",t);const s=new URL("/iam/v1/oidc/login",jt);let i;e&&(i=e.baseOptions);const o={method:"POST",...i,...n},a={};await Ht(a,e),null!=r&&(a["x-game"]=String(r)),a["Content-Type"]="application/json",Vt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...n.headers},o.data=Kt(t,o,e),{url:Wt(s),options:o}},loginWithIdToken:async(t,r={})=>{Gt("loginWithIdToken","loginWithIdTokenRequest",t);const n=new URL("/iam/v1/oauth/login_id_token",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r},o={};await Ht(o,e),o["Content-Type"]="application/json",Vt(n,{});let a=s&&s.headers?s.headers:{};return i.headers={...o,...a,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},logout:async(t,r={})=>{Gt("logout","logoutRequest",t);const n=new URL("/iam/v1/sessions/logout",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Vt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},me:async(t={})=>{const r=new URL("/iam/v1/me",jt);let n;e&&(n=e.baseOptions);const s={method:"GET",...n,...t};Vt(r,{});let i=n&&n.headers?n.headers:{};return s.headers={...i,...t.headers},{url:Wt(r),options:s}},poolOAuth:async(t,r={})=>{Gt("poolOAuth","key",t);const n=new URL("/iam/v1/oauth/pool",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r},o={},a={};await Ht(o,e),void 0!==t&&(a.key=t),Vt(n,a);let c=s&&s.headers?s.headers:{};return i.headers={...o,...c,...r.headers},{url:Wt(n),options:i}},refresh:async(t,r={})=>{Gt("refresh","refreshTokenRequest",t);const n=new URL("/iam/v1/sessions",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r},o={};await Ht(o,e),o["Content-Type"]="application/json",Vt(n,{});let a=s&&s.headers?s.headers:{};return i.headers={...o,...a,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},registerGuest:async(t,r={})=>{const n=new URL("/iam/v1/guest",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r},o={};await Ht(o,e),null!=t&&(o["x-game"]=String(t)),Vt(n,{});let a=s&&s.headers?s.headers:{};return i.headers={...o,...a,...r.headers},{url:Wt(n),options:i}},requestEmailVerification:async(t,r={})=>{Gt("requestEmailVerification","requestVerifyEmailRequest",t);const n=new URL("/iam/v1/password/request_email_verification",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r},o={};await Ht(o,e),o["Content-Type"]="application/json",Vt(n,{});let a=s&&s.headers?s.headers:{};return i.headers={...o,...a,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},requestResetPassword:async(t,r={})=>{Gt("requestResetPassword","requestResetPasswordRequest",t);const n=new URL("/iam/v1/password/request_reset",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r},o={};await Ht(o,e),o["Content-Type"]="application/json",Vt(n,{});let a=s&&s.headers?s.headers:{};return i.headers={...o,...a,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},resetPassword:async(t,r={})=>{Gt("resetPassword","resetPasswordRequest",t);const n=new URL("/iam/v1/password/reset",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r},o={};await Ht(o,e),o["Content-Type"]="application/json",Vt(n,{});let a=s&&s.headers?s.headers:{};return i.headers={...o,...a,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},signupEmailPassword:async(t,r,n={})=>{Gt("signupEmailPassword","signupRequest",t);const s=new URL("/iam/v1/password/signup",jt);let i;e&&(i=e.baseOptions);const o={method:"POST",...i,...n},a={};await Ht(a,e),null!=r&&(a["x-game"]=String(r)),a["Content-Type"]="application/json",Vt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...n.headers},o.data=Kt(t,o,e),{url:Wt(s),options:o}},thirdParty:async(t,r,n={})=>{Gt("thirdParty","thirdPartyOAuthRequest",t);const s=new URL("/iam/v1/oauth/third_party",jt);let i;e&&(i=e.baseOptions);const o={method:"POST",...i,...n},a={};await Ht(a,e),null!=r&&(a["x-game"]=String(r)),a["Content-Type"]="application/json",Vt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...n.headers},o.data=Kt(t,o,e),{url:Wt(s),options:o}},unlinkEmail:async(t,r={})=>{Gt("unlinkEmail","unlinkEmailRequest",t);const n=new URL("/iam/v1/password/unlink",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Vt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},unlinkOAuth:async(t,r={})=>{Gt("unlinkOAuth","unlinkOAuthRequest",t);const n=new URL("/iam/v1/oauth/unlink",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Vt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},unlinkSIWE:async(t,r={})=>{Gt("unlinkSIWE","sIWERequest",t);const n=new URL("/iam/v1/siwe/unlink",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Vt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},verifyEmail:async(t,r={})=>{Gt("verifyEmail","verifyEmailRequest",t);const n=new URL("/iam/v1/password/verify_email",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r},o={};await Ht(o,e),o["Content-Type"]="application/json",Vt(n,{});let a=s&&s.headers?s.headers:{};return i.headers={...o,...a,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},verifyOAuthToken:async(t,r={})=>{Gt("verifyOAuthToken","authenticateOAuthRequest",t);const n=new URL("/iam/v1/oauth/verify",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r},o={};await Ht(o,e),o["Content-Type"]="application/json",Vt(n,{});let a=s&&s.headers?s.headers:{};return i.headers={...o,...a,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}}}}(e);return{async authenticateSIWE(r,n){const s=await t.authenticateSIWE(r,n);return Yt(s,st,Bt,e)},async getJwks(r,n){const s=await t.getJwks(r,n);return Yt(s,st,Bt,e)},async initOAuth(r,n,s){const i=await t.initOAuth(r,n,s);return Yt(i,st,Bt,e)},async initSIWE(r,n,s){const i=await t.initSIWE(r,n,s);return Yt(i,st,Bt,e)},async linkEmail(r,n,s){const i=await t.linkEmail(r,n,s);return Yt(i,st,Bt,e)},async linkOAuth(r,n,s){const i=await t.linkOAuth(r,n,s);return Yt(i,st,Bt,e)},async linkSIWE(r,n){const s=await t.linkSIWE(r,n);return Yt(s,st,Bt,e)},async linkThirdParty(r,n,s){const i=await t.linkThirdParty(r,n,s);return Yt(i,st,Bt,e)},async loginEmailPassword(r,n,s){const i=await t.loginEmailPassword(r,n,s);return Yt(i,st,Bt,e)},async loginOIDC(r,n,s){const i=await t.loginOIDC(r,n,s);return Yt(i,st,Bt,e)},async loginWithIdToken(r,n){const s=await t.loginWithIdToken(r,n);return Yt(s,st,Bt,e)},async logout(r,n){const s=await t.logout(r,n);return Yt(s,st,Bt,e)},async me(r){const n=await t.me(r);return Yt(n,st,Bt,e)},async poolOAuth(r,n){const s=await t.poolOAuth(r,n);return Yt(s,st,Bt,e)},async refresh(r,n){const s=await t.refresh(r,n);return Yt(s,st,Bt,e)},async registerGuest(r,n){const s=await t.registerGuest(r,n);return Yt(s,st,Bt,e)},async requestEmailVerification(r,n){const s=await t.requestEmailVerification(r,n);return Yt(s,st,Bt,e)},async requestResetPassword(r,n){const s=await t.requestResetPassword(r,n);return Yt(s,st,Bt,e)},async resetPassword(r,n){const s=await t.resetPassword(r,n);return Yt(s,st,Bt,e)},async signupEmailPassword(r,n,s){const i=await t.signupEmailPassword(r,n,s);return Yt(i,st,Bt,e)},async thirdParty(r,n,s){const i=await t.thirdParty(r,n,s);return Yt(i,st,Bt,e)},async unlinkEmail(r,n){const s=await t.unlinkEmail(r,n);return Yt(s,st,Bt,e)},async unlinkOAuth(r,n){const s=await t.unlinkOAuth(r,n);return Yt(s,st,Bt,e)},async unlinkSIWE(r,n){const s=await t.unlinkSIWE(r,n);return Yt(s,st,Bt,e)},async verifyEmail(r,n){const s=await t.verifyEmail(r,n);return Yt(s,st,Bt,e)},async verifyOAuthToken(r,n){const s=await t.verifyOAuthToken(r,n);return Yt(s,st,Bt,e)}}};let er=class extends Ft{authenticateSIWE(e,t){return Zt(this.configuration).authenticateSIWE(e.sIWEAuthenticateRequest,t).then(e=>e(this.axios,this.basePath))}getJwks(e,t){return Zt(this.configuration).getJwks(e.publishableKey,t).then(e=>e(this.axios,this.basePath))}initOAuth(e,t){return Zt(this.configuration).initOAuth(e.oAuthInitRequest,e.xGame,t).then(e=>e(this.axios,this.basePath))}initSIWE(e,t){return Zt(this.configuration).initSIWE(e.sIWERequest,e.xGame,t).then(e=>e(this.axios,this.basePath))}linkEmail(e,t){return Zt(this.configuration).linkEmail(e.loginRequest,e.xGame,t).then(e=>e(this.axios,this.basePath))}linkOAuth(e,t){return Zt(this.configuration).linkOAuth(e.oAuthInitRequest,e.xGame,t).then(e=>e(this.axios,this.basePath))}linkSIWE(e,t){return Zt(this.configuration).linkSIWE(e.sIWEAuthenticateRequest,t).then(e=>e(this.axios,this.basePath))}linkThirdParty(e,t){return Zt(this.configuration).linkThirdParty(e.thirdPartyLinkRequest,e.xGame,t).then(e=>e(this.axios,this.basePath))}loginEmailPassword(e,t){return Zt(this.configuration).loginEmailPassword(e.loginRequest,e.xGame,t).then(e=>e(this.axios,this.basePath))}loginOIDC(e,t){return Zt(this.configuration).loginOIDC(e.loginOIDCRequest,e.xGame,t).then(e=>e(this.axios,this.basePath))}loginWithIdToken(e,t){return Zt(this.configuration).loginWithIdToken(e.loginWithIdTokenRequest,t).then(e=>e(this.axios,this.basePath))}logout(e,t){return Zt(this.configuration).logout(e.logoutRequest,t).then(e=>e(this.axios,this.basePath))}me(e){return Zt(this.configuration).me(e).then(e=>e(this.axios,this.basePath))}poolOAuth(e,t){return Zt(this.configuration).poolOAuth(e.key,t).then(e=>e(this.axios,this.basePath))}refresh(e,t){return Zt(this.configuration).refresh(e.refreshTokenRequest,t).then(e=>e(this.axios,this.basePath))}registerGuest(e={},t){return Zt(this.configuration).registerGuest(e.xGame,t).then(e=>e(this.axios,this.basePath))}requestEmailVerification(e,t){return Zt(this.configuration).requestEmailVerification(e.requestVerifyEmailRequest,t).then(e=>e(this.axios,this.basePath))}requestResetPassword(e,t){return Zt(this.configuration).requestResetPassword(e.requestResetPasswordRequest,t).then(e=>e(this.axios,this.basePath))}resetPassword(e,t){return Zt(this.configuration).resetPassword(e.resetPasswordRequest,t).then(e=>e(this.axios,this.basePath))}signupEmailPassword(e,t){return Zt(this.configuration).signupEmailPassword(e.signupRequest,e.xGame,t).then(e=>e(this.axios,this.basePath))}thirdParty(e,t){return Zt(this.configuration).thirdParty(e.thirdPartyOAuthRequest,e.xGame,t).then(e=>e(this.axios,this.basePath))}unlinkEmail(e,t){return Zt(this.configuration).unlinkEmail(e.unlinkEmailRequest,t).then(e=>e(this.axios,this.basePath))}unlinkOAuth(e,t){return Zt(this.configuration).unlinkOAuth(e.unlinkOAuthRequest,t).then(e=>e(this.axios,this.basePath))}unlinkSIWE(e,t){return Zt(this.configuration).unlinkSIWE(e.sIWERequest,t).then(e=>e(this.axios,this.basePath))}verifyEmail(e,t){return Zt(this.configuration).verifyEmail(e.verifyEmailRequest,t).then(e=>e(this.axios,this.basePath))}verifyOAuthToken(e,t){return Zt(this.configuration).verifyOAuthToken(e.authenticateOAuthRequest,t).then(e=>e(this.axios,this.basePath))}};const tr=function(e){const t=function(e){return{accountInfoPost:async(t,r={})=>{Gt("accountInfoPost","accountInfoPostRequest",t);const n=new URL("/account-info",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Vt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},changeEmailPost:async(t,r={})=>{Gt("changeEmailPost","changeEmailPostRequest",t);const n=new URL("/change-email",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Vt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},changePasswordPost:async(t,r={})=>{Gt("changePasswordPost","changePasswordPostRequest",t);const n=new URL("/change-password",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Vt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},checkVerificationOtp:async(t,r={})=>{Gt("checkVerificationOtp","checkVerificationOtpRequest",t);const n=new URL("/email-otp/check-verification-otp",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Vt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},emailOtpResetPasswordPost:async(t,r={})=>{Gt("emailOtpResetPasswordPost","emailOtpResetPasswordPostRequest",t);const n=new URL("/email-otp/reset-password",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Vt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},emailOtpSendVerificationOtpPost:async(t,r={})=>{Gt("emailOtpSendVerificationOtpPost","emailOtpSendVerificationOtpPostRequest",t);const n=new URL("/email-otp/send-verification-otp",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Vt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},emailOtpVerifyEmailPost:async(t,r={})=>{Gt("emailOtpVerifyEmailPost","emailOtpVerifyEmailPostRequest",t);const n=new URL("/email-otp/verify-email",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Vt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},forgetPasswordEmailOtpPost:async(t,r={})=>{Gt("forgetPasswordEmailOtpPost","forgetPasswordEmailOtpPostRequest",t);const n=new URL("/forget-password/email-otp",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Vt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},forgetPasswordPost:async(t,r={})=>{Gt("forgetPasswordPost","forgetPasswordPostRequest",t);const n=new URL("/forget-password",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Vt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},getAccessTokenPost:async(t,r={})=>{Gt("getAccessTokenPost","refreshTokenPostRequest",t);const n=new URL("/get-access-token",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Vt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},getSessionGet:async(t,r,n={})=>{const s=new URL("/get-session",jt);let i;e&&(i=e.baseOptions);const o={method:"GET",...i,...n},a={},c={};void 0!==r&&(c.disableCookieCache=r),null!=t&&(a["x-project-key"]=String(t)),Vt(s,c);let h=i&&i.headers?i.headers:{};return o.headers={...a,...h,...n.headers},{url:Wt(s),options:o}},linkSiweListWalletsGet:async(t={})=>{const r=new URL("/link-siwe/list-wallets",jt);let n;e&&(n=e.baseOptions);const s={method:"GET",...n,...t};Vt(r,{});let i=n&&n.headers?n.headers:{};return s.headers={...i,...t.headers},{url:Wt(r),options:s}},linkSiweNoncePost:async(t,r={})=>{Gt("linkSiweNoncePost","siweNoncePostRequest",t);const n=new URL("/link-siwe/nonce",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Vt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},linkSiweUnlinkPost:async(t,r={})=>{Gt("linkSiweUnlinkPost","linkSiweUnlinkPostRequest",t);const n=new URL("/link-siwe/unlink",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Vt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},linkSiweVerifyPost:async(t,r={})=>{Gt("linkSiweVerifyPost","siweVerifyPostRequest",t);const n=new URL("/link-siwe/verify",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Vt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},linkSocialPost:async(t,r={})=>{Gt("linkSocialPost","linkSocialPostRequest",t);const n=new URL("/link-social",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Vt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},listAccountsGet:async(t={})=>{const r=new URL("/list-accounts",jt);let n;e&&(n=e.baseOptions);const s={method:"GET",...n,...t};Vt(r,{});let i=n&&n.headers?n.headers:{};return s.headers={...i,...t.headers},{url:Wt(r),options:s}},listSessionsGet:async(t={})=>{const r=new URL("/list-sessions",jt);let n;e&&(n=e.baseOptions);const s={method:"GET",...n,...t};Vt(r,{});let i=n&&n.headers?n.headers:{};return s.headers={...i,...t.headers},{url:Wt(r),options:s}},phoneNumberForgetPasswordPost:async(t,r={})=>{Gt("phoneNumberForgetPasswordPost","phoneNumberForgetPasswordPostRequest",t);const n=new URL("/phone-number/forget-password",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Vt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},phoneNumberRequestPasswordResetPost:async(t,r={})=>{Gt("phoneNumberRequestPasswordResetPost","phoneNumberRequestPasswordResetPostRequest",t);const n=new URL("/phone-number/request-password-reset",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Vt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},phoneNumberResetPasswordPost:async(t,r={})=>{Gt("phoneNumberResetPasswordPost","phoneNumberResetPasswordPostRequest",t);const n=new URL("/phone-number/reset-password",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Vt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},phoneNumberSendOtpPost:async(t,r={})=>{Gt("phoneNumberSendOtpPost","phoneNumberSendOtpPostRequest",t);const n=new URL("/phone-number/send-otp",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Vt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},phoneNumberVerifyPost:async(t,r={})=>{Gt("phoneNumberVerifyPost","phoneNumberVerifyPostRequest",t);const n=new URL("/phone-number/verify",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Vt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},refreshTokenPost:async(t,r={})=>{Gt("refreshTokenPost","refreshTokenPostRequest",t);const n=new URL("/refresh-token",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Vt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},requestPasswordResetPost:async(t,r={})=>{Gt("requestPasswordResetPost","forgetPasswordPostRequest",t);const n=new URL("/request-password-reset",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Vt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},resetPasswordPost:async(t,r={})=>{Gt("resetPasswordPost","resetPasswordPostRequest",t);const n=new URL("/reset-password",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Vt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},resetPasswordTokenGet:async(t,r,n={})=>{Gt("resetPasswordTokenGet","token",t);const s="/reset-password/{token}".replace("{token}",encodeURIComponent(String(t))),i=new URL(s,jt);let o;e&&(o=e.baseOptions);const a={method:"GET",...o,...n},c={};void 0!==r&&(c.callbackURL=r),Vt(i,c);let h=o&&o.headers?o.headers:{};return a.headers={...h,...n.headers},{url:Wt(i),options:a}},revokeOtherSessionsPost:async(t,r={})=>{const n=new URL("/revoke-other-sessions",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Vt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},revokeSessionPost:async(t,r={})=>{const n=new URL("/revoke-session",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Vt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},revokeSessionsPost:async(t,r={})=>{const n=new URL("/revoke-sessions",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Vt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},sendVerificationEmailPost:async(t,r={})=>{const n=new URL("/send-verification-email",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Vt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},signInAnonymousPost:async(t={})=>{const r=new URL("/sign-in/anonymous",jt);let n;e&&(n=e.baseOptions);const s={method:"POST",...n,...t};Vt(r,{});let i=n&&n.headers?n.headers:{};return s.headers={...i,...t.headers},{url:Wt(r),options:s}},signInEmailOtpPost:async(t,r={})=>{Gt("signInEmailOtpPost","signInEmailOtpPostRequest",t);const n=new URL("/sign-in/email-otp",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Vt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},signInEmailPost:async(t,r={})=>{Gt("signInEmailPost","signInEmailPostRequest",t);const n=new URL("/sign-in/email",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Vt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},signInPhoneNumberPost:async(t,r={})=>{Gt("signInPhoneNumberPost","signInPhoneNumberPostRequest",t);const n=new URL("/sign-in/phone-number",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Vt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},signOutPost:async(t,r={})=>{const n=new URL("/sign-out",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Vt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},signUpEmailPost:async(t,r={})=>{const n=new URL("/sign-up/email",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Vt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},siweNoncePost:async(t,r={})=>{Gt("siweNoncePost","siweNoncePostRequest",t);const n=new URL("/siwe/nonce",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Vt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},siweVerifyPost:async(t,r={})=>{Gt("siweVerifyPost","siweVerifyPostRequest",t);const n=new URL("/siwe/verify",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Vt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},socialSignIn:async(t,r={})=>{Gt("socialSignIn","socialSignInRequest",t);const n=new URL("/sign-in/social",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Vt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},unlinkAccountPost:async(t,r={})=>{Gt("unlinkAccountPost","unlinkAccountPostRequest",t);const n=new URL("/unlink-account",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Vt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},verifyEmailGet:async(t,r,n={})=>{Gt("verifyEmailGet","token",t);const s=new URL("/verify-email",jt);let i;e&&(i=e.baseOptions);const o={method:"GET",...i,...n},a={};void 0!==t&&(a.token=t),void 0!==r&&(a.callbackURL=r),Vt(s,a);let c=i&&i.headers?i.headers:{};return o.headers={...c,...n.headers},{url:Wt(s),options:o}}}}(e);return{async accountInfoPost(r,n){const s=await t.accountInfoPost(r,n);return Yt(s,st,Bt,e)},async changeEmailPost(r,n){const s=await t.changeEmailPost(r,n);return Yt(s,st,Bt,e)},async changePasswordPost(r,n){const s=await t.changePasswordPost(r,n);return Yt(s,st,Bt,e)},async checkVerificationOtp(r,n){const s=await t.checkVerificationOtp(r,n);return Yt(s,st,Bt,e)},async emailOtpResetPasswordPost(r,n){const s=await t.emailOtpResetPasswordPost(r,n);return Yt(s,st,Bt,e)},async emailOtpSendVerificationOtpPost(r,n){const s=await t.emailOtpSendVerificationOtpPost(r,n);return Yt(s,st,Bt,e)},async emailOtpVerifyEmailPost(r,n){const s=await t.emailOtpVerifyEmailPost(r,n);return Yt(s,st,Bt,e)},async forgetPasswordEmailOtpPost(r,n){const s=await t.forgetPasswordEmailOtpPost(r,n);return Yt(s,st,Bt,e)},async forgetPasswordPost(r,n){const s=await t.forgetPasswordPost(r,n);return Yt(s,st,Bt,e)},async getAccessTokenPost(r,n){const s=await t.getAccessTokenPost(r,n);return Yt(s,st,Bt,e)},async getSessionGet(r,n,s){const i=await t.getSessionGet(r,n,s);return Yt(i,st,Bt,e)},async linkSiweListWalletsGet(r){const n=await t.linkSiweListWalletsGet(r);return Yt(n,st,Bt,e)},async linkSiweNoncePost(r,n){const s=await t.linkSiweNoncePost(r,n);return Yt(s,st,Bt,e)},async linkSiweUnlinkPost(r,n){const s=await t.linkSiweUnlinkPost(r,n);return Yt(s,st,Bt,e)},async linkSiweVerifyPost(r,n){const s=await t.linkSiweVerifyPost(r,n);return Yt(s,st,Bt,e)},async linkSocialPost(r,n){const s=await t.linkSocialPost(r,n);return Yt(s,st,Bt,e)},async listAccountsGet(r){const n=await t.listAccountsGet(r);return Yt(n,st,Bt,e)},async listSessionsGet(r){const n=await t.listSessionsGet(r);return Yt(n,st,Bt,e)},async phoneNumberForgetPasswordPost(r,n){const s=await t.phoneNumberForgetPasswordPost(r,n);return Yt(s,st,Bt,e)},async phoneNumberRequestPasswordResetPost(r,n){const s=await t.phoneNumberRequestPasswordResetPost(r,n);return Yt(s,st,Bt,e)},async phoneNumberResetPasswordPost(r,n){const s=await t.phoneNumberResetPasswordPost(r,n);return Yt(s,st,Bt,e)},async phoneNumberSendOtpPost(r,n){const s=await t.phoneNumberSendOtpPost(r,n);return Yt(s,st,Bt,e)},async phoneNumberVerifyPost(r,n){const s=await t.phoneNumberVerifyPost(r,n);return Yt(s,st,Bt,e)},async refreshTokenPost(r,n){const s=await t.refreshTokenPost(r,n);return Yt(s,st,Bt,e)},async requestPasswordResetPost(r,n){const s=await t.requestPasswordResetPost(r,n);return Yt(s,st,Bt,e)},async resetPasswordPost(r,n){const s=await t.resetPasswordPost(r,n);return Yt(s,st,Bt,e)},async resetPasswordTokenGet(r,n,s){const i=await t.resetPasswordTokenGet(r,n,s);return Yt(i,st,Bt,e)},async revokeOtherSessionsPost(r,n){const s=await t.revokeOtherSessionsPost(r,n);return Yt(s,st,Bt,e)},async revokeSessionPost(r,n){const s=await t.revokeSessionPost(r,n);return Yt(s,st,Bt,e)},async revokeSessionsPost(r,n){const s=await t.revokeSessionsPost(r,n);return Yt(s,st,Bt,e)},async sendVerificationEmailPost(r,n){const s=await t.sendVerificationEmailPost(r,n);return Yt(s,st,Bt,e)},async signInAnonymousPost(r){const n=await t.signInAnonymousPost(r);return Yt(n,st,Bt,e)},async signInEmailOtpPost(r,n){const s=await t.signInEmailOtpPost(r,n);return Yt(s,st,Bt,e)},async signInEmailPost(r,n){const s=await t.signInEmailPost(r,n);return Yt(s,st,Bt,e)},async signInPhoneNumberPost(r,n){const s=await t.signInPhoneNumberPost(r,n);return Yt(s,st,Bt,e)},async signOutPost(r,n){const s=await t.signOutPost(r,n);return Yt(s,st,Bt,e)},async signUpEmailPost(r,n){const s=await t.signUpEmailPost(r,n);return Yt(s,st,Bt,e)},async siweNoncePost(r,n){const s=await t.siweNoncePost(r,n);return Yt(s,st,Bt,e)},async siweVerifyPost(r,n){const s=await t.siweVerifyPost(r,n);return Yt(s,st,Bt,e)},async socialSignIn(r,n){const s=await t.socialSignIn(r,n);return Yt(s,st,Bt,e)},async unlinkAccountPost(r,n){const s=await t.unlinkAccountPost(r,n);return Yt(s,st,Bt,e)},async verifyEmailGet(r,n,s){const i=await t.verifyEmailGet(r,n,s);return Yt(i,st,Bt,e)}}};let rr=class extends Ft{accountInfoPost(e,t){return tr(this.configuration).accountInfoPost(e.accountInfoPostRequest,t).then(e=>e(this.axios,this.basePath))}changeEmailPost(e,t){return tr(this.configuration).changeEmailPost(e.changeEmailPostRequest,t).then(e=>e(this.axios,this.basePath))}changePasswordPost(e,t){return tr(this.configuration).changePasswordPost(e.changePasswordPostRequest,t).then(e=>e(this.axios,this.basePath))}checkVerificationOtp(e,t){return tr(this.configuration).checkVerificationOtp(e.checkVerificationOtpRequest,t).then(e=>e(this.axios,this.basePath))}emailOtpResetPasswordPost(e,t){return tr(this.configuration).emailOtpResetPasswordPost(e.emailOtpResetPasswordPostRequest,t).then(e=>e(this.axios,this.basePath))}emailOtpSendVerificationOtpPost(e,t){return tr(this.configuration).emailOtpSendVerificationOtpPost(e.emailOtpSendVerificationOtpPostRequest,t).then(e=>e(this.axios,this.basePath))}emailOtpVerifyEmailPost(e,t){return tr(this.configuration).emailOtpVerifyEmailPost(e.emailOtpVerifyEmailPostRequest,t).then(e=>e(this.axios,this.basePath))}forgetPasswordEmailOtpPost(e,t){return tr(this.configuration).forgetPasswordEmailOtpPost(e.forgetPasswordEmailOtpPostRequest,t).then(e=>e(this.axios,this.basePath))}forgetPasswordPost(e,t){return tr(this.configuration).forgetPasswordPost(e.forgetPasswordPostRequest,t).then(e=>e(this.axios,this.basePath))}getAccessTokenPost(e,t){return tr(this.configuration).getAccessTokenPost(e.refreshTokenPostRequest,t).then(e=>e(this.axios,this.basePath))}getSessionGet(e={},t){return tr(this.configuration).getSessionGet(e.xProjectKey,e.disableCookieCache,t).then(e=>e(this.axios,this.basePath))}linkSiweListWalletsGet(e){return tr(this.configuration).linkSiweListWalletsGet(e).then(e=>e(this.axios,this.basePath))}linkSiweNoncePost(e,t){return tr(this.configuration).linkSiweNoncePost(e.siweNoncePostRequest,t).then(e=>e(this.axios,this.basePath))}linkSiweUnlinkPost(e,t){return tr(this.configuration).linkSiweUnlinkPost(e.linkSiweUnlinkPostRequest,t).then(e=>e(this.axios,this.basePath))}linkSiweVerifyPost(e,t){return tr(this.configuration).linkSiweVerifyPost(e.siweVerifyPostRequest,t).then(e=>e(this.axios,this.basePath))}linkSocialPost(e,t){return tr(this.configuration).linkSocialPost(e.linkSocialPostRequest,t).then(e=>e(this.axios,this.basePath))}listAccountsGet(e){return tr(this.configuration).listAccountsGet(e).then(e=>e(this.axios,this.basePath))}listSessionsGet(e){return tr(this.configuration).listSessionsGet(e).then(e=>e(this.axios,this.basePath))}phoneNumberForgetPasswordPost(e,t){return tr(this.configuration).phoneNumberForgetPasswordPost(e.phoneNumberForgetPasswordPostRequest,t).then(e=>e(this.axios,this.basePath))}phoneNumberRequestPasswordResetPost(e,t){return tr(this.configuration).phoneNumberRequestPasswordResetPost(e.phoneNumberRequestPasswordResetPostRequest,t).then(e=>e(this.axios,this.basePath))}phoneNumberResetPasswordPost(e,t){return tr(this.configuration).phoneNumberResetPasswordPost(e.phoneNumberResetPasswordPostRequest,t).then(e=>e(this.axios,this.basePath))}phoneNumberSendOtpPost(e,t){return tr(this.configuration).phoneNumberSendOtpPost(e.phoneNumberSendOtpPostRequest,t).then(e=>e(this.axios,this.basePath))}phoneNumberVerifyPost(e,t){return tr(this.configuration).phoneNumberVerifyPost(e.phoneNumberVerifyPostRequest,t).then(e=>e(this.axios,this.basePath))}refreshTokenPost(e,t){return tr(this.configuration).refreshTokenPost(e.refreshTokenPostRequest,t).then(e=>e(this.axios,this.basePath))}requestPasswordResetPost(e,t){return tr(this.configuration).requestPasswordResetPost(e.forgetPasswordPostRequest,t).then(e=>e(this.axios,this.basePath))}resetPasswordPost(e,t){return tr(this.configuration).resetPasswordPost(e.resetPasswordPostRequest,t).then(e=>e(this.axios,this.basePath))}resetPasswordTokenGet(e,t){return tr(this.configuration).resetPasswordTokenGet(e.token,e.callbackURL,t).then(e=>e(this.axios,this.basePath))}revokeOtherSessionsPost(e={},t){return tr(this.configuration).revokeOtherSessionsPost(e.body,t).then(e=>e(this.axios,this.basePath))}revokeSessionPost(e={},t){return tr(this.configuration).revokeSessionPost(e.revokeSessionPostRequest,t).then(e=>e(this.axios,this.basePath))}revokeSessionsPost(e={},t){return tr(this.configuration).revokeSessionsPost(e.body,t).then(e=>e(this.axios,this.basePath))}sendVerificationEmailPost(e={},t){return tr(this.configuration).sendVerificationEmailPost(e.sendVerificationEmailPostRequest,t).then(e=>e(this.axios,this.basePath))}signInAnonymousPost(e){return tr(this.configuration).signInAnonymousPost(e).then(e=>e(this.axios,this.basePath))}signInEmailOtpPost(e,t){return tr(this.configuration).signInEmailOtpPost(e.signInEmailOtpPostRequest,t).then(e=>e(this.axios,this.basePath))}signInEmailPost(e,t){return tr(this.configuration).signInEmailPost(e.signInEmailPostRequest,t).then(e=>e(this.axios,this.basePath))}signInPhoneNumberPost(e,t){return tr(this.configuration).signInPhoneNumberPost(e.signInPhoneNumberPostRequest,t).then(e=>e(this.axios,this.basePath))}signOutPost(e={},t){return tr(this.configuration).signOutPost(e.body,t).then(e=>e(this.axios,this.basePath))}signUpEmailPost(e={},t){return tr(this.configuration).signUpEmailPost(e.signUpEmailPostRequest,t).then(e=>e(this.axios,this.basePath))}siweNoncePost(e,t){return tr(this.configuration).siweNoncePost(e.siweNoncePostRequest,t).then(e=>e(this.axios,this.basePath))}siweVerifyPost(e,t){return tr(this.configuration).siweVerifyPost(e.siweVerifyPostRequest,t).then(e=>e(this.axios,this.basePath))}socialSignIn(e,t){return tr(this.configuration).socialSignIn(e.socialSignInRequest,t).then(e=>e(this.axios,this.basePath))}unlinkAccountPost(e,t){return tr(this.configuration).unlinkAccountPost(e.unlinkAccountPostRequest,t).then(e=>e(this.axios,this.basePath))}verifyEmailGet(e,t){return tr(this.configuration).verifyEmailGet(e.token,e.callbackURL,t).then(e=>e(this.axios,this.basePath))}};const nr=function(e){const t=function(e){return{handleChainRpcRequest:async(t,r,n={})=>{Gt("handleChainRpcRequest","chainId",t),Gt("handleChainRpcRequest","jsonRpcRequest",r);const s="/rpc/{chainId}".replace("{chainId}",encodeURIComponent(String(t))),i=new URL(s,jt);let o;e&&(o=e.baseOptions);const a={method:"POST",...o,...n},c={};await Ht(c,e),c["Content-Type"]="application/json",Vt(i,{});let h=o&&o.headers?o.headers:{};return a.headers={...c,...h,...n.headers},a.data=Kt(r,a,e),{url:Wt(i),options:a}},handleRpcRequest:async(t,r={})=>{Gt("handleRpcRequest","jsonRpcRequest",t);const n=new URL("/rpc",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Vt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}}}}(e);return{async handleChainRpcRequest(r,n,s){const i=await t.handleChainRpcRequest(r,n,s);return Yt(i,st,Bt,e)},async handleRpcRequest(r,n){const s=await t.handleRpcRequest(r,n);return Yt(s,st,Bt,e)}}};class sr extends Ft{handleChainRpcRequest(e,t){return nr(this.configuration).handleChainRpcRequest(e.chainId,e.jsonRpcRequest,t).then(e=>e(this.axios,this.basePath))}handleRpcRequest(e,t){return nr(this.configuration).handleRpcRequest(e.jsonRpcRequest,t).then(e=>e(this.axios,this.basePath))}}const ir=function(e){const t=function(e){return{createSession:async(t,r,n={})=>{Gt("createSession","createSessionRequest",t);const s=new URL("/v1/sessions",jt);let i;e&&(i=e.baseOptions);const o={method:"POST",...i,...n},a={};await Ht(a,e),null!=r&&(a["X-Behalf-Of-Project"]=String(r)),a["Content-Type"]="application/json",Vt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...n.headers},o.data=Kt(t,o,e),{url:Wt(s),options:o}},getPlayerSessions:async(t,r,n,s,i,o={})=>{Gt("getPlayerSessions","player",t);const a=new URL("/v1/sessions",jt);let c;e&&(c=e.baseOptions);const h={method:"GET",...c,...o},u={},l={};await Ht(u,e),void 0!==r&&(l.limit=r),void 0!==n&&(l.skip=n),void 0!==s&&(l.order=s),void 0!==t&&(l.player=t),i&&(l.expand=i),Vt(a,l);let d=c&&c.headers?c.headers:{};return h.headers={...u,...d,...o.headers},{url:Wt(a),options:h}},getSession:async(t,r,n={})=>{Gt("getSession","id",t);const s="/v1/sessions/{id}".replace("{id}",encodeURIComponent(String(t))),i=new URL(s,jt);let o;e&&(o=e.baseOptions);const a={method:"GET",...o,...n},c={},h={};await Ht(c,e),r&&(h.expand=r),Vt(i,h);let u=o&&o.headers?o.headers:{};return a.headers={...c,...u,...n.headers},{url:Wt(i),options:a}},revokeSession:async(t,r,n={})=>{Gt("revokeSession","revokeSessionRequest",t);const s=new URL("/v1/sessions/revoke",jt);let i;e&&(i=e.baseOptions);const o={method:"POST",...i,...n},a={};await Ht(a,e),null!=r&&(a["X-Behalf-Of-Project"]=String(r)),a["Content-Type"]="application/json",Vt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...n.headers},o.data=Kt(t,o,e),{url:Wt(s),options:o}},signatureSession:async(t,r,n={})=>{Gt("signatureSession","id",t),Gt("signatureSession","signatureRequest",r);const s="/v1/sessions/{id}/signature".replace("{id}",encodeURIComponent(String(t))),i=new URL(s,jt);let o;e&&(o=e.baseOptions);const a={method:"POST",...o,...n},c={};await Ht(c,e),await Ht(c,e),c["Content-Type"]="application/json",Vt(i,{});let h=o&&o.headers?o.headers:{};return a.headers={...c,...h,...n.headers},a.data=Kt(r,a,e),{url:Wt(i),options:a}}}}(e);return{async createSession(r,n,s){const i=await t.createSession(r,n,s);return Yt(i,st,Bt,e)},async getPlayerSessions(r,n,s,i,o,a){const c=await t.getPlayerSessions(r,n,s,i,o,a);return Yt(c,st,Bt,e)},async getSession(r,n,s){const i=await t.getSession(r,n,s);return Yt(i,st,Bt,e)},async revokeSession(r,n,s){const i=await t.revokeSession(r,n,s);return Yt(i,st,Bt,e)},async signatureSession(r,n,s){const i=await t.signatureSession(r,n,s);return Yt(i,st,Bt,e)}}};class or extends Ft{createSession(e,t){return ir(this.configuration).createSession(e.createSessionRequest,e.xBehalfOfProject,t).then(e=>e(this.axios,this.basePath))}getPlayerSessions(e,t){return ir(this.configuration).getPlayerSessions(e.player,e.limit,e.skip,e.order,e.expand,t).then(e=>e(this.axios,this.basePath))}getSession(e,t){return ir(this.configuration).getSession(e.id,e.expand,t).then(e=>e(this.axios,this.basePath))}revokeSession(e,t){return ir(this.configuration).revokeSession(e.revokeSessionRequest,e.xBehalfOfProject,t).then(e=>e(this.axios,this.basePath))}signatureSession(e,t){return ir(this.configuration).signatureSession(e.id,e.signatureRequest,t).then(e=>e(this.axios,this.basePath))}}const ar=function(e){const t=function(e){return{createTransactionIntent:async(t,r,n={})=>{Gt("createTransactionIntent","createTransactionIntentRequest",t);const s=new URL("/v1/transaction_intents",jt);let i;e&&(i=e.baseOptions);const o={method:"POST",...i,...n},a={};await Ht(a,e),null!=r&&(a["X-Behalf-Of-Project"]=String(r)),a["Content-Type"]="application/json",Vt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...n.headers},o.data=Kt(t,o,e),{url:Wt(s),options:o}},estimateTransactionIntentCost:async(t,r={})=>{Gt("estimateTransactionIntentCost","createTransactionIntentRequest",t);const n=new URL("/v1/transaction_intents/estimate_gas_cost",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r},o={};await Ht(o,e),o["Content-Type"]="application/json",Vt(n,{});let a=s&&s.headers?s.headers:{};return i.headers={...o,...a,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},getTransactionIntent:async(t,r,n={})=>{Gt("getTransactionIntent","id",t);const s="/v1/transaction_intents/{id}".replace("{id}",encodeURIComponent(String(t))),i=new URL(s,jt);let o;e&&(o=e.baseOptions);const a={method:"GET",...o,...n},c={},h={};await Ht(c,e),r&&(h.expand=r),Vt(i,h);let u=o&&o.headers?o.headers:{};return a.headers={...c,...u,...n.headers},{url:Wt(i),options:a}},getTransactionIntents:async(t,r,n,s,i,o,a,c,h,u={})=>{const l=new URL("/v1/transaction_intents",jt);let d;e&&(d=e.baseOptions);const f={method:"GET",...d,...u},p={},m={};await Ht(p,e),void 0!==t&&(m.limit=t),void 0!==r&&(m.skip=r),void 0!==n&&(m.order=n),s&&(m.expand=s),void 0!==i&&(m.chainId=i),o&&(m.account=o),a&&(m.player=a),void 0!==c&&(m.status=c),h&&(m.policy=h),Vt(l,m);let g=d&&d.headers?d.headers:{};return f.headers={...p,...g,...u.headers},{url:Wt(l),options:f}},signature:async(t,r,n={})=>{Gt("signature","id",t),Gt("signature","signatureRequest",r);const s="/v1/transaction_intents/{id}/signature".replace("{id}",encodeURIComponent(String(t))),i=new URL(s,jt);let o;e&&(o=e.baseOptions);const a={method:"POST",...o,...n},c={};await Ht(c,e),await Ht(c,e),c["Content-Type"]="application/json",Vt(i,{});let h=o&&o.headers?o.headers:{};return a.headers={...c,...h,...n.headers},a.data=Kt(r,a,e),{url:Wt(i),options:a}}}}(e);return{async createTransactionIntent(r,n,s){const i=await t.createTransactionIntent(r,n,s);return Yt(i,st,Bt,e)},async estimateTransactionIntentCost(r,n){const s=await t.estimateTransactionIntentCost(r,n);return Yt(s,st,Bt,e)},async getTransactionIntent(r,n,s){const i=await t.getTransactionIntent(r,n,s);return Yt(i,st,Bt,e)},async getTransactionIntents(r,n,s,i,o,a,c,h,u,l){const d=await t.getTransactionIntents(r,n,s,i,o,a,c,h,u,l);return Yt(d,st,Bt,e)},async signature(r,n,s){const i=await t.signature(r,n,s);return Yt(i,st,Bt,e)}}};class cr extends Ft{createTransactionIntent(e,t){return ar(this.configuration).createTransactionIntent(e.createTransactionIntentRequest,e.xBehalfOfProject,t).then(e=>e(this.axios,this.basePath))}estimateTransactionIntentCost(e,t){return ar(this.configuration).estimateTransactionIntentCost(e.createTransactionIntentRequest,t).then(e=>e(this.axios,this.basePath))}getTransactionIntent(e,t){return ar(this.configuration).getTransactionIntent(e.id,e.expand,t).then(e=>e(this.axios,this.basePath))}getTransactionIntents(e={},t){return ar(this.configuration).getTransactionIntents(e.limit,e.skip,e.order,e.expand,e.chainId,e.account,e.player,e.status,e.policy,t).then(e=>e(this.axios,this.basePath))}signature(e,t){return ar(this.configuration).signature(e.id,e.signatureRequest,t).then(e=>e(this.axios,this.basePath))}}const hr=function(e){const t=function(e){return{deleteUser:async(t,r={})=>{Gt("deleteUser","id",t);const n="/v2/users/{id}".replace("{id}",encodeURIComponent(String(t))),s=new URL(n,jt);let i;e&&(i=e.baseOptions);const o={method:"DELETE",...i,...r},a={};await Ht(a,e),Vt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...r.headers},{url:Wt(s),options:o}},getAuthUser:async(t,r={})=>{Gt("getAuthUser","id",t);const n="/v2/users/{id}".replace("{id}",encodeURIComponent(String(t))),s=new URL(n,jt);let i;e&&(i=e.baseOptions);const o={method:"GET",...i,...r},a={};await Ht(a,e),Vt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...r.headers},{url:Wt(s),options:o}},getAuthUsers:async(t,r,n,s,i,o,a,c,h,u={})=>{const l=new URL("/v2/users",jt);let d;e&&(d=e.baseOptions);const f={method:"GET",...d,...u},p={},m={};await Ht(p,e),void 0!==t&&(m.limit=t),void 0!==r&&(m.skip=r),void 0!==n&&(m.order=n),void 0!==s&&(m.name=s),void 0!==i&&(m.externalUserId=i),void 0!==o&&(m.email=o),void 0!==a&&(m.phoneNumber=a),void 0!==c&&(m.authProviderId=c),void 0!==h&&(m.walletClientType=h),Vt(l,m);let g=d&&d.headers?d.headers:{};return f.headers={...p,...g,...u.headers},{url:Wt(l),options:f}},getUserWallet:async(t,r={})=>{Gt("getUserWallet","id",t);const n="/v2/users/{id}/wallet".replace("{id}",encodeURIComponent(String(t))),s=new URL(n,jt);let i;e&&(i=e.baseOptions);const o={method:"GET",...i,...r},a={};await Ht(a,e),Vt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...r.headers},{url:Wt(s),options:o}},meV2:async(t={})=>{const r=new URL("/iam/v2/me",jt);let n;e&&(n=e.baseOptions);const s={method:"GET",...n,...t};Vt(r,{});let i=n&&n.headers?n.headers:{};return s.headers={...i,...t.headers},{url:Wt(r),options:s}},pregenerateUserV2:async(t,r={})=>{Gt("pregenerateUserV2","pregenerateUserRequestV2",t);const n=new URL("/v2/users/pregenerate",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r},o={};await Ht(o,e),o["Content-Type"]="application/json",Vt(n,{});let a=s&&s.headers?s.headers:{};return i.headers={...o,...a,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}},thirdPartyV2:async(t,r={})=>{Gt("thirdPartyV2","thirdPartyOAuthRequest",t);const n=new URL("/iam/v2/user/third_party",jt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r},o={};await Ht(o,e),o["Content-Type"]="application/json",Vt(n,{});let a=s&&s.headers?s.headers:{};return i.headers={...o,...a,...r.headers},i.data=Kt(t,i,e),{url:Wt(n),options:i}}}}(e);return{async deleteUser(r,n){const s=await t.deleteUser(r,n);return Yt(s,st,Bt,e)},async getAuthUser(r,n){const s=await t.getAuthUser(r,n);return Yt(s,st,Bt,e)},async getAuthUsers(r,n,s,i,o,a,c,h,u,l){const d=await t.getAuthUsers(r,n,s,i,o,a,c,h,u,l);return Yt(d,st,Bt,e)},async getUserWallet(r,n){const s=await t.getUserWallet(r,n);return Yt(s,st,Bt,e)},async meV2(r){const n=await t.meV2(r);return Yt(n,st,Bt,e)},async pregenerateUserV2(r,n){const s=await t.pregenerateUserV2(r,n);return Yt(s,st,Bt,e)},async thirdPartyV2(r,n){const s=await t.thirdPartyV2(r,n);return Yt(s,st,Bt,e)}}};class ur extends Ft{deleteUser(e,t){return hr(this.configuration).deleteUser(e.id,t).then(e=>e(this.axios,this.basePath))}getAuthUser(e,t){return hr(this.configuration).getAuthUser(e.id,t).then(e=>e(this.axios,this.basePath))}getAuthUsers(e={},t){return hr(this.configuration).getAuthUsers(e.limit,e.skip,e.order,e.name,e.externalUserId,e.email,e.phoneNumber,e.authProviderId,e.walletClientType,t).then(e=>e(this.axios,this.basePath))}getUserWallet(e,t){return hr(this.configuration).getUserWallet(e.id,t).then(e=>e(this.axios,this.basePath))}meV2(e){return hr(this.configuration).meV2(e).then(e=>e(this.axios,this.basePath))}pregenerateUserV2(e,t){return hr(this.configuration).pregenerateUserV2(e.pregenerateUserRequestV2,t).then(e=>e(this.axios,this.basePath))}thirdPartyV2(e,t){return hr(this.configuration).thirdPartyV2(e.thirdPartyOAuthRequest,t).then(e=>e(this.axios,this.basePath))}}let lr=class{apiKey;username;password;accessToken;basePath;baseOptions;formDataCtor;constructor(e={}){this.apiKey=e.apiKey,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.baseOptions=e.baseOptions,this.formDataCtor=e.formDataCtor}isJsonMime(e){const t=new RegExp("^(application/json|[^;/ \t]+/[^;/ \t]+[+]json)[ \t]*(;.*)?$","i");return null!==e&&(t.test(e)||"application/json-patch+json"===e.toLowerCase())}};const dr=({basePath:e,accessToken:t,nativeAppIdentifier:r})=>{if(!e.trim())throw Error("basePath can not be empty");const n={basePath:e,accessToken:t,baseOptions:{headers:{...r&&{"x-native-app-identifier":r},Cookie:null},withCredentials:!1}};return new lr(n)};let fr=class{config;transactionIntentsApi;accountsApi;accountsV2Api;rpcApi;sessionsApi;authApi;userApi;authenticationApi;storage;onLogout;axiosInstance;constructor(e){this.storage=e.storage,this.onLogout=e.onLogout,this.axiosInstance=st.create(),Lt(this.axiosInstance,{retries:3,retryDelay:Lt.exponentialDelay,retryCondition:Lt.isRetryableError}),this.setupInterceptors();const t={basePath:e.basePath,accessToken:e.accessToken,nativeAppIdentifier:e.nativeAppIdentifier};this.config={backend:dr(t)};const r={basePath:`${e.basePath}/iam/v2/auth`,accessToken:e.accessToken,nativeAppIdentifier:e.nativeAppIdentifier},n=dr(r);this.authenticationApi=new er(this.config.backend,void 0,this.axiosInstance),this.authApi=new rr(n,void 0,this.axiosInstance),this.userApi=new ur(this.config.backend,void 0,this.axiosInstance),this.transactionIntentsApi=new cr(this.config.backend,void 0,this.axiosInstance),this.accountsApi=new Qt(this.config.backend,void 0,this.axiosInstance),this.accountsV2Api=new Xt(this.config.backend,void 0,this.axiosInstance),this.sessionsApi=new or(this.config.backend,void 0,this.axiosInstance),this.rpcApi=new sr(this.config.backend,void 0,this.axiosInstance)}setupInterceptors(){this.axiosInstance.interceptors.response.use(e=>e,async e=>(401===e.response?.status&&(await this.clearAuthenticationState(),this.emitLogoutEvent()),Promise.reject(e)))}async clearAuthenticationState(){if(this.storage)try{this.storage.remove("openfort.authentication"),this.storage.remove("openfort.account"),this.storage.remove("openfort.session"),this.storage.remove("openfort.pkce_state"),this.storage.remove("openfort.pkce_verifier")}catch(e){}}emitLogoutEvent(){if(this.onLogout)try{this.onLogout()}catch(e){}}};var pr;!function(e){e.AUTHENTICATION="openfort.authentication",e.CONFIGURATION="openfort.configuration",e.ACCOUNT="openfort.account",e.TEST="openfort.test",e.SESSION="openfort.session"}(pr||(pr={}));let mr=class e{type;token;userId;thirdPartyProvider;thirdPartyTokenType;constructor(e,t,r,n,s){this.type=e,this.token=t,this.userId=r,this.thirdPartyProvider=n,this.thirdPartyTokenType=s}static thirdPartyAuthToken;get provider(){return this.thirdPartyProvider}get tokenType(){return this.thirdPartyTokenType}save(t){const r="third_party"===this.type;r&&(e.thirdPartyAuthToken=this.token),t.save(pr.AUTHENTICATION,JSON.stringify({type:this.type,token:r?void 0:this.token,userId:this.userId,thirdPartyProvider:this.thirdPartyProvider,thirdPartyTokenType:this.thirdPartyTokenType}))}static clear(t){e.thirdPartyAuthToken="",t.remove(pr.AUTHENTICATION)}static async fromStorage(t){const r=await t.get(pr.AUTHENTICATION);if(!r)return null;try{const t=JSON.parse(r);return"third_party"===t.type&&(t.token=e.thirdPartyAuthToken),new e(t.type,t.token,t.userId||t.player,t.thirdPartyProvider,t.thirdPartyTokenType)}catch{return null}}};const gr={PROVIDER_DISABLED:"PROVIDER_DISABLED",INVALID_CREDENTIALS:"INVALID_EMAIL_OR_PASSWORD",INVALID_EMAIL:"INVALID_EMAIL",INVALID_PASSWORD:"INVALID_PASSWORD",INVALID_TOKEN:"INVALID_TOKEN",USER_NOT_FOUND:"USER_NOT_FOUND",USER_ALREADY_EXISTS:"USER_ALREADY_EXISTS",EMAIL_ALREADY_IN_USE:"USER_ALREADY_EXISTS",USER_EMAIL_NOT_FOUND:"USER_EMAIL_NOT_FOUND",FAILED_TO_CREATE_USER:"FAILED_TO_CREATE_USER",FAILED_TO_UPDATE_USER:"FAILED_TO_UPDATE_USER",PASSWORD_TOO_SHORT:"PASSWORD_TOO_SHORT",PASSWORD_TOO_LONG:"PASSWORD_TOO_LONG",EMAIL_NOT_VERIFIED:"EMAIL_NOT_VERIFIED",EMAIL_CANNOT_BE_UPDATED:"EMAIL_CAN_NOT_BE_UPDATED",SESSION_EXPIRED:"SESSION_EXPIRED",SESSION_CREATION_FAILED:"FAILED_TO_CREATE_SESSION",SESSION_RETRIEVAL_FAILED:"FAILED_TO_GET_SESSION",SOCIAL_ACCOUNT_ALREADY_LINKED:"SOCIAL_ACCOUNT_ALREADY_LINKED",OAUTH_PROVIDER_NOT_FOUND:"PROVIDER_NOT_FOUND",OAUTH_TOKEN_INVALID:"ID_TOKEN_NOT_SUPPORTED",OAUTH_USER_INFO_FAILED:"FAILED_TO_GET_USER_INFO",CANNOT_UNLINK_LAST_ACCOUNT:"FAILED_TO_UNLINK_LAST_ACCOUNT",ACCOUNT_NOT_FOUND:"ACCOUNT_NOT_FOUND",CREDENTIAL_ACCOUNT_NOT_FOUND:"CREDENTIAL_ACCOUNT_NOT_FOUND",USER_ALREADY_HAS_PASSWORD:"USER_ALREADY_HAS_PASSWORD",OTP_INVALID:"INVALID_OTP",OTP_EXPIRED:"OTP_EXPIRED",OTP_SEND_FAILED:"OTP_SEND_FAILED",INVALID_CONFIGURATION:"INVALID_CONFIGURATION",NOT_LOGGED_IN:"NOT_LOGGED_IN",ALREADY_LOGGED_IN:"ALREADY_LOGGED_IN",REFRESH_TOKEN_ERROR:"REFRESH_TOKEN_ERROR",MISSING_SIGNER:"MISSING_SIGNER",NOT_CONFIGURED:"NOT_CONFIGURED",MISSING_RECOVERY_PASSWORD:"MISSING_RECOVERY_PASSWORD",WRONG_RECOVERY_PASSWORD:"WRONG_RECOVERY_PASSWORD",MISSING_PASSKEY:"MISSING_PASSKEY",INCORRECT_PASSKEY:"INCORRECT_PASSKEY",MISSING_PROJECT_ENTROPY:"MISSING_PROJECT_ENTROPY",MISSING_USER_ENTROPY:"MISSING_USER_ENTROPY",INCORRECT_USER_ENTROPY:"INCORRECT_USER_ENTROPY",USER_NOT_AUTHORIZED:"USER_NOT_AUTHORIZED",OTP_REQUIRED:"OTP_REQUIRED",INTERNAL_ERROR:"INTERNAL_ERROR",REQUEST_ERROR:"REQUEST_ERROR",OPERATION_NOT_SUPPORTED:"OPERATION_NOT_SUPPORTED",LOGOUT_ERROR:"LOGOUT_ERROR",UNKNOWN_ERROR:"UNKNOWN_ERROR"},yr=gr,wr=gr;let vr=class e extends Error{error;error_description;constructor(t,r){super(r),this.name="OpenfortError",this.error=t,this.error_description=r,Object.setPrototypeOf(this,e.prototype)}static fromPayload({error:t,error_description:r,message:n,code:s}){let i,o;return"object"==typeof t&&null!==t?(i=t.code||"unknown_error",o=t.message||n||r||"An unknown error occurred"):(i=s||t||"unknown_error",o=r||n||"An unknown error occurred"),new e(i,o)}},Ar=class e extends vr{statusCode;constructor(t,r,n){super(t,r),this.statusCode=n,this.name="AuthenticationError",Object.setPrototypeOf(this,e.prototype)}},br=class e extends vr{audience;scope;constructor(t,r,n,s){super(t,r),this.audience=n,this.scope=s,this.name="SessionError",Object.setPrototypeOf(this,e.prototype)}},Er=class e extends vr{constructor(t){super("invalid_configuration",t),this.name="ConfigurationError",Object.setPrototypeOf(this,e.prototype)}},_r=class e extends vr{accountId;constructor(t,r,n){super(t,r),this.accountId=n,this.name="SignerError",Object.setPrototypeOf(this,e.prototype)}},Pr=class e extends vr{userId;constructor(t,r,n){super(t,r),this.userId=n,this.name="UserError",Object.setPrototypeOf(this,e.prototype)}},Sr=class e extends vr{constructor(t,r){super(t,r),this.name="OTPError",Object.setPrototypeOf(this,e.prototype)}},Ir=class e extends vr{provider;constructor(t,r,n){super(t,r),this.provider=n,this.name="OAuthError",Object.setPrototypeOf(this,e.prototype)}},kr=class e extends vr{constructor(t="User not authorized to access this ecosystem"){super("user_not_authorized",t),this.name="AuthorizationError",Object.setPrototypeOf(this,e.prototype)}},Rr=class e extends vr{recoveryMethod;constructor(t,r,n){super(t,r),this.recoveryMethod=n,this.name="RecoveryError",Object.setPrototypeOf(this,e.prototype)}},Tr=class e extends vr{statusCode;constructor(t,r){super("request_error",t),this.statusCode=r,this.name="RequestError",Object.setPrototypeOf(this,e.prototype)}};var Nr,Or,Cr,xr,Mr,Ur,Dr,Lr,Br,Fr,qr,jr,Gr;!function(e){e[e.NONE=0]="NONE",e[e.UNAUTHENTICATED=1]="UNAUTHENTICATED",e[e.EMBEDDED_SIGNER_NOT_CONFIGURED=2]="EMBEDDED_SIGNER_NOT_CONFIGURED",e[e.CREATING_ACCOUNT=3]="CREATING_ACCOUNT",e[e.READY=4]="READY"}(Nr||(Nr={})),function(e){e.ON_AUTH_INIT="onAuthInit",e.ON_AUTH_SUCCESS="onAuthSuccess",e.ON_OTP_REQUEST="onOtpRequest",e.ON_OTP_FAILURE="onOtpFailure",e.ON_AUTH_FAILURE="onAuthFailure",e.ON_LOGOUT="onLogout",e.ON_SWITCH_ACCOUNT="onSwitchAccount",e.ON_SIGNED_MESSAGE="onSignedMessage",e.ON_EMBEDDED_WALLET_CREATED="onEmbeddedWalletCreated",e.ON_EMBEDDED_WALLET_RECOVERED="onEmbeddedWalletRecovered"}(Or||(Or={})),function(e){e.PASSWORD="password",e.AUTOMATIC="automatic",e.PASSKEY="passkey"}(Cr||(Cr={})),function(e){e.ERC6551V1="ERC6551V1",e.UPGRADEABLE_V5="UpgradeableV5",e.UPGRADEABLE_V4="UpgradeableV4",e.UPGRADEABLE_V6="UpgradeableV6",e.ZKSYNC_UPGRADEABLE_V1="ZKSyncUpgradeableV1",e.ZKSYNC_UPGRADEABLE_V2="ZKSyncUpgradeableV2",e.SIMPLE="Simple",e.CALIBUR="Calibur"}(xr||(xr={})),function(e){e.OPENFORT="openfort",e.THIRD_PARTY="thirdParty"}(Mr||(Mr={})),function(e){e.ID_TOKEN="idToken",e.CUSTOM_TOKEN="customToken"}(Ur||(Ur={})),function(e){e.ACCELBYTE="accelbyte",e.FIREBASE="firebase",e.BETTER_AUTH="better-auth",e.LOOTLOCKER="lootlocker",e.PLAYFAB="playfab",e.SUPABASE="supabase",e.CUSTOM="custom",e.OIDC="oidc"}(Dr||(Dr={})),function(e){e.EMAIL="email",e.WALLET="wallet"}(Lr||(Lr={})),function(e){e.GOOGLE="google",e.TWITTER="twitter",e.APPLE="apple",e.FACEBOOK="facebook",e.DISCORD="discord",e.EPIC_GAMES="epic_games",e.LINE="line"}(Br||(Br={})),function(e){e.ACTION_VERIFY_EMAIL="verify_email"}(Fr||(Fr={})),function(e){e.EOA="Externally Owned Account",e.SMART_ACCOUNT="Smart Account",e.DELEGATED_ACCOUNT="Delegated Account"}(qr||(qr={})),function(e){e.EVM="EVM",e.SVM="SVM"}(jr||(jr={})),function(e){e.ASC="asc",e.DESC="desc"}(Gr||(Gr={}));let Hr=class{storage;authManager;validateAndRefreshToken;ensureInitialized;eventEmitter;constructor(e,t,r,n,s){this.storage=e,this.authManager=t,this.validateAndRefreshToken=r,this.ensureInitialized=n,this.eventEmitter=s}async logInWithEmailPassword({email:e,password:t}){if(await this.ensureInitialized(),await mr.fromStorage(this.storage))throw new br(yr.ALREADY_LOGGED_IN,"Already logged in");this.eventEmitter.emit(Or.ON_AUTH_INIT,{method:"email"});try{const r=await this.authManager.loginEmailPassword(e,t);return null===r?.token||(new mr("session",r.token,r.user?.id).save(this.storage),this.eventEmitter.emit(Or.ON_AUTH_SUCCESS,r)),r}catch(e){throw this.eventEmitter.emit(Or.ON_AUTH_FAILURE,e),e}}async signUpGuest(){if(await this.ensureInitialized(),await mr.fromStorage(this.storage))throw new br(yr.ALREADY_LOGGED_IN,"Already logged in");this.eventEmitter.emit(Or.ON_AUTH_INIT,{method:"guest"});try{const e=await this.authManager.registerGuest();return new mr("session",e.token,e.user?.id).save(this.storage),this.eventEmitter.emit(Or.ON_AUTH_SUCCESS,e),e}catch(e){throw this.eventEmitter.emit(Or.ON_AUTH_FAILURE,e),e}}async signUpWithEmailPassword({email:e,password:t,name:r,callbackURL:n}){if(await this.ensureInitialized(),await mr.fromStorage(this.storage))throw new br(yr.ALREADY_LOGGED_IN,"Already logged in");this.eventEmitter.emit(Or.ON_AUTH_INIT,{method:"email"});try{const s=r||e,i=await this.authManager.signupEmailPassword(e,t,s,n);return i instanceof Object&&"action"in i||(new mr("session",i.token,i.user?.id).save(this.storage),this.eventEmitter.emit(Or.ON_AUTH_SUCCESS,i)),i}catch(e){throw this.eventEmitter.emit(Or.ON_AUTH_FAILURE,e),e}}async initOAuth({provider:e,redirectTo:t,options:r}){if(await this.ensureInitialized(),await mr.fromStorage(this.storage))throw new br(yr.ALREADY_LOGGED_IN,"Already logged in");this.eventEmitter.emit(Or.ON_AUTH_INIT,{method:"oauth",provider:e});try{return await this.authManager.initOAuth(e,t,r)}catch(e){throw this.eventEmitter.emit(Or.ON_AUTH_FAILURE,e),e}}async logInWithIdToken({provider:e,token:t}){if(await this.ensureInitialized(),await mr.fromStorage(this.storage))throw new br(yr.ALREADY_LOGGED_IN,"Already logged in");this.eventEmitter.emit(Or.ON_AUTH_INIT,{method:"idToken",provider:e});try{const r=await this.authManager.loginWithIdToken(e,t);return new mr("session",r.token,r.user?.id).save(this.storage),this.eventEmitter.emit(Or.ON_AUTH_SUCCESS,r),r}catch(e){throw this.eventEmitter.emit(Or.ON_AUTH_FAILURE,e),e}}async storeCredentials({token:e,userId:t}){if(await this.ensureInitialized(),!t)throw new Er("User ID is required to store credentials");const r=encodeURIComponent(e);new mr("session",r,t).save(this.storage)}async logout(){const e=await mr.fromStorage(this.storage);if(e){try{"third_party"!==e.type&&await this.authManager.logout(e)}catch(e){}mr.clear(this.storage),this.eventEmitter.emit(Or.ON_LOGOUT)}}async requestEmailOtp({email:e}){await this.ensureInitialized();const t=await mr.fromStorage(this.storage);this.eventEmitter.emit(Or.ON_OTP_REQUEST,{method:"email"});const r=!!t&&(await this.authManager.getUser(t)).isAnonymous;try{await this.authManager.requestEmailOTP(e,t?.token&&!r?"email-verification":"sign-in")}catch(e){throw this.eventEmitter.emit(Or.ON_OTP_FAILURE,e),e}}async logInWithEmailOtp({email:e,otp:t}){if(await this.ensureInitialized(),await mr.fromStorage(this.storage))throw new br(yr.ALREADY_LOGGED_IN,"Already logged in");this.eventEmitter.emit(Or.ON_AUTH_INIT,{method:"email"});try{const r=await this.authManager.loginWithEmailOTP(e,t);return null===r?.token||(new mr("session",r.token,r.user?.id).save(this.storage),this.eventEmitter.emit(Or.ON_AUTH_SUCCESS,r)),r}catch(e){throw this.eventEmitter.emit(Or.ON_AUTH_FAILURE,e),e}}async requestPhoneOtp({phoneNumber:e}){await this.ensureInitialized(),this.eventEmitter.emit(Or.ON_OTP_REQUEST,{method:"phone",provider:"phone"});try{await this.authManager.requestPhoneOtp(e)}catch(e){throw this.eventEmitter.emit(Or.ON_OTP_FAILURE,e),e}}async linkPhoneOtp({phoneNumber:e,otp:t}){await this.ensureInitialized(),this.eventEmitter.emit(Or.ON_AUTH_INIT,{method:"phone"});const r=await mr.fromStorage(this.storage);if(!r)throw new br(yr.NOT_LOGGED_IN,"No authentication found");try{const n=await this.authManager.linkSMSOTP(e,t,r);return null===n?.token||(new mr("session",n.token,n.user?.id).save(this.storage),this.eventEmitter.emit(Or.ON_AUTH_SUCCESS,n)),n}catch(e){throw this.eventEmitter.emit(Or.ON_AUTH_FAILURE,e),e}}async logInWithPhoneOtp({phoneNumber:e,otp:t}){if(await this.ensureInitialized(),await mr.fromStorage(this.storage))throw new br(yr.ALREADY_LOGGED_IN,"Already logged in");this.eventEmitter.emit(Or.ON_AUTH_INIT,{method:"phone"});try{const r=await this.authManager.loginWithSMSOTP(e,t);return null===r?.token||(new mr("session",r.token,r.user?.id).save(this.storage),this.eventEmitter.emit(Or.ON_AUTH_SUCCESS,r)),r}catch(e){throw this.eventEmitter.emit(Or.ON_AUTH_FAILURE,e),e}}async requestResetPassword({email:e,redirectUrl:t}){await this.ensureInitialized(),await this.authManager.requestResetPassword(e,t)}async resetPassword({password:e,token:t}){await this.ensureInitialized(),await this.authManager.resetPassword(e,t)}async requestEmailVerification({email:e,redirectUrl:t}){await this.ensureInitialized(),await this.authManager.requestEmailVerification(e,t)}async verifyEmail({token:e,callbackURL:t}){await this.ensureInitialized(),await this.authManager.verifyEmail(e,t)}async verifyEmailOtp({email:e,otp:t}){await this.ensureInitialized(),await this.authManager.verifyEmailOtp(e,t)}async initLinkOAuth({provider:e,redirectTo:t,options:r}){await this.validateAndRefreshToken();const n=await mr.fromStorage(this.storage);if(!n)throw new br(yr.NOT_LOGGED_IN,"No authentication found");return this.eventEmitter.emit(Or.ON_AUTH_INIT,{method:"oauth",provider:e}),(await this.authManager.getUser(n)).isAnonymous?this.authManager.linkOAuthToAnonymous(n,e,t):await this.authManager.linkOAuth(n,e,t,r)}async unlinkOAuth({provider:e}){await this.validateAndRefreshToken();const t=await mr.fromStorage(this.storage);if(!t)throw new br(yr.NOT_LOGGED_IN,"No authentication found");return await this.authManager.unlinkOAuth(e,t)}async initSiwe({address:e}){return await this.ensureInitialized(),await this.authManager.initSIWE(e)}async initLinkSiwe({address:e}){await this.ensureInitialized();const t=await mr.fromStorage(this.storage);if(!t)throw new br(yr.NOT_LOGGED_IN,"No authentication found");return await this.authManager.linkSIWE(e,t)}async loginWithSiwe({signature:e,message:t,walletClientType:r,connectorType:n,address:s}){if(await this.ensureInitialized(),await mr.fromStorage(this.storage))throw new br(yr.ALREADY_LOGGED_IN,"Already logged in");this.eventEmitter.emit(Or.ON_AUTH_INIT,{method:"siwe"});try{const i=await this.authManager.authenticateSIWE(e,t,r,n,s);return new mr("session",i.token,i.user?.id).save(this.storage),this.eventEmitter.emit(Or.ON_AUTH_SUCCESS,i),i}catch(e){throw this.eventEmitter.emit(Or.ON_AUTH_FAILURE,e),e}}async linkWithSiwe({signature:e,message:t,walletClientType:r,connectorType:n,address:s,chainId:i}){await this.validateAndRefreshToken();const o=await mr.fromStorage(this.storage);if(!o)throw new br(yr.NOT_LOGGED_IN,"No authentication found");return await this.authManager.linkWallet(e,t,r,n,s,i,o)}async unlinkWallet({address:e,chainId:t}){await this.validateAndRefreshToken();const r=await mr.fromStorage(this.storage);if(!r)throw new br(yr.NOT_LOGGED_IN,"No authentication found");return await this.authManager.unlinkWallet(e,t,r)}async addEmail(e){await this.validateAndRefreshToken();const t=await mr.fromStorage(this.storage);if(!t)throw new br(yr.NOT_LOGGED_IN,"No authentication found");if((await this.authManager.getUser(t)).email)throw new Er("User already has an email");return await this.authManager.addEmail(e.email,e.callbackURL,t)}};var zr={};!function(e){var t=bt&&bt.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,s=0,i=t.length;s<i;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))};function r(e){return e[Math.floor(Math.random()*e.length)]}function n(e){return e.reduce(function(e,t){return e.length>t.length?e:t})}function s(e){return e.reduce(function(e,t){return e.length<t.length?e:t})}function i(n){void 0===n&&(n={}),"string"==typeof n&&(n={separator:n}),"boolean"==typeof n&&(n={capitalize:n});var s=n.separator,i=void 0===s?"":s,o=n.capitalize,a=void 0===o||o,c=n.adjectiveCount,h=void 0===c?1:c,u=n.addAdverb,l=void 0!==u&&u,d=t(t(t([],t([],Array(h),!0).map(function(t){return r(e.adjectives)}),!0),[r(e.nouns),r(e.verbs)],!1),l?[r(e.adverbs)]:[],!0);return a&&(d=d.map(function(e){return e.charAt(0).toUpperCase()+e.substr(1)})),d.join(i)}Object.defineProperty(e,"__esModule",{value:!0}),e.minLength=e.maxLength=e.poolSize=e.humanId=e.adverbs=e.verbs=e.nouns=e.adjectives=void 0,e.adjectives=["afraid","all","beige","better","big","blue","bold","brave","breezy","bright","brown","bumpy","busy","calm","chatty","chilly","chubby","clean","clear","clever","cold","common","cool","cozy","crisp","cuddly","curly","curvy","cute","cyan","dark","deep","dirty","dry","dull","eager","early","easy","eight","eighty","eleven","empty","every","fair","famous","fancy","fast","few","fiery","fifty","fine","five","flat","floppy","fluffy","forty","four","frank","free","fresh","fruity","full","funky","funny","fuzzy","gentle","giant","gold","good","goofy","great","green","grumpy","happy","heavy","hip","honest","hot","huge","humble","hungry","icy","itchy","jolly","khaki","kind","large","late","lazy","legal","lemon","light","little","long","loose","loud","lovely","lucky","major","many","metal","mighty","modern","moody","neat","new","nice","nine","ninety","odd","old","olive","open","orange","perky","petite","pink","plain","plenty","polite","pretty","proud","public","puny","purple","quick","quiet","rare","ready","real","red","rich","ripe","salty","seven","shaggy","shaky","sharp","shiny","short","shy","silent","silly","silver","six","sixty","slick","slimy","slow","small","smart","smooth","social","soft","solid","some","sour","sparkly","spicy","spotty","stale","strict","strong","sunny","sweet","swift","tall","tame","tangy","tasty","ten","tender","thick","thin","thirty","three","tidy","tiny","tired","tough","tricky","true","twelve","twenty","two","upset","vast","violet","wacky","warm","wet","whole","wicked","wide","wild","wise","witty","yellow","young","yummy"],e.nouns=["actors","ads","adults","aliens","animals","ants","apes","apples","areas","baboons","badgers","bags","balloons","bananas","banks","bars","baths","bats","beans","bears","beds","beers","bees","berries","bikes","birds","boats","bobcats","books","bottles","boxes","breads","brooms","buckets","bugs","buses","bushes","buttons","camels","cameras","candies","candles","canyons","carpets","carrots","cars","cases","cats","chairs","chefs","chicken","cities","clocks","cloths","clouds","clowns","clubs","coats","cobras","coins","colts","comics","cooks","corners","cougars","cows","crabs","crews","cups","cycles","dancers","days","deer","deserts","dingos","dodos","dogs","dolls","donkeys","donuts","doodles","doors","dots","dragons","drinks","dryers","ducks","eagles","ears","eels","eggs","emus","ends","experts","eyes","facts","falcons","fans","feet","files","flies","flowers","forks","foxes","friends","frogs","games","garlics","geckos","geese","ghosts","gifts","glasses","goats","grapes","groups","guests","hairs","hands","hats","heads","hoops","hornets","horses","hotels","hounds","houses","humans","icons","ideas","impalas","insects","islands","items","jars","jeans","jobs","jokes","keys","kids","kings","kiwis","knives","lamps","lands","laws","lemons","lies","lights","lilies","lines","lions","lizards","llamas","loops","mails","mammals","mangos","maps","masks","meals","melons","memes","meteors","mice","mirrors","moles","moments","monkeys","months","moons","moose","mugs","nails","needles","news","nights","numbers","olives","onions","oranges","otters","owls","pandas","pans","pants","papayas","papers","parents","parks","parrots","parts","paths","paws","peaches","pears","peas","pens","pets","phones","pianos","pigs","pillows","places","planes","planets","plants","plums","poems","poets","points","pots","pugs","pumas","queens","rabbits","radios","rats","ravens","readers","regions","results","rice","rings","rivers","rockets","rocks","rooms","roses","rules","sails","schools","seals","seas","sheep","shirts","shoes","showers","shrimps","sides","signs","singers","sites","sloths","snails","snakes","socks","spiders","spies","spoons","squids","stamps","stars","states","steaks","streets","suits","suns","swans","symbols","tables","taxes","taxis","teams","teeth","terms","things","ties","tigers","times","tips","tires","toes","tools","towns","toys","trains","trams","trees","turkeys","turtles","vans","views","walls","wasps","waves","ways","webs","weeks","windows","wings","wolves","wombats","words","worlds","worms","yaks","years","zebras","zoos"],e.verbs=["accept","act","add","admire","agree","allow","appear","argue","arrive","ask","attack","attend","bake","bathe","battle","beam","beg","begin","behave","bet","boil","bow","brake","brush","build","burn","buy","call","camp","care","carry","change","cheat","check","cheer","chew","clap","clean","cough","count","cover","crash","create","cross","cry","cut","dance","decide","deny","design","dig","divide","do","double","doubt","draw","dream","dress","drive","drop","drum","eat","end","enjoy","enter","exist","fail","fall","feel","fetch","film","find","fix","flash","float","flow","fly","fold","follow","fry","give","glow","go","grab","greet","grin","grow","guess","hammer","hang","happen","heal","hear","help","hide","hope","hug","hunt","invent","invite","itch","jam","jog","join","joke","judge","juggle","jump","kick","kiss","kneel","knock","know","laugh","lay","lead","learn","leave","lick","lie","like","listen","live","look","lose","love","make","march","marry","mate","matter","melt","mix","move","nail","notice","obey","occur","open","own","pay","peel","pick","play","poke","post","press","prove","pull","pump","punch","push","raise","read","refuse","relate","relax","remain","repair","repeat","reply","report","rescue","rest","retire","return","rhyme","ring","roll","rule","run","rush","say","scream","search","see","sell","send","serve","shake","share","shave","shine","shop","shout","show","sin","sing","sink","sip","sit","sleep","slide","smash","smell","smile","smoke","sneeze","sniff","sort","speak","spend","stand","stare","start","stay","stick","stop","strive","study","swim","switch","take","talk","tan","tap","taste","teach","tease","tell","thank","think","throw","tickle","tie","trade","train","travel","try","turn","type","unite","vanish","visit","wait","walk","warn","wash","watch","wave","wear","win","wink","wish","wonder","work","worry","write","yawn","yell"],e.adverbs=["bravely","brightly","busily","daily","freely","hungrily","joyously","knowingly","lazily","noisily","oddly","politely","quickly","quietly","rapidly","safely","sleepily","slowly","truly","yearly"],e.humanId=i,e.poolSize=function(t){void 0===t&&(t={});var r=t.adjectiveCount,n=void 0===r?1:r,s=t.addAdverb,i=void 0!==s&&s;return e.adjectives.length*n*e.nouns.length*e.verbs.length*(i?e.adverbs.length:1)},e.maxLength=function(t){void 0===t&&(t={});var r=t.adjectiveCount,s=void 0===r?1:r,i=t.addAdverb,o=void 0!==i&&i,a=t.separator,c=void 0===a?"":a;return n(e.adjectives).length*s+s*c.length+n(e.nouns).length+c.length+n(e.verbs).length+(o?n(e.adverbs).length+c.length:0)},e.minLength=function(t){void 0===t&&(t={});var r=t.adjectiveCount,n=void 0===r?1:r,i=t.addAdverb,o=void 0!==i&&i,a=t.separator,c=void 0===a?"":a;return s(e.adjectives).length*n+n*c.length+s(e.nouns).length+c.length+s(e.verbs).length+(o?s(e.adverbs).length+c.length:0)},e.default=i}(zr);const Vr="passkey_user_cancelled",Kr="passkey_creation_failed",Wr="passkey_assertion_failed",Yr="passkey_prf_not_supported",Jr="passkey_invalid_seed";let Qr=class e extends vr{constructor(t="User cancelled passkey operation"){super(Vr,t),this.name="PasskeyUserCancelledError",Object.setPrototypeOf(this,e.prototype)}},$r=class e extends vr{cause;constructor(t="Failed to create passkey",r){super(Kr,t),this.name="PasskeyCreationFailedError",this.cause=r,Object.setPrototypeOf(this,e.prototype)}},Xr=class e extends vr{constructor(t="PRF extension not supported on this device"){super(Yr,t),this.name="PasskeyPRFNotSupportedError",Object.setPrototypeOf(this,e.prototype)}},Zr=class e extends vr{cause;constructor(t="Failed to get passkey assertion",r){super(Wr,t),this.name="PasskeyAssertionFailedError",this.cause=r,Object.setPrototypeOf(this,e.prototype)}},en=class e extends vr{constructor(t="Passkey seed cannot be empty"){super(Jr,t),this.name="PasskeySeedInvalidError",Object.setPrototypeOf(this,e.prototype)}};function tn(e){const t=e instanceof Uint8Array?e:new Uint8Array(e);let r="";for(const e of t)r+=String.fromCharCode(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function rn(e){const t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r.buffer}let nn=class{validByteLengths=[16,24,32];rpId;rpName;timeoutMs;derivedKeyLengthBytes;constructor({rpId:e,rpName:t,timeoutMs:r,derivedKeyLengthBytes:n}={}){if(this.rpId=e,this.rpName=t,this.timeoutMs=r??6e4,this.derivedKeyLengthBytes=n??32,!this.validByteLengths.includes(this.derivedKeyLengthBytes))throw new Error(`Invalid key byte length ${this.derivedKeyLengthBytes}`)}static randomPasskeyName(){return zr.humanId({capitalize:!0,separator:" "})}getChallengeBytes(){return crypto.getRandomValues(new Uint8Array(32))}async deriveKeyFromAssertion(e){const t=e.getClientExtensionResults();if(!t)throw new Xr("Passkey fetch failed: no client extension results");const r=t.prf;if(!r||!r.results)throw new Xr("PRF extension not supported or missing results");const n=r.results.first,s=await crypto.subtle.importKey("raw",n,{name:"AES-CBC",length:this.derivedKeyLengthBytes},!0,["encrypt","decrypt"]);return crypto.subtle.exportKey("raw",s)}async createPasskey({id:e,displayName:t,seed:r}){if(!r||0===r.trim().length)throw new en;const n={challenge:this.getChallengeBytes(),rp:{id:this.rpId,name:this.rpName},user:{id:(new TextEncoder).encode(e),name:e,displayName:t},pubKeyCredParams:[{type:"public-key",alg:-7},{type:"public-key",alg:-257}],authenticatorSelection:{residentKey:"required",userVerification:"required"},extensions:{prf:{eval:{first:(new TextEncoder).encode(r)}}},timeout:this.timeoutMs,attestation:"direct"};let s,i;try{s=await navigator.credentials.create({publicKey:n})}catch(e){if(e instanceof Error&&"NotAllowedError"===e.name)throw new Qr;throw new $r(e instanceof Error?e.message:"Unknown error",e instanceof Error?e:void 0)}if(!s)throw new Qr;try{i=await this.deriveKeyFromAssertion(s)}catch(e){throw e instanceof Xr&&console.warn(`[Openfort] Passkey created but PRF extension failed. A passkey credential may exist on the device that cannot be used for wallet recovery. Credential ID: ${tn(s.rawId)}`),e}return{id:tn(s.rawId),displayName:t,key:tn(i)}}async deriveAndExportKey({id:e,seed:t}){if(!t||0===t.trim().length)throw new en;let r;try{r=await navigator.credentials.get({publicKey:{challenge:this.getChallengeBytes(),rpId:this.rpId,allowCredentials:[{id:rn(e),type:"public-key"}],userVerification:"required",extensions:{prf:{eval:{first:(new TextEncoder).encode(t)}}}}})}catch(e){if(e instanceof Error&&"NotAllowedError"===e.name)throw new Qr;throw new Zr(e instanceof Error?e.message:"Unknown error",e instanceof Error?e:void 0)}if(!r)throw new Qr;return tn(await this.deriveKeyFromAssertion(r))}};function sn(){if("undefined"!=typeof crypto&&crypto.randomUUID)return crypto.randomUUID();const e=new Uint8Array(16);return crypto.getRandomValues(e),e[6]=15&e[6]|64,e[8]=63&e[8]|128,[...e].map((e,t)=>{const r=e.toString(16).padStart(2,"0");return[4,6,8,10].includes(t)?`-${r}`:r}).join("")}function on(e){return`0x${e.toString(16)}`}function an(e){let t="";const r=e.startsWith("0x")?e.slice(2):e;for(let e=0;e<r.length;e+=2){const n=parseInt(r.substring(e,e+2),16);0!==n&&(t+=String.fromCharCode(n))}return t}let cn=class e{baseConfiguration;shieldConfiguration;thirdPartyAuth;shieldUrl;iframeUrl;backendUrl;storage;passkeyRpId;passkeyRpName;nativeAppIdentifier;debug;static instance=null;constructor({baseConfiguration:t,shieldConfiguration:r,overrides:n,thirdPartyAuth:s,debug:i}){this.shieldConfiguration=r,this.baseConfiguration=t,this.backendUrl=n?.backendUrl||"https://api.openfort.io",this.iframeUrl=n?.iframeUrl||"https://embed.openfort.io",this.iframeUrl=`${this.iframeUrl}/iframe/${this.baseConfiguration.publishableKey}`,this.debug=i,r?.debug&&(this.iframeUrl=`${this.iframeUrl}?debug=true`),this.shieldUrl=n?.shieldUrl||"https://shield.openfort.io",this.storage=n?.storage,this.thirdPartyAuth=s,this.passkeyRpId=r?.passkeyRpId,this.passkeyRpName=r?.passkeyRpName,this.nativeAppIdentifier=t.nativeAppIdentifier,n?.crypto?.digest&&n.crypto.digest,e.instance=this}static getInstance(){return e.instance}},hn=class e{constructor(e){this.id=e.id,this.chainType=e.chainType,this.address=e.address,this.accountType=e.accountType,this.chainId=e.chainId,this.createdAt=e.createdAt,this.implementationAddress=e.implementationAddress,this.implementationType=e.implementationType,this.factoryAddress=e.factoryAddress,this.recoveryMethod=e.recoveryMethod,this.recoveryMethodDetails=e.recoveryMethodDetails,this.salt=e.salt,this.ownerAddress=e.ownerAddress,this.type=e.type}id;chainType;address;accountType;chainId;ownerAddress;factoryAddress;implementationAddress;salt;createdAt;implementationType;recoveryMethod;recoveryMethodDetails;type;save(e){e.save(pr.ACCOUNT,JSON.stringify({id:this.id,chainType:this.chainType,address:this.address,accountType:this.accountType,chainId:this.chainId,ownerAddress:this.ownerAddress,createdAt:this.createdAt,implementationType:this.implementationType,factoryAddress:this.factoryAddress,implementationAddress:this.implementationAddress,salt:this.salt,recoveryMethod:this.recoveryMethod,recoveryMethodDetails:this.recoveryMethodDetails}))}static parseRecoveryMethod=e=>{switch(e){case"user":case Cr.PASSWORD:return Cr.PASSWORD;case"project":case Cr.AUTOMATIC:return Cr.AUTOMATIC;case"passkey":case Cr.PASSKEY:return Cr.PASSKEY;default:return}};static async fromStorage(t){const r=await t.get(pr.ACCOUNT);if(!r)return null;try{const t=JSON.parse(r);return new e(t)}catch{return null}}};const un="https://64a03e4967fb4dad3ecb914918c777b6@o4504593015242752.ingest.us.sentry.io/4509292415287296";let ln=class e{static sentryInstance;static queuedCalls=[];static baseTags;static set sentry(t){const r=t.getDsn();if(!r)throw new Error("Sentry DSN is not set");if(r.projectId!==un.split("https://")[1].split("/")[1]||r.host!==un.split("@")[1].split("/")[0]||r.publicKey!==un.split("@")[0].split("https://")[1])throw new Error("Sentry DSN is not valid");t.captureAxiosError=(r,n,s,i)=>{if(n instanceof ot){if(400===n.response?.status||401===n.response?.status)return;n.name=r,t.captureException(n,{...s,captureContext:{...s?.captureContext,extra:{errorResponseData:n.response?.data,errorStatus:n.response?.status,errorHeaders:n.response?.headers,errorRequest:n.request},tags:{...e.baseTags,method:r}}})}else t.captureException(n,s,i)},t.captureError=(r,n,s,i)=>{const o=n.statusCode;if(400===o||401===o)return;const a=n,c=a.error,h=a.error_description,u=s?.captureContext;t.captureException(n,{...s,captureContext:{...u,extra:{...u?.extra,errorCode:c,errorDescription:h,errorClass:n.constructor.name,...a.statusCode&&{statusCode:a.statusCode},...a.audience&&{audience:a.audience},...a.scope&&{scope:a.scope},...a.accountId&&{accountId:a.accountId},...a.userId&&{userId:a.userId},...a.provider&&{provider:a.provider},...a.recoveryMethod&&{recoveryMethod:a.recoveryMethod}},tags:{...e.baseTags,context:r,errorClass:n.constructor.name}}})},e.sentryInstance=t}static get sentry(){return e.proxy}static async init({sentry:t,configuration:r}){if(t)return void(e.sentry=t);const n=await Promise.resolve().then(function(){return Rc});e.sentry=new n.BrowserClient({dsn:un,integrations:[],stackParser:n.defaultStackParser,transport:n.makeFetchTransport}),e.baseTags={projectId:r?.baseConfiguration.publishableKey??"",sdk:"@openfort/openfort-js",sdkVersion:"1.1.5"},e.processQueuedCalls()}static proxy=new Proxy({},{get:(t,r)=>e.sentryInstance&&"function"==typeof e.sentryInstance[r]?(...t)=>e.sentryInstance[r](...t):(...t)=>{e.queuedCalls.push({fn:r,args:t})}});static processQueuedCalls(){e.sentryInstance&&(e.queuedCalls.forEach(({fn:t,args:r})=>{"function"==typeof e.sentryInstance[t]&&e.sentryInstance[t](...r)}),e.queuedCalls=[])}};const{sentry:dn}=ln;async function fn(e,t={}){const{context:r,onError:n,skipSentry:s=!1}=t;try{return await e()}catch(e){let t;throw t=ft(e)?function(e){const t=e.response?.data,r=e.response?.status;let n,s;return t?.error&&"object"==typeof t.error?(n=t.error.code||yr.REQUEST_ERROR,s=t.error.message||e.message):t?.error&&"string"==typeof t.error?(n=t.code||t.error,s=t.error_description||t.message||e.message):t?.message||t?.code?(n=t.code||yr.REQUEST_ERROR,s=t.message||t.error_description||e.message):(n=yr.REQUEST_ERROR,s=e.message),function(e,t,r){return[yr.INVALID_CREDENTIALS,yr.INVALID_EMAIL,yr.INVALID_PASSWORD,yr.INVALID_TOKEN,yr.PROVIDER_DISABLED,yr.EMAIL_NOT_VERIFIED].includes(e)?new Ar(e,t,r):[yr.SESSION_EXPIRED,yr.SESSION_CREATION_FAILED,yr.SESSION_RETRIEVAL_FAILED,yr.NOT_LOGGED_IN,yr.ALREADY_LOGGED_IN,yr.REFRESH_TOKEN_ERROR].includes(e)?new br(e,t):[yr.SOCIAL_ACCOUNT_ALREADY_LINKED,yr.OAUTH_PROVIDER_NOT_FOUND,yr.OAUTH_TOKEN_INVALID,yr.OAUTH_USER_INFO_FAILED].includes(e)?new Ir(e,t):[yr.USER_NOT_FOUND,yr.USER_ALREADY_EXISTS,yr.EMAIL_ALREADY_IN_USE,yr.USER_EMAIL_NOT_FOUND,yr.FAILED_TO_CREATE_USER,yr.FAILED_TO_UPDATE_USER,yr.PASSWORD_TOO_SHORT,yr.PASSWORD_TOO_LONG,yr.USER_ALREADY_HAS_PASSWORD].includes(e)?new Pr(e,t):[yr.OTP_INVALID,yr.OTP_EXPIRED,yr.OTP_SEND_FAILED,yr.OTP_REQUIRED].includes(e)?new Sr(e,t):[yr.MISSING_SIGNER,yr.NOT_CONFIGURED].includes(e)?new _r(e,t):[yr.MISSING_RECOVERY_PASSWORD,yr.WRONG_RECOVERY_PASSWORD,yr.MISSING_PASSKEY,yr.INCORRECT_PASSKEY,yr.MISSING_PROJECT_ENTROPY,yr.MISSING_USER_ENTROPY,yr.INCORRECT_USER_ENTROPY].includes(e)?new Rr(e,t):e===yr.USER_NOT_AUTHORIZED||403===r?new kr(t):new vr(e,t)}(n,s,r)}(e):e instanceof vr?e:new Tr(e?.message||"An unexpected error occurred"),n?n(t):r&&!s&&dn.captureError(r,t),t}}function pn(...e){const t=cn.getInstance();t?.debug&&console.log(`${(new Date).toISOString()} [SDK]`,...e)}let mn=class{iframeManager;storage;backendApiClients;passkeyHandler;eventEmitter;constructor(e,t,r,n,s){this.iframeManager=e,this.storage=t,this.backendApiClients=r,this.passkeyHandler=n,this.eventEmitter=s}async createPasskey(e){const t=await this.passkeyHandler.createPasskey({id:nn.randomPasskeyName(),displayName:"Openfort - Embedded Wallet",seed:e});return{id:t.id,key:t.key}}async configure(e){const t=await mr.fromStorage(this.storage);if(!t)throw new br(yr.NOT_LOGGED_IN,"No access token found");const r=cn.getInstance();if(!r)throw new Er("Configuration not found");const n=await hn.fromStorage(this.storage);let s;if(n){const t={account:n.id,...e.entropy&&{entropy:{...e.entropy.recoveryPassword&&{recoveryPassword:e.entropy.recoveryPassword},...e.entropy.encryptionSession&&{encryptionSession:e.entropy.encryptionSession},..."passkey"===n.recoveryMethod&&{passkey:{id:n.recoveryMethodDetails?.passkeyId,env:n.recoveryMethodDetails?.passkeyEnv,key:await e.getPasskeyKeyFn(n.recoveryMethodDetails?.passkeyId??"")}}}}},r=await this.iframeManager.recover(t);s=r.account}else{const n=await this.backendApiClients.accountsV2Api.getAccountsV2({accountType:e.accountType,chainType:e.chainType},{headers:t.thirdPartyProvider?{authorization:`Bearer ${r.baseConfiguration.publishableKey}`,"x-player-token":t.token,"x-auth-provider":t.thirdPartyProvider,"x-token-type":t.thirdPartyTokenType}:{authorization:`Bearer ${t.token}`,"x-project-key":r.baseConfiguration.publishableKey}});if(0===n.data.data.length){const r=e.entropy?.passkey?await this.createPasskey(t.userId):void 0,n={accountType:e.accountType,chainType:e.chainType,chainId:e.chainId,...e.entropy&&{entropy:{...e.entropy.recoveryPassword&&{recoveryPassword:e.entropy.recoveryPassword},...e.entropy.encryptionSession&&{encryptionSession:e.entropy.encryptionSession},...e.entropy.passkey&&{passkey:r}}}},i=await this.iframeManager.create(n);s=i.account}else{const t=n.data.data,r=t.find(t=>t.chainId===e.chainId),i=r||t[0],o={account:i.id,...e.entropy&&{entropy:{...e.entropy.recoveryPassword&&{recoveryPassword:e.entropy.recoveryPassword},...e.entropy.encryptionSession&&{encryptionSession:e.entropy.encryptionSession},..."passkey"===i.recoveryMethod&&{passkey:{id:i.recoveryMethodDetails?.passkeyId,env:i.recoveryMethodDetails?.passkeyEnv,key:await e.getPasskeyKeyFn(i.recoveryMethodDetails?.passkeyId??"")}}}}},a=await this.iframeManager.recover(o);if(s=a.account,!r){const t=await this.iframeManager.switchChain(e.chainId);s=t.account}}}return fn(async()=>{const e=await this.backendApiClients.accountsV2Api.getAccountV2({id:s},{headers:t.thirdPartyProvider?{authorization:`Bearer ${r.baseConfiguration.publishableKey}`,"x-player-token":t.token,"x-auth-provider":t.thirdPartyProvider,"x-token-type":t.thirdPartyTokenType}:{authorization:`Bearer ${t.token}`,"x-project-key":r.baseConfiguration.publishableKey}}),n=new hn({chainType:e.data.chainType,id:e.data.id,address:e.data.address,ownerAddress:e.data.ownerAddress,accountType:e.data.accountType,createdAt:e.data.createdAt,implementationAddress:e.data.smartAccount?.implementationAddress,implementationType:e.data.smartAccount?.implementationType,chainId:e.data.chainId,salt:e.data.smartAccount?.salt,factoryAddress:e.data.smartAccount?.factoryAddress,recoveryMethod:hn.parseRecoveryMethod(e.data.recoveryMethod),recoveryMethodDetails:e.data.recoveryMethodDetails});return n.save(this.storage),this.eventEmitter.emit(Or.ON_SWITCH_ACCOUNT,e.data.address),n},{context:"configure"})}async sign(e,t,r,n){const s=await this.iframeManager.sign(e,t,r,n);return this.eventEmitter.emit(Or.ON_SIGNED_MESSAGE,{message:e,signature:s}),s}async export(){return await this.iframeManager.export()}async switchChain({chainId:e}){const t=await hn.fromStorage(this.storage);if(t?.accountType===qr.EOA)new hn({...t,chainId:e}).save(this.storage);else{const r=await this.iframeManager.switchChain(e);new hn({...t,id:r.account,chainId:e}).save(this.storage)}}async create(e){const t=await this.iframeManager.create(e),r=await mr.fromStorage(this.storage);if(!r)throw new br(yr.NOT_LOGGED_IN,"No access token found");const n=cn.getInstance();if(!n)throw new Er("Configuration not found");return fn(async()=>{const e=await this.backendApiClients.accountsV2Api.getAccountV2({id:t.account},{headers:r.thirdPartyProvider?{authorization:`Bearer ${n.baseConfiguration.publishableKey}`,"x-player-token":r.token,"x-auth-provider":r.thirdPartyProvider,"x-token-type":r.thirdPartyTokenType}:{authorization:`Bearer ${r.token}`,"x-project-key":n.baseConfiguration.publishableKey}}),s=new hn({chainType:e.data.chainType,id:e.data.id,address:e.data.address,ownerAddress:e.data.ownerAddress,accountType:e.data.accountType,createdAt:e.data.createdAt,implementationType:e.data.smartAccount?.implementationType,chainId:e.data.chainId,implementationAddress:e.data.smartAccount?.implementationAddress,salt:e.data.smartAccount?.salt,factoryAddress:e.data.smartAccount?.factoryAddress,recoveryMethod:hn.parseRecoveryMethod(e.data.recoveryMethod),recoveryMethodDetails:e.data.recoveryMethodDetails});return s.save(this.storage),this.eventEmitter.emit(Or.ON_SWITCH_ACCOUNT,e.data.address),s},{context:"create"})}async recover(e){const t=await this.iframeManager.recover(e),r=await mr.fromStorage(this.storage);if(!r)throw new br(yr.NOT_LOGGED_IN,"No access token found");const n=cn.getInstance();if(!n)throw new Er("Configuration not found");return fn(async()=>{const e=await this.backendApiClients.accountsV2Api.getAccountV2({id:t.account},{headers:r.thirdPartyProvider?{authorization:`Bearer ${n.baseConfiguration.publishableKey}`,"x-player-token":r.token,"x-auth-provider":r.thirdPartyProvider,"x-token-type":r.thirdPartyTokenType}:{authorization:`Bearer ${r.token}`,"x-project-key":n.baseConfiguration.publishableKey}}),s=new hn({chainType:e.data.chainType,id:e.data.id,address:e.data.address,ownerAddress:e.data.ownerAddress,accountType:e.data.accountType,createdAt:e.data.createdAt,implementationAddress:e.data.smartAccount?.implementationAddress,implementationType:e.data.smartAccount?.implementationType,chainId:e.data.chainId,salt:e.data.smartAccount?.salt,factoryAddress:e.data.smartAccount?.factoryAddress,recoveryMethod:hn.parseRecoveryMethod(e.data.recoveryMethod),recoveryMethodDetails:e.data.recoveryMethodDetails});return s.save(this.storage),this.eventEmitter.emit(Or.ON_SWITCH_ACCOUNT,e.data.address),s},{context:"recover"})}async setRecoveryMethod({recoveryMethod:e,recoveryPassword:t,encryptionSession:r,passkeyInfo:n}){await this.iframeManager.setRecoveryMethod(e,t,r,n?.passkeyKey,n?.passkeyId)}async disconnect(){await this.iframeManager.disconnect(),this.storage.remove(pr.ACCOUNT)}};const gn={1:"https://cloudflare-eth.com",10:"https://optimism-rpc.publicnode.com",56:"https://bsc.publicnode.com",97:"https://bsc-testnet.publicnode.com",137:"https://polygon-rpc.com",1946:"https://rpc.minato.soneium.org",3008:"https://kl1-testnet.kiooverse.xyz/rpc",4337:"https://build.onbeam.com/rpc",5611:"https://opbnb-testnet-rpc.bnbchain.org",8453:"https://mainnet.base.org",10143:"https://testnet-rpc.monad.xyz",13337:"https://build.onbeam.com/rpc/testnet",42161:"https://arb1.arbitrum.io/rpc",42170:"https://nova.arbitrum.io/rpc",43113:"https://api.avax-test.network/ext/bc/C/rpc",43114:"https://api.avax.network/ext/bc/C/rpc",80002:"https://polygon-amoy-bor-rpc.publicnode.com",84358:"https://subnets.avax.network/titan/mainnet/rpc",84532:"https://sepolia.base.org",421614:"https://sepolia-rollup.arbitrum.io/rpc",510525:"https://rpc.clankermon.com",510530:"https://open-loot.rpc.syndicate.io",510531:"https://open-loot.rpc.testnet.syndicate.io",7225878:"https://rpc.saakuru.network",7777777:"https://rpc.zora.energy",11155111:"https://ethereum-sepolia-rpc.publicnode.com",11155420:"https://optimism-sepolia-rpc.publicnode.com",28122024:"https://rpcv2-testnet.ancient8.gg",666666666:"https://rpc.degen.tips",888888888:"https://rpc.ancient8.gg",999999999:"https://sepolia.rpc.zora.energy"};var yn={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}function s(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function i(e,t,n,i,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new s(n,i||e,o),c=r?r+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function o(e,t){0===--e._eventsCount?e._events=new n:delete e._events[t]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),a.prototype.eventNames=function(){var e,n,s=[];if(0===this._eventsCount)return s;for(n in e=this._events)t.call(e,n)&&s.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(e)):s},a.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var s=0,i=n.length,o=new Array(i);s<i;s++)o[s]=n[s].fn;return o},a.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},a.prototype.emit=function(e,t,n,s,i,o){var a=r?r+e:e;if(!this._events[a])return!1;var c,h,u=this._events[a],l=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),l){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,s),!0;case 5:return u.fn.call(u.context,t,n,s,i),!0;case 6:return u.fn.call(u.context,t,n,s,i,o),!0}for(h=1,c=new Array(l-1);h<l;h++)c[h-1]=arguments[h];u.fn.apply(u.context,c)}else{var d,f=u.length;for(h=0;h<f;h++)switch(u[h].once&&this.removeListener(e,u[h].fn,void 0,!0),l){case 1:u[h].fn.call(u[h].context);break;case 2:u[h].fn.call(u[h].context,t);break;case 3:u[h].fn.call(u[h].context,t,n);break;case 4:u[h].fn.call(u[h].context,t,n,s);break;default:if(!c)for(d=1,c=new Array(l-1);d<l;d++)c[d-1]=arguments[d];u[h].fn.apply(u[h].context,c)}}return!0},a.prototype.on=function(e,t,r){return i(this,e,t,r,!1)},a.prototype.once=function(e,t,r){return i(this,e,t,r,!0)},a.prototype.removeListener=function(e,t,n,s){var i=r?r+e:e;if(!this._events[i])return this;if(!t)return o(this,i),this;var a=this._events[i];if(a.fn)a.fn!==t||s&&!a.once||n&&a.context!==n||o(this,i);else{for(var c=0,h=[],u=a.length;c<u;c++)(a[c].fn!==t||s&&!a[c].once||n&&a[c].context!==n)&&h.push(a[c]);h.length?this._events[i]=1===h.length?h[0]:h:o(this,i)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&o(this,t)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a}(yn);var wn=Et(yn.exports);let vn=class{emitter=new wn;on(e,t){return this.emitter.on(e,t),this}off(e,t){return this.emitter.off(e,t),this}emit(e,...t){return this.emitter.emit(e,...t)}once(e,t){return this.emitter.once(e,t),this}removeAllListeners(e){return this.emitter.removeAllListeners(e),this}listenerCount(e){return this.emitter.listenerCount(e)}listeners(e){return this.emitter.listeners(e)}};var An,bn;!function(e){e[e.UNAUTHORIZED=4100]="UNAUTHORIZED",e[e.UNSUPPORTED_METHOD=4200]="UNSUPPORTED_METHOD"}(An||(An={})),function(e){e[e.INVALID_PARAMS=-32602]="INVALID_PARAMS",e[e.INTERNAL_ERROR=-32603]="INTERNAL_ERROR",e[e.TRANSACTION_REJECTED=-32003]="TRANSACTION_REJECTED"}(bn||(bn={}));let En=class extends Error{message;code;constructor(e,t){super(t),this.message=t,this.code=e}};const _n=["chainId","chainName","nativeCurrency"],Pn=async({params:e,rpcProvider:t,storage:r})=>{if(!e||!Array.isArray(e)||0===e.length)throw new En(bn.INVALID_PARAMS,"Invalid parameters for wallet_addEthereumChain");const n=(e=>{if(!e||"object"!=typeof e)throw new En(bn.INVALID_PARAMS,"Invalid chain parameter: expected an object");if(!(e=>_n.every(t=>t in e))(e))throw new En(bn.INVALID_PARAMS,`Invalid chain parameter. The following properties are required: ${_n.join(", ")}`);if(!e.chainName||""===e.chainName.trim())throw new En(bn.INVALID_PARAMS,"chainName cannot be empty");if(!((t=e.nativeCurrency)&&"object"==typeof t&&"name"in t&&"symbol"in t&&"decimals"in t&&"string"==typeof t.name&&"string"==typeof t.symbol&&"number"==typeof t.decimals&&Number.isInteger(t.decimals)))throw new En(bn.INVALID_PARAMS,"Invalid nativeCurrency object");var t;if(0===e.rpcUrls?.length)throw new En(bn.INVALID_PARAMS,"At least one RPC URL must be provided");if(!/^0x[0-9a-fA-F]+$/.test(e.chainId))throw new En(bn.INVALID_PARAMS,"chainId must be a valid hex string");return{chainId:e.chainId,blockExplorerUrls:e.blockExplorerUrls||[],chainName:e.chainName,iconUrls:e.iconUrls||[],rpcUrls:e.rpcUrls||[],nativeCurrency:e.nativeCurrency}})(e[0]),s=parseInt(n.chainId,16),{chainId:i}=await t.detectNetwork();return s!==i&&null},Sn=async e=>{const{hash:t,signer:r,ownerAddress:n,factoryAddress:s,salt:i,chainId:o,address:a,implementationType:c}=e;let h=t;if([xr.UPGRADEABLE_V5,xr.UPGRADEABLE_V6,xr.ZKSYNC_UPGRADEABLE_V1,xr.ZKSYNC_UPGRADEABLE_V2].includes(c)){const e={name:"Openfort",version:"0.5",chainId:Number(o),verifyingContract:a},t={OpenfortMessage:[{name:"hashedMessage",type:"bytes32"}]},r={hashedMessage:h},{_TypedDataEncoder:n}=await Promise.resolve().then(function(){return yu});h=n.hash(e,t,r)}const u=await r.sign(h,!1,!1);if(s&&i&&[xr.UPGRADEABLE_V5,xr.UPGRADEABLE_V6].includes(c)){const{id:e}=await Promise.resolve().then(function(){return yu}),{defaultAbiCoder:t}=await Promise.resolve().then(function(){return Xu}),{hexConcat:r}=await Promise.resolve().then(function(){return cs}),o=r([e("createAccountWithNonce(address,bytes32,bool)").slice(0,10),t.encode(["address","bytes32","bool"],[n,i,!1])]);return r([t.encode(["address","bytes","bytes"],[s,o,u]),"0x6492649264926492649264926492649264926492649264926492649264926492"])}return u};function In(e){return{data:(()=>{if("token-allowance"===e.type)throw new En(bn.INVALID_PARAMS,"token-allowance policy is not supported with this account implementation.");if("gas-limit"===e.type)throw new En(bn.INVALID_PARAMS,"gas-limit policy is not supported with this account implementation.");if("rate-limit"===e.type)throw new En(bn.INVALID_PARAMS,"rate-limit policy is not supported with this account implementation.");return e.data})(),type:e.type.custom}}function kn(e){if("native-token-transfer"===e.type)throw new En(bn.INVALID_PARAMS,"native-token-transfer permission is not supported with this account implementation.");if("rate-limit"===e.type)throw new En(bn.INVALID_PARAMS,"rate-limit permission is not supported with this account implementation.");if("gas-limit"===e.type)throw new En(bn.INVALID_PARAMS,"gas-limit permission is not supported with this account implementation.");return{...e,policies:e?.policies?.map(In),required:e.required??!1,type:"string"==typeof e.type?e.type:e.type.custom}}function Rn(e){return{expiry:e.validUntil?Number(e.validUntil):0,grantedPermissions:e.whitelist?e.whitelist.map(t=>({type:"contract-call",data:{address:t,calls:[]},policies:[{data:{limit:e.limit},type:{custom:"usage-limit"}}]})):[],permissionsContext:e.id}}var Tn,Nn={exports:{}};
/**
   * [js-sha3]{@link https://github.com/emn178/js-sha3}
   *
   * @version 0.8.0
   * @author Chen, Yi-Cyuan [emn178@gmail.com]
   * @copyright Chen, Yi-Cyuan 2015-2018
   * @license MIT
   */Tn=Nn,function(){var e="input is invalid type",t="object"==typeof window,r=t?window:{};r.JS_SHA3_NO_WINDOW&&(t=!1);var n=!t&&"object"==typeof self;!r.JS_SHA3_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node?r=bt:n&&(r=self);var s=!r.JS_SHA3_NO_COMMON_JS&&Tn.exports,i=!r.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,o="0123456789abcdef".split(""),a=[4,1024,262144,67108864],c=[0,8,16,24],h=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],u=[224,256,384,512],l=[128,256],d=["hex","buffer","arrayBuffer","array","digest"],f={128:168,256:136};!r.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!i||!r.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});for(var p=function(e,t,r){return function(n){return new T(e,t,e).update(n)[r]()}},m=function(e,t,r){return function(n,s){return new T(e,t,s).update(n)[r]()}},g=function(e,t,r){return function(t,n,s,i){return b["cshake"+e].update(t,n,s,i)[r]()}},y=function(e,t,r){return function(t,n,s,i){return b["kmac"+e].update(t,n,s,i)[r]()}},w=function(e,t,r,n){for(var s=0;s<d.length;++s){var i=d[s];e[i]=t(r,n,i)}return e},v=function(e,t){var r=p(e,t,"hex");return r.create=function(){return new T(e,t,e)},r.update=function(e){return r.create().update(e)},w(r,p,e,t)},A=[{name:"keccak",padding:[1,256,65536,16777216],bits:u,createMethod:v},{name:"sha3",padding:[6,1536,393216,100663296],bits:u,createMethod:v},{name:"shake",padding:[31,7936,2031616,520093696],bits:l,createMethod:function(e,t){var r=m(e,t,"hex");return r.create=function(r){return new T(e,t,r)},r.update=function(e,t){return r.create(t).update(e)},w(r,m,e,t)}},{name:"cshake",padding:a,bits:l,createMethod:function(e,t){var r=f[e],n=g(e,0,"hex");return n.create=function(n,s,i){return s||i?new T(e,t,n).bytepad([s,i],r):b["shake"+e].create(n)},n.update=function(e,t,r,s){return n.create(t,r,s).update(e)},w(n,g,e,t)}},{name:"kmac",padding:a,bits:l,createMethod:function(e,t){var r=f[e],n=y(e,0,"hex");return n.create=function(n,s,i){return new N(e,t,s).bytepad(["KMAC",i],r).bytepad([n],r)},n.update=function(e,t,r,s){return n.create(e,r,s).update(t)},w(n,y,e,t)}}],b={},E=[],_=0;_<A.length;++_)for(var P=A[_],S=P.bits,I=0;I<S.length;++I){var k=P.name+"_"+S[I];if(E.push(k),b[k]=P.createMethod(S[I],P.padding),"sha3"!==P.name){var R=P.name+S[I];E.push(R),b[R]=b[k]}}function T(e,t,r){this.blocks=[],this.s=[],this.padding=t,this.outputBits=r,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(e<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=r>>5,this.extraBytes=(31&r)>>3;for(var n=0;n<50;++n)this.s[n]=0}function N(e,t,r){T.call(this,e,t,r)}T.prototype.update=function(t){if(this.finalized)throw new Error("finalize already called");var r,n=typeof t;if("string"!==n){if("object"!==n)throw new Error(e);if(null===t)throw new Error(e);if(i&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||i&&ArrayBuffer.isView(t)))throw new Error(e);r=!0}for(var s,o,a=this.blocks,h=this.byteCount,u=t.length,l=this.blockCount,d=0,f=this.s;d<u;){if(this.reset)for(this.reset=!1,a[0]=this.block,s=1;s<l+1;++s)a[s]=0;if(r)for(s=this.start;d<u&&s<h;++d)a[s>>2]|=t[d]<<c[3&s++];else for(s=this.start;d<u&&s<h;++d)(o=t.charCodeAt(d))<128?a[s>>2]|=o<<c[3&s++]:o<2048?(a[s>>2]|=(192|o>>6)<<c[3&s++],a[s>>2]|=(128|63&o)<<c[3&s++]):o<55296||o>=57344?(a[s>>2]|=(224|o>>12)<<c[3&s++],a[s>>2]|=(128|o>>6&63)<<c[3&s++],a[s>>2]|=(128|63&o)<<c[3&s++]):(o=65536+((1023&o)<<10|1023&t.charCodeAt(++d)),a[s>>2]|=(240|o>>18)<<c[3&s++],a[s>>2]|=(128|o>>12&63)<<c[3&s++],a[s>>2]|=(128|o>>6&63)<<c[3&s++],a[s>>2]|=(128|63&o)<<c[3&s++]);if(this.lastByteIndex=s,s>=h){for(this.start=s-h,this.block=a[l],s=0;s<l;++s)f[s]^=a[s];O(f),this.reset=!0}else this.start=s}return this},T.prototype.encode=function(e,t){var r=255&e,n=1,s=[r];for(r=255&(e>>=8);r>0;)s.unshift(r),r=255&(e>>=8),++n;return t?s.push(n):s.unshift(n),this.update(s),s.length},T.prototype.encodeString=function(t){var r,n=typeof t;if("string"!==n){if("object"!==n)throw new Error(e);if(null===t)throw new Error(e);if(i&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||i&&ArrayBuffer.isView(t)))throw new Error(e);r=!0}var s=0,o=t.length;if(r)s=o;else for(var a=0;a<t.length;++a){var c=t.charCodeAt(a);c<128?s+=1:c<2048?s+=2:c<55296||c>=57344?s+=3:(c=65536+((1023&c)<<10|1023&t.charCodeAt(++a)),s+=4)}return s+=this.encode(8*s),this.update(t),s},T.prototype.bytepad=function(e,t){for(var r=this.encode(t),n=0;n<e.length;++n)r+=this.encodeString(e[n]);var s=t-r%t,i=[];return i.length=s,this.update(i),this},T.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex,r=this.blockCount,n=this.s;if(e[t>>2]|=this.padding[3&t],this.lastByteIndex===this.byteCount)for(e[0]=e[r],t=1;t<r+1;++t)e[t]=0;for(e[r-1]|=2147483648,t=0;t<r;++t)n[t]^=e[t];O(n)}},T.prototype.toString=T.prototype.hex=function(){this.finalize();for(var e,t=this.blockCount,r=this.s,n=this.outputBlocks,s=this.extraBytes,i=0,a=0,c="";a<n;){for(i=0;i<t&&a<n;++i,++a)e=r[i],c+=o[e>>4&15]+o[15&e]+o[e>>12&15]+o[e>>8&15]+o[e>>20&15]+o[e>>16&15]+o[e>>28&15]+o[e>>24&15];a%t===0&&(O(r),i=0)}return s&&(e=r[i],c+=o[e>>4&15]+o[15&e],s>1&&(c+=o[e>>12&15]+o[e>>8&15]),s>2&&(c+=o[e>>20&15]+o[e>>16&15])),c},T.prototype.arrayBuffer=function(){this.finalize();var e,t=this.blockCount,r=this.s,n=this.outputBlocks,s=this.extraBytes,i=0,o=0,a=this.outputBits>>3;e=s?new ArrayBuffer(n+1<<2):new ArrayBuffer(a);for(var c=new Uint32Array(e);o<n;){for(i=0;i<t&&o<n;++i,++o)c[o]=r[i];o%t===0&&O(r)}return s&&(c[i]=r[i],e=e.slice(0,a)),e},T.prototype.buffer=T.prototype.arrayBuffer,T.prototype.digest=T.prototype.array=function(){this.finalize();for(var e,t,r=this.blockCount,n=this.s,s=this.outputBlocks,i=this.extraBytes,o=0,a=0,c=[];a<s;){for(o=0;o<r&&a<s;++o,++a)e=a<<2,t=n[o],c[e]=255&t,c[e+1]=t>>8&255,c[e+2]=t>>16&255,c[e+3]=t>>24&255;a%r===0&&O(n)}return i&&(e=a<<2,t=n[o],c[e]=255&t,i>1&&(c[e+1]=t>>8&255),i>2&&(c[e+2]=t>>16&255)),c},N.prototype=new T,N.prototype.finalize=function(){return this.encode(this.outputBits,!0),T.prototype.finalize.call(this)};var O=function(e){var t,r,n,s,i,o,a,c,u,l,d,f,p,m,g,y,w,v,A,b,E,_,P,S,I,k,R,T,N,O,C,x,M,U,D,L,B,F,q,j,G,H,z,V,K,W,Y,J,Q,$,X,Z,ee,te,re,ne,se,ie,oe,ae,ce,he,ue;for(n=0;n<48;n+=2)s=e[0]^e[10]^e[20]^e[30]^e[40],i=e[1]^e[11]^e[21]^e[31]^e[41],o=e[2]^e[12]^e[22]^e[32]^e[42],a=e[3]^e[13]^e[23]^e[33]^e[43],c=e[4]^e[14]^e[24]^e[34]^e[44],u=e[5]^e[15]^e[25]^e[35]^e[45],l=e[6]^e[16]^e[26]^e[36]^e[46],d=e[7]^e[17]^e[27]^e[37]^e[47],t=(f=e[8]^e[18]^e[28]^e[38]^e[48])^(o<<1|a>>>31),r=(p=e[9]^e[19]^e[29]^e[39]^e[49])^(a<<1|o>>>31),e[0]^=t,e[1]^=r,e[10]^=t,e[11]^=r,e[20]^=t,e[21]^=r,e[30]^=t,e[31]^=r,e[40]^=t,e[41]^=r,t=s^(c<<1|u>>>31),r=i^(u<<1|c>>>31),e[2]^=t,e[3]^=r,e[12]^=t,e[13]^=r,e[22]^=t,e[23]^=r,e[32]^=t,e[33]^=r,e[42]^=t,e[43]^=r,t=o^(l<<1|d>>>31),r=a^(d<<1|l>>>31),e[4]^=t,e[5]^=r,e[14]^=t,e[15]^=r,e[24]^=t,e[25]^=r,e[34]^=t,e[35]^=r,e[44]^=t,e[45]^=r,t=c^(f<<1|p>>>31),r=u^(p<<1|f>>>31),e[6]^=t,e[7]^=r,e[16]^=t,e[17]^=r,e[26]^=t,e[27]^=r,e[36]^=t,e[37]^=r,e[46]^=t,e[47]^=r,t=l^(s<<1|i>>>31),r=d^(i<<1|s>>>31),e[8]^=t,e[9]^=r,e[18]^=t,e[19]^=r,e[28]^=t,e[29]^=r,e[38]^=t,e[39]^=r,e[48]^=t,e[49]^=r,m=e[0],g=e[1],W=e[11]<<4|e[10]>>>28,Y=e[10]<<4|e[11]>>>28,T=e[20]<<3|e[21]>>>29,N=e[21]<<3|e[20]>>>29,ae=e[31]<<9|e[30]>>>23,ce=e[30]<<9|e[31]>>>23,H=e[40]<<18|e[41]>>>14,z=e[41]<<18|e[40]>>>14,U=e[2]<<1|e[3]>>>31,D=e[3]<<1|e[2]>>>31,y=e[13]<<12|e[12]>>>20,w=e[12]<<12|e[13]>>>20,J=e[22]<<10|e[23]>>>22,Q=e[23]<<10|e[22]>>>22,O=e[33]<<13|e[32]>>>19,C=e[32]<<13|e[33]>>>19,he=e[42]<<2|e[43]>>>30,ue=e[43]<<2|e[42]>>>30,te=e[5]<<30|e[4]>>>2,re=e[4]<<30|e[5]>>>2,L=e[14]<<6|e[15]>>>26,B=e[15]<<6|e[14]>>>26,v=e[25]<<11|e[24]>>>21,A=e[24]<<11|e[25]>>>21,$=e[34]<<15|e[35]>>>17,X=e[35]<<15|e[34]>>>17,x=e[45]<<29|e[44]>>>3,M=e[44]<<29|e[45]>>>3,S=e[6]<<28|e[7]>>>4,I=e[7]<<28|e[6]>>>4,ne=e[17]<<23|e[16]>>>9,se=e[16]<<23|e[17]>>>9,F=e[26]<<25|e[27]>>>7,q=e[27]<<25|e[26]>>>7,b=e[36]<<21|e[37]>>>11,E=e[37]<<21|e[36]>>>11,Z=e[47]<<24|e[46]>>>8,ee=e[46]<<24|e[47]>>>8,V=e[8]<<27|e[9]>>>5,K=e[9]<<27|e[8]>>>5,k=e[18]<<20|e[19]>>>12,R=e[19]<<20|e[18]>>>12,ie=e[29]<<7|e[28]>>>25,oe=e[28]<<7|e[29]>>>25,j=e[38]<<8|e[39]>>>24,G=e[39]<<8|e[38]>>>24,_=e[48]<<14|e[49]>>>18,P=e[49]<<14|e[48]>>>18,e[0]=m^~y&v,e[1]=g^~w&A,e[10]=S^~k&T,e[11]=I^~R&N,e[20]=U^~L&F,e[21]=D^~B&q,e[30]=V^~W&J,e[31]=K^~Y&Q,e[40]=te^~ne&ie,e[41]=re^~se&oe,e[2]=y^~v&b,e[3]=w^~A&E,e[12]=k^~T&O,e[13]=R^~N&C,e[22]=L^~F&j,e[23]=B^~q&G,e[32]=W^~J&$,e[33]=Y^~Q&X,e[42]=ne^~ie&ae,e[43]=se^~oe&ce,e[4]=v^~b&_,e[5]=A^~E&P,e[14]=T^~O&x,e[15]=N^~C&M,e[24]=F^~j&H,e[25]=q^~G&z,e[34]=J^~$&Z,e[35]=Q^~X&ee,e[44]=ie^~ae&he,e[45]=oe^~ce&ue,e[6]=b^~_&m,e[7]=E^~P&g,e[16]=O^~x&S,e[17]=C^~M&I,e[26]=j^~H&U,e[27]=G^~z&D,e[36]=$^~Z&V,e[37]=X^~ee&K,e[46]=ae^~he&te,e[47]=ce^~ue&re,e[8]=_^~m&y,e[9]=P^~g&w,e[18]=x^~S&k,e[19]=M^~I&R,e[28]=H^~U&L,e[29]=z^~D&B,e[38]=Z^~V&W,e[39]=ee^~K&Y,e[48]=he^~te&ne,e[49]=ue^~re&se,e[0]^=h[n],e[1]^=h[n+1]};if(s)Tn.exports=b;else for(_=0;_<E.length;++_)r[E[_]]=b[E[_]]}();var On=Et(Nn.exports);let Cn=!1,xn=!1;const Mn={debug:1,default:2,info:2,warning:3,error:4,off:5};let Un=Mn.default,Dn=null;const Ln=function(){try{const e=[];if(["NFD","NFC","NFKD","NFKC"].forEach(t=>{try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}}),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(e){return e.message}return null}();var Bn,Fn;!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(Bn||(Bn={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(Fn||(Fn={}));const qn="0123456789abcdef";class jn{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const r=e.toLowerCase();null==Mn[r]&&this.throwArgumentError("invalid log level name","logLevel",e),Un>Mn[r]||console.log.apply(console,t)}debug(...e){this._log(jn.levels.DEBUG,e)}info(...e){this._log(jn.levels.INFO,e)}warn(...e){this._log(jn.levels.WARNING,e)}makeError(e,t,r){if(xn)return this.makeError("censored error",t,{});t||(t=jn.errors.UNKNOWN_ERROR),r||(r={});const n=[];Object.keys(r).forEach(e=>{const t=r[e];try{if(t instanceof Uint8Array){let r="";for(let e=0;e<t.length;e++)r+=qn[t[e]>>4],r+=qn[15&t[e]];n.push(e+"=Uint8Array(0x"+r+")")}else n.push(e+"="+JSON.stringify(t))}catch(t){n.push(e+"="+JSON.stringify(r[e].toString()))}}),n.push(`code=${t}`),n.push(`version=${this.version}`);const s=e;let i="";switch(t){case Fn.NUMERIC_FAULT:{i="NUMERIC_FAULT";const t=e;switch(t){case"overflow":case"underflow":case"division-by-zero":i+="-"+t;break;case"negative-power":case"negative-width":i+="-unsupported";break;case"unbound-bitwise-result":i+="-unbound-result"}break}case Fn.CALL_EXCEPTION:case Fn.INSUFFICIENT_FUNDS:case Fn.MISSING_NEW:case Fn.NONCE_EXPIRED:case Fn.REPLACEMENT_UNDERPRICED:case Fn.TRANSACTION_REPLACED:case Fn.UNPREDICTABLE_GAS_LIMIT:i=t}i&&(e+=" [ See: https://links.ethers.org/v5-errors-"+i+" ]"),n.length&&(e+=" ("+n.join(", ")+")");const o=new Error(e);return o.reason=s,o.code=t,Object.keys(r).forEach(function(e){o[e]=r[e]}),o}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,jn.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,n){e||this.throwError(t,r,n)}assertArgument(e,t,r,n){e||this.throwArgumentError(t,r,n)}checkNormalize(e){Ln&&this.throwError("platform missing String.prototype.normalize",jn.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Ln})}checkSafeUint53(e,t){"number"==typeof e&&(null==t&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,jn.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,jn.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,r){r=r?": "+r:"",e<t&&this.throwError("missing argument"+r,jn.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+r,jn.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){e!==Object&&null!=e||this.throwError("missing new",jn.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",jn.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):e!==Object&&null!=e||this.throwError("missing new",jn.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return Dn||(Dn=new jn("logger/5.8.0")),Dn}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",jn.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),Cn){if(!e)return;this.globalLogger().throwError("error censorship permanent",jn.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}xn=!!e,Cn=!!t}static setLogLevel(e){const t=Mn[e.toLowerCase()];null!=t?Un=t:jn.globalLogger().warn("invalid log level - "+e)}static from(e){return new jn(e)}}jn.errors=Fn,jn.levels=Bn;const Gn=new jn("bytes/5.8.0");function Hn(e){return!!e.toHexString}function zn(e){return e.slice||(e.slice=function(){const t=Array.prototype.slice.call(arguments);return zn(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function Vn(e){return Xn(e)&&!(e.length%2)||Wn(e)}function Kn(e){return"number"==typeof e&&e==e&&e%1==0}function Wn(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"==typeof e)return!1;if(!Kn(e.length)||e.length<0)return!1;for(let t=0;t<e.length;t++){const r=e[t];if(!Kn(r)||r<0||r>=256)return!1}return!0}function Yn(e,t){if(t||(t={}),"number"==typeof e){Gn.checkSafeUint53(e,"invalid arrayify value");const t=[];for(;e;)t.unshift(255&e),e=parseInt(String(e/256));return 0===t.length&&t.push(0),zn(new Uint8Array(t))}if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),Hn(e)&&(e=e.toHexString()),Xn(e)){let r=e.substring(2);r.length%2&&("left"===t.hexPad?r="0"+r:"right"===t.hexPad?r+="0":Gn.throwArgumentError("hex data is odd-length","value",e));const n=[];for(let e=0;e<r.length;e+=2)n.push(parseInt(r.substring(e,e+2),16));return zn(new Uint8Array(n))}return Wn(e)?zn(new Uint8Array(e)):Gn.throwArgumentError("invalid arrayify value","value",e)}function Jn(e){const t=e.map(e=>Yn(e)),r=t.reduce((e,t)=>e+t.length,0),n=new Uint8Array(r);return t.reduce((e,t)=>(n.set(t,e),e+t.length),0),zn(n)}function Qn(e){let t=Yn(e);if(0===t.length)return t;let r=0;for(;r<t.length&&0===t[r];)r++;return r&&(t=t.slice(r)),t}function $n(e,t){(e=Yn(e)).length>t&&Gn.throwArgumentError("value out of range","value",arguments[0]);const r=new Uint8Array(t);return r.set(e,t-e.length),zn(r)}function Xn(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}const Zn="0123456789abcdef";function es(e,t){if(t||(t={}),"number"==typeof e){Gn.checkSafeUint53(e,"invalid hexlify value");let t="";for(;e;)t=Zn[15&e]+t,e=Math.floor(e/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if("bigint"==typeof e)return(e=e.toString(16)).length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),Hn(e))return e.toHexString();if(Xn(e))return e.length%2&&("left"===t.hexPad?e="0x0"+e.substring(2):"right"===t.hexPad?e+="0":Gn.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if(Wn(e)){let t="0x";for(let r=0;r<e.length;r++){let n=e[r];t+=Zn[(240&n)>>4]+Zn[15&n]}return t}return Gn.throwArgumentError("invalid hexlify value","value",e)}function ts(e){if("string"!=typeof e)e=es(e);else if(!Xn(e)||e.length%2)return null;return(e.length-2)/2}function rs(e,t,r){return"string"!=typeof e?e=es(e):(!Xn(e)||e.length%2)&&Gn.throwArgumentError("invalid hexData","value",e),t=2+2*t,null!=r?"0x"+e.substring(t,2+2*r):"0x"+e.substring(t)}function ns(e){let t="0x";return e.forEach(e=>{t+=es(e).substring(2)}),t}function ss(e){const t=is(es(e,{hexPad:"left"}));return"0x"===t?"0x0":t}function is(e){"string"!=typeof e&&(e=es(e)),Xn(e)||Gn.throwArgumentError("invalid hex string","value",e),e=e.substring(2);let t=0;for(;t<e.length&&"0"===e[t];)t++;return"0x"+e.substring(t)}function os(e,t){for("string"!=typeof e?e=es(e):Xn(e)||Gn.throwArgumentError("invalid hex string","value",e),e.length>2*t+2&&Gn.throwArgumentError("value out of range","value",arguments[1]);e.length<2*t+2;)e="0x0"+e.substring(2);return e}function as(e){const t={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(Vn(e)){let r=Yn(e);64===r.length?(t.v=27+(r[32]>>7),r[32]&=127,t.r=es(r.slice(0,32)),t.s=es(r.slice(32,64))):65===r.length?(t.r=es(r.slice(0,32)),t.s=es(r.slice(32,64)),t.v=r[64]):Gn.throwArgumentError("invalid signature string","signature",e),t.v<27&&(0===t.v||1===t.v?t.v+=27:Gn.throwArgumentError("signature invalid v byte","signature",e)),t.recoveryParam=1-t.v%2,t.recoveryParam&&(r[32]|=128),t._vs=es(r.slice(32,64))}else{if(t.r=e.r,t.s=e.s,t.v=e.v,t.recoveryParam=e.recoveryParam,t._vs=e._vs,null!=t._vs){const r=$n(Yn(t._vs),32);t._vs=es(r);const n=r[0]>=128?1:0;null==t.recoveryParam?t.recoveryParam=n:t.recoveryParam!==n&&Gn.throwArgumentError("signature recoveryParam mismatch _vs","signature",e),r[0]&=127;const s=es(r);null==t.s?t.s=s:t.s!==s&&Gn.throwArgumentError("signature v mismatch _vs","signature",e)}if(null==t.recoveryParam)null==t.v?Gn.throwArgumentError("signature missing v and recoveryParam","signature",e):0===t.v||1===t.v?t.recoveryParam=t.v:t.recoveryParam=1-t.v%2;else if(null==t.v)t.v=27+t.recoveryParam;else{const r=0===t.v||1===t.v?t.v:1-t.v%2;t.recoveryParam!==r&&Gn.throwArgumentError("signature recoveryParam mismatch v","signature",e)}null!=t.r&&Xn(t.r)?t.r=os(t.r,32):Gn.throwArgumentError("signature missing or invalid r","signature",e),null!=t.s&&Xn(t.s)?t.s=os(t.s,32):Gn.throwArgumentError("signature missing or invalid s","signature",e);const r=Yn(t.s);r[0]>=128&&Gn.throwArgumentError("signature s out of range","signature",e),t.recoveryParam&&(r[0]|=128);const n=es(r);t._vs&&(Xn(t._vs)||Gn.throwArgumentError("signature invalid _vs","signature",e),t._vs=os(t._vs,32)),null==t._vs?t._vs=n:t._vs!==n&&Gn.throwArgumentError("signature _vs mismatch v and s","signature",e)}return t.yParityAndS=t._vs,t.compact=t.r+t.yParityAndS.substring(2),t}var cs=Object.freeze({__proto__:null,arrayify:Yn,concat:Jn,hexConcat:ns,hexDataLength:ts,hexDataSlice:rs,hexStripZeros:is,hexValue:ss,hexZeroPad:os,hexlify:es,isBytes:Wn,isBytesLike:Vn,isHexString:Xn,splitSignature:as,stripZeros:Qn,zeroPad:$n});function hs(e){return"0x"+On.keccak_256(Yn(e))}var us=Object.freeze({__proto__:null,keccak256:hs});async function ls(e){const{authorization:t,signer:r}=e,n=function(e){const{address:t,chainId:r,nonce:n}=e,s=function(e,t,r){const n=(e,t)=>{if(e<56)return(t+e).toString(16).padStart(2,"0");const r=e.toString(16),n=Math.ceil(r.length/2);return(t+55+n).toString(16).padStart(2,"0")+r.padStart(2*n,"0")},s=[e,t,r].map(e=>{if("number"==typeof e){if(0===e)return"80";e=`0x${e.toString(16)}`}let t=e.startsWith("0x")?e.slice(2):e;return t.length%2!=0&&(t=`0${t}`),0===t.length?"80":2===t.length&&parseInt(t,16)<128?t:n(t.length/2,128)+t}).join(""),i=s.length/2;return`0x${n(i,192)}${s}`}(r,t,n);return hs(`0x05${s.slice(2)}`)}(t),s=await r.sign(n,!1,!1),i=s.startsWith("0x")?s.slice(2):s,o=`0x${i.slice(0,64)}`,a=`0x${i.slice(64,128)}`,c=i.slice(128,130),h=parseInt(c,16);let u;u=27===h||0===h||"1b"===c?0:28===h||1===h||"1c"===c?1:h>=35?h%2==0?1:0:h%2;const l=0===u?27:28;return{...t,r:o,s:a,v:l,yParity:u}}const ds=e=>{const t=e?.logs?.[0];return{blockHash:t?.blockHash,blockNumber:e?.blockNumber?.toString(),contractAddress:void 0,cumulativeGasUsed:e?.gasUsed,effectiveGasPrice:e?.gasFee,from:void 0,gasUsed:e?.gasUsed,logs:e?.logs||[],logsBloom:void 0,status:1===e?.status?"success":0===e?.status?"reverted":void 0,to:e?.to,transactionHash:e?.transactionHash,transactionIndex:t?.transactionIndex,type:"eip1559",blobGasPrice:void 0,blobGasUsed:void 0,root:void 0}};async function fs(e,t){try{const r=await e.getCode(t);return"0x"!==r&&r.length>2}catch{return!1}}const ps=async({params:e,signer:t,account:r,authentication:n,backendClient:s,rpcProvider:i,policyId:o})=>{const a=e[0]?.capabilities?.paymasterService?.policy??o;let c;if(r.accountType===qr.DELEGATED_ACCOUNT){const[e,n]=await Promise.all([fs(i,r.address),i.getTransactionCount(r.address)]);if(!e){const e=await async function(e){const{signer:t,contractAddress:r,chainId:n,nonce:s}=e;if(!r)throw new Error("contractAddress is required");if(void 0===n)throw new Error("chainId is required. Please provide it or fetch it from your RPC provider using eth_chainId");if(void 0===s)throw new Error("nonce is required. Please provide it or fetch it from your RPC provider using eth_getTransactionCount");return ls({authorization:{address:r,chainId:n,nonce:s},signer:t})}({signer:t,accountAddress:r.address,contractAddress:r.implementationAddress,chainId:r.chainId,nonce:n});c=function(e){const{r:t,s:r,yParity:n}=e,s=t.startsWith("0x")?t.slice(2):t,i=r.startsWith("0x")?r.slice(2):r;return`0x${s.padStart(64,"0")}${i.padStart(64,"0")}${n.toString(16).padStart(2,"0")}`}(e)}}const h=await(async(e,t,r,n,s,i)=>{const o=e.map(e=>{if(!e.to)throw new En(bn.INVALID_PARAMS,'wallet_sendCalls requires a "to" field');return{to:String(e.to),data:e.data?String(e.data):void 0,value:e.value?String(e.value):void 0}});return fn(async()=>(await t.transactionIntentsApi.createTransactionIntent({createTransactionIntentRequest:{account:r.id,policy:s,signedAuthorization:i,chainId:r.chainId,interactions:o}},{headers:n.thirdPartyProvider?{authorization:`Bearer ${t.config.backend.accessToken}`,"x-player-token":n.token,"x-auth-provider":n.thirdPartyProvider,"x-token-type":n.thirdPartyTokenType}:{authorization:`Bearer ${n.token}`,"x-project-key":String(t.config.backend.accessToken)}})).data,{context:"operation"})})(e,s,r,n,a,c).catch(e=>{throw new En(bn.TRANSACTION_REJECTED,e.message)});if(h.response?.error.reason)throw new En(bn.TRANSACTION_REJECTED,h.response?.error.reason);if(h?.nextAction?.payload?.signableHash){let e;e=[300,324].includes(r.chainId)||r.implementationType&&[xr.CALIBUR].includes(r.implementationType)?await t.sign(h.nextAction.payload.signableHash,!1,!1):await t.sign(h.nextAction.payload.signableHash);const n=await fn(async()=>await s.transactionIntentsApi.signature({id:h.id,signatureRequest:{signature:e}}),{context:"operation"}).catch(e=>{throw new En(bn.TRANSACTION_REJECTED,e.message)});if(0===n.data.response?.status)throw new En(bn.TRANSACTION_REJECTED,n.data.response?.error.reason);if(!n.data.response)throw new En(bn.TRANSACTION_REJECTED,"No transaction response received");return{id:h.id,receipt:ds(n.data.response)}}if(!h.response)throw new En(bn.TRANSACTION_REJECTED,"No transaction response received");return{id:h.id,receipt:ds(h.response)}},ms=["types","domain","primaryType","message"],gs=async({params:e,method:t,signer:r,implementationType:n,rpcProvider:s,account:i})=>{const o=e[0],a=e[1];if(!o||!a)throw new En(bn.INVALID_PARAMS,`${t} requires an address and a typed data JSON`);const{chainId:c}=await s.detectNetwork(),h=((e,t)=>{let r;if("string"==typeof e)try{r=JSON.parse(e)}catch(e){throw new En(bn.INVALID_PARAMS,`Failed to parse typed data JSON: ${e}`)}else{if("object"!=typeof e)throw new En(bn.INVALID_PARAMS,`Invalid typed data argument: ${e}`);r=e}if(!(e=>ms.every(t=>t in e))(r))throw new En(bn.INVALID_PARAMS,`Invalid typed data argument. The following properties are required: \n      ${ms.join(", ")}`);const n=r.domain?.chainId;if(n&&("string"==typeof n&&(n.startsWith("0x")?r.domain.chainId=parseInt(n,16):r.domain.chainId=parseInt(n,10)),r.domain.chainId!==t))throw new En(bn.INVALID_PARAMS,`Invalid chainId, expected ${t}`);return r})(a,c),u={...h.types};delete u.EIP712Domain;const{_TypedDataEncoder:l}=await Promise.resolve().then(function(){return yu}),d=l.hash(h.domain,u,h.message);return await Sn({hash:d,implementationType:n,chainId:c,signer:r,address:o,ownerAddress:i.ownerAddress,factoryAddress:i.factoryAddress,salt:i.salt})};var ys;!function(e){e.ACCOUNTS_CHANGED="accountsChanged",e.ACCOUNTS_CONNECT="connect"}(ys||(ys={}));let ws=class{#e;#t;#r;#n;updatePolicy(e){this.#t=e}#s;#i;#o=null;#a;isOpenfort=!0;#c;constructor({storage:e,backendApiClients:t,openfortEventEmitter:r,policyId:n,ensureSigner:s,chains:i,validateAndRefreshSession:o}){this.#c=s,this.#e=e,this.#r=i,this.#t=n,this.#s=o,this.#a=t,this.#i=new vn,r.on(Or.ON_LOGOUT,this.#h),r.on(Or.ON_SWITCH_ACCOUNT,this.#u)}#l=async()=>(this.#n||(this.#n=await this.#c()),this.#n);#h=async()=>{this.#n=void 0,this.#i.emit(ys.ACCOUNTS_CHANGED,[])};#u=async e=>{this.#i.emit(ys.ACCOUNTS_CHANGED,[e])};async getRpcProvider(){if(!this.#o){const e=await hn.fromStorage(this.#e),t=e?.chainId||8453;await Promise.resolve().then(function(){return Om}).then(e=>{const r=this.#r?this.#r[t]:void 0;this.#o=new e.StaticJsonRpcProvider(r??gn[t])})}if(!this.#o)throw new Error("RPC provider not initialized");return this.#o}async#d(e){switch(e.method){case"eth_accounts":{const e=await hn.fromStorage(this.#e);return e?[e.address]:[]}case"eth_requestAccounts":{const e=await hn.fromStorage(this.#e);if(e)return this.#i.emit(ys.ACCOUNTS_CONNECT,{chainId:String(e.chainId)}),[e.address];throw new En(An.UNAUTHORIZED,"Unauthorized - must be authenticated and configured with a signer.")}case"eth_signTransaction":{const t=await hn.fromStorage(this.#e),r=await this.#l(),n=await mr.fromStorage(this.#e);if(!t||!n)throw new En(An.UNAUTHORIZED,"Unauthorized - call eth_requestAccounts first");const s=await this.getRpcProvider(),{chainId:i}=await s.detectNetwork(),[o]=e.params||[];o.chainId||(o.chainId=i.toString());const a=function({from:e,...t}){return{to:t.to,data:t.data,accessList:t.accessList,chainId:(s=t.chainId,s.startsWith("0x")?parseInt(s,16):parseInt(s,10)),type:t.type&&{"0x0":"legacy","0x1":"eip2930","0x2":"eip1559"}[t.type]||"eip1559",maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,value:(r=t.value,n=BigInt,void 0!==r?n(r):0n),nonce:t.nonce?parseInt(t.nonce.toString(),16):void 0,gas:t.gas?BigInt(t.gas):void 0};var r,n,s}(o),{serialize:c}=await Promise.resolve().then(function(){return Bp}),h=e=>({legacy:0,eip2930:1,eip1559:2}[e]),{gas:u,...l}=a,d={...l,gasLimit:u,to:a.to??void 0,type:h(a.type)},f=c(d),{keccak256:p}=await Promise.resolve().then(function(){return us}),m=p(f);await this.#s();const g=await r.sign(m,!1,!1),{splitSignature:y}=await Promise.resolve().then(function(){return cs});return c(d,y(g))}case"eth_sendTransaction":{const[t,r,n]=await Promise.all([hn.fromStorage(this.#e),this.#l(),mr.fromStorage(this.#e)]);if(!t||!n)throw new En(An.UNAUTHORIZED,"Unauthorized - call eth_requestAccounts first");if(await this.#s(),t?.accountType===qr.EOA){const[r]=e.params||[],n=await this.getRpcProvider(),s=await async function(e,t,r){const n={...e};if(!n.nonce){const e=await t.getTransactionCount(r,"pending");n.nonce=`0x${e.toString(16)}`}if(!n.gas)try{const e=await t.estimateGas({from:r,to:n.to,data:n.data,value:n.value});n.gas=e.toHexString()}catch{n.gas="0x5208"}const s=n.maxFeePerGas&&n.maxPriorityFeePerGas,i=n.gasPrice;if(!s&&!i){const e=await t.getBlock("latest");if(null!==e.baseFeePerGas&&void 0!==e.baseFeePerGas){const r=e.baseFeePerGas,s=r.mul(12).div(10),i=await t.getGasPrice();let o=i.sub(r);o.lt(0)&&(o=i.mul(0));const a=s.add(o);n.maxFeePerGas=a.toHexString(),n.maxPriorityFeePerGas=o.toHexString(),n.type="0x2",delete n.gasPrice}else{const e=(await t.getGasPrice()).mul(12).div(10);n.gasPrice=e.toHexString(),n.type="0x0",delete n.maxFeePerGas,delete n.maxPriorityFeePerGas}}return n}(r,n,t.address),i=await this.#d({method:"eth_signTransaction",params:[s]});return this.#d({method:"eth_sendRawTransaction",params:[i]})}return(await ps({params:e.params||[],signer:r,account:t,authentication:n,backendClient:this.#a,rpcProvider:await this.getRpcProvider(),policyId:this.#t})).receipt.transactionHash}case"eth_sendRawTransactionSync":{const[t,r,n]=await Promise.all([hn.fromStorage(this.#e),this.#l(),mr.fromStorage(this.#e)]);if(!t||!n)throw new En(An.UNAUTHORIZED,"Unauthorized - call eth_requestAccounts first");if(t?.accountType===qr.EOA)throw new En(An.UNSUPPORTED_METHOD,`${e.method}: Method not supported`);return await this.#s(),await ps({params:e.params||[],signer:r,account:t,authentication:n,backendClient:this.#a,rpcProvider:await this.getRpcProvider(),policyId:this.#t})}case"eth_estimateGas":{const t=await hn.fromStorage(this.#e),r=await mr.fromStorage(this.#e);if(!t||!r)throw new En(An.UNAUTHORIZED,"Unauthorized - call eth_requestAccounts first");return await this.#s(),await(async({params:e,account:t,authentication:r,backendClient:n,policyId:s})=>{const i=await(async(e,t,r,n,s)=>{const i=e.map(e=>{if(!e.to)throw new En(bn.INVALID_PARAMS,'eth_estimateGas requires a "to" field');return{to:String(e.to),data:e.data?String(e.data):void 0,value:e.value?String(e.value):void 0}});return fn(async()=>(await t.transactionIntentsApi.estimateTransactionIntentCost({createTransactionIntentRequest:{policy:s,chainId:r.chainId,interactions:i}},{headers:n.thirdPartyProvider?{authorization:`Bearer ${t.config.backend.accessToken}`,"x-player-token":n.token,"x-auth-provider":n.thirdPartyProvider,"x-token-type":n.thirdPartyTokenType}:{authorization:`Bearer ${n.token}`,"x-project-key":String(t.config.backend.accessToken)}})).data,{context:"operation"})})(e,n,t,r,s).catch(e=>{throw new En(bn.TRANSACTION_REJECTED,e.message)});return i.estimatedTXGas})({params:e.params||[],account:t,authentication:r,backendClient:this.#a,policyId:this.#t})}case"eth_signTypedData":case"eth_signTypedData_v4":{const t=await hn.fromStorage(this.#e),r=await this.#l();if(!t)throw new En(An.UNAUTHORIZED,"Unauthorized - call eth_requestAccounts first");await this.#s();const n=await this.getRpcProvider();return await gs({method:e.method,params:e.params||[],signer:r,implementationType:t.implementationType||t.type,rpcProvider:n,account:t})}case"personal_sign":{const t=await hn.fromStorage(this.#e);if(!t)throw new En(An.UNAUTHORIZED,"Unauthorized - call eth_requestAccounts first");const r=await this.#l();return await this.#s(),await(async({params:e,signer:t,account:r})=>{const n=e[0],s=e[1];if(!s||!n)throw new En(bn.INVALID_PARAMS,"personal_sign requires an address and a message");if(s.toLowerCase()!==r.address.toLowerCase())throw new En(bn.INVALID_PARAMS,"personal_sign requires the signer to be the from address");const{hashMessage:i}=await Promise.resolve().then(function(){return yu});return await Sn({hash:i(an(n)),implementationType:r.implementationType||r.type,chainId:Number(r.chainId),signer:t,address:s,salt:r.salt,factoryAddress:r.factoryAddress,ownerAddress:r.ownerAddress})})({params:e.params||[],signer:r,account:t})}case"eth_chainId":{const e=await this.getRpcProvider(),{chainId:t}=await e.detectNetwork();return on(t)}case"wallet_switchEthereumChain":{const t=await this.#l();if(!e.params||!Array.isArray(e.params)||0===e.params.length)throw new En(bn.INVALID_PARAMS,"Invalid parameters for wallet_switchEthereumChain");await this.#s();try{const r=parseInt(e.params[0].chainId,16);await t.switchChain({chainId:r}),await Promise.resolve().then(function(){return Om}).then(e=>{const t=this.#r?this.#r[r]:void 0;this.#o=new e.StaticJsonRpcProvider(t??gn[r])})}catch(e){const t=e;throw new En(bn.INTERNAL_ERROR,`Failed to switch chain: ${t.message}`)}return null}case"wallet_addEthereumChain":{await this.#l();const t=await this.getRpcProvider();return await Pn({params:e.params||[],rpcProvider:t,storage:this.#e})}case"wallet_showCallsStatus":return null;case"wallet_getCallsStatus":{const t=await hn.fromStorage(this.#e);if(t?.accountType===qr.EOA)throw new En(An.UNSUPPORTED_METHOD,`${e.method}: Method not supported`);const r=await mr.fromStorage(this.#e);if(!t||!r)throw new En(An.UNAUTHORIZED,"Unauthorized - call eth_requestAccounts first");return await this.#s(),await(async({params:e,authentication:t,backendClient:r})=>{const n=await(async(e,t,r)=>fn(async()=>(await t.transactionIntentsApi.getTransactionIntent({id:e},{headers:r.thirdPartyProvider?{authorization:`Bearer ${t.config.backend.accessToken}`,"x-player-token":r.token,"x-auth-provider":r.thirdPartyProvider,"x-token-type":r.thirdPartyTokenType}:{authorization:`Bearer ${r.token}`,"x-project-key":String(t.config.backend.accessToken)}})).data,{context:"operation"}))(e[0],r,t).catch(e=>{throw new En(bn.TRANSACTION_REJECTED,e.message)});return{status:n.response?"CONFIRMED":"PENDING",receipts:n.response?[{status:0===n.response.status?"reverted":"success",logs:n.response.logs?.map(e=>({address:e.address,data:e.data,topics:e.topics}))||[],blockHash:n.response.transactionHash||"",blockNumber:BigInt(n.response.blockNumber||0),gasUsed:BigInt(n.response.gasUsed||0),transactionHash:n.response.transactionHash||""}]:void 0}})({params:e.params||{},authentication:r,backendClient:this.#a})}case"wallet_sendCalls":{const[t,r,n]=await Promise.all([hn.fromStorage(this.#e),this.#l(),mr.fromStorage(this.#e)]);if(t?.accountType===qr.EOA)throw new En(An.UNSUPPORTED_METHOD,`${e.method}: Method not supported`);if(!t||!n)throw new En(An.UNAUTHORIZED,"Unauthorized - call eth_requestAccounts first");return await this.#s(),await(async({params:e,signer:t,account:r,authentication:n,backendClient:s,rpcProvider:i,policyId:o})=>(await ps({params:e,signer:t,account:r,authentication:n,backendClient:s,rpcProvider:i,policyId:o})).id)({params:e.params?e.params[0].calls:[],signer:r,account:t,authentication:n,backendClient:this.#a,rpcProvider:await this.getRpcProvider(),policyId:this.#t})}case"wallet_grantPermissions":{const t=await hn.fromStorage(this.#e);if(t?.accountType===qr.EOA)throw new En(An.UNSUPPORTED_METHOD,`${e.method}: Method not supported`);const r=await this.#l(),n=await mr.fromStorage(this.#e);if(!t||!n)throw new En(An.UNAUTHORIZED,"Unauthorized - call eth_requestAccounts first");return await this.#s(),await(async({params:e,signer:t,account:r,authentication:n,backendClient:s,policyId:i})=>{const o=await(async(e,t,r,n,s)=>{const i=e[0],o=Math.floor(Date.now()/1e3),a=Math.floor(new Date(Date.now()+1e3*i.expiry).getTime()/1e3),c=i.permissions.map(kn),h=c.filter(e=>"contract-call"===e.type||"erc20-token-transfer"===e.type||"erc721-token-transfer"===e.type||"erc1155-token-transfer"===e.type).map(e=>e.data.address);let u,l=c.find(e=>"call-limit"===e.type)?.data;if(l=c[0]?.policies?.find(e=>"call-limit"===e.type)?.data?.limit,"signer"in i&&i.signer){if("keys"===i.signer.type)throw new En(bn.INVALID_PARAMS,"Multi-key signers are not supported for session creation");"key"!==i.signer.type&&"account"!==i.signer.type||(u=i.signer.data.id)}else"account"in i&&i.account&&(u=i.account);if(!u)throw new En(bn.INVALID_PARAMS,"Failed to request permissions - missing session address");const d=((e,t,r,n,s,i=!1,o,a,c)=>{const h={address:e,chainId:t,validAfter:r,validUntil:n,optimistic:i,whitelist:o,account:c};return s&&(h.policy=s),a&&(h.limit=a),h})(u,r.chainId,o,a,s,!1,h,l,r.id);return fn(async()=>(await t.sessionsApi.createSession({createSessionRequest:d},{headers:n.thirdPartyProvider?{authorization:`Bearer ${t.config.backend.accessToken}`,"x-player-token":n.token,"x-auth-provider":n.thirdPartyProvider,"x-token-type":n.thirdPartyTokenType}:{authorization:`Bearer ${n.token}`,"x-project-key":String(t.config.backend.accessToken)}})).data,{context:"operation"})})(e,s,r,n,i).catch(e=>{throw new En(bn.TRANSACTION_REJECTED,e.message)});if(o?.nextAction?.payload?.signableHash){let e;return e=[300,324].includes(r.chainId)||r.implementationType&&[xr.CALIBUR].includes(r.implementationType)?await t.sign(o.nextAction.payload.signableHash,!1,!1):await t.sign(o.nextAction.payload.signableHash),Rn(await fn(async()=>(await s.sessionsApi.signatureSession({id:o.id,signatureRequest:{signature:e}})).data,{context:"operation"}).catch(e=>{throw new En(bn.TRANSACTION_REJECTED,e.message)}))}if(!1===o.isActive)throw new En(bn.TRANSACTION_REJECTED,"Failed to grant permissions");return Rn(o)})({params:e.params||[],signer:r,account:t,authentication:n,backendClient:this.#a,policyId:this.#t})}case"wallet_revokePermissions":{const t=await hn.fromStorage(this.#e),r=await this.#l(),n=await mr.fromStorage(this.#e);if(!t||!n)throw new En(An.UNAUTHORIZED,"Unauthorized - call eth_requestAccounts first");return await this.#s(),await(async({params:e,signer:t,account:r,authentication:n,backendClient:s,policyId:i})=>{const o=e[0];if(!o.permissionContext)return await t.disconnect(),{};const a=await(async(e,t,r,n,s)=>{const i=((e,t,r,n)=>{const s={address:e,chainId:t,account:n};return r&&(s.policy=r),s})(e.permissionContext,r.chainId,s,r.id);return fn(async()=>(await t.sessionsApi.revokeSession({revokeSessionRequest:i},{headers:n.thirdPartyProvider?{authorization:`Bearer ${t.config.backend.accessToken}`,"x-player-token":n.token,"x-auth-provider":n.thirdPartyProvider,"x-token-type":n.thirdPartyTokenType}:{authorization:`Bearer ${n.token}`,"x-project-key":String(t.config.backend.accessToken)}})).data,{context:"operation"})})(o,s,r,n,i).catch(e=>{throw new En(bn.TRANSACTION_REJECTED,e.message)});if(a?.nextAction?.payload?.signableHash){let e;return e=[300,324].includes(r.chainId)||r.implementationType&&[xr.CALIBUR].includes(r.implementationType)?await t.sign(a.nextAction.payload.signableHash,!1,!1):await t.sign(a.nextAction.payload.signableHash),(await s.sessionsApi.signatureSession({id:a.id,signatureRequest:{signature:e}}).catch(e=>{throw new En(bn.TRANSACTION_REJECTED,e.message)})).data}return a})({params:e.params||[],signer:r,account:t,authentication:n,backendClient:this.#a,policyId:this.#t})}case"wallet_getCapabilities":{const t=await hn.fromStorage(this.#e);if(t?.accountType===qr.EOA)throw new En(An.UNSUPPORTED_METHOD,`${e.method}: Method not supported`);const r=await this.getRpcProvider(),{chainId:n}=await r.detectNetwork();return{[on(n)]:{permissions:{supported:!0,signerTypes:["account","key"],keyTypes:["secp256k1"],permissionTypes:["contract-calls"]},paymasterService:{supported:!0},atomicBatch:{supported:!0}}}}case"wallet_getAssets":{const t=await hn.fromStorage(this.#e),r=await mr.fromStorage(this.#e);if(!t||!r)throw new En(An.UNAUTHORIZED,"Unauthorized - call eth_requestAccounts first");return await this.#s(),await(async({params:e,account:t,authentication:r,backendClient:n})=>{const s=await(async(e,t,r,n)=>fn(async()=>(await e.rpcApi.handleRpcRequest({jsonRpcRequest:{method:"wallet_getAssets",params:{account:t.address,chainFilter:n?.chainFilter,assetFilter:n?.assetFilter,assetTypeFilter:n?.assetTypeFilter},id:1,jsonrpc:"2.0"}},{headers:r.thirdPartyProvider?{authorization:`Bearer ${e.config.backend.accessToken}`,"x-player-token":r.token,"x-auth-provider":r.thirdPartyProvider,"x-token-type":r.thirdPartyTokenType}:{authorization:`Bearer ${r.token}`,"x-project-key":String(e.config.backend.accessToken)}})).data,{context:"operation"}))(n,t,r,e).catch(e=>{throw new En(bn.INTERNAL_ERROR,e.message)});return s.result})({params:e.params?.[0],account:t,authentication:r,backendClient:this.#a})}case"eth_gasPrice":case"eth_getBalance":case"eth_sendRawTransaction":case"eth_getCode":case"eth_getStorageAt":case"eth_call":case"eth_blockNumber":case"eth_getBlockByHash":case"eth_getBlockByNumber":case"eth_getTransactionByHash":case"eth_getTransactionReceipt":case"eth_getTransactionCount":return(await this.getRpcProvider()).send(e.method,e.params||[]);default:throw new En(An.UNSUPPORTED_METHOD,`${e.method}: Method not supported`)}}async request(e){try{return this.#d(e)}catch(e){if(e instanceof En)throw e;if(e instanceof Error)throw new En(bn.INTERNAL_ERROR,e.message);throw new En(bn.INTERNAL_ERROR,"Internal error")}}on(e,t){this.#i.on(e,t)}removeListener(e,t){this.#i.off(e,t)}};const vs={icon:'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" viewBox="597.32 331.34 171.36 105.32" ><g><rect x="673.9" y="404.26" width="18.2" height="32.4" /><polygon points="768.68,331.36 768.68,331.36 768.68,331.34 610.78,331.34 610.78,331.36 597.32,331.36 597.32,436.64    615.52,436.64 615.52,349.54 750.48,349.54 750.48,436.64 768.68,436.64  " /><polygon points="732.16,367.79 633.83,367.79 633.83,370.19 633.79,370.19 633.79,436.64 651.99,436.64 651.99,385.99    713.9,385.99 713.9,436.64 732.09,436.64 732.09,385.99 732.16,385.99  " /></g></svg>',name:"Openfort",rdns:"xyz.openfort",uuid:sn()};let As=class extends Error{code;constructor(e,t){super(t),this.name="PenpalError",this.code=e}};var bs="penpal";const Es=e=>"object"==typeof e&&null!==e,_s=e=>"function"==typeof e,Ps=e=>"SYN"===e.type,Ss=e=>"ACK1"===e.type,Is=e=>"ACK2"===e.type,ks=e=>"CALL"===e.type,Rs=e=>"REPLY"===e.type;let Ts=class extends Error{constructor(e){super(`You've hit a bug in Penpal. Please file an issue with the following information: ${e}`)}};const Ns="deprecated-penpal";var Os,Cs;!function(e){e.Call="call",e.Reply="reply",e.Syn="syn",e.SynAck="synAck",e.Ack="ack"}(Os||(Os={})),function(e){e.Fulfilled="fulfilled",e.Rejected="rejected"}(Cs||(Cs={}));const xs=e=>e.split("."),Ms=e=>e.join("."),Us=e=>new Ts(`Unexpected message to translate: ${JSON.stringify(e)}`);let Ds=class{messagePoster;handlers=new Set;isInitialized=!1;hasBeenUsed=!1;validateMessage;messageBuffer=[];nextNumericId=1;stringToNumericId=new Map;numericToStringId=new Map;constructor(e){if(this.messagePoster=e,!e||"function"!=typeof e.postMessage)throw new As("CONNECTION_DESTROYED","Invalid message poster provided");pn("ReactNativeMessenger created")}initialize(e){if(this.isInitialized)return void pn("ReactNativeMessenger already initialized");if(this.hasBeenUsed)throw new As("CONNECTION_DESTROYED","A messenger can only be used for a single connection");this.validateMessage=e?.validateReceivedMessage,this.isInitialized=!0,this.hasBeenUsed=!0,pn(`ReactNativeMessenger initialized, processing ${this.messageBuffer.length} buffered messages`);const t=[...this.messageBuffer];this.messageBuffer=[],t.forEach(e=>{this.processMessage(e)})}sendMessage(e,t){if(!this.isInitialized)throw new As("CONNECTION_DESTROYED","ReactNativeMessenger not initialized");t&&t.length>0&&pn("React Native: Ignoring transferables (not supported)"),pn("ReactNativeMessenger sending message:",e);try{let t=e;"penpal"===e?.namespace&&(t=this.convertToDeprecatedFormat(e),pn("React Native: Converted message:",t));const r=JSON.stringify(t);this.messagePoster.postMessage(r)}catch(e){throw new As("TRANSMISSION_FAILED",`Failed to send message through React Native WebView: ${e instanceof Error?e.message:String(e)}`)}}addMessageHandler(e){this.handlers.add(e),pn(`Message handler added, total handlers: ${this.handlers.size}`)}removeMessageHandler(e){this.handlers.delete(e),pn(`Message handler removed, total handlers: ${this.handlers.size}`)}handleMessage(e){if(pn("[HANDSHAKE DEBUG] ReactNativeMessenger.handleMessage called with:",e),!this.isInitialized){return pn(`[HANDSHAKE DEBUG] ReactNativeMessenger: Message received but not initialized, buffering message (${this.messageBuffer.length+1} total)`),void this.messageBuffer.push(e)}pn("[HANDSHAKE DEBUG] ReactNativeMessenger is initialized, processing message"),this.processMessage(e)}processMessage(e){pn("[HANDSHAKE DEBUG] ReactNativeMessenger processing message:",e);const t=this.convertFromDeprecatedFormat(e);if(pn("[HANDSHAKE DEBUG] Message after conversion:",t),this.validateMessage&&!this.validateMessage(t))return void pn("[HANDSHAKE DEBUG] Message validation failed:",t);pn(`[HANDSHAKE DEBUG] Routing message to ${this.handlers.size} handlers`);let r=0;this.handlers.forEach(e=>{r++;try{pn(`[HANDSHAKE DEBUG] Calling handler ${r}/${this.handlers.size}`),e(t),pn(`[HANDSHAKE DEBUG] Handler ${r} completed successfully`)}catch(e){pn(`[HANDSHAKE DEBUG] Error in handler ${r}:`,e)}})}convertToDeprecatedFormat(e){if("penpal"!==e?.namespace)return e;switch(e.type){case"SYN":return pn("React Native: Converting SYN to deprecated format to avoid MessagePorts",{originalMessage:e}),{penpal:"syn",participantId:e.participantId};case"ACK1":return pn("React Native: Converting ACK1 to deprecated format",{originalMessage:e}),{penpal:"synAck",methodNames:e.methodPaths||[]};case"ACK2":return pn("React Native: Converting ACK2 to deprecated format",{originalMessage:e}),{penpal:"ack"};case"REPLY":{pn("React Native: Converting REPLY to deprecated format",{originalMessage:e});const t=this.getNumericId(e.callId);return e.isError?{penpal:"reply",id:t,resolution:"rejected",returnValue:e.value,returnValueIsError:e.isSerializedErrorInstance||!1}:{penpal:"reply",id:t,resolution:"fulfilled",returnValue:e.value}}case"CALL":return pn("React Native: Converting CALL to deprecated format",{originalMessage:e}),{penpal:"call",id:this.getNumericId(e.id),methodName:e.methodPath.join("."),args:e.args};case"DESTROY":return{namespace:"penpal",type:"DESTROY"};default:return e}}convertFromDeprecatedFormat(e){if(e?.penpal)switch(e.penpal){case"syn":{pn("[HANDSHAKE DEBUG] React Native: Converting deprecated SYN to modern format",{originalMessage:e});const t={namespace:"penpal",type:"SYN",participantId:e.participantId};return pn("[HANDSHAKE DEBUG] Converted SYN:",t),t}case"synAck":{pn("[HANDSHAKE DEBUG] React Native: Converting deprecated synAck to modern ACK1 format",{originalMessage:e});const t={namespace:"penpal",type:"ACK1",methodPaths:e.methodNames?.map(e=>e.split("."))||[],channel:void 0};return pn("[HANDSHAKE DEBUG] Converted ACK1:",t),t}case"ack":{pn("[HANDSHAKE DEBUG] React Native: Converting deprecated ack to modern ACK2 format",{originalMessage:e});const t={namespace:"penpal",type:"ACK2",channel:void 0};return pn("[HANDSHAKE DEBUG] Converted ACK2:",t),t}case"reply":{pn("React Native: Converting deprecated reply to modern REPLY format",{originalMessage:e});const t=this.getStringId(e.id);t||pn(`Warning: No string ID mapping found for numeric ID ${e.id}, using as-is`);const r=t||String(e.id);return"fulfilled"===e.resolution?{namespace:"penpal",type:"REPLY",callId:r,value:e.returnValue}:{namespace:"penpal",type:"REPLY",callId:r,isError:!0,value:e.returnValue,isSerializedErrorInstance:e.returnValueIsError||!1}}case"call":{pn("React Native: Converting deprecated call to modern CALL format",{originalMessage:e});const t=this.getStringId(e.id);return t||pn(`Warning: No string ID mapping found for numeric ID ${e.id}, using as-is`),{namespace:"penpal",type:"CALL",id:t||String(e.id),methodPath:e.methodName.split("."),args:e.args}}default:return pn("React Native: Unknown deprecated penpal message type:",e.penpal),e}return e}setupMessagePort(e){pn("React Native: setupMessagePort called but ignored (MessagePort not supported)")}destroy(){this.isInitialized&&(this.handlers.clear(),this.messageBuffer=[],this.stringToNumericId.clear(),this.numericToStringId.clear(),this.nextNumericId=1,this.isInitialized=!1,this.hasBeenUsed=!1,pn("ReactNativeMessenger destroyed and ready for reuse"))}reset(){pn("ReactNativeMessenger reset for reuse"),this.handlers.clear(),this.messageBuffer=[],this.isInitialized=!1,this.hasBeenUsed=!1,this.nextNumericId=1,this.stringToNumericId.clear(),this.numericToStringId.clear()}getNumericId(e){let t=this.stringToNumericId.get(e);return t||(t=this.nextNumericId++,this.stringToNumericId.set(e,t),this.numericToStringId.set(t,e),pn(`ID mapping created: "${e}" -> ${t}`)),t}getStringId(e){return this.numericToStringId.get(e)}};const Ls=e=>({name:e.name,message:e.message,stack:e.stack,penpalCode:e instanceof As?e.code:void 0}),Bs=(e,t=[])=>{const r=[];for(const n of Object.keys(e)){const s=e[n];_s(s)?r.push([...t,n]):Es(s)&&r.push(...Bs(s,[...t,n]))}return r},Fs=e=>e.join(".");let qs=class{value;transferables;constructor(e,t){this.value=e,this.transferables=t?.transferables}};const js=(e,t,r)=>({namespace:bs,channel:e,type:"REPLY",callId:t,isError:!0,...r instanceof Error?{value:Ls(r),isSerializedErrorInstance:!0}:{value:r}}),Gs=(e,t,r,n)=>{let s=!1;const i=async i=>{if(s)return;if(!ks(i))return;n?.(`Received ${Fs(i.methodPath)}() call`,i);const{methodPath:o,args:a,id:c}=i;let h,u;try{const e=((e,t)=>{const r=e.reduce((e,t)=>Es(e)?e[t]:void 0,t);return _s(r)?r:void 0})(o,t);if(!e)throw new As("METHOD_NOT_FOUND",`Method \`${Fs(o)}\` is not found.`);let n=await e(...a);n instanceof qs&&(u=n.transferables,n=await n.value),h={namespace:bs,channel:r,type:"REPLY",callId:c,value:n}}catch(e){h=js(r,c,e)}if(!s)try{n?.(`Sending ${Fs(o)}() reply`,h),e.sendMessage(h,u)}catch(t){throw"DataCloneError"===t.name&&(h=js(r,c,t),n?.(`Sending ${Fs(o)}() reply`,h),e.sendMessage(h)),t}};return e.addMessageHandler(i),()=>{s=!0,e.removeMessageHandler(i)}};let Hs=class{transferables;timeout;constructor(e){this.transferables=e?.transferables,this.timeout=e?.timeout}};const zs=new Set(["apply","call","bind"]),Vs=(e,t,r=[])=>new Proxy(r.length?()=>{}:Object.create(null),{get(n,s){if("then"!==s)return r.length&&zs.has(s)?Reflect.get(n,s):Vs(e,t,[...r,s])},apply:(t,n,s)=>e(r,s)}),Ks=e=>new As("CONNECTION_DESTROYED",`Method call ${Fs(e)}() failed due to destroyed connection`),Ws=(e,t,r)=>{let n=!1;const s=new Map,i=e=>{if(!Rs(e))return;const{callId:t,value:n,isError:i,isSerializedErrorInstance:o}=e,a=s.get(t);a&&(s.delete(t),r?.(`Received ${Fs(a.methodPath)}() call`,e),i?a.reject(o?(({name:e,message:t,stack:r,penpalCode:n})=>{const s=n?new As(n,t):new Error(t);return s.name=e,s.stack=r,s})(n):n):a.resolve(n))};return e.addMessageHandler(i),{remoteProxy:Vs((i,o)=>{if(n)throw Ks(i);const a=sn(),c=o[o.length-1],h=c instanceof Hs,{timeout:u,transferables:l}=h?c:{},d=h?o.slice(0,-1):o;return new Promise((n,o)=>{const c=void 0!==u?window.setTimeout(()=>{s.delete(a),o(new As("METHOD_CALL_TIMEOUT",`Method call ${Fs(i)}() timed out after ${u}ms`))},u):void 0;s.set(a,{methodPath:i,resolve:n,reject:o,timeoutId:c});try{const n={namespace:bs,channel:t,type:"CALL",id:a,methodPath:i,args:d};r?.(`Sending ${Fs(i)}() call`,n),e.sendMessage(n,l)}catch(n){o(new As("TRANSMISSION_FAILED",n.message))}})},r),destroy:()=>{n=!0,e.removeMessageHandler(i);for(const{methodPath:e,reject:t,timeoutId:r}of s.values())clearTimeout(r),t(Ks(e));s.clear()}}},Ys=({messenger:e,methods:t,timeout:r,channel:n,log:s})=>{const i=sn();let o;const a=[];let c=!1;const h=Bs(t),{promise:u,resolve:l,reject:d}=(()=>{let e,t;return{promise:new Promise((r,n)=>{e=r,t=n}),resolve:e,reject:t}})(),f=setTimeout(()=>{d(new As("CONNECTION_TIMEOUT",`Connection timed out after ${r}ms`))},r),p=()=>{for(const e of a)e()},m=()=>{if(c)return;a.push(Gs(e,t,n,s));const{remoteProxy:r,destroy:i}=Ws(e,n,s);a.push(i),clearTimeout(f),c=!0,l({remoteProxy:r,destroy:p})},g=()=>{const t={namespace:bs,type:"SYN",channel:n,participantId:i};s?.("Sending handshake SYN",t);try{e.sendMessage(t)}catch(t){d(new As("TRANSMISSION_FAILED",t.message))}},y=t=>{Ps(t)&&(t=>{if(s?.("Received handshake SYN",t),t.participantId===o&&o!==Ns)return;if(o=t.participantId,g(),!(i>o||o===Ns))return;const r={namespace:bs,channel:n,type:"ACK1",methodPaths:h};s?.("Sending handshake ACK1",r);try{e.sendMessage(r)}catch(t){d(new As("TRANSMISSION_FAILED",t.message))}})(t),Ss(t)&&(t=>{s?.("Received handshake ACK1",t);const r={namespace:bs,channel:n,type:"ACK2"};s?.("Sending handshake ACK2",r);try{e.sendMessage(r)}catch(t){return void d(new As("TRANSMISSION_FAILED",t.message))}m()})(t),Is(t)&&(e=>{s?.("Received handshake ACK2",e),m()})(t)};return e.addMessageHandler(y),a.push(()=>e.removeMessageHandler(y)),g(),u},Js=new WeakSet,Qs=({messenger:e,methods:t={},timeout:r,channel:n,log:s})=>{if(!e)throw new As("INVALID_ARGUMENT","messenger must be defined");if(Js.has(e))throw new As("INVALID_ARGUMENT","A messenger can only be used for a single connection");Js.add(e);const i=[e.destroy],o=(e=>{let t,r=!1;return(...n)=>(r||(r=!0,t=e(...n)),t)})(t=>{if(t){const r={namespace:bs,channel:n,type:"DESTROY"};try{e.sendMessage(r)}catch(t){}}for(const e of i)e();s?.("Connection destroyed")}),a=e=>(e=>Es(e)&&e.namespace===bs)(e)&&e.channel===n;return{promise:(async()=>{try{e.initialize({log:s,validateReceivedMessage:a}),e.addMessageHandler(e=>{(e=>"DESTROY"===e.type)(e)&&o(!1)});const{remoteProxy:c,destroy:h}=await Ys({messenger:e,methods:t,timeout:r,channel:n,log:s});return i.push(h),c}catch(e){throw o(!0),e}})(),destroy:()=>{o(!0)}}};var $s;!function(e){e.RECOVER="recover",e.RECOVERED="recovered",e.CREATE="create",e.CREATED="created",e.UPDATE_AUTHENTICATION="update-authentication",e.AUTHENTICATION_UPDATED="authentication-updated",e.SIGN="sign",e.SET_RECOVERY_METHOD="set-recovery-method",e.SWITCH_CHAIN="switch-chain",e.CHAIN_SWITCHED="chain-switched",e.EXPORT="export",e.SIGNED="signed",e.LOGGED_OUT="logged-out",e.GET_CURRENT_DEVICE="get-current-device",e.CURRENT_DEVICE="current-device"}($s||($s={}));let Xs=class{uuid;action=$s.GET_CURRENT_DEVICE;playerID;constructor(e,t){this.uuid=e,this.playerID=t}};class Zs{uuid;action=$s.SIGN;message;requestConfiguration;requireArrayify;requireHash;chainType;constructor(e,t,r,n,s,i){this.uuid=e,this.message=t,this.requestConfiguration=r,this.requireArrayify=n,this.requireHash=s,this.chainType=i||"EVM"}}class ei{uuid;action=$s.SWITCH_CHAIN;chainId;requestConfiguration;constructor(e,t,r){this.uuid=e,this.chainId=t,this.requestConfiguration=r}}class ti{uuid;action=$s.EXPORT;requestConfiguration;constructor(e,t){this.uuid=e,this.requestConfiguration=t}}class ri{uuid;action=$s.SET_RECOVERY_METHOD;recoveryMethod;recoveryPassword;encryptionSession;passkeyKey;passkeyId;requestConfiguration;constructor(e,t,r,n,s,i,o){this.uuid=e,this.recoveryMethod=t,this.recoveryPassword=n,this.encryptionSession=s,this.requestConfiguration=r,this.passkeyKey=i,this.passkeyId=o}}function ni(e){return"error"in e}class si{uuid;action=$s.UPDATE_AUTHENTICATION;accessToken;recovery;constructor(e,t,r){this.uuid=e,this.accessToken=t,this.recovery=r}}var ii;!function(e){e.OPENFORT="openfort"}(ii||(ii={}));class oi extends Rr{constructor(){super(yr.MISSING_RECOVERY_PASSWORD,"This embedded signer requires a password to be recovered","password")}}class ai extends Rr{constructor(){super(yr.INCORRECT_PASSKEY,"Wrong recovery passkey for this embedded signer","passkey")}}class ci extends Rr{constructor(){super(yr.MISSING_PROJECT_ENTROPY,"Project entropy is missing","entropy")}}let hi=class extends Rr{constructor(){super(yr.WRONG_RECOVERY_PASSWORD,"Wrong recovery password for this embedded signer","password")}},ui=class extends _r{constructor(){super(yr.NOT_CONFIGURED,"Signer is not configured")}},li=class extends vr{constructor(){super(yr.OTP_REQUIRED,"OTP verification required")}};class di{messenger;connection;remote;storage;sdkConfiguration;isInitialized=!1;initializationPromise=null;hasFailed=!1;constructor(e,t,r){if(!e)throw new Er("Configuration is required for IframeManager");if(!t)throw new Er("Storage is required for IframeManager");if(!r)throw new Er("Messenger is required for IframeManager");this.sdkConfiguration=e,this.storage=t,this.messenger=r}async initialize(){if(!this.isInitialized){if(this.hasFailed)throw new vr(yr.INTERNAL_ERROR,"Failed to establish iFrame connection: Previous connection attempt failed");if(this.initializationPromise)await this.initializationPromise;else{this.initializationPromise=this.doInitialize();try{await this.initializationPromise,this.isInitialized=!0}catch(e){throw this.hasFailed=!0,this.initializationPromise=null,e}}}}async doInitialize(){pn("Initializing IframeManager connection..."),this.messenger.initialize({validateReceivedMessage:e=>!(!e||"object"!=typeof e),log:pn}),this.connection=Qs({messenger:this.messenger,timeout:1e4,log:pn});try{this.remote=await this.connection.promise,pn("IframeManager connection established")}catch(e){const t=e;throw dn.captureException(t),this.destroy(),pn("Failed to establish connection:",t),new vr(yr.INTERNAL_ERROR,`Failed to establish iFrame connection: ${t.cause||t.message}\n        \n        In apps built with:\n        - react native\n        - swift\n        - unity (non-webgl) \n        \n        You must configure your origin in the openfort dashboard before using the embedded wallet.\n\n        For more information, see: https://www.openfort.io/docs/configuration/native-apps\n        `)}}async ensureConnection(){if(this.isInitialized&&this.remote||await this.initialize(),!this.remote)throw new vr(yr.INTERNAL_ERROR,"Failed to establish connection");return this.remote}handleError(e){if(ni(e)){if("not-configured-error"===e.error)throw this.storage.remove(pr.ACCOUNT),new ui;if("missing-user-entropy-error"===e.error)throw this.storage.remove(pr.ACCOUNT),new oi;if("missing-project-entropy-error"===e.error)throw this.storage.remove(pr.ACCOUNT),new ci;if("incorrect-user-entropy-error"===e.error)throw new hi;if("missing-passkey-error"===e.error)throw this.storage.remove(pr.ACCOUNT),new oi;if("incorrect-passkey-error"===e.error)throw new ai;if("otp-required-error"===e.error)throw new li;throw this.storage.remove(pr.ACCOUNT),new vr(yr.INTERNAL_ERROR,`Unknown error: ${e.error}`)}throw e}async buildRequestConfiguration(){const e=await mr.fromStorage(this.storage);if(!e)throw new br(yr.NOT_LOGGED_IN,"Must be authenticated to create a signer");const t={auth:ii.OPENFORT,authProvider:e.thirdPartyProvider,token:e.token,tokenType:e.thirdPartyTokenType};return{thirdPartyProvider:e.thirdPartyProvider,thirdPartyTokenType:e.thirdPartyTokenType,token:e.token,publishableKey:this.sdkConfiguration.baseConfiguration.publishableKey,openfortURL:this.sdkConfiguration.backendUrl,shieldAuthentication:t,shieldAPIKey:this.sdkConfiguration.shieldConfiguration?.shieldPublishableKey||"",shieldURL:this.sdkConfiguration.shieldUrl,encryptionKey:this.sdkConfiguration?.shieldConfiguration?.shieldEncryptionKey??void 0,appNativeIdentifier:this.sdkConfiguration?.nativeAppIdentifier??void 0}}async buildIFrameRequestConfiguration(){const e=await mr.fromStorage(this.storage);if(!e)throw new br(yr.NOT_LOGGED_IN,"Must be authenticated to create a signer");const t={auth:ii.OPENFORT,authProvider:e.thirdPartyProvider,token:e.token,tokenType:e.thirdPartyTokenType};return{thirdPartyTokenType:e.thirdPartyTokenType??null,thirdPartyProvider:e.thirdPartyProvider??null,accessToken:e.token,playerID:e.userId,recovery:t,chainId:null,password:null,passkey:null}}async create(e){if(!this.sdkConfiguration.shieldConfiguration)throw new Error("shieldConfiguration is required");const t=await this.ensureConnection(),r=await this.buildIFrameRequestConfiguration();r.chainId=e.chainId??null,r.password=e?.entropy?.recoveryPassword??null,r.recovery={...r.recovery,encryptionSession:e?.entropy?.encryptionSession},r.passkey=e?.entropy?.passkey??null;const n={uuid:sn(),action:$s.CREATE,recovery:r.recovery,publishableKey:this.sdkConfiguration.baseConfiguration.publishableKey,shieldAPIKey:this.sdkConfiguration.shieldConfiguration?.shieldPublishableKey||"",accessToken:r.accessToken,playerID:r.playerID,thirdPartyProvider:r.thirdPartyProvider,thirdPartyTokenType:r.thirdPartyTokenType,encryptionKey:r.password,encryptionSession:r.recovery?.encryptionSession??null,passkey:r.passkey??null,openfortURL:this.sdkConfiguration.backendUrl,shieldURL:this.sdkConfiguration.shieldUrl,chainId:e.chainId??null,accountType:e.accountType,chainType:e.chainType,nativeAppIdentifier:this.sdkConfiguration?.nativeAppIdentifier??null},s=await t.create(n);return ni(s)&&this.handleError(s),"undefined"!=typeof sessionStorage&&sessionStorage.setItem("iframe-version",s.version??"undefined"),s}async recover(e){if(!this.sdkConfiguration.shieldConfiguration)throw new Error("shieldConfiguration is required");const t=await hn.fromStorage(this.storage),r=await this.ensureConnection(),n=await this.buildIFrameRequestConfiguration();n.chainId=t?.chainId??null,n.password=e?.entropy?.recoveryPassword??null,n.recovery={...n.recovery,encryptionSession:e?.entropy?.encryptionSession},n.passkey=e?.entropy?.passkey??null;const s={uuid:sn(),action:$s.RECOVER,recovery:n.recovery,publishableKey:this.sdkConfiguration.baseConfiguration.publishableKey,shieldAPIKey:this.sdkConfiguration.shieldConfiguration?.shieldPublishableKey||"",accessToken:n.accessToken,playerID:n.playerID,thirdPartyProvider:n.thirdPartyProvider,thirdPartyTokenType:n.thirdPartyTokenType,encryptionKey:n.password,encryptionSession:n.recovery?.encryptionSession??null,passkey:n.passkey??null,openfortURL:this.sdkConfiguration.backendUrl,shieldURL:this.sdkConfiguration.shieldUrl,account:e.account,nativeAppIdentifier:this.sdkConfiguration?.nativeAppIdentifier??null},i=await r.recover(s);return ni(i)&&this.handleError(i),"undefined"!=typeof sessionStorage&&sessionStorage.setItem("iframe-version",i.version??"undefined"),i}async sign(e,t,r,n){pn("[iframe] ensureConnection");const s=await this.ensureConnection(),i=new Zs(sn(),e,await this.buildRequestConfiguration(),t,r,n);pn("[iframe] done ensureConnection");const o=await s.sign(i);return pn("[iframe] response",o),ni(o)&&this.handleError(o),"undefined"!=typeof sessionStorage&&sessionStorage.setItem("iframe-version",o.version??"undefined"),o.signature}async switchChain(e){const t=await this.ensureConnection(),r=new ei(sn(),e,await this.buildRequestConfiguration()),n=await t.switchChain(r);return ni(n)&&this.handleError(n),n}async export(){const e=await this.ensureConnection(),t=new ti(sn(),await this.buildRequestConfiguration()),r=await e.export(t);return ni(r)&&this.handleError(r),"undefined"!=typeof sessionStorage&&sessionStorage.setItem("iframe-version",r.version??"undefined"),r.key}async setRecoveryMethod(e,t,r,n,s){const i=await this.ensureConnection(),o=new ri(sn(),e,await this.buildRequestConfiguration(),t,r,n,s),a=await i.setRecoveryMethod(o);ni(a)&&this.handleError(a),"undefined"!=typeof sessionStorage&&sessionStorage.setItem("iframe-version",a.version??"undefined")}async getCurrentDevice(e){const t=await this.ensureConnection(),r=new Xs(sn(),e);try{const e=await t.getCurrentDevice(r);return ni(e)&&this.handleError(e),"undefined"!=typeof sessionStorage&&sessionStorage.setItem("iframe-version",e.version??"undefined"),e}catch(e){if(e instanceof ui)return null;throw e}}async updateAuthentication(){if(!this.isLoaded()||!this.remote)return void pn("IframeManager not loaded, skipping authentication update");const e=await mr.fromStorage(this.storage);if(!e)return void pn("No authentication found, skipping update");const t=new si(sn(),e.token);pn("Updating authentication in iframe with token");const r=await this.remote.updateAuthentication(t);ni(r)&&this.handleError(r)}async disconnect(){const e=await this.ensureConnection(),t={uuid:sn()};await e.logout(t)}async onMessage(e){pn("[HANDSHAKE DEBUG] IframeManager.onMessage called with:",e),this.messenger instanceof Ds?(this.isInitialized||this.connection?pn(`[HANDSHAKE DEBUG] Connection already initialized (isInitialized: ${this.isInitialized}, hasConnection: ${!!this.connection})`):(pn("[HANDSHAKE DEBUG] First message received, initializing connection..."),this.initialize().catch(e=>{pn("[HANDSHAKE DEBUG] Failed to initialize connection:",e)})),pn("[HANDSHAKE DEBUG] Passing message to ReactNativeMessenger"),this.messenger.handleMessage(e)):pn("[HANDSHAKE DEBUG] Not a ReactNativeMessenger, ignoring message")}isLoaded(){return this.isInitialized&&void 0!==this.remote}destroy(){this.connection&&this.connection.destroy(),this.remote=void 0,this.isInitialized=!1,this.connection=void 0,this.initializationPromise=null}}let fi=class{#t;#s;#e;#n;#o;#i=new Set;#a;#r=!1;constructor({remoteWindow:e,allowedOrigins:t}){if(!e)throw new As("INVALID_ARGUMENT","remoteWindow must be defined");this.#t=e,this.#s=t?.length?t:[window.origin]}initialize=({log:e,validateReceivedMessage:t})=>{this.#e=e,this.#n=t,window.addEventListener("message",this.#u)};sendMessage=(e,t)=>{if(Ps(e)){const r=this.#f(e);return void this.#t.postMessage(e,{targetOrigin:r,transfer:t})}if(Ss(e)||this.#r){const r=this.#r?(e=>{if(Ss(e))return{penpal:Os.SynAck,methodNames:e.methodPaths.map(Ms)};if(ks(e))return{penpal:Os.Call,id:e.id,methodName:Ms(e.methodPath),args:e.args};if(Rs(e))return e.isError?{penpal:Os.Reply,id:e.callId,resolution:Cs.Rejected,...e.isSerializedErrorInstance?{returnValue:e.value,returnValueIsError:!0}:{returnValue:e.value}}:{penpal:Os.Reply,id:e.callId,resolution:Cs.Fulfilled,returnValue:e.value};throw Us(e)})(e):e,n=this.#f(e);return void this.#t.postMessage(r,{targetOrigin:n,transfer:t})}if(Is(e)){const{port1:r,port2:n}=new MessageChannel;this.#a=r,r.addEventListener("message",this.#p),r.start();const s=[n,...t||[]],i=this.#f(e);return void this.#t.postMessage(e,{targetOrigin:i,transfer:s})}if(!this.#a)throw new Ts("Port is undefined");this.#a.postMessage(e,{transfer:t})};addMessageHandler=e=>{this.#i.add(e)};removeMessageHandler=e=>{this.#i.delete(e)};destroy=()=>{window.removeEventListener("message",this.#u),this.#h(),this.#i.clear()};#c=e=>this.#s.some(t=>t instanceof RegExp?t.test(e):t===e||"*"===t);#f=e=>{if(Ps(e))return"*";if(!this.#o)throw new Ts("Concrete remote origin not set");return"null"===this.#o&&this.#s.includes("*")?"*":this.#o};#h=()=>{this.#a?.removeEventListener("message",this.#p),this.#a?.close(),this.#a=void 0};#u=({source:e,origin:t,ports:r,data:n})=>{if(e===this.#t&&((e=>Es(e)&&"penpal"in e)(n)&&(this.#e?.("Please upgrade the child window to the latest version of Penpal."),this.#r=!0,n=(e=>{if(e.penpal===Os.Syn)return{namespace:bs,channel:void 0,type:"SYN",participantId:Ns};if(e.penpal===Os.SynAck)return{namespace:bs,channel:void 0,type:"ACK1",methodPaths:e.methodNames.map(xs)};if(e.penpal===Os.Ack)return{namespace:bs,channel:void 0,type:"ACK2"};if(e.penpal===Os.Call)return{namespace:bs,channel:void 0,type:"CALL",id:e.id,methodPath:xs(e.methodName),args:e.args};if(e.penpal===Os.Reply)return e.resolution===Cs.Fulfilled?{namespace:bs,channel:void 0,type:"REPLY",callId:e.id,value:e.returnValue}:{namespace:bs,channel:void 0,type:"REPLY",callId:e.id,isError:!0,...e.returnValueIsError?{value:e.returnValue,isSerializedErrorInstance:!0}:{value:e.returnValue}};throw Us(e)})(n)),this.#n?.(n)))if(this.#c(t)){if(Ps(n)&&(this.#h(),this.#o=t),Is(n)&&!this.#r){if([this.#a]=r,!this.#a)throw new Ts("No port received on ACK2");this.#a.addEventListener("message",this.#p),this.#a.start()}for(const e of this.#i)e(n)}else this.#e?.(`Received a message from origin \`${t}\` which did not match allowed origins \`[${this.#s.join(", ")}]\``)};#p=({data:e})=>{if(this.#n?.(e))for(const t of this.#i)t(e)}};class pi{storage;validateAndRefreshToken;ensureInitialized;eventEmitter;passkeyHandler;iframeManager=null;iframeManagerPromise=null;signer=null;signerPromise=null;provider=null;messagePoster=null;messenger=null;constructor(e,t,r,n,s){this.storage=e,this.validateAndRefreshToken=t,this.ensureInitialized=r,this.eventEmitter=n,this.passkeyHandler=s,this.eventEmitter.on(Or.ON_LOGOUT,()=>{pn("Handling logout event in EmbeddedWalletApi"),this.handleLogout()})}get backendApiClients(){const e=cn.getInstance();if(!e)throw new Er("Configuration not found");return new fr({basePath:e.backendUrl,accessToken:e.baseConfiguration.publishableKey,nativeAppIdentifier:e.nativeAppIdentifier})}async getIframeManager(){if(pn("[HANDSHAKE DEBUG] getIframeManager called"),this.iframeManager&&this.iframeManager.hasFailed&&(pn("[HANDSHAKE DEBUG] Existing iframeManager has failed, clearing for recreation"),this.messenger&&(this.messenger.destroy(),this.messenger=null),this.iframeManager=null),this.iframeManager)return pn("[HANDSHAKE DEBUG] Returning existing iframeManager instance"),this.iframeManager;if(this.iframeManagerPromise)return pn("[HANDSHAKE DEBUG] Returning existing iframeManagerPromise"),this.iframeManagerPromise;pn("[HANDSHAKE DEBUG] Creating new iframeManager"),this.iframeManagerPromise=this.createIframeManager();try{return pn("[HANDSHAKE DEBUG] Awaiting iframeManager creation"),this.iframeManager=await this.iframeManagerPromise,pn("[HANDSHAKE DEBUG] IframeManager created successfully"),this.iframeManagerPromise=null,this.iframeManager}catch(e){throw pn("[HANDSHAKE DEBUG] Error creating iframeManager:",e),this.iframeManagerPromise=null,this.messenger&&(this.messenger.destroy(),this.messenger=null),this.iframeManager=null,e}}async createIframeManager(){pn("[HANDSHAKE DEBUG] createIframeManager starting");const e=cn.getInstance();if(!e)throw pn("[HANDSHAKE DEBUG] Configuration not found"),new Er("Configuration not found");let t;if(pn("[HANDSHAKE DEBUG] Configuration found"),this.messagePoster)pn("[HANDSHAKE DEBUG] Creating ReactNativeMessenger with messagePoster"),this.messenger&&(pn("[HANDSHAKE DEBUG] Destroying old messenger before creating new one"),this.messenger.destroy()),this.messenger=new Ds(this.messagePoster),pn("[HANDSHAKE DEBUG] Created new ReactNativeMessenger instance"),t=this.messenger;else{pn("[HANDSHAKE DEBUG] Creating WindowMessenger for browser mode");const r=this.createIframe(e.iframeUrl),n=new URL(e.iframeUrl).origin;t=new fi({remoteWindow:r.contentWindow,allowedOrigins:[n]}),pn("[HANDSHAKE DEBUG] Created WindowMessenger")}return pn("[HANDSHAKE DEBUG] Creating IframeManager instance"),new di(e,this.storage,t)}async ensureSigner(){if(this.iframeManager&&this.iframeManager.hasFailed&&(pn("IframeManager has failed, clearing signer for recreation"),this.signer=null),this.signer)return this.signer;if(this.signerPromise)return this.signerPromise;this.signerPromise=this.createSigner();try{return this.signer=await this.signerPromise,this.signer}catch(e){throw this.signerPromise=null,e}finally{this.signerPromise=null}}async createSigner(){const e=await this.getIframeManager();return new mn(e,this.storage,this.backendApiClients,this.passkeyHandler,this.eventEmitter)}createIframe(e){if("undefined"==typeof document)throw new Er("Document is not available. Please provide a message poster for non-browser environments.");const t=document.getElementById("openfort-iframe");t&&t.remove();const r=document.createElement("iframe");return r.style.display="none",r.id="openfort-iframe",r.src=e,document.body.appendChild(r),r}async getPasskeyKey(e){const t=await mr.fromStorage(this.storage);if(!t?.userId)throw new Ar("auth","User is required for passkey key derivation. Logout and login again.",401);return this.passkeyHandler.deriveAndExportKey({id:e,seed:t.userId})}async getEntropy(e){switch(e.recoveryMethod){case Cr.PASSWORD:return{recoveryPassword:e.password};case Cr.AUTOMATIC:return{encryptionSession:e.encryptionSession};case Cr.PASSKEY:return{passkey:e.passkeyInfo?{id:e.passkeyInfo.passkeyId,key:e.passkeyInfo.passkeyKey||await this.getPasskeyKey(e.passkeyInfo.passkeyId)}:{}};default:throw new Er("Invalid recovery method")}}async configure(e){await this.validateAndRefreshToken();const t=e.recoveryParams??{recoveryMethod:Cr.AUTOMATIC},[r,n]=await Promise.all([this.ensureSigner(),this.getEntropy(t)]),s={chainId:e.chainId,entropy:n,accountType:e.accountType??qr.SMART_ACCOUNT,chainType:e.chainType??jr.EVM,getPasskeyKeyFn:async e=>this.getPasskeyKey(e)},i=await r.configure(s);return{id:i.id,chainId:i.chainId,address:i.address,ownerAddress:i.ownerAddress,chainType:i.chainType,accountType:i.accountType,implementationType:i.implementationType,factoryAddress:i.factoryAddress,salt:i.salt,createdAt:i.createdAt,implementationAddress:i.implementationAddress,recoveryMethod:hn.parseRecoveryMethod(i.recoveryMethod),recoveryMethodDetails:i.recoveryMethodDetails}}async create(e){await this.validateAndRefreshToken();const t=e.recoveryParams??{recoveryMethod:Cr.AUTOMATIC},r=await mr.fromStorage(this.storage);if(!r)throw new br(yr.NOT_LOGGED_IN,"missing authentication");if(t.recoveryMethod===Cr.PASSKEY){if(!r.userId)throw new Er("User ID is required for passkey creation");const e=await this.passkeyHandler.createPasskey({id:nn.randomPasskeyName(),displayName:"Openfort - Embedded Wallet",seed:r.userId});if(!e.key)throw new Er("Passkey creation failed: no key material returned");t.passkeyInfo={passkeyId:e.id,passkeyKey:e.key}}const[n,s]=await Promise.all([this.ensureSigner(),this.getEntropy(t)]),i=await n.create({accountType:e.accountType,chainType:e.chainType,chainId:e.chainId,entropy:s}),o={id:i.id,chainId:i.chainId,address:i.address,ownerAddress:i.ownerAddress,chainType:i.chainType,accountType:i.accountType,implementationType:i.implementationType,factoryAddress:i.factoryAddress,salt:i.salt,createdAt:i.createdAt,implementationAddress:i.implementationAddress,recoveryMethod:hn.parseRecoveryMethod(i.recoveryMethod),recoveryMethodDetails:i.recoveryMethodDetails};return this.eventEmitter.emit(Or.ON_EMBEDDED_WALLET_CREATED,o),o}async recover(e){await this.validateAndRefreshToken();const t=e.recoveryParams??{recoveryMethod:Cr.AUTOMATIC};if(t.recoveryMethod===Cr.PASSKEY){if(!t.passkeyInfo?.passkeyId)throw new Er("Passkey ID must be provided for passkey recovery");t.passkeyInfo={passkeyId:t.passkeyInfo.passkeyId}}const[r,n]=await Promise.all([this.ensureSigner(),this.getEntropy(t)]),s=await r.recover({account:e.account,entropy:n}),i={id:s.id,chainId:s.chainId,implementationAddress:s.implementationAddress,factoryAddress:s.factoryAddress,salt:s.salt,address:s.address,ownerAddress:s.ownerAddress,chainType:s.chainType,accountType:s.accountType,implementationType:s.implementationType,createdAt:s.createdAt,recoveryMethod:hn.parseRecoveryMethod(s.recoveryMethod),recoveryMethodDetails:s.recoveryMethodDetails};return this.eventEmitter.emit(Or.ON_EMBEDDED_WALLET_RECOVERED,i),i}async signMessage(e,t){await this.validateAndRefreshToken();const r=await this.ensureSigner(),{hashMessage:n=!0,arrayifyMessage:s=!1}=t||{},i=await hn.fromStorage(this.storage);return await r.sign(e,s,n,i?.chainType)}async signTypedData(e,t,r){await this.validateAndRefreshToken();const n=await this.ensureSigner(),s=await hn.fromStorage(this.storage);if(!s)throw new _r(yr.MISSING_SIGNER,"No account found");const i={...t};delete i.EIP712Domain;const{_TypedDataEncoder:o}=await Promise.resolve().then(function(){return yu}),a=o.hash(e,i,r);return await Sn({hash:a,implementationType:s.implementationType||s.type,chainId:Number(s.chainId),signer:n,address:s.address,ownerAddress:s.ownerAddress,factoryAddress:s.factoryAddress,salt:s.salt})}async exportPrivateKey(){await this.validateAndRefreshToken();const e=await this.ensureSigner();return await e.export()}async setRecoveryMethod(e,t){await this.validateAndRefreshToken();const r=await this.ensureSigner(),n=await mr.fromStorage(this.storage);if(!n)throw new br(yr.NOT_LOGGED_IN,"missing authentication");let s,i,o,a;if(e.recoveryMethod===Cr.PASSKEY){const e=await hn.fromStorage(this.storage);if(!e)throw new Er("missing account");const t=e?.recoveryMethodDetails?.passkeyId;if(!t)throw new Er("missing passkey id for account");if(!n.userId)throw new Er("User ID is required for passkey key derivation");o={passkeyId:t,passkeyKey:await this.passkeyHandler.deriveAndExportKey({id:t,seed:n.userId})}}else if(t.recoveryMethod===Cr.PASSKEY){if(!n.userId)throw new Er("User ID is required for passkey creation");const e=await this.passkeyHandler.createPasskey({id:nn.randomPasskeyName(),displayName:"Openfort - Embedded Wallet",seed:n.userId});if(!e.key)throw new Er("Passkey creation failed: no key material returned");o={passkeyId:e.id,passkeyKey:e.key},a={passkeyId:e.id}}if(e.recoveryMethod===Cr.PASSWORD?s=e.password:t.recoveryMethod===Cr.PASSWORD&&(s=t.password),e.recoveryMethod===Cr.AUTOMATIC?i=e.encryptionSession:t.recoveryMethod===Cr.AUTOMATIC&&(i=t.encryptionSession),!s&&!i)throw new Er("Password or encryption session is not provided");await r.setRecoveryMethod({recoveryMethod:t.recoveryMethod,recoveryPassword:s,encryptionSession:i,passkeyInfo:o});const c=await hn.fromStorage(this.storage);c&&new hn({...c,recoveryMethod:t.recoveryMethod,recoveryMethodDetails:a}).save(this.storage)}async get(){await this.validateAndRefreshToken();const e=await hn.fromStorage(this.storage);if(!e)throw new _r(yr.MISSING_SIGNER,"No signer configured");if(!await mr.fromStorage(this.storage))throw new br(yr.NOT_LOGGED_IN,"No access token found");return{id:e.id,chainId:e.chainId,address:e.address,ownerAddress:e.ownerAddress,factoryAddress:e.factoryAddress,salt:e.salt,chainType:e.chainType,accountType:e.accountType,implementationAddress:e.implementationAddress,implementationType:e.implementationType,createdAt:e.createdAt,recoveryMethod:hn.parseRecoveryMethod(e.recoveryMethod),recoveryMethodDetails:e.recoveryMethodDetails}}async list(e){await this.validateAndRefreshToken();const t={accountType:qr.SMART_ACCOUNT,...e},r=cn.getInstance();if(!r)throw new Er("Configuration not found");const n=await mr.fromStorage(this.storage);if(!n)throw new br(yr.NOT_LOGGED_IN,"No access token found");return await this.validateAndRefreshToken(),fn(async()=>(await this.backendApiClients.accountsV2Api.getAccountsV2(t,{headers:n.thirdPartyProvider?{authorization:`Bearer ${r.baseConfiguration.publishableKey}`,"x-player-token":n.token,"x-auth-provider":n.thirdPartyProvider,"x-token-type":n.thirdPartyTokenType}:{authorization:`Bearer ${n.token}`,"x-project-key":r.baseConfiguration.publishableKey}})).data.data.map(e=>({chainType:e.chainType,id:e.id,address:e.address,active:e.smartAccount?.active,ownerAddress:e.ownerAddress,factoryAddress:e.smartAccount?.factoryAddress,salt:e.smartAccount?.salt,accountType:e.accountType,implementationAddress:e.smartAccount?.implementationAddress,createdAt:e.createdAt,implementationType:e.smartAccount?.implementationType,chainId:e.chainId,recoveryMethod:hn.parseRecoveryMethod(e.recoveryMethod),recoveryMethodDetails:e.recoveryMethodDetails})),{context:"list"})}async getEmbeddedState(){try{return await mr.fromStorage(this.storage)?await hn.fromStorage(this.storage)?Nr.READY:Nr.EMBEDDED_SIGNER_NOT_CONFIGURED:Nr.UNAUTHENTICATED}catch(e){return pn("Failed to get embedded state:",e),Nr.UNAUTHENTICATED}}async getEthereumProvider(e){await this.ensureInitialized();const t={announceProvider:!0,...e},r=await mr.fromStorage(this.storage),n=await hn.fromStorage(this.storage);return this.provider?this.provider&&t.policy&&this.provider.updatePolicy(t.policy):(this.provider=new ws({storage:this.storage,openfortEventEmitter:this.eventEmitter,ensureSigner:this.ensureSigner.bind(this),account:n||void 0,authentication:r||void 0,backendApiClients:this.backendApiClients,policyId:t.policy,validateAndRefreshSession:this.validateAndRefreshToken.bind(this),chains:t.chains}),t.announceProvider&&function(e){if("undefined"==typeof window)return;const t=new CustomEvent("eip6963:announceProvider",{detail:Object.freeze(e)});window.dispatchEvent(t),window.addEventListener("eip6963:requestProvider",()=>window.dispatchEvent(t))}({info:{...vs,...t.providerInfo},provider:this.provider})),this.provider}async ping(e){try{e>0&&await new Promise(t=>{setTimeout(t,e)});const t=await this.getIframeManager();if(!t.isLoaded())return!1;const r=await mr.fromStorage(this.storage);if(r)try{return await t.getCurrentDevice(r.userId),!0}catch(e){return!1}return t.isLoaded()}catch(e){return pn("Ping failed:",e),!1}}getURL(){const e=cn.getInstance();if(!e)throw new Er("Configuration not found");return e.iframeUrl}async setMessagePoster(e){if(!e||"function"!=typeof e.postMessage)throw new Er("Invalid message poster");this.messagePoster=e,this.messenger&&this.messenger.destroy(),this.iframeManager&&this.iframeManager.destroy(),this.signer=null,this.signerPromise=null,this.iframeManager=null,this.iframeManagerPromise=null,this.messenger=null}async handleLogout(){if("undefined"==typeof document&&!this.messagePoster)return pn("Skipping signer disconnect: no messagePoster available in non-browser environment"),this.provider=null,this.messenger=null,this.iframeManager=null,this.iframeManagerPromise=null,this.signer=null,void(this.signerPromise=null);const e=await this.ensureSigner();await e.disconnect(),this.provider=null,this.messenger=null,this.iframeManager=null,this.iframeManagerPromise=null,this.signer=null,this.signerPromise=null}async onMessage(e){if(!e||"object"!=typeof e)return void pn("Invalid message received:",e);pn("[HANDSHAKE DEBUG] EmbeddedWalletApi onMessage:",e);const t="penpal"===e.namespace&&"SYN"===e.type||e.penpal&&"string"==typeof e.penpal;if(t&&this.messenger&&this.messagePoster)return pn("[HANDSHAKE DEBUG] Passing message directly to existing ReactNativeMessenger"),void this.messenger.handleMessage(e);const r=await this.getIframeManager();pn(`[HANDSHAKE DEBUG] IframeManager obtained, isLoaded: ${r.isLoaded()}`),t&&!r.isLoaded()&&pn("[HANDSHAKE DEBUG] Received penpal message before connection initialized, setting up connection..."),pn("[HANDSHAKE DEBUG] Calling iframeManager.onMessage"),await r.onMessage(e),pn("[HANDSHAKE DEBUG] iframeManager.onMessage completed")}isReady(){return this.iframeManager?.isLoaded()||!1}}let mi=class{backendApiClients;validateAndRefreshToken;ensureInitialized;getSignerSignFunction;constructor(e,t,r,n,s){this.backendApiClients=t,this.validateAndRefreshToken=r,this.ensureInitialized=n,this.getSignerSignFunction=s}async sendSignatureTransactionIntentRequest(e,t=null,r=null,n=!1){if(await this.ensureInitialized(),!cn.getInstance())throw new Er("Configuration not found");await this.validateAndRefreshToken();let s=r;if(!s){if(!t)throw new Er("No signableHash or signature provided");if(!this.getSignerSignFunction)throw new _r(yr.MISSING_SIGNER,"In order to sign a transaction intent, a signer must be configured");const e=await this.getSignerSignFunction();s=await e(t)}const i={id:e,signatureRequest:{signature:s,optimistic:n}};return fn(async()=>(await this.backendApiClients.transactionIntentsApi.signature(i)).data,{context:"sendSignatureTransactionIntentRequest"})}async sendSignatureSessionRequest(e,t,r){await this.ensureInitialized();const n={id:e,signatureRequest:{signature:t,optimistic:r}};return fn(async()=>(await this.backendApiClients.sessionsApi.signatureSession(n)).data,{context:"sendSignatureSessionRequest"})}},gi=class{storage;authManager;validateAndRefreshToken;constructor(e,t,r){this.storage=e,this.authManager=t,this.validateAndRefreshToken=r}async get(){await this.validateAndRefreshToken();const e=await mr.fromStorage(this.storage);if(!e)throw new br(yr.NOT_LOGGED_IN,"No access token found");return await this.authManager.getUser(e)}};function yi(e){if(!e)throw new vr(yr.INTERNAL_ERROR,"User data is missing");return{id:e.id||"",email:e.email,name:e.name??void 0,image:e.image??void 0,emailVerified:e.emailVerified,isAnonymous:e.isAnonymous,createdAt:e.createdAt,updatedAt:e.updatedAt,phoneNumber:e.phoneNumber,phoneNumberVerified:e.phoneNumberVerified,linkedAccounts:e.linkedAccounts}}function wi(e){if(e)return{id:e.id,token:e.token,userId:e.userId,expiresAt:e.expiresAt,createdAt:e.createdAt,updatedAt:e.updatedAt}}class vi{backendApiClientsInstance;publishableKeyInstance;setBackendApiClients(e,t){this.backendApiClientsInstance=e,this.publishableKeyInstance=t}get backendApiClients(){if(!this.backendApiClientsInstance)throw new Er("Backend API clients not initialized");return this.backendApiClientsInstance}get publishableKey(){if(!this.publishableKeyInstance)throw new Er("Publishable key not initialized");return this.publishableKeyInstance}buildAuthHeaders(e){return{"x-project-key":this.publishableKey,...e&&{authorization:`Bearer ${e}`}}}async initOAuth(e,t,r){return await fn(async()=>(await this.backendApiClients.authApi.socialSignIn({socialSignInRequest:{provider:e,callbackURL:t,scopes:r?.scopes?.split(" "),disableRedirect:r?.skipBrowserRedirect??!1}},{headers:{"x-project-key":`${this.publishableKey}`}})).data.url||"",{context:"initOAuth"})}async linkOAuthToAnonymous(e,t,r){return await fn(async()=>(await this.backendApiClients.authApi.socialSignIn({socialSignInRequest:{provider:t,callbackURL:r}},{headers:{authorization:`Bearer ${e.token}`,"x-project-key":`${this.publishableKey}`}})).data.url||"",{context:"initOAuth"})}async registerGuest(){return fn(async()=>{const e=await this.backendApiClients.authApi.signInAnonymousPost({headers:{"x-project-key":`${this.publishableKey}`}});return{token:e.data.token,user:yi(e.data.user)}},{context:"registerGuest"})}async loginWithIdToken(e,t){const r={socialSignInRequest:{provider:e,idToken:{token:t}}};return await fn(async()=>{const e=await this.backendApiClients.authApi.socialSignIn(r,{headers:{"x-project-key":`${this.publishableKey}`}});return{token:e.data.token,user:yi(e.data.user)}},{context:"loginWithIdToken"})}async authenticateThirdParty(e,t){const r={thirdPartyOAuthRequest:{provider:e,token:t}};return fn(async()=>({userId:(await this.backendApiClients.userApi.thirdPartyV2(r,{headers:{"x-project-key":`${this.publishableKey}`}})).data.id}),{context:"authenticateThirdParty"})}async initSIWE(e){const t={siweNoncePostRequest:{walletAddress:e}};return{address:e,nonce:(await fn(async()=>this.backendApiClients.authApi.siweNoncePost(t,{headers:{"x-project-key":`${this.publishableKey}`}}),{context:"initSIWE"})).data.nonce}}async linkSIWE(e,t){const r={siweNoncePostRequest:{walletAddress:e}};return{address:e,nonce:(await fn(async()=>this.backendApiClients.authApi.linkSiweNoncePost(r,{headers:t.thirdPartyProvider?{authorization:`Bearer ${this.publishableKey}`,"x-player-token":t.token,"x-auth-provider":t.thirdPartyProvider,"x-token-type":t.thirdPartyTokenType}:this.buildAuthHeaders(t.token)}),{context:"linkSIWE"})).data.nonce}}async authenticateSIWE(e,t,r,n,s){const i={siweVerifyPostRequest:{signature:e,walletAddress:s,message:t,walletClientType:r,connectorType:n}};return fn(async()=>{const e=await this.backendApiClients.authApi.siweVerifyPost(i,{headers:{"x-project-key":`${this.publishableKey}`}}),t=e.data.user;return{token:e.data.token,user:yi(t)}},{context:"authenticateSIWE"})}async loginEmailPassword(e,t){return fn(async()=>{const r=(await this.backendApiClients.authApi.signInEmailPost({signInEmailPostRequest:{email:e,password:t}},{headers:{"x-project-key":`${this.publishableKey}`}})).data;return{token:r.token,user:yi(r.user)}},{context:"loginEmailPassword"})}async requestResetPassword(e,t){await fn(async()=>{await this.backendApiClients.authApi.requestPasswordResetPost({forgetPasswordPostRequest:{email:e,redirectTo:t}},{headers:{"x-project-key":`${this.publishableKey}`}})},{context:"requestResetPassword"})}async resetPassword(e,t){return fn(async()=>{await this.backendApiClients.authApi.resetPasswordPost({resetPasswordPostRequest:{newPassword:e,token:t}},{headers:{"x-project-key":`${this.publishableKey}`}})},{context:"resetPassword"})}async requestEmailVerification(e,t){await fn(async()=>{await this.backendApiClients.authApi.sendVerificationEmailPost({sendVerificationEmailPostRequest:{email:e,callbackURL:t}},{headers:{"x-project-key":`${this.publishableKey}`}})},{context:"requestEmailVerification"})}async verifyEmail(e,t){return fn(async()=>{await this.backendApiClients.authApi.verifyEmailGet({token:e,callbackURL:t})},{context:"verifyEmail"})}async signupEmailPassword(e,t,r,n,s){return fn(async()=>{const i=(await this.backendApiClients.authApi.signUpEmailPost({signUpEmailPostRequest:{email:e,password:t,name:r,callbackURL:n}},{headers:this.buildAuthHeaders(s)})).data;return null===i.token?{action:Fr.ACTION_VERIFY_EMAIL}:{token:i.token,user:yi(i.user)}},{context:"signupEmailPassword"})}async validateCredentials(e,t){pn("Validating credentials with token:",e.token);const r=await this.getSessionWithToken(e,t);return{token:r.session.token,user:yi(r.user),session:wi(r.session)}}async logout(e){return fn(async()=>{await this.backendApiClients.authApi.signOutPost(void 0,{headers:e.thirdPartyProvider?{authorization:`Bearer ${this.publishableKey}`,"x-player-token":e.token,"x-auth-provider":e.thirdPartyProvider,"x-token-type":e.thirdPartyTokenType}:this.buildAuthHeaders(e.token)})},{context:"logout"})}async getUser(e){return fn(async()=>yi((await this.backendApiClients.userApi.meV2({headers:e.thirdPartyProvider?{authorization:`Bearer ${this.publishableKey}`,"x-player-token":e.token,"x-auth-provider":e.thirdPartyProvider,"x-token-type":e.thirdPartyTokenType}:this.buildAuthHeaders(e.token)})).data),{context:"getUser"})}async linkOAuth(e,t,r,n){const s=n?.skipBrowserRedirect??!1,i={linkSocialPostRequest:{provider:t,callbackURL:r,scopes:n?.scopes?.split(" "),disableRedirect:s}},o=await fn(async()=>this.backendApiClients.authApi.linkSocialPost(i,{headers:e.thirdPartyProvider?{authorization:`Bearer ${this.publishableKey}`,"x-player-token":e.token,"x-auth-provider":e.thirdPartyProvider,"x-token-type":e.thirdPartyTokenType}:this.buildAuthHeaders(e.token)}),{context:"linkOAuth"});return"undefined"!=typeof window&&!s&&o.data.url&&window.location.assign(o.data.url),o.data.url||""}async unlinkOAuth(e,t){const r={unlinkAccountPostRequest:{providerId:e}};return fn(async()=>(await this.backendApiClients.authApi.unlinkAccountPost(r,{headers:t.thirdPartyProvider?{authorization:`Bearer ${this.publishableKey}`,"x-player-token":t.token,"x-auth-provider":t.thirdPartyProvider,"x-token-type":t.thirdPartyTokenType}:this.buildAuthHeaders(t.token)})).data,{context:"unlinkOAuth"})}async addEmail(e,t,r){return fn(async()=>(await this.backendApiClients.authApi.changeEmailPost({changeEmailPostRequest:{newEmail:e,callbackURL:t}},{headers:r.thirdPartyProvider?{authorization:`Bearer ${this.publishableKey}`,"x-player-token":r.token,"x-auth-provider":r.thirdPartyProvider,"x-token-type":r.thirdPartyTokenType}:this.buildAuthHeaders(r.token)})).data,{context:"addEmail"})}async unlinkWallet(e,t,r){const n={linkSiweUnlinkPostRequest:{walletAddress:e,chaindId:t}};return fn(async()=>(await this.backendApiClients.authApi.linkSiweUnlinkPost(n,{headers:r.thirdPartyProvider?{authorization:`Bearer ${this.publishableKey}`,"x-player-token":r.token,"x-auth-provider":r.thirdPartyProvider,"x-token-type":r.thirdPartyTokenType}:this.buildAuthHeaders(r.token)})).data,{context:"unlinkWallet"})}async linkWallet(e,t,r,n,s,i,o){const a={siweVerifyPostRequest:{signature:e,message:t,walletAddress:s,chainId:i,walletClientType:r,connectorType:n}};return fn(async()=>(await this.backendApiClients.authApi.linkSiweVerifyPost(a,{headers:o.thirdPartyProvider?{authorization:`Bearer ${this.publishableKey}`,"x-player-token":o.token,"x-auth-provider":o.thirdPartyProvider,"x-token-type":o.thirdPartyTokenType}:this.buildAuthHeaders(o.token)})).data,{context:"linkWallet"})}async requestEmailOTP(e,t){const r={emailOtpSendVerificationOtpPostRequest:{email:e,type:t}};await fn(async()=>(await this.backendApiClients.authApi.emailOtpSendVerificationOtpPost(r,{headers:{"x-project-key":`${this.publishableKey}`}})).data,{context:"requestEmailOTP"})}async verifyEmailOtp(e,t,r){await fn(async()=>(await this.backendApiClients.authApi.emailOtpVerifyEmailPost({emailOtpVerifyEmailPostRequest:{email:e,otp:t}},{headers:this.buildAuthHeaders(r)})).data,{context:"verifyEmailOtp"})}async loginWithEmailOTP(e,t,r){return await fn(async()=>{const n=(await this.backendApiClients.authApi.signInEmailOtpPost({signInEmailOtpPostRequest:{email:e,otp:t}},{headers:this.buildAuthHeaders(r)})).data;return{token:n.token,user:yi(n.user)}},{context:"loginWithEmailOTP"})}async requestPhoneOtp(e){const t={phoneNumberSendOtpPostRequest:{phoneNumber:e}};await fn(async()=>(await this.backendApiClients.authApi.phoneNumberSendOtpPost(t,{headers:{"x-project-key":`${this.publishableKey}`}})).data,{context:"requestPhoneOtp"})}async loginWithSMSOTP(e,t){return await fn(async()=>{const r=(await this.backendApiClients.authApi.phoneNumberVerifyPost({phoneNumberVerifyPostRequest:{code:t,phoneNumber:e}},{headers:{"x-project-key":`${this.publishableKey}`}})).data;return{token:r.token,user:yi(r.user)}},{context:"loginWithSMSOTP"})}async linkSMSOTP(e,t,r){return await fn(async()=>{const n=(await this.backendApiClients.authApi.phoneNumberVerifyPost({phoneNumberVerifyPostRequest:{code:t,phoneNumber:e,updatePhoneNumber:!0}},{headers:{authorization:`Bearer ${r.token}`,"x-project-key":`${this.publishableKey}`}})).data;return{token:n.token,user:yi(n.user)}},{context:"linkSMSOTP"})}async getSessionWithToken(e,t){return await fn(async()=>(await this.backendApiClients.authApi.getSessionGet({disableCookieCache:t},{headers:e.thirdPartyProvider?{authorization:`Bearer ${this.publishableKey}`,"x-player-token":e.token,"x-auth-provider":e.thirdPartyProvider,"x-token-type":e.thirdPartyTokenType}:this.buildAuthHeaders(e.token)})).data,{context:"getSessionWithToken"})}}let Ai=class{storage;scope;constructor(e,t){this.storage=e,this.scope=this.createScope(t)}createScope(e){return e.substring(8).substring(0,8)}scopeKey(e){return`${this.scope}.${e}`}async get(e){return this.storage.get(this.scopeKey(e))}save(e,t){this.storage.save(this.scopeKey(e),t)}remove(e){this.storage.remove(this.scopeKey(e))}flush(){for(const e of Object.values(pr))this.storage.remove(this.scopeKey(e))}};class bi{storage;constructor(e){this.storage=e}async get(e){return Promise.resolve(this.storage.getItem(e))}save(e,t){this.storage.setItem(e,t)}remove(e){this.storage.removeItem(e)}flush(){for(const e of Object.values(pr))this.storage.removeItem(e)}}let Ei=class{realStorage=null;customStorage;publishableKey;constructor(e,t){this.publishableKey=e,this.customStorage=t}getRealStorage(){if(!this.realStorage){let e;if(this.customStorage)e=this.customStorage;else{if("undefined"==typeof window||"undefined"==typeof localStorage)throw new Er("Storage not available. Please provide custom storage or use in browser environment.");e=new bi(localStorage)}this.realStorage=new Ai(e,this.publishableKey)}return this.realStorage}async get(e){return this.getRealStorage().get(e)}save(e,t){this.getRealStorage().save(e,t)}remove(e){this.getRealStorage().remove(e)}flush(){this.getRealStorage().flush()}};const _i={};class Pi{storage;authManager;eventEmitter;constructor(e,t,r){this.storage=e,this.authManager=t,this.eventEmitter=r}async getThirdPartyAuthToken(){const e=cn.getInstance();if(!e?.thirdPartyAuth)throw new Tr("No third party configuration found");const{getAccessToken:t,provider:r}=e.thirdPartyAuth;if(!t||!r)throw new Er("Third party is not configured. Please configure getAccessToken and thirdPartyAuthProvider in your Openfort instance");const n=await t();if(!n)throw new Ar(yr.INVALID_TOKEN,"Could not get access token");let s=(await mr.fromStorage(this.storage))?.userId;return s||(s=(await this.authManager.authenticateThirdParty(r,n)).userId),new mr("third_party",n,s,r,"idToken").save(this.storage),n}async getAccessToken(){return cn.getInstance()?.thirdPartyAuth?this.getThirdPartyAuthToken():(await mr.fromStorage(this.storage))?.token??null}async validateAndRefreshToken(e){return((e,t)=>{let r=_i[t];return r||(r=e().finally(()=>{delete _i[t],r=null}),_i[t]=r),r})(async()=>{if(cn.getInstance()?.thirdPartyAuth)return void await this.getThirdPartyAuthToken();const t=await mr.fromStorage(this.storage);if(!t)throw new br(yr.NOT_LOGGED_IN,"Must be logged in to validate and refresh token");let r;pn("validating credentials...");try{r=await this.authManager.validateCredentials(t,e)}catch(e){throw mr.clear(this.storage),this.eventEmitter.emit(Or.ON_LOGOUT),e}if(!r.user?.id)throw new Tr("No user found in credentials");r.token!==t.token&&(pn("tokens refreshed"),new mr("session",r.token,r.user.id).save(this.storage))},"openfort.validateAndRefreshToken")}}class Si{storage;iAuthManager=null;openfortInternal;initPromise;asyncInitPromise=null;authInstance;embeddedWalletInstance;userInstance;proxyInstance;configuration;eventEmitter;iPasskeyHandler;static globalEventEmitter=null;get auth(){if(!this.authInstance)throw new Er("Openfort SDK not initialized. Please await waitForInitialization() before accessing auth.");return this.authInstance}get embeddedWallet(){if(!this.embeddedWalletInstance)throw new Er("Openfort SDK not initialized. Please await waitForInitialization() before accessing embeddedWallet.");return this.embeddedWalletInstance}get user(){if(!this.userInstance)throw new Er("Openfort SDK not initialized. Please await waitForInitialization() before accessing user.");return this.userInstance}get proxy(){if(!this.proxyInstance)throw new Er("Openfort SDK not initialized. Please await waitForInitialization() before accessing proxy.");return this.proxyInstance}initializeSynchronously(){try{this.iAuthManager=new vi,this.openfortInternal=new Pi(this.storage,this.authManager,this.eventEmitter),this.authInstance=new Hr(this.storage,this.authManager,this.validateAndRefreshToken.bind(this),this.ensureInitialized.bind(this),this.eventEmitter),this.embeddedWalletInstance=new pi(this.storage,this.validateAndRefreshToken.bind(this),this.ensureInitialized.bind(this),this.eventEmitter,this.passkeyHandler),this.userInstance=new gi(this.storage,this.authManager,this.validateAndRefreshToken.bind(this)),this.proxyInstance=new mi(this.storage,this.backendApiClients,this.validateAndRefreshToken.bind(this),this.ensureInitialized.bind(this),async()=>{if(!this.embeddedWalletInstance)throw new _r(yr.MISSING_SIGNER,"Embedded wallet not initialized");const e=this.embeddedWalletInstance;return t=>e.signMessage(t,{hashMessage:!0,arrayifyMessage:!0})})}catch(e){throw new Er("Openfort SDK synchronous initialization failed")}}constructor(e){this.configuration=new cn(e),this.storage=new Ei(this.configuration.baseConfiguration.publishableKey,this.configuration.storage),this.eventEmitter=new vn,Si.globalEventEmitter?["onAuthInit","onAuthSuccess","onAuthFailure","onLogout","onSwitchAccount","onSignedMessage","onEmbeddedWalletCreated","onEmbeddedWalletRecovered","onAuthFlowOpen","onAuthFlowClose","onAuthFlowCancel"].forEach(e=>{this.eventEmitter.on(e,(...t)=>{Si.globalEventEmitter?.emit(e,...t)})}):Si.globalEventEmitter=this.eventEmitter,this.iPasskeyHandler=e.overrides?.passkeyHandler??new nn({rpId:this.configuration.passkeyRpId,rpName:this.configuration.passkeyRpName}),ln.init({configuration:this.configuration}),this.initializeSynchronously(),this.initPromise=Promise.resolve()}static getEventEmitter(){return Si.globalEventEmitter||(Si.globalEventEmitter=new vn),Si.globalEventEmitter}async waitForInitialization(){await this.initPromise,await this.ensureAsyncInitialized()}async getAccessToken(){return await this.ensureInitialized(),this.openfortInternal.getAccessToken()}async validateAndRefreshToken(e){return await this.ensureInitialized(),await this.openfortInternal.validateAndRefreshToken(e)}get backendApiClients(){return new fr({basePath:this.configuration.backendUrl,accessToken:this.configuration.baseConfiguration.publishableKey,nativeAppIdentifier:this.configuration.nativeAppIdentifier,storage:this.storage,onLogout:()=>{this.eventEmitter.emit("onLogout")}})}get authManager(){if(!this.iAuthManager)throw new Tr("AuthManager not initialized");return this.iAuthManager}get passkeyHandler(){return this.iPasskeyHandler}static async isStorageAccessible(e){try{const t=pr.TEST,r="openfort_storage_test";e.save(t,r);const n=await e.get(t);return e.remove(t),n===r}catch(e){return!1}}async initializeAsync(){if(!await Si.isStorageAccessible(this.storage))throw new vr("Storage is not accessible",wr.INVALID_CONFIGURATION);this.authManager.setBackendApiClients(this.backendApiClients,this.configuration.baseConfiguration.publishableKey)}async ensureAsyncInitialized(){this.asyncInitPromise||(this.asyncInitPromise=this.initializeAsync()),await this.asyncInitPromise}async ensureInitialized(){await this.initPromise,await this.ensureAsyncInitialized()}}Si.getEventEmitter(),window.Openfort=Si;const Ii="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,ki=globalThis,Ri="9.47.1";function Ti(){return Ni(ki),ki}function Ni(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||Ri,t[Ri]=t[Ri]||{}}function Oi(e,t,r=ki){const n=r.__SENTRY__=r.__SENTRY__||{},s=n[Ri]=n[Ri]||{};return s[e]||(s[e]=t())}const Ci={};function xi(e){if(!("console"in ki))return e();const t=ki.console,r={},n=Object.keys(Ci);n.forEach(e=>{const n=Ci[e];r[e]=t[e],t[e]=n});try{return e()}finally{n.forEach(e=>{t[e]=r[e]})}}function Mi(){return Di().enabled}function Ui(e,...t){Ii&&Mi()&&xi(()=>{ki.console[e](`Sentry Logger [${e}]:`,...t)})}function Di(){return Ii?Oi("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const Li={enable:function(){Di().enabled=!0},disable:function(){Di().enabled=!1},isEnabled:Mi,log:function(...e){Ui("log",...e)},warn:function(...e){Ui("warn",...e)},error:function(...e){Ui("error",...e)}},Bi="?",Fi=/\(error: (.*)\)/,qi=/captureMessage|captureException/;function ji(e){return e[e.length-1]||{}}const Gi="<anonymous>";const Hi=Object.prototype.toString;function zi(e){switch(Hi.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return Zi(e,Error)}}function Vi(e,t){return Hi.call(e)===`[object ${t}]`}function Ki(e){return Vi(e,"ErrorEvent")}function Wi(e){return Vi(e,"DOMError")}function Yi(e){return Vi(e,"String")}function Ji(e){return"object"==typeof e&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function Qi(e){return Vi(e,"Object")}function $i(e){return"undefined"!=typeof Event&&Zi(e,Event)}function Xi(e){return Boolean(e?.then&&"function"==typeof e.then)}function Zi(e,t){try{return e instanceof t}catch{return!1}}const eo=ki;function to(e,t){const r=e,n=[];if(!r?.tagName)return"";if(eo.HTMLElement&&r instanceof HTMLElement&&r.dataset){if(r.dataset.sentryComponent)return r.dataset.sentryComponent;if(r.dataset.sentryElement)return r.dataset.sentryElement}n.push(r.tagName.toLowerCase());const s=t?.length?t.filter(e=>r.getAttribute(e)).map(e=>[e,r.getAttribute(e)]):null;if(s?.length)s.forEach(e=>{n.push(`[${e[0]}="${e[1]}"]`)});else{r.id&&n.push(`#${r.id}`);const e=r.className;if(e&&Yi(e)){const t=e.split(/\s+/);for(const e of t)n.push(`.${e}`)}}const i=["aria-label","type","name","title","alt"];for(const e of i){const t=r.getAttribute(e);t&&n.push(`[${e}="${t}"]`)}return n.join("")}function ro(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function no(e,t,r){try{Object.defineProperty(e,t,{value:r,writable:!0,configurable:!0})}catch{Ii&&Li.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function so(e){if(zi(e))return{message:e.message,name:e.name,stack:e.stack,...oo(e)};if($i(e)){const t={type:e.type,target:io(e.target),currentTarget:io(e.currentTarget),...oo(e)};return"undefined"!=typeof CustomEvent&&Zi(e,CustomEvent)&&(t.detail=e.detail),t}return e}function io(e){try{return t=e,"undefined"!=typeof Element&&Zi(t,Element)?function(e,t={}){if(!e)return"<unknown>";try{let r=e;const n=5,s=[];let i=0,o=0;const a=" > ",c=a.length;let h;const u=Array.isArray(t)?t:t.keyAttrs,l=!Array.isArray(t)&&t.maxStringLength||80;for(;r&&i++<n&&(h=to(r,u),!("html"===h||i>1&&o+s.length*c+h.length>=l));)s.push(h),o+=h.length,r=r.parentNode;return s.reverse().join(a)}catch{return"<unknown>"}}(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}var t}function oo(e){if("object"==typeof e&&null!==e){const t={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}return{}}function ao(e=function(){const e=ki;return e.crypto||e.msCrypto}()){let t=()=>16*Math.random();try{if(e?.randomUUID)return e.randomUUID().replace(/-/g,"");e?.getRandomValues&&(t=()=>{const t=new Uint8Array(1);return e.getRandomValues(t),t[0]})}catch{}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,e=>(e^(15&t())>>e/4).toString(16))}function co(e,t,r){const n=e.exception=e.exception||{},s=n.values=n.values||[],i=s[0]=s[0]||{};i.value||(i.value=t||""),i.type||(i.type="Error")}function ho(e,t){const r=function(e){return e.exception?.values?.[0]}(e);if(!r)return;const n=r.mechanism;if(r.mechanism={type:"generic",handled:!0,...n,...t},t&&"data"in t){const e={...n?.data,...t.data};r.mechanism.data=e}}function uo(e){if(function(e){try{return e.__sentry_captured__}catch{}}(e))return!0;try{no(e,"__sentry_captured__",!0)}catch{}return!1}function lo(){return Date.now()/1e3}let fo;function po(){return(fo??(fo=function(){const{performance:e}=ki;if(!e?.now||!e.timeOrigin)return lo;const t=e.timeOrigin;return()=>(t+e.now())/1e3}()))()}function mo(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||po(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:ao()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}function go(e,t,r=2){if(!t||"object"!=typeof t||r<=0)return t;if(e&&0===Object.keys(t).length)return e;const n={...e};for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=go(n[e],t[e],r-1));return n}function yo(){return ao()}function wo(){return ao().substring(16)}const vo="_sentrySpan";function Ao(e,t){t?no(e,vo,t):delete e[vo]}function bo(e){return e[vo]}class Eo{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:yo(),sampleRand:Math.random()}}clone(){const e=new Eo;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,Ao(e,bo(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&mo(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t="function"==typeof e?e(this):e,r=t instanceof Eo?t.getScopeData():Qi(t)?e:void 0,{tags:n,extra:s,user:i,contexts:o,level:a,fingerprint:c=[],propagationContext:h}=r||{};return this._tags={...this._tags,...n},this._extra={...this._extra,...s},this._contexts={...this._contexts,...o},i&&Object.keys(i).length&&(this._user=i),a&&(this._level=a),c.length&&(this._fingerprint=c),h&&(this._propagationContext=h),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,Ao(this,void 0),this._attachments=[],this.setPropagationContext({traceId:yo(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(e,t){const r="number"==typeof t?t:100;if(r<=0)return this;const n={timestamp:lo(),...e,message:e.message?ro(e.message,2048):e.message};return this._breadcrumbs.push(n),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:bo(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=go(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const r=t?.event_id||ao();if(!this._client)return Ii&&Li.warn("No client configured on scope - will not capture exception!"),r;const n=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:n,...t,event_id:r},this),r}captureMessage(e,t,r){const n=r?.event_id||ao();if(!this._client)return Ii&&Li.warn("No client configured on scope - will not capture message!"),n;const s=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:s,...r,event_id:n},this),n}captureEvent(e,t){const r=t?.event_id||ao();return this._client?(this._client.captureEvent(e,{...t,event_id:r},this),r):(Ii&&Li.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}class _o{constructor(e,t){let r,n;r=e||new Eo,n=t||new Eo,this._stack=[{scope:r}],this._isolationScope=n}withScope(e){const t=this._pushScope();let r;try{r=e(t)}catch(e){throw this._popScope(),e}return Xi(r)?r.then(e=>(this._popScope(),e),e=>{throw this._popScope(),e}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return!(this._stack.length<=1)&&!!this._stack.pop()}}function Po(){const e=Ni(Ti());return e.stack=e.stack||new _o(Oi("defaultCurrentScope",()=>new Eo),Oi("defaultIsolationScope",()=>new Eo))}function So(e){return Po().withScope(e)}function Io(e,t){const r=Po();return r.withScope(()=>(r.getStackTop().scope=e,t(e)))}function ko(e){return Po().withScope(()=>e(Po().getIsolationScope()))}function Ro(e){const t=Ni(e);return t.acs?t.acs:{withIsolationScope:ko,withScope:So,withSetScope:Io,withSetIsolationScope:(e,t)=>ko(t),getCurrentScope:()=>Po().getScope(),getIsolationScope:()=>Po().getIsolationScope()}}function To(){return Ro(Ti()).getCurrentScope()}function No(){return Ro(Ti()).getIsolationScope()}function Oo(){return Oi("globalScope",()=>new Eo)}function Co(){return To().getClient()}function xo(e){const t=e.getPropagationContext(),{traceId:r,parentSpanId:n,propagationSpanId:s}=t,i={trace_id:r,span_id:s||wo()};return n&&(i.parent_span_id=n),i}const Mo="sentry.source",Uo="sentry.sample_rate",Do="sentry.op",Lo="sentry.origin",Bo="sentry.profile_id",Fo="sentry.exclusive_time";function qo(e){return{scope:e._sentryScope,isolationScope:e._sentryIsolationScope}}const jo=/^sentry-/;function Go(e){const t=function(e){if(!e||!Yi(e)&&!Array.isArray(e))return;if(Array.isArray(e))return e.reduce((e,t)=>{const r=Ho(t);return Object.entries(r).forEach(([t,r])=>{e[t]=r}),e},{});return Ho(e)}(e);if(!t)return;const r=Object.entries(t).reduce((e,[t,r])=>{if(t.match(jo)){e[t.slice(7)]=r}return e},{});return Object.keys(r).length>0?r:void 0}function Ho(e){return e.split(",").map(e=>e.split("=").map(e=>{try{return decodeURIComponent(e.trim())}catch{return}})).reduce((e,[t,r])=>(t&&r&&(e[t]=r),e),{})}let zo=!1;function Vo(e){const{spanId:t,traceId:r,isRemote:n}=e.spanContext(),s=n?t:Jo(e).parent_span_id,i=qo(e).scope;return{parent_span_id:s,span_id:n?i?.getPropagationContext().propagationSpanId||wo():t,trace_id:r}}function Ko(e){return e&&e.length>0?e.map(({context:{spanId:e,traceId:t,traceFlags:r,...n},attributes:s})=>({span_id:e,trace_id:t,sampled:1===r,attributes:s,...n})):void 0}function Wo(e){return"number"==typeof e?Yo(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?Yo(e.getTime()):po()}function Yo(e){return e>9999999999?e/1e3:e}function Jo(e){if(function(e){return"function"==typeof e.getSpanJSON}(e))return e.getSpanJSON();const{spanId:t,traceId:r}=e.spanContext();if(function(e){const t=e;return!!(t.attributes&&t.startTime&&t.name&&t.endTime&&t.status)}(e)){const{attributes:n,startTime:s,name:i,endTime:o,status:a,links:c}=e;return{span_id:t,trace_id:r,data:n,description:i,parent_span_id:"parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?e.parentSpanContext?.spanId:void 0,start_timestamp:Wo(s),timestamp:Wo(o)||void 0,status:Qo(a),op:n[Do],origin:n[Lo],links:Ko(c)}}return{span_id:t,trace_id:r,start_timestamp:0,data:{}}}function Qo(e){if(e&&0!==e.code)return 1===e.code?"ok":e.message||"unknown_error"}function $o(e){return e._sentryRootSpan||e}function Xo(){zo||(xi(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly.")}),zo=!0)}const Zo="production",ea=/^o(\d+)\./,ta=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function ra(e,t=!1){const{host:r,path:n,pass:s,port:i,projectId:o,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&s?`:${s}`:""}@${r}${i?`:${i}`:""}/${n?`${n}/`:n}${o}`}function na(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function sa(e){const t="string"==typeof e?function(e){const t=ta.exec(e);if(!t)return void xi(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});const[r,n,s="",i="",o="",a=""]=t.slice(1);let c="",h=a;const u=h.split("/");if(u.length>1&&(c=u.slice(0,-1).join("/"),h=u.pop()),h){const e=h.match(/^\d+/);e&&(h=e[0])}return na({host:i,pass:s,path:c,projectId:h,port:o,protocol:r,publicKey:n})}(e):na(e);if(t&&function(e){if(!Ii)return!0;const{port:t,projectId:r,protocol:n}=e;return!(["protocol","publicKey","host","projectId"].find(t=>!e[t]&&(Li.error(`Invalid Sentry Dsn: ${t} missing`),!0))||(r.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(n)?t&&isNaN(parseInt(t,10))&&(Li.error(`Invalid Sentry Dsn: Invalid port ${t}`),1):(Li.error(`Invalid Sentry Dsn: Invalid protocol ${n}`),1):(Li.error(`Invalid Sentry Dsn: Invalid projectId ${r}`),1)))}(t))return t}function ia(e,t){const r=t.getOptions(),{publicKey:n,host:s}=t.getDsn()||{};let i;r.orgId?i=String(r.orgId):s&&(i=function(e){const t=e.match(ea);return t?.[1]}(s));const o={environment:r.environment||Zo,release:r.release,public_key:n,trace_id:e,org_id:i};return t.emit("createDsc",o),o}function oa(e){const t=Co();if(!t)return{};const r=$o(e),n=Jo(r),s=n.data,i=r.spanContext().traceState,o=i?.get("sentry.sample_rate")??s[Uo]??s["sentry.previous_trace_sample_rate"];function a(e){return"number"!=typeof o&&"string"!=typeof o||(e.sample_rate=`${o}`),e}const c=r._frozenDsc;if(c)return a(c);const h=i?.get("sentry.dsc"),u=h&&Go(h);if(u)return a(u);const l=ia(e.spanContext().traceId,t),d=s[Mo],f=n.description;return"url"!==d&&f&&(l.transaction=f),function(e){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const t=e||Co()?.getOptions();return!(!t||null==t.tracesSampleRate&&!t.tracesSampler)}()&&(l.sampled=String(function(e){const{traceFlags:t}=e.spanContext();return 1===t}(r)),l.sample_rand=i?.get("sentry.sample_rand")??qo(r).scope?.getPropagationContext().sampleRand.toString()),a(l),t.emit("createDsc",l,r),l}function aa(e,t=100,r=1/0){try{return ha("",e,t,r)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function ca(e,t=3,r=102400){const n=aa(e,t);return s=n,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(s))>r?ca(e,t-1,r):n;var s}function ha(e,t,r=1/0,n=1/0,s=function(){const e=new WeakSet;function t(t){return!!e.has(t)||(e.add(t),!1)}function r(t){e.delete(t)}return[t,r]}()){const[i,o]=s;if(null==t||["boolean","string"].includes(typeof t)||"number"==typeof t&&Number.isFinite(t))return t;const a=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if("undefined"!=typeof global&&t===global)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if("object"==typeof(r=t)&&null!==r&&(r.__isVue||r._isVue))return"[VueViewModel]";if(function(e){return Qi(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}(t))return"[SyntheticEvent]";if("number"==typeof t&&!Number.isFinite(t))return`[${t}]`;if("function"==typeof t)return`[Function: ${function(e){try{return e&&"function"==typeof e&&e.name||Gi}catch{return Gi}}(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const n=function(e){const t=Object.getPrototypeOf(e);return t?.constructor?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(e){return`**non-serializable** (${e})`}var r}(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const c="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:r;if(0===c)return a.replace("object ","");if(i(t))return"[Circular ~]";const h=t;if(h&&"function"==typeof h.toJSON)try{return ha("",h.toJSON(),c-1,n,s)}catch{}const u=Array.isArray(t)?[]:{};let l=0;const d=so(t);for(const e in d){if(!Object.prototype.hasOwnProperty.call(d,e))continue;if(l>=n){u[e]="[MaxProperties ~]";break}const t=d[e];u[e]=ha(e,t,c-1,n,s),l++}return o(t),u}function ua(e,t=[]){return[e,t]}function la(e,t){const[r,n]=e;return[r,[...n,t]]}function da(e,t){const r=e[1];for(const e of r){if(t(e,e[0].type))return!0}return!1}function fa(e){const t=Ni(ki);return t.encodePolyfill?t.encodePolyfill(e):(new TextEncoder).encode(e)}function pa(e){const[t,r]=e;let n=JSON.stringify(t);function s(e){"string"==typeof n?n="string"==typeof e?n+e:[fa(n),e]:n.push("string"==typeof e?fa(e):e)}for(const e of r){const[t,r]=e;if(s(`\n${JSON.stringify(t)}\n`),"string"==typeof r||r instanceof Uint8Array)s(r);else{let e;try{e=JSON.stringify(r)}catch{e=JSON.stringify(aa(r))}s(e)}}return"string"==typeof n?n:function(e){const t=e.reduce((e,t)=>e+t.length,0),r=new Uint8Array(t);let n=0;for(const t of e)r.set(t,n),n+=t.length;return r}(n)}function ma(e){const t="string"==typeof e.data?fa(e.data):e.data;return[{type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType},t]}const ga={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item"};function ya(e){return ga[e]}function wa(e){if(!e?.sdk)return;const{name:t,version:r}=e.sdk;return{name:t,version:r}}function va(e,t,r,n){const s=wa(r),i=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,r?.sdk);const o=function(e,t,r,n){const s=e.sdkProcessingMetadata?.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!r&&n&&{dsn:ra(n)},...s&&{trace:s}}}(e,s,n,t);delete e.sdkProcessingMetadata;return ua(o,[[{type:i},e]])}function Aa(e){return new Ea(t=>{t(e)})}function ba(e){return new Ea((t,r)=>{r(e)})}class Ea{constructor(e){this._state=0,this._handlers=[],this._runExecutor(e)}then(e,t){return new Ea((r,n)=>{this._handlers.push([!1,t=>{if(e)try{r(e(t))}catch(e){n(e)}else r(t)},e=>{if(t)try{r(t(e))}catch(e){n(e)}else n(e)}]),this._executeHandlers()})}catch(e){return this.then(e=>e,e)}finally(e){return new Ea((t,r)=>{let n,s;return this.then(t=>{s=!1,n=t,e&&e()},t=>{s=!0,n=t,e&&e()}).then(()=>{s?r(n):t(n)})})}_executeHandlers(){if(0===this._state)return;const e=this._handlers.slice();this._handlers=[],e.forEach(e=>{e[0]||(1===this._state&&e[1](this._value),2===this._state&&e[2](this._value),e[0]=!0)})}_runExecutor(e){const t=(e,t)=>{0===this._state&&(Xi(t)?t.then(r,n):(this._state=e,this._value=t,this._executeHandlers()))},r=e=>{t(1,e)},n=e=>{t(2,e)};try{e(r,n)}catch(e){n(e)}}}function _a(e,t,r,n=0){return new Ea((s,i)=>{const o=e[n];if(null===t||"function"!=typeof o)s(t);else{const a=o({...t},r);Ii&&o.id&&null===a&&Li.log(`Event processor "${o.id}" dropped event`),Xi(a)?a.then(t=>_a(e,t,r,n+1).then(s)).then(null,i):_a(e,a,r,n+1).then(s).then(null,i)}})}function Pa(e,t){const{fingerprint:r,span:n,breadcrumbs:s,sdkProcessingMetadata:i}=t;!function(e,t){const{extra:r,tags:n,user:s,contexts:i,level:o,transactionName:a}=t;Object.keys(r).length&&(e.extra={...r,...e.extra});Object.keys(n).length&&(e.tags={...n,...e.tags});Object.keys(s).length&&(e.user={...s,...e.user});Object.keys(i).length&&(e.contexts={...i,...e.contexts});o&&(e.level=o);a&&"transaction"!==e.type&&(e.transaction=a)}(e,t),n&&function(e,t){e.contexts={trace:Vo(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:oa(t),...e.sdkProcessingMetadata};const r=$o(t),n=Jo(r).description;n&&!e.transaction&&"transaction"===e.type&&(e.transaction=n)}(e,n),function(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t));e.fingerprint.length||delete e.fingerprint}(e,r),function(e,t){const r=[...e.breadcrumbs||[],...t];e.breadcrumbs=r.length?r:void 0}(e,s),function(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}(e,i)}function Sa(e,t){const{extra:r,tags:n,user:s,contexts:i,level:o,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:h,eventProcessors:u,attachments:l,propagationContext:d,transactionName:f,span:p}=t;Ia(e,"extra",r),Ia(e,"tags",n),Ia(e,"user",s),Ia(e,"contexts",i),e.sdkProcessingMetadata=go(e.sdkProcessingMetadata,a,2),o&&(e.level=o),f&&(e.transactionName=f),p&&(e.span=p),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),h.length&&(e.fingerprint=[...e.fingerprint,...h]),u.length&&(e.eventProcessors=[...e.eventProcessors,...u]),l.length&&(e.attachments=[...e.attachments,...l]),e.propagationContext={...e.propagationContext,...d}}function Ia(e,t,r){e[t]=go(e[t],r,1)}let ka,Ra,Ta;function Na(e,t,r,n,s,i){const{normalizeDepth:o=3,normalizeMaxBreadth:a=1e3}=e,c={...t,event_id:t.event_id||r.event_id||ao(),timestamp:t.timestamp||lo()},h=r.integrations||e.integrations.map(e=>e.name);!function(e,t){const{environment:r,release:n,dist:s,maxValueLength:i=250}=t;e.environment=e.environment||r||Zo,!e.release&&n&&(e.release=n);!e.dist&&s&&(e.dist=s);const o=e.request;o?.url&&(o.url=ro(o.url,i))}(c,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(c,h),s&&s.emit("applyFrameMetadata",t),void 0===t.type&&function(e,t){const r=function(e){const t=ki._sentryDebugIds;if(!t)return{};const r=Object.keys(t);return Ta&&r.length===Ra||(Ra=r.length,Ta=r.reduce((r,n)=>{ka||(ka={});const s=ka[n];if(s)r[s[0]]=s[1];else{const s=e(n);for(let e=s.length-1;e>=0;e--){const i=s[e],o=i?.filename,a=t[n];if(o&&a){r[o]=a,ka[n]=[o,a];break}}}return r},{})),Ta}(t);e.exception?.values?.forEach(e=>{e.stacktrace?.frames?.forEach(e=>{e.filename&&(e.debug_id=r[e.filename])})})}(c,e.stackParser);const u=function(e,t){if(!t)return e;const r=e?e.clone():new Eo;return r.update(t),r}(n,r.captureContext);r.mechanism&&ho(c,r.mechanism);const l=s?s.getEventProcessors():[],d=Oo().getScopeData();if(i){Sa(d,i.getScopeData())}if(u){Sa(d,u.getScopeData())}const f=[...r.attachments||[],...d.attachments];f.length&&(r.attachments=f),Pa(c,d);return _a([...l,...d.eventProcessors],c,r).then(e=>(e&&function(e){const t={};if(e.exception?.values?.forEach(e=>{e.stacktrace?.frames?.forEach(e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)})}),0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const r=e.debug_meta.images;Object.entries(t).forEach(([e,t])=>{r.push({type:"sourcemap",code_file:e,debug_id:t})})}(e),"number"==typeof o&&o>0?function(e,t,r){if(!e)return null;const n={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(e=>({...e,...e.data&&{data:aa(e.data,t,r)}}))},...e.user&&{user:aa(e.user,t,r)},...e.contexts&&{contexts:aa(e.contexts,t,r)},...e.extra&&{extra:aa(e.extra,t,r)}};e.contexts?.trace&&n.contexts&&(n.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(n.contexts.trace.data=aa(e.contexts.trace.data,t,r)));e.spans&&(n.spans=e.spans.map(e=>({...e,...e.data&&{data:aa(e.data,t,r)}})));e.contexts?.flags&&n.contexts&&(n.contexts.flags=aa(e.contexts.flags,3,r));return n}(e,o,a):e))}function Oa(e,t,r){return t||`${function(e){return`${function(e){const t=e.protocol?`${e.protocol}:`:"",r=e.port?`:${e.port}`:"";return`${t}//${e.host}${r}${e.path?`/${e.path}`:""}/api/`}(e)}${e.projectId}/envelope/`}(e)}?${function(e,t){const r={sentry_version:"7"};return e.publicKey&&(r.sentry_key=e.publicKey),t&&(r.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(r).toString()}(e,r)}`}const Ca=[];function xa(e,t){for(const r of t)r?.afterAllSetup&&r.afterAllSetup(e)}function Ma(e,t,r){if(r[t.name])Ii&&Li.log(`Integration skipped because it was already installed: ${t.name}`);else{if(r[t.name]=t,-1===Ca.indexOf(t.name)&&"function"==typeof t.setupOnce&&(t.setupOnce(),Ca.push(t.name)),t.setup&&"function"==typeof t.setup&&t.setup(e),"function"==typeof t.preprocessEvent){const r=t.preprocessEvent.bind(t);e.on("preprocessEvent",(t,n)=>r(t,n,e))}if("function"==typeof t.processEvent){const r=t.processEvent.bind(t),n=Object.assign((t,n)=>r(t,n,e),{id:t.name});e.addEventProcessor(n)}Ii&&Li.log(`Integration installed: ${t.name}`)}}const Ua="Not capturing exception because it's already been captured.",Da="Discarded session because of missing or non-string release",La=Symbol.for("SentryInternalError"),Ba=Symbol.for("SentryDoNotSendEventError");function Fa(e){return{message:e,[La]:!0}}function qa(e){return{message:e,[Ba]:!0}}function ja(e){return!!e&&"object"==typeof e&&La in e}function Ga(e){return!!e&&"object"==typeof e&&Ba in e}class Ha{constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=sa(e.dsn):Ii&&Li.warn("No DSN provided, client will not send events."),this._dsn){const t=Oa(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}}captureException(e,t,r){const n=ao();if(uo(e))return Ii&&Li.log(Ua),n;const s={event_id:n,...t};return this._process(this.eventFromException(e,s).then(e=>this._captureEvent(e,s,r))),s.event_id}captureMessage(e,t,r,n){const s={event_id:ao(),...r},i=Ji(e)?e:String(e),o=null===(a=e)||Ji(a)||"object"!=typeof a&&"function"!=typeof a?this.eventFromMessage(i,t,s):this.eventFromException(e,s);var a;return this._process(o.then(e=>this._captureEvent(e,s,n))),s.event_id}captureEvent(e,t,r){const n=ao();if(t?.originalException&&uo(t.originalException))return Ii&&Li.log(Ua),n;const s={event_id:n,...t},i=e.sdkProcessingMetadata||{},o=i.capturedSpanScope,a=i.capturedSpanIsolationScope;return this._process(this._captureEvent(e,s,o||r,a)),s.event_id}captureSession(e){this.sendSession(e),mo(e,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?(this.emit("flush"),this._isClientDoneProcessing(e).then(r=>t.flush(e).then(e=>r&&e))):Aa(!0)}close(e){return this.flush(e).then(e=>(this.getOptions().enabled=!1,this.emit("close"),e))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some(({name:e})=>e.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){const t=this._integrations[e.name];Ma(this,e,this._integrations),t||xa(this,[e])}sendEvent(e,t={}){this.emit("beforeSendEvent",e,t);let r=va(e,this._dsn,this._options._metadata,this._options.tunnel);for(const e of t.attachments||[])r=la(r,ma(e));const n=this.sendEnvelope(r);n&&n.then(t=>this.emit("afterSendEvent",e,t),null)}sendSession(e){const{release:t,environment:r=Zo}=this._options;if("aggregates"in e){const n=e.attrs||{};if(!n.release&&!t)return void(Ii&&Li.warn(Da));n.release=n.release||t,n.environment=n.environment||r,e.attrs=n}else{if(!e.release&&!t)return void(Ii&&Li.warn(Da));e.release=e.release||t,e.environment=e.environment||r}this.emit("beforeSendSession",e);const n=function(e,t,r,n){const s=wa(r);return ua({sent_at:(new Date).toISOString(),...s&&{sdk:s},...!!n&&t&&{dsn:ra(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(n)}recordDroppedEvent(e,t,r=1){if(this._options.sendClientReports){const n=`${e}:${t}`;Ii&&Li.log(`Recording outcome: "${n}"${r>1?` (${r} times)`:""}`),this._outcomes[n]=(this._outcomes[n]||0)+r}}on(e,t){const r=this._hooks[e]=this._hooks[e]||[];return r.push(t),()=>{const e=r.indexOf(t);e>-1&&r.splice(e,1)}}emit(e,...t){const r=this._hooks[e];r&&r.forEach(e=>e(...t))}sendEnvelope(e){return this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport?this._transport.send(e).then(null,e=>(Ii&&Li.error("Error while sending envelope:",e),e)):(Ii&&Li.error("Transport disabled"),Aa({}))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=function(e,t){const r={};return t.forEach(t=>{t&&Ma(e,t,r)}),r}(this,e),xa(this,e)}_updateSessionFromEvent(e,t){let r="fatal"===t.level,n=!1;const s=t.exception?.values;if(s){n=!0;for(const e of s){const t=e.mechanism;if(!1===t?.handled){r=!0;break}}}const i="ok"===e.status;(i&&0===e.errors||i&&r)&&(mo(e,{...r&&{status:"crashed"},errors:e.errors||Number(n||r)}),this.captureSession(e))}_isClientDoneProcessing(e){return new Ea(t=>{let r=0;const n=setInterval(()=>{0==this._numProcessing?(clearInterval(n),t(!0)):(r+=1,e&&r>=e&&(clearInterval(n),t(!1)))},1)})}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,r,n){const s=this.getOptions(),i=Object.keys(this._integrations);return!t.integrations&&i?.length&&(t.integrations=i),this.emit("preprocessEvent",e,t),e.type||n.setLastEventId(e.event_id||t.event_id),Na(s,e,t,r,this,n).then(e=>{if(null===e)return e;this.emit("postprocessEvent",e,t),e.contexts={trace:xo(r),...e.contexts};const n=function(e,t){const r=t.getPropagationContext();return r.dsc||ia(r.traceId,e)}(this,r);return e.sdkProcessingMetadata={dynamicSamplingContext:n,...e.sdkProcessingMetadata},e})}_captureEvent(e,t={},r=To(),n=No()){return Ii&&za(e)&&Li.log(`Captured error event \`${function(e){const t=[];e.message&&t.push(e.message);try{const r=e.exception.values[e.exception.values.length-1];r?.value&&(t.push(r.value),r.type&&t.push(`${r.type}: ${r.value}`))}catch{}return t}(e)[0]||"<unknown>"}\``),this._processEvent(e,t,r,n).then(e=>e.event_id,e=>{Ii&&(Ga(e)?Li.log(e.message):ja(e)?Li.warn(e.message):Li.warn(e))})}_processEvent(e,t,r,n){const s=this.getOptions(),{sampleRate:i}=s,o=Va(e),a=za(e),c=e.type||"error",h=`before send for type \`${c}\``,u=void 0===i?void 0:function(e){if("boolean"==typeof e)return Number(e);const t="string"==typeof e?parseFloat(e):e;return"number"!=typeof t||isNaN(t)||t<0||t>1?void 0:t}(i);if(a&&"number"==typeof u&&Math.random()>u)return this.recordDroppedEvent("sample_rate","error"),ba(qa(`Discarding event because it's not included in the random sample (sampling rate = ${i})`));const l="replay_event"===c?"replay":c;return this._prepareEvent(e,t,r,n).then(e=>{if(null===e)throw this.recordDroppedEvent("event_processor",l),qa("An event processor returned `null`, will not send event.");if(t.data&&!0===t.data.__sentry__)return e;const r=function(e,t,r,n){const{beforeSend:s,beforeSendTransaction:i,beforeSendSpan:o}=t;let a=r;if(za(a)&&s)return s(a,n);if(Va(a)){if(o){const e=o(function(e){const{trace_id:t,parent_span_id:r,span_id:n,status:s,origin:i,data:o,op:a}=e.contexts?.trace??{};return{data:o??{},description:e.transaction,op:a,parent_span_id:r,span_id:n??"",start_timestamp:e.start_timestamp??0,status:s,timestamp:e.timestamp,trace_id:t??"",origin:i,profile_id:o?.[Bo],exclusive_time:o?.[Fo],measurements:e.measurements,is_segment:!0}}(a));if(e?a=go(r,{type:"transaction",timestamp:(c=e).timestamp,start_timestamp:c.start_timestamp,transaction:c.description,contexts:{trace:{trace_id:c.trace_id,span_id:c.span_id,parent_span_id:c.parent_span_id,op:c.op,status:c.status,origin:c.origin,data:{...c.data,...c.profile_id&&{[Bo]:c.profile_id},...c.exclusive_time&&{[Fo]:c.exclusive_time}}}},measurements:c.measurements}):Xo(),a.spans){const e=[];for(const t of a.spans){const r=o(t);r?e.push(r):(Xo(),e.push(t))}a.spans=e}}if(i){if(a.spans){const e=a.spans.length;a.sdkProcessingMetadata={...r.sdkProcessingMetadata,spanCountBeforeProcessing:e}}return i(a,n)}}var c;return a}(0,s,e,t);return function(e,t){const r=`${t} must return \`null\` or a valid event.`;if(Xi(e))return e.then(e=>{if(!Qi(e)&&null!==e)throw Fa(r);return e},e=>{throw Fa(`${t} rejected with ${e}`)});if(!Qi(e)&&null!==e)throw Fa(r);return e}(r,h)}).then(s=>{if(null===s){if(this.recordDroppedEvent("before_send",l),o){const t=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",t)}throw qa(`${h} returned \`null\`, will not send event.`)}const i=r.getSession()||n.getSession();if(a&&i&&this._updateSessionFromEvent(i,s),o){const e=(s.sdkProcessingMetadata?.spanCountBeforeProcessing||0)-(s.spans?s.spans.length:0);e>0&&this.recordDroppedEvent("before_send","span",e)}const c=s.transaction_info;if(o&&c&&s.transaction!==e.transaction){const e="custom";s.transaction_info={...c,source:e}}return this.sendEvent(s,t),s}).then(null,e=>{if(Ga(e)||ja(e))throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),Fa(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)})}_process(e){this._numProcessing++,e.then(e=>(this._numProcessing--,e),e=>(this._numProcessing--,e))}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.entries(e).map(([e,t])=>{const[r,n]=e.split(":");return{reason:r,category:n,quantity:t}})}_flushOutcomes(){Ii&&Li.log("Flushing outcomes...");const e=this._clearOutcomes();if(0===e.length)return void(Ii&&Li.log("No outcomes to send"));if(!this._dsn)return void(Ii&&Li.log("No dsn provided, will not send outcomes"));Ii&&Li.log("Sending outcomes:",e);const t=(r=e,ua((n=this._options.tunnel&&ra(this._dsn))?{dsn:n}:{},[[{type:"client_report"},{timestamp:lo(),discarded_events:r}]]));var r,n;this.sendEnvelope(t)}}function za(e){return void 0===e.type}function Va(e){return"transaction"===e.type}function Ka(e,t){const r=function(e){return Wa().get(e)}(e)??[];if(0===r.length)return;const n=e.getOptions(),s=function(e,t,r,n){const s={};return t?.sdk&&(s.sdk={name:t.sdk.name,version:t.sdk.version}),r&&n&&(s.dsn=ra(n)),ua(s,[(i=e,[{type:"log",item_count:i.length,content_type:"application/vnd.sentry.items.log+json"},{items:i}])]);var i}(r,n._metadata,n.tunnel,e.getDsn());Wa().set(e,[]),e.emit("flushLogs"),e.sendEnvelope(s)}function Wa(){return Oi("clientToLogBufferMap",()=>new WeakMap)}const Ya=Symbol.for("SentryBufferFullError");function Ja(e){const t=[];function r(e){return t.splice(t.indexOf(e),1)[0]||Promise.resolve(void 0)}return{$:t,add:function(n){if(!(void 0===e||t.length<e))return ba(Ya);const s=n();return-1===t.indexOf(s)&&t.push(s),s.then(()=>r(s)).then(null,()=>r(s).then(null,()=>{})),s},drain:function(e){return new Ea((r,n)=>{let s=t.length;if(!s)return r(!0);const i=setTimeout(()=>{e&&e>0&&r(!1)},e);t.forEach(e=>{Aa(e).then(()=>{--s||(clearTimeout(i),r(!0))},n)})})}}}function Qa(e,{statusCode:t,headers:r},n=Date.now()){const s={...e},i=r?.["x-sentry-rate-limits"],o=r?.["retry-after"];if(i)for(const e of i.trim().split(",")){const[t,r,,,i]=e.split(":",5),o=parseInt(t,10),a=1e3*(isNaN(o)?60:o);if(r)for(const e of r.split(";"))"metric_bucket"===e&&i&&!i.split(";").includes("custom")||(s[e]=n+a);else s.all=n+a}else o?s.all=n+function(e,t=Date.now()){const r=parseInt(`${e}`,10);if(!isNaN(r))return 1e3*r;const n=Date.parse(`${e}`);return isNaN(n)?6e4:n-t}(o,n):429===t&&(s.all=n+6e4);return s}function $a(e,t,r=Ja(e.bufferSize||64)){let n={};return{send:function(s){const i=[];if(da(s,(t,r)=>{const s=ya(r);!function(e,t,r=Date.now()){return function(e,t){return e[t]||e.all||0}(e,t)>r}(n,s)?i.push(t):e.recordDroppedEvent("ratelimit_backoff",s)}),0===i.length)return Aa({});const o=ua(s[0],i),a=t=>{da(o,(r,n)=>{e.recordDroppedEvent(t,ya(n))})};return r.add(()=>t({body:pa(o)}).then(e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&Ii&&Li.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),n=Qa(n,e),e),e=>{throw a("network_error"),Ii&&Li.error("Encountered error running transport request:",e),e})).then(e=>e,e=>{if(e===Ya)return Ii&&Li.error("Skipped sending event because buffer is full."),a("queue_overflow"),Aa({});throw e})},flush:e=>r.drain(e)}}function Xa(e){void 0===e.user?.ip_address&&(e.user={...e.user,ip_address:"{{auto}}"})}function Za(e){"aggregates"in e?void 0===e.attrs?.ip_address&&(e.attrs={...e.attrs,ip_address:"{{auto}}"}):void 0===e.ipAddress&&(e.ipAddress="{{auto}}")}const ec=ki;function tc(e,t){const r=sc(e,t),n={type:ac(t),value:cc(t)};return r.length&&(n.stacktrace={frames:r}),void 0===n.type&&""===n.value&&(n.value="Unrecoverable error caught"),n}function rc(e,t,r,n){const s=Co(),i=s?.getOptions().normalizeDepth,o=function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const r=e[t];if(r instanceof Error)return r}return}(t),a={__serialized__:ca(t,i)};if(o)return{exception:{values:[tc(e,o)]},extra:a};const c={exception:{values:[{type:$i(t)?t.constructor.name:n?"UnhandledRejection":"Error",value:dc(t,{isUnhandledRejection:n})}]},extra:a};if(r){const t=sc(e,r);t.length&&(c.exception.values[0].stacktrace={frames:t})}return c}function nc(e,t){return{exception:{values:[tc(e,t)]}}}function sc(e,t){const r=t.stacktrace||t.stack||"",n=function(e){if(e&&ic.test(e.message))return 1;return 0}(t),s=function(e){if("number"==typeof e.framesToPop)return e.framesToPop;return 0}(t);try{return e(r,n,s)}catch{}return[]}const ic=/Minified React error #\d+;/i;function oc(e){return"undefined"!=typeof WebAssembly&&void 0!==WebAssembly.Exception&&e instanceof WebAssembly.Exception}function ac(e){const t=e?.name;if(!t&&oc(e)){return e.message&&Array.isArray(e.message)&&2==e.message.length?e.message[0]:"WebAssembly.Exception"}return t}function cc(e){const t=e?.message;return oc(e)?Array.isArray(e.message)&&2==e.message.length?e.message[1]:"wasm exception":t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function hc(e,t,r,n){const s=function(e,t,r,n,s){let i;if(Ki(t)&&t.error){return nc(e,t.error)}if(Wi(t)||(o=t,Vi(o,"DOMException"))){const s=t;if("stack"in t)i=nc(e,t);else{const t=s.name||(Wi(s)?"DOMError":"DOMException"),o=s.message?`${t}: ${s.message}`:t;i=lc(e,o,r,n),co(i,o)}return"code"in s&&(i.tags={...i.tags,"DOMException.code":`${s.code}`}),i}var o;if(zi(t))return nc(e,t);if(Qi(t)||$i(t)){return i=rc(e,t,r,s),ho(i,{synthetic:!0}),i}return i=lc(e,t,r,n),co(i,`${t}`),ho(i,{synthetic:!0}),i}(e,t,r?.syntheticException||void 0,n);return ho(s),s.level="error",r?.event_id&&(s.event_id=r.event_id),Aa(s)}function uc(e,t,r="info",n,s){const i=lc(e,t,n?.syntheticException||void 0,s);return i.level=r,n?.event_id&&(i.event_id=n.event_id),Aa(i)}function lc(e,t,r,n){const s={};if(n&&r){const n=sc(e,r);n.length&&(s.exception={values:[{value:t,stacktrace:{frames:n}}]}),ho(s,{synthetic:!0})}if(Ji(t)){const{__sentry_template_string__:e,__sentry_template_values__:r}=t;return s.logentry={message:e,params:r},s}return s.message=t,s}function dc(e,{isUnhandledRejection:t}){const r=function(e,t=40){const r=Object.keys(so(e));r.sort();const n=r[0];if(!n)return"[object has no keys]";if(n.length>=t)return ro(n,t);for(let e=r.length;e>0;e--){const n=r.slice(0,e).join(", ");if(!(n.length>t))return e===r.length?n:ro(n,t)}return""}(e),n="exception";if(Ki(e))return`Event \`ErrorEvent\` captured as ${n} with message \`${e.message}\``;if($i(e)){const t=function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}(e);return`Event \`${t}\` (type=${e.type}) captured as ${n}`}return`Object captured as ${n} with keys: ${r}`}const fc="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,pc=ki,mc={};function gc(e){mc[e]=void 0}function yc(e,t,r,n){const s={filename:e,function:"<anonymous>"===t?Bi:t,in_app:!0};return void 0!==r&&(s.lineno=r),void 0!==n&&(s.colno=n),s}const wc=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,vc=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Ac=/\((\S*)(?::(\d+))(?::(\d+))\)/,bc=[30,e=>{const t=wc.exec(e);if(t){const[,e,r,n]=t;return yc(e,Bi,+r,+n)}const r=vc.exec(e);if(r){if(r[2]&&0===r[2].indexOf("eval")){const e=Ac.exec(r[2]);e&&(r[2]=e[1],r[3]=e[2],r[4]=e[3])}const[e,t]=kc(r[1]||Bi,r[2]);return yc(t,e,r[3]?+r[3]:void 0,r[4]?+r[4]:void 0)}}],Ec=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,_c=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Pc=[50,e=>{const t=Ec.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=_c.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],r=t[1]||Bi;return[r,e]=kc(r,e),yc(e,r,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],Sc=[bc,Pc],Ic=function(...e){const t=e.sort((e,t)=>e[0]-t[0]).map(e=>e[1]);return(e,r=0,n=0)=>{const s=[],i=e.split("\n");for(let e=r;e<i.length;e++){const r=i[e];if(r.length>1024)continue;const o=Fi.test(r)?r.replace(Fi,"$1"):r;if(!o.match(/\S*Error: /)){for(const e of t){const t=e(o);if(t){s.push(t);break}}if(s.length>=50+n)break}}return function(e){if(!e.length)return[];const t=Array.from(e);/sentryWrapped/.test(ji(t).function||"")&&t.pop();t.reverse(),qi.test(ji(t).function||"")&&(t.pop(),qi.test(ji(t).function||"")&&t.pop());return t.slice(0,50).map(e=>({...e,filename:e.filename||ji(t).filename,function:e.function||Bi}))}(s.slice(n))}}(...Sc),kc=(e,t)=>{const r=-1!==e.indexOf("safari-extension"),n=-1!==e.indexOf("safari-web-extension");return r||n?[-1!==e.indexOf("@")?e.split("@")[0]:Bi,r?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]};var Rc=Object.freeze({__proto__:null,BrowserClient:class extends Ha{constructor(e){const t=(r=e,{release:"string"==typeof __SENTRY_RELEASE__?__SENTRY_RELEASE__:ec.SENTRY_RELEASE?.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0,...r});var r;!function(e,t,r=[t],n="npm"){const s=e._metadata||{};s.sdk||(s.sdk={name:`sentry.javascript.${t}`,packages:r.map(e=>({name:`${n}:@sentry/${e}`,version:Ri})),version:Ri}),e._metadata=s}(t,"browser",["browser"],ec.SENTRY_SDK_SOURCE||"npm"),super(t);const{sendDefaultPii:n,sendClientReports:s,enableLogs:i,_experiments:o}=this._options,a=i??o?.enableLogs;ec.document&&(s||a)&&ec.document.addEventListener("visibilitychange",()=>{"hidden"===ec.document.visibilityState&&(s&&this._flushOutcomes(),a&&Ka(this))}),a&&(this.on("flush",()=>{Ka(this)}),this.on("afterCaptureLog",()=>{this._logFlushIdleTimeout&&clearTimeout(this._logFlushIdleTimeout),this._logFlushIdleTimeout=setTimeout(()=>{Ka(this)},5e3)})),n&&(this.on("postprocessEvent",Xa),this.on("beforeSendSession",Za))}eventFromException(e,t){return hc(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",r){return uc(this._options.stackParser,e,t,r,this._options.attachStacktrace)}_prepareEvent(e,t,r,n){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,r,n)}},SDK_VERSION:Ri,SEMANTIC_ATTRIBUTE_SENTRY_OP:Do,SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN:Lo,SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE:Uo,SEMANTIC_ATTRIBUTE_SENTRY_SOURCE:Mo,Scope:Eo,WINDOW:ec,chromeStackLineParser:bc,createTransport:$a,defaultStackLineParsers:Sc,defaultStackParser:Ic,eventFromException:hc,eventFromMessage:uc,exceptionFromError:tc,geckoStackLineParser:Pc,getClient:Co,getCurrentScope:To,getGlobalScope:Oo,getIsolationScope:No,getRootSpan:$o,makeFetchTransport:function(e,t=function(e){const t=mc[e];if(t)return t;let r=pc[e];if((n=r)&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(n.toString()))return mc[e]=r.bind(pc);var n;const s=pc.document;if(s&&"function"==typeof s.createElement)try{const t=s.createElement("iframe");t.hidden=!0,s.head.appendChild(t);const n=t.contentWindow;n?.[e]&&(r=n[e]),s.head.removeChild(t)}catch(t){fc&&Li.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,t)}return r?mc[e]=r.bind(pc):r}("fetch")){let r=0,n=0;return $a(e,function(s){const i=s.body.length;r+=i,n++;const o={body:s.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:r<=6e4&&n<15,...e.fetchOptions};if(!t)return gc("fetch"),ba("No fetch implementation available");try{return t(e.url,o).then(e=>(r-=i,n--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}}))}catch(e){return gc("fetch"),r-=i,n--,ba(e)}})},spanToJSON:Jo});var Tc={exports:{}},Nc=_t(Object.freeze({__proto__:null,default:{}}));!function(e){!function(e,t){function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function n(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function s(e,t,r){if(s.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var i;"object"==typeof e?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;try{i="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:Nc.Buffer}catch(e){}function o(e,t){var n=e.charCodeAt(t);return n>=48&&n<=57?n-48:n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:void r(!1,"Invalid character in "+e)}function a(e,t,r){var n=o(e,r);return r-1>=t&&(n|=o(e,r-1)<<4),n}function c(e,t,n,s){for(var i=0,o=0,a=Math.min(e.length,n),c=t;c<a;c++){var h=e.charCodeAt(c)-48;i*=s,o=h>=49?h-49+10:h>=17?h-17+10:h,r(h>=0&&o<s,"Invalid character"),i+=o}return i}function h(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(s.isBN=function(e){return e instanceof s||null!==e&&"object"==typeof e&&e.constructor.wordSize===s.wordSize&&Array.isArray(e.words)},s.max=function(e,t){return e.cmp(t)>0?e:t},s.min=function(e,t){return e.cmp(t)<0?e:t},s.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var s=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(s++,this.negative=1),s<e.length&&(16===t?this._parseHex(e,s,n):(this._parseBase(e,t,s),"le"===n&&this._initArray(this.toArray(),t,n)))},s.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},s.prototype._initArray=function(e,t,n){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var s=0;s<this.length;s++)this.words[s]=0;var i,o,a=0;if("be"===n)for(s=e.length-1,i=0;s>=0;s-=3)o=e[s]|e[s-1]<<8|e[s-2]<<16,this.words[i]|=o<<a&67108863,this.words[i+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,i++);else if("le"===n)for(s=0,i=0;s<e.length;s+=3)o=e[s]|e[s+1]<<8|e[s+2]<<16,this.words[i]|=o<<a&67108863,this.words[i+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,i++);return this._strip()},s.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var s,i=0,o=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)s=a(e,t,n)<<i,this.words[o]|=67108863&s,i>=18?(i-=18,o+=1,this.words[o]|=s>>>26):i+=8;else for(n=(e.length-t)%2==0?t+1:t;n<e.length;n+=2)s=a(e,t,n)<<i,this.words[o]|=67108863&s,i>=18?(i-=18,o+=1,this.words[o]|=s>>>26):i+=8;this._strip()},s.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,s=1;s<=67108863;s*=t)n++;n--,s=s/t|0;for(var i=e.length-r,o=i%n,a=Math.min(i,i-o)+r,h=0,u=r;u<a;u+=n)h=c(e,u,u+n,t),this.imuln(s),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(0!==o){var l=1;for(h=c(e,u,e.length,t),u=0;u<o;u++)l*=t;this.imuln(l),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}this._strip()},s.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},s.prototype._move=function(e){h(e,this)},s.prototype.clone=function(){var e=new s(null);return this.copy(e),e},s.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=u}catch(e){s.prototype.inspect=u}else s.prototype.inspect=u;function u(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(e,t){var n;if(t=0|t||1,16===(e=e||10)||"hex"===e){n="";for(var s=0,i=0,o=0;o<this.length;o++){var a=this.words[o],c=(16777215&(a<<s|i)).toString(16);i=a>>>24-s&16777215,(s+=2)>=26&&(s-=26,o--),n=0!==i||o!==this.length-1?l[6-c.length]+c+n:c+n}for(0!==i&&(n=i.toString(16)+n);n.length%t!==0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var h=d[e],u=f[e];n="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modrn(u).toString(e);n=(p=p.idivn(u)).isZero()?m+n:l[h-m.length]+m+n}for(this.isZero()&&(n="0"+n);n.length%t!==0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},s.prototype.toJSON=function(){return this.toString(16,2)},i&&(s.prototype.toBuffer=function(e,t){return this.toArrayLike(i,e,t)}),s.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)};function p(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var s=0|e.words[0],i=0|t.words[0],o=s*i,a=67108863&o,c=o/67108864|0;r.words[0]=a;for(var h=1;h<n;h++){for(var u=c>>>26,l=67108863&c,d=Math.min(h,t.length-1),f=Math.max(0,h-e.length+1);f<=d;f++){var p=h-f|0;u+=(o=(s=0|e.words[p])*(i=0|t.words[f])+l)/67108864|0,l=67108863&o}r.words[h]=0|l,c=0|u}return 0!==c?r.words[h]=0|c:r.length--,r._strip()}s.prototype.toArrayLike=function(e,t,n){this._strip();var s=this.byteLength(),i=n||Math.max(1,s);r(s<=i,"byte array longer than desired length"),r(i>0,"Requested array length <= 0");var o=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)}(e,i);return this["_toArrayLike"+("le"===t?"LE":"BE")](o,s),o},s.prototype._toArrayLikeLE=function(e,t){for(var r=0,n=0,s=0,i=0;s<this.length;s++){var o=this.words[s]<<i|n;e[r++]=255&o,r<e.length&&(e[r++]=o>>8&255),r<e.length&&(e[r++]=o>>16&255),6===i?(r<e.length&&(e[r++]=o>>24&255),n=0,i=0):(n=o>>>24,i+=2)}if(r<e.length)for(e[r++]=n;r<e.length;)e[r++]=0},s.prototype._toArrayLikeBE=function(e,t){for(var r=e.length-1,n=0,s=0,i=0;s<this.length;s++){var o=this.words[s]<<i|n;e[r--]=255&o,r>=0&&(e[r--]=o>>8&255),r>=0&&(e[r--]=o>>16&255),6===i?(r>=0&&(e[r--]=o>>24&255),n=0,i=0):(n=o>>>24,i+=2)}if(r>=0)for(e[r--]=n;r>=0;)e[r--]=0},Math.clz32?s.prototype._countBits=function(e){return 32-Math.clz32(e)}:s.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},s.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 8191&t||(r+=13,t>>>=13),127&t||(r+=7,t>>>=7),15&t||(r+=4,t>>>=4),3&t||(r+=2,t>>>=2),1&t||r++,r},s.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},s.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},s.prototype.ior=function(e){return r(0===(this.negative|e.negative)),this.iuor(e)},s.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},s.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},s.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this._strip()},s.prototype.iand=function(e){return r(0===(this.negative|e.negative)),this.iuand(e)},s.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},s.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},s.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this._strip()},s.prototype.ixor=function(e){return r(0===(this.negative|e.negative)),this.iuxor(e)},s.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},s.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},s.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var s=0;s<t;s++)this.words[s]=67108863&~this.words[s];return n>0&&(this.words[s]=~this.words[s]&67108863>>26-n),this._strip()},s.prototype.notn=function(e){return this.clone().inotn(e)},s.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var n=e/26|0,s=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<s:this.words[n]&~(1<<s),this._strip()},s.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var s=0,i=0;i<n.length;i++)t=(0|r.words[i])+(0|n.words[i])+s,this.words[i]=67108863&t,s=t>>>26;for(;0!==s&&i<r.length;i++)t=(0|r.words[i])+s,this.words[i]=67108863&t,s=t>>>26;if(this.length=r.length,0!==s)this.words[this.length]=s,this.length++;else if(r!==this)for(;i<r.length;i++)this.words[i]=r.words[i];return this},s.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},s.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,s=this.cmp(e);if(0===s)return this.negative=0,this.length=1,this.words[0]=0,this;s>0?(r=this,n=e):(r=e,n=this);for(var i=0,o=0;o<n.length;o++)i=(t=(0|r.words[o])-(0|n.words[o])+i)>>26,this.words[o]=67108863&t;for(;0!==i&&o<r.length;o++)i=(t=(0|r.words[o])+i)>>26,this.words[o]=67108863&t;if(0===i&&o<r.length&&r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=Math.max(this.length,o),r!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(e){return this.clone().isub(e)};var m=function(e,t,r){var n,s,i,o=e.words,a=t.words,c=r.words,h=0,u=0|o[0],l=8191&u,d=u>>>13,f=0|o[1],p=8191&f,m=f>>>13,g=0|o[2],y=8191&g,w=g>>>13,v=0|o[3],A=8191&v,b=v>>>13,E=0|o[4],_=8191&E,P=E>>>13,S=0|o[5],I=8191&S,k=S>>>13,R=0|o[6],T=8191&R,N=R>>>13,O=0|o[7],C=8191&O,x=O>>>13,M=0|o[8],U=8191&M,D=M>>>13,L=0|o[9],B=8191&L,F=L>>>13,q=0|a[0],j=8191&q,G=q>>>13,H=0|a[1],z=8191&H,V=H>>>13,K=0|a[2],W=8191&K,Y=K>>>13,J=0|a[3],Q=8191&J,$=J>>>13,X=0|a[4],Z=8191&X,ee=X>>>13,te=0|a[5],re=8191&te,ne=te>>>13,se=0|a[6],ie=8191&se,oe=se>>>13,ae=0|a[7],ce=8191&ae,he=ae>>>13,ue=0|a[8],le=8191&ue,de=ue>>>13,fe=0|a[9],pe=8191&fe,me=fe>>>13;r.negative=e.negative^t.negative,r.length=19;var ge=(h+(n=Math.imul(l,j))|0)+((8191&(s=(s=Math.imul(l,G))+Math.imul(d,j)|0))<<13)|0;h=((i=Math.imul(d,G))+(s>>>13)|0)+(ge>>>26)|0,ge&=67108863,n=Math.imul(p,j),s=(s=Math.imul(p,G))+Math.imul(m,j)|0,i=Math.imul(m,G);var ye=(h+(n=n+Math.imul(l,z)|0)|0)+((8191&(s=(s=s+Math.imul(l,V)|0)+Math.imul(d,z)|0))<<13)|0;h=((i=i+Math.imul(d,V)|0)+(s>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(y,j),s=(s=Math.imul(y,G))+Math.imul(w,j)|0,i=Math.imul(w,G),n=n+Math.imul(p,z)|0,s=(s=s+Math.imul(p,V)|0)+Math.imul(m,z)|0,i=i+Math.imul(m,V)|0;var we=(h+(n=n+Math.imul(l,W)|0)|0)+((8191&(s=(s=s+Math.imul(l,Y)|0)+Math.imul(d,W)|0))<<13)|0;h=((i=i+Math.imul(d,Y)|0)+(s>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(A,j),s=(s=Math.imul(A,G))+Math.imul(b,j)|0,i=Math.imul(b,G),n=n+Math.imul(y,z)|0,s=(s=s+Math.imul(y,V)|0)+Math.imul(w,z)|0,i=i+Math.imul(w,V)|0,n=n+Math.imul(p,W)|0,s=(s=s+Math.imul(p,Y)|0)+Math.imul(m,W)|0,i=i+Math.imul(m,Y)|0;var ve=(h+(n=n+Math.imul(l,Q)|0)|0)+((8191&(s=(s=s+Math.imul(l,$)|0)+Math.imul(d,Q)|0))<<13)|0;h=((i=i+Math.imul(d,$)|0)+(s>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(_,j),s=(s=Math.imul(_,G))+Math.imul(P,j)|0,i=Math.imul(P,G),n=n+Math.imul(A,z)|0,s=(s=s+Math.imul(A,V)|0)+Math.imul(b,z)|0,i=i+Math.imul(b,V)|0,n=n+Math.imul(y,W)|0,s=(s=s+Math.imul(y,Y)|0)+Math.imul(w,W)|0,i=i+Math.imul(w,Y)|0,n=n+Math.imul(p,Q)|0,s=(s=s+Math.imul(p,$)|0)+Math.imul(m,Q)|0,i=i+Math.imul(m,$)|0;var Ae=(h+(n=n+Math.imul(l,Z)|0)|0)+((8191&(s=(s=s+Math.imul(l,ee)|0)+Math.imul(d,Z)|0))<<13)|0;h=((i=i+Math.imul(d,ee)|0)+(s>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul(I,j),s=(s=Math.imul(I,G))+Math.imul(k,j)|0,i=Math.imul(k,G),n=n+Math.imul(_,z)|0,s=(s=s+Math.imul(_,V)|0)+Math.imul(P,z)|0,i=i+Math.imul(P,V)|0,n=n+Math.imul(A,W)|0,s=(s=s+Math.imul(A,Y)|0)+Math.imul(b,W)|0,i=i+Math.imul(b,Y)|0,n=n+Math.imul(y,Q)|0,s=(s=s+Math.imul(y,$)|0)+Math.imul(w,Q)|0,i=i+Math.imul(w,$)|0,n=n+Math.imul(p,Z)|0,s=(s=s+Math.imul(p,ee)|0)+Math.imul(m,Z)|0,i=i+Math.imul(m,ee)|0;var be=(h+(n=n+Math.imul(l,re)|0)|0)+((8191&(s=(s=s+Math.imul(l,ne)|0)+Math.imul(d,re)|0))<<13)|0;h=((i=i+Math.imul(d,ne)|0)+(s>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(T,j),s=(s=Math.imul(T,G))+Math.imul(N,j)|0,i=Math.imul(N,G),n=n+Math.imul(I,z)|0,s=(s=s+Math.imul(I,V)|0)+Math.imul(k,z)|0,i=i+Math.imul(k,V)|0,n=n+Math.imul(_,W)|0,s=(s=s+Math.imul(_,Y)|0)+Math.imul(P,W)|0,i=i+Math.imul(P,Y)|0,n=n+Math.imul(A,Q)|0,s=(s=s+Math.imul(A,$)|0)+Math.imul(b,Q)|0,i=i+Math.imul(b,$)|0,n=n+Math.imul(y,Z)|0,s=(s=s+Math.imul(y,ee)|0)+Math.imul(w,Z)|0,i=i+Math.imul(w,ee)|0,n=n+Math.imul(p,re)|0,s=(s=s+Math.imul(p,ne)|0)+Math.imul(m,re)|0,i=i+Math.imul(m,ne)|0;var Ee=(h+(n=n+Math.imul(l,ie)|0)|0)+((8191&(s=(s=s+Math.imul(l,oe)|0)+Math.imul(d,ie)|0))<<13)|0;h=((i=i+Math.imul(d,oe)|0)+(s>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(C,j),s=(s=Math.imul(C,G))+Math.imul(x,j)|0,i=Math.imul(x,G),n=n+Math.imul(T,z)|0,s=(s=s+Math.imul(T,V)|0)+Math.imul(N,z)|0,i=i+Math.imul(N,V)|0,n=n+Math.imul(I,W)|0,s=(s=s+Math.imul(I,Y)|0)+Math.imul(k,W)|0,i=i+Math.imul(k,Y)|0,n=n+Math.imul(_,Q)|0,s=(s=s+Math.imul(_,$)|0)+Math.imul(P,Q)|0,i=i+Math.imul(P,$)|0,n=n+Math.imul(A,Z)|0,s=(s=s+Math.imul(A,ee)|0)+Math.imul(b,Z)|0,i=i+Math.imul(b,ee)|0,n=n+Math.imul(y,re)|0,s=(s=s+Math.imul(y,ne)|0)+Math.imul(w,re)|0,i=i+Math.imul(w,ne)|0,n=n+Math.imul(p,ie)|0,s=(s=s+Math.imul(p,oe)|0)+Math.imul(m,ie)|0,i=i+Math.imul(m,oe)|0;var _e=(h+(n=n+Math.imul(l,ce)|0)|0)+((8191&(s=(s=s+Math.imul(l,he)|0)+Math.imul(d,ce)|0))<<13)|0;h=((i=i+Math.imul(d,he)|0)+(s>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(U,j),s=(s=Math.imul(U,G))+Math.imul(D,j)|0,i=Math.imul(D,G),n=n+Math.imul(C,z)|0,s=(s=s+Math.imul(C,V)|0)+Math.imul(x,z)|0,i=i+Math.imul(x,V)|0,n=n+Math.imul(T,W)|0,s=(s=s+Math.imul(T,Y)|0)+Math.imul(N,W)|0,i=i+Math.imul(N,Y)|0,n=n+Math.imul(I,Q)|0,s=(s=s+Math.imul(I,$)|0)+Math.imul(k,Q)|0,i=i+Math.imul(k,$)|0,n=n+Math.imul(_,Z)|0,s=(s=s+Math.imul(_,ee)|0)+Math.imul(P,Z)|0,i=i+Math.imul(P,ee)|0,n=n+Math.imul(A,re)|0,s=(s=s+Math.imul(A,ne)|0)+Math.imul(b,re)|0,i=i+Math.imul(b,ne)|0,n=n+Math.imul(y,ie)|0,s=(s=s+Math.imul(y,oe)|0)+Math.imul(w,ie)|0,i=i+Math.imul(w,oe)|0,n=n+Math.imul(p,ce)|0,s=(s=s+Math.imul(p,he)|0)+Math.imul(m,ce)|0,i=i+Math.imul(m,he)|0;var Pe=(h+(n=n+Math.imul(l,le)|0)|0)+((8191&(s=(s=s+Math.imul(l,de)|0)+Math.imul(d,le)|0))<<13)|0;h=((i=i+Math.imul(d,de)|0)+(s>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,n=Math.imul(B,j),s=(s=Math.imul(B,G))+Math.imul(F,j)|0,i=Math.imul(F,G),n=n+Math.imul(U,z)|0,s=(s=s+Math.imul(U,V)|0)+Math.imul(D,z)|0,i=i+Math.imul(D,V)|0,n=n+Math.imul(C,W)|0,s=(s=s+Math.imul(C,Y)|0)+Math.imul(x,W)|0,i=i+Math.imul(x,Y)|0,n=n+Math.imul(T,Q)|0,s=(s=s+Math.imul(T,$)|0)+Math.imul(N,Q)|0,i=i+Math.imul(N,$)|0,n=n+Math.imul(I,Z)|0,s=(s=s+Math.imul(I,ee)|0)+Math.imul(k,Z)|0,i=i+Math.imul(k,ee)|0,n=n+Math.imul(_,re)|0,s=(s=s+Math.imul(_,ne)|0)+Math.imul(P,re)|0,i=i+Math.imul(P,ne)|0,n=n+Math.imul(A,ie)|0,s=(s=s+Math.imul(A,oe)|0)+Math.imul(b,ie)|0,i=i+Math.imul(b,oe)|0,n=n+Math.imul(y,ce)|0,s=(s=s+Math.imul(y,he)|0)+Math.imul(w,ce)|0,i=i+Math.imul(w,he)|0,n=n+Math.imul(p,le)|0,s=(s=s+Math.imul(p,de)|0)+Math.imul(m,le)|0,i=i+Math.imul(m,de)|0;var Se=(h+(n=n+Math.imul(l,pe)|0)|0)+((8191&(s=(s=s+Math.imul(l,me)|0)+Math.imul(d,pe)|0))<<13)|0;h=((i=i+Math.imul(d,me)|0)+(s>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(B,z),s=(s=Math.imul(B,V))+Math.imul(F,z)|0,i=Math.imul(F,V),n=n+Math.imul(U,W)|0,s=(s=s+Math.imul(U,Y)|0)+Math.imul(D,W)|0,i=i+Math.imul(D,Y)|0,n=n+Math.imul(C,Q)|0,s=(s=s+Math.imul(C,$)|0)+Math.imul(x,Q)|0,i=i+Math.imul(x,$)|0,n=n+Math.imul(T,Z)|0,s=(s=s+Math.imul(T,ee)|0)+Math.imul(N,Z)|0,i=i+Math.imul(N,ee)|0,n=n+Math.imul(I,re)|0,s=(s=s+Math.imul(I,ne)|0)+Math.imul(k,re)|0,i=i+Math.imul(k,ne)|0,n=n+Math.imul(_,ie)|0,s=(s=s+Math.imul(_,oe)|0)+Math.imul(P,ie)|0,i=i+Math.imul(P,oe)|0,n=n+Math.imul(A,ce)|0,s=(s=s+Math.imul(A,he)|0)+Math.imul(b,ce)|0,i=i+Math.imul(b,he)|0,n=n+Math.imul(y,le)|0,s=(s=s+Math.imul(y,de)|0)+Math.imul(w,le)|0,i=i+Math.imul(w,de)|0;var Ie=(h+(n=n+Math.imul(p,pe)|0)|0)+((8191&(s=(s=s+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;h=((i=i+Math.imul(m,me)|0)+(s>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul(B,W),s=(s=Math.imul(B,Y))+Math.imul(F,W)|0,i=Math.imul(F,Y),n=n+Math.imul(U,Q)|0,s=(s=s+Math.imul(U,$)|0)+Math.imul(D,Q)|0,i=i+Math.imul(D,$)|0,n=n+Math.imul(C,Z)|0,s=(s=s+Math.imul(C,ee)|0)+Math.imul(x,Z)|0,i=i+Math.imul(x,ee)|0,n=n+Math.imul(T,re)|0,s=(s=s+Math.imul(T,ne)|0)+Math.imul(N,re)|0,i=i+Math.imul(N,ne)|0,n=n+Math.imul(I,ie)|0,s=(s=s+Math.imul(I,oe)|0)+Math.imul(k,ie)|0,i=i+Math.imul(k,oe)|0,n=n+Math.imul(_,ce)|0,s=(s=s+Math.imul(_,he)|0)+Math.imul(P,ce)|0,i=i+Math.imul(P,he)|0,n=n+Math.imul(A,le)|0,s=(s=s+Math.imul(A,de)|0)+Math.imul(b,le)|0,i=i+Math.imul(b,de)|0;var ke=(h+(n=n+Math.imul(y,pe)|0)|0)+((8191&(s=(s=s+Math.imul(y,me)|0)+Math.imul(w,pe)|0))<<13)|0;h=((i=i+Math.imul(w,me)|0)+(s>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(B,Q),s=(s=Math.imul(B,$))+Math.imul(F,Q)|0,i=Math.imul(F,$),n=n+Math.imul(U,Z)|0,s=(s=s+Math.imul(U,ee)|0)+Math.imul(D,Z)|0,i=i+Math.imul(D,ee)|0,n=n+Math.imul(C,re)|0,s=(s=s+Math.imul(C,ne)|0)+Math.imul(x,re)|0,i=i+Math.imul(x,ne)|0,n=n+Math.imul(T,ie)|0,s=(s=s+Math.imul(T,oe)|0)+Math.imul(N,ie)|0,i=i+Math.imul(N,oe)|0,n=n+Math.imul(I,ce)|0,s=(s=s+Math.imul(I,he)|0)+Math.imul(k,ce)|0,i=i+Math.imul(k,he)|0,n=n+Math.imul(_,le)|0,s=(s=s+Math.imul(_,de)|0)+Math.imul(P,le)|0,i=i+Math.imul(P,de)|0;var Re=(h+(n=n+Math.imul(A,pe)|0)|0)+((8191&(s=(s=s+Math.imul(A,me)|0)+Math.imul(b,pe)|0))<<13)|0;h=((i=i+Math.imul(b,me)|0)+(s>>>13)|0)+(Re>>>26)|0,Re&=67108863,n=Math.imul(B,Z),s=(s=Math.imul(B,ee))+Math.imul(F,Z)|0,i=Math.imul(F,ee),n=n+Math.imul(U,re)|0,s=(s=s+Math.imul(U,ne)|0)+Math.imul(D,re)|0,i=i+Math.imul(D,ne)|0,n=n+Math.imul(C,ie)|0,s=(s=s+Math.imul(C,oe)|0)+Math.imul(x,ie)|0,i=i+Math.imul(x,oe)|0,n=n+Math.imul(T,ce)|0,s=(s=s+Math.imul(T,he)|0)+Math.imul(N,ce)|0,i=i+Math.imul(N,he)|0,n=n+Math.imul(I,le)|0,s=(s=s+Math.imul(I,de)|0)+Math.imul(k,le)|0,i=i+Math.imul(k,de)|0;var Te=(h+(n=n+Math.imul(_,pe)|0)|0)+((8191&(s=(s=s+Math.imul(_,me)|0)+Math.imul(P,pe)|0))<<13)|0;h=((i=i+Math.imul(P,me)|0)+(s>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(B,re),s=(s=Math.imul(B,ne))+Math.imul(F,re)|0,i=Math.imul(F,ne),n=n+Math.imul(U,ie)|0,s=(s=s+Math.imul(U,oe)|0)+Math.imul(D,ie)|0,i=i+Math.imul(D,oe)|0,n=n+Math.imul(C,ce)|0,s=(s=s+Math.imul(C,he)|0)+Math.imul(x,ce)|0,i=i+Math.imul(x,he)|0,n=n+Math.imul(T,le)|0,s=(s=s+Math.imul(T,de)|0)+Math.imul(N,le)|0,i=i+Math.imul(N,de)|0;var Ne=(h+(n=n+Math.imul(I,pe)|0)|0)+((8191&(s=(s=s+Math.imul(I,me)|0)+Math.imul(k,pe)|0))<<13)|0;h=((i=i+Math.imul(k,me)|0)+(s>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,n=Math.imul(B,ie),s=(s=Math.imul(B,oe))+Math.imul(F,ie)|0,i=Math.imul(F,oe),n=n+Math.imul(U,ce)|0,s=(s=s+Math.imul(U,he)|0)+Math.imul(D,ce)|0,i=i+Math.imul(D,he)|0,n=n+Math.imul(C,le)|0,s=(s=s+Math.imul(C,de)|0)+Math.imul(x,le)|0,i=i+Math.imul(x,de)|0;var Oe=(h+(n=n+Math.imul(T,pe)|0)|0)+((8191&(s=(s=s+Math.imul(T,me)|0)+Math.imul(N,pe)|0))<<13)|0;h=((i=i+Math.imul(N,me)|0)+(s>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,n=Math.imul(B,ce),s=(s=Math.imul(B,he))+Math.imul(F,ce)|0,i=Math.imul(F,he),n=n+Math.imul(U,le)|0,s=(s=s+Math.imul(U,de)|0)+Math.imul(D,le)|0,i=i+Math.imul(D,de)|0;var Ce=(h+(n=n+Math.imul(C,pe)|0)|0)+((8191&(s=(s=s+Math.imul(C,me)|0)+Math.imul(x,pe)|0))<<13)|0;h=((i=i+Math.imul(x,me)|0)+(s>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,n=Math.imul(B,le),s=(s=Math.imul(B,de))+Math.imul(F,le)|0,i=Math.imul(F,de);var xe=(h+(n=n+Math.imul(U,pe)|0)|0)+((8191&(s=(s=s+Math.imul(U,me)|0)+Math.imul(D,pe)|0))<<13)|0;h=((i=i+Math.imul(D,me)|0)+(s>>>13)|0)+(xe>>>26)|0,xe&=67108863;var Me=(h+(n=Math.imul(B,pe))|0)+((8191&(s=(s=Math.imul(B,me))+Math.imul(F,pe)|0))<<13)|0;return h=((i=Math.imul(F,me))+(s>>>13)|0)+(Me>>>26)|0,Me&=67108863,c[0]=ge,c[1]=ye,c[2]=we,c[3]=ve,c[4]=Ae,c[5]=be,c[6]=Ee,c[7]=_e,c[8]=Pe,c[9]=Se,c[10]=Ie,c[11]=ke,c[12]=Re,c[13]=Te,c[14]=Ne,c[15]=Oe,c[16]=Ce,c[17]=xe,c[18]=Me,0!==h&&(c[19]=h,r.length++),r};function g(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,s=0,i=0;i<r.length-1;i++){var o=s;s=0;for(var a=67108863&n,c=Math.min(i,t.length-1),h=Math.max(0,i-e.length+1);h<=c;h++){var u=i-h,l=(0|e.words[u])*(0|t.words[h]),d=67108863&l;a=67108863&(d=d+a|0),s+=(o=(o=o+(l/67108864|0)|0)+(d>>>26)|0)>>>26,o&=67108863}r.words[i]=a,n=o,o=s}return 0!==n?r.words[i]=n:r.length--,r._strip()}function y(e,t,r){return g(e,t,r)}Math.imul||(m=p),s.prototype.mulTo=function(e,t){var r=this.length+e.length;return 10===this.length&&10===e.length?m(this,e,t):r<63?p(this,e,t):r<1024?g(this,e,t):y(this,e,t)},s.prototype.mul=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},s.prototype.mulf=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),y(this,e,t)},s.prototype.imul=function(e){return this.clone().mulTo(e,this)},s.prototype.imuln=function(e){var t=e<0;t&&(e=-e),r("number"==typeof e),r(e<67108864);for(var n=0,s=0;s<this.length;s++){var i=(0|this.words[s])*e,o=(67108863&i)+(67108863&n);n>>=26,n+=i/67108864|0,n+=o>>>26,this.words[s]=67108863&o}return 0!==n&&(this.words[s]=n,this.length++),this.length=0===e?1:this.length,t?this.ineg():this},s.prototype.muln=function(e){return this.clone().imuln(e)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,s=r%26;t[r]=e.words[n]>>>s&1}return t}(e);if(0===t.length)return new s(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var i=r.sqr();n<t.length;n++,i=i.sqr())0!==t[n]&&(r=r.mul(i));return r},s.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,n=e%26,s=(e-n)/26,i=67108863>>>26-n<<26-n;if(0!==n){var o=0;for(t=0;t<this.length;t++){var a=this.words[t]&i,c=(0|this.words[t])-a<<n;this.words[t]=c|o,o=a>>>26-n}o&&(this.words[t]=o,this.length++)}if(0!==s){for(t=this.length-1;t>=0;t--)this.words[t+s]=this.words[t];for(t=0;t<s;t++)this.words[t]=0;this.length+=s}return this._strip()},s.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},s.prototype.iushrn=function(e,t,n){var s;r("number"==typeof e&&e>=0),s=t?(t-t%26)/26:0;var i=e%26,o=Math.min((e-i)/26,this.length),a=67108863^67108863>>>i<<i,c=n;if(s-=o,s=Math.max(0,s),c){for(var h=0;h<o;h++)c.words[h]=this.words[h];c.length=o}if(0===o);else if(this.length>o)for(this.length-=o,h=0;h<this.length;h++)this.words[h]=this.words[h+o];else this.words[0]=0,this.length=1;var u=0;for(h=this.length-1;h>=0&&(0!==u||h>=s);h--){var l=0|this.words[h];this.words[h]=u<<26-i|l>>>i,u=l&a}return c&&0!==u&&(c.words[c.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(e,t,n){return r(0===this.negative),this.iushrn(e,t,n)},s.prototype.shln=function(e){return this.clone().ishln(e)},s.prototype.ushln=function(e){return this.clone().iushln(e)},s.prototype.shrn=function(e){return this.clone().ishrn(e)},s.prototype.ushrn=function(e){return this.clone().iushrn(e)},s.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,s=1<<t;return!(this.length<=n)&&!!(this.words[n]&s)},s.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var s=67108863^67108863>>>t<<t;this.words[this.length-1]&=s}return this._strip()},s.prototype.maskn=function(e){return this.clone().imaskn(e)},s.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},s.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},s.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},s.prototype.addn=function(e){return this.clone().iaddn(e)},s.prototype.subn=function(e){return this.clone().isubn(e)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(e,t,n){var s,i,o=e.length+n;this._expand(o);var a=0;for(s=0;s<e.length;s++){i=(0|this.words[s+n])+a;var c=(0|e.words[s])*t;a=((i-=67108863&c)>>26)-(c/67108864|0),this.words[s+n]=67108863&i}for(;s<this.length-n;s++)a=(i=(0|this.words[s+n])+a)>>26,this.words[s+n]=67108863&i;if(0===a)return this._strip();for(r(-1===a),a=0,s=0;s<this.length;s++)a=(i=-(0|this.words[s])+a)>>26,this.words[s]=67108863&i;return this.negative=1,this._strip()},s.prototype._wordDiv=function(e,t){var r=(this.length,e.length),n=this.clone(),i=e,o=0|i.words[i.length-1];0!==(r=26-this._countBits(o))&&(i=i.ushln(r),n.iushln(r),o=0|i.words[i.length-1]);var a,c=n.length-i.length;if("mod"!==t){(a=new s(null)).length=c+1,a.words=new Array(a.length);for(var h=0;h<a.length;h++)a.words[h]=0}var u=n.clone()._ishlnsubmul(i,1,c);0===u.negative&&(n=u,a&&(a.words[c]=1));for(var l=c-1;l>=0;l--){var d=67108864*(0|n.words[i.length+l])+(0|n.words[i.length+l-1]);for(d=Math.min(d/o|0,67108863),n._ishlnsubmul(i,d,l);0!==n.negative;)d--,n.negative=0,n._ishlnsubmul(i,1,l),n.isZero()||(n.negative^=1);a&&(a.words[l]=d)}return a&&a._strip(),n._strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},s.prototype.divmod=function(e,t,n){return r(!e.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(i=a.div.neg()),"div"!==t&&(o=a.mod.neg(),n&&0!==o.negative&&o.iadd(e)),{div:i,mod:o}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(i=a.div.neg()),{div:i,mod:a.mod}):0!==(this.negative&e.negative)?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(o=a.mod.neg(),n&&0!==o.negative&&o.isub(e)),{div:a.div,mod:o}):e.length>this.length||this.cmp(e)<0?{div:new s(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new s(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new s(this.modrn(e.words[0]))}:this._wordDiv(e,t);var i,o,a},s.prototype.div=function(e){return this.divmod(e,"div",!1).div},s.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},s.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},s.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),s=e.andln(1),i=r.cmp(n);return i<0||1===s&&0===i?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},s.prototype.modrn=function(e){var t=e<0;t&&(e=-e),r(e<=67108863);for(var n=(1<<26)%e,s=0,i=this.length-1;i>=0;i--)s=(n*s+(0|this.words[i]))%e;return t?-s:s},s.prototype.modn=function(e){return this.modrn(e)},s.prototype.idivn=function(e){var t=e<0;t&&(e=-e),r(e<=67108863);for(var n=0,s=this.length-1;s>=0;s--){var i=(0|this.words[s])+67108864*n;this.words[s]=i/e|0,n=i%e}return this._strip(),t?this.ineg():this},s.prototype.divn=function(e){return this.clone().idivn(e)},s.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new s(1),o=new s(0),a=new s(0),c=new s(1),h=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++h;for(var u=n.clone(),l=t.clone();!t.isZero();){for(var d=0,f=1;0===(t.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(t.iushrn(d);d-- >0;)(i.isOdd()||o.isOdd())&&(i.iadd(u),o.isub(l)),i.iushrn(1),o.iushrn(1);for(var p=0,m=1;0===(n.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(a.isOdd()||c.isOdd())&&(a.iadd(u),c.isub(l)),a.iushrn(1),c.iushrn(1);t.cmp(n)>=0?(t.isub(n),i.isub(a),o.isub(c)):(n.isub(t),a.isub(i),c.isub(o))}return{a:a,b:c,gcd:n.iushln(h)}},s.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,o=new s(1),a=new s(0),c=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var h=0,u=1;0===(t.words[0]&u)&&h<26;++h,u<<=1);if(h>0)for(t.iushrn(h);h-- >0;)o.isOdd()&&o.iadd(c),o.iushrn(1);for(var l=0,d=1;0===(n.words[0]&d)&&l<26;++l,d<<=1);if(l>0)for(n.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);t.cmp(n)>=0?(t.isub(n),o.isub(a)):(n.isub(t),a.isub(o))}return(i=0===t.cmpn(1)?o:a).cmpn(0)<0&&i.iadd(e),i},s.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var s=t.cmp(r);if(s<0){var i=t;t=r,r=i}else if(0===s||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},s.prototype.invm=function(e){return this.egcd(e).a.umod(e)},s.prototype.isEven=function(){return!(1&this.words[0])},s.prototype.isOdd=function(){return!(1&~this.words[0])},s.prototype.andln=function(e){return this.words[0]&e},s.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,n=(e-t)/26,s=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=s,this;for(var i=s,o=n;0!==i&&o<this.length;o++){var a=0|this.words[o];i=(a+=i)>>>26,a&=67108863,this.words[o]=a}return 0!==i&&(this.words[o]=i,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this._strip(),this.length>1)t=1;else{n&&(e=-e),r(e<=67108863,"Number is too big");var s=0|this.words[0];t=s===e?0:s<e?-1:1}return 0!==this.negative?0|-t:t},s.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},s.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],s=0|e.words[r];if(n!==s){n<s?t=-1:n>s&&(t=1);break}}return t},s.prototype.gtn=function(e){return 1===this.cmpn(e)},s.prototype.gt=function(e){return 1===this.cmp(e)},s.prototype.gten=function(e){return this.cmpn(e)>=0},s.prototype.gte=function(e){return this.cmp(e)>=0},s.prototype.ltn=function(e){return-1===this.cmpn(e)},s.prototype.lt=function(e){return-1===this.cmp(e)},s.prototype.lten=function(e){return this.cmpn(e)<=0},s.prototype.lte=function(e){return this.cmp(e)<=0},s.prototype.eqn=function(e){return 0===this.cmpn(e)},s.prototype.eq=function(e){return 0===this.cmp(e)},s.red=function(e){return new P(e)},s.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},s.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(e){return this.red=e,this},s.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},s.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},s.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},s.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},s.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},s.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},s.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},s.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},s.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var w={k256:null,p224:null,p192:null,p25519:null};function v(e,t){this.name=e,this.p=new s(t,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function A(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function E(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function _(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function P(e){if("string"==typeof e){var t=s._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function S(e){P.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var e=new s(null);return e.words=new Array(Math.ceil(this.n/13)),e},v.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},v.prototype.split=function(e,t){e.iushrn(this.n,0,t)},v.prototype.imulK=function(e){return e.imul(this.k)},n(A,v),A.prototype.split=function(e,t){for(var r=4194303,n=Math.min(e.length,9),s=0;s<n;s++)t.words[s]=e.words[s];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var i=e.words[9];for(t.words[t.length++]=i&r,s=10;s<e.length;s++){var o=0|e.words[s];e.words[s-10]=(o&r)<<4|i>>>22,i=o}i>>>=22,e.words[s-10]=i,0===i&&e.length>10?e.length-=10:e.length-=9},A.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},n(b,v),n(E,v),n(_,v),_.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,s=67108863&n;n>>>=26,e.words[r]=s,t=n}return 0!==t&&(e.words[e.length++]=t),e},s._prime=function(e){if(w[e])return w[e];var t;if("k256"===e)t=new A;else if("p224"===e)t=new b;else if("p192"===e)t=new E;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new _}return w[e]=t,t},P.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},P.prototype._verify2=function(e,t){r(0===(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},P.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(h(e,e.umod(this.m)._forceRed(this)),e)},P.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},P.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},P.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},P.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},P.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},P.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},P.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},P.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},P.prototype.isqr=function(e){return this.imul(e,e.clone())},P.prototype.sqr=function(e){return this.mul(e,e)},P.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var n=this.m.add(new s(1)).iushrn(2);return this.pow(e,n)}for(var i=this.m.subn(1),o=0;!i.isZero()&&0===i.andln(1);)o++,i.iushrn(1);r(!i.isZero());var a=new s(1).toRed(this),c=a.redNeg(),h=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new s(2*u*u).toRed(this);0!==this.pow(u,h).cmp(c);)u.redIAdd(c);for(var l=this.pow(u,i),d=this.pow(e,i.addn(1).iushrn(1)),f=this.pow(e,i),p=o;0!==f.cmp(a);){for(var m=f,g=0;0!==m.cmp(a);g++)m=m.redSqr();r(g<p);var y=this.pow(l,new s(1).iushln(p-g-1));d=d.redMul(y),l=y.redSqr(),f=f.redMul(l),p=g}return d},P.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},P.prototype.pow=function(e,t){if(t.isZero())return new s(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new s(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var i=r[0],o=0,a=0,c=t.bitLength()%26;for(0===c&&(c=26),n=t.length-1;n>=0;n--){for(var h=t.words[n],u=c-1;u>=0;u--){var l=h>>u&1;i!==r[0]&&(i=this.sqr(i)),0!==l||0!==o?(o<<=1,o|=l,(4===++a||0===n&&0===u)&&(i=this.mul(i,r[o]),a=0,o=0)):a=0}c=26}return i},P.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},P.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},s.mont=function(e){return new S(e)},n(S,P),S.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},S.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},S.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=r.isub(n).iushrn(this.shift),i=s;return s.cmp(this.m)>=0?i=s.isub(this.m):s.cmpn(0)<0&&(i=s.iadd(this.m)),i._forceRed(this)},S.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new s(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},S.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,bt)}(Tc);var Oc=Et(Tc.exports);var Cc=Oc.BN;const xc=new jn("bignumber/5.8.0"),Mc={},Uc=9007199254740991;let Dc=!1;class Lc{constructor(e,t){e!==Mc&&xc.throwError("cannot call constructor directly; use BigNumber.from",jn.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=t,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return Fc(qc(this).fromTwos(e))}toTwos(e){return Fc(qc(this).toTwos(e))}abs(){return"-"===this._hex[0]?Lc.from(this._hex.substring(1)):this}add(e){return Fc(qc(this).add(qc(e)))}sub(e){return Fc(qc(this).sub(qc(e)))}div(e){return Lc.from(e).isZero()&&jc("division-by-zero","div"),Fc(qc(this).div(qc(e)))}mul(e){return Fc(qc(this).mul(qc(e)))}mod(e){const t=qc(e);return t.isNeg()&&jc("division-by-zero","mod"),Fc(qc(this).umod(t))}pow(e){const t=qc(e);return t.isNeg()&&jc("negative-power","pow"),Fc(qc(this).pow(t))}and(e){const t=qc(e);return(this.isNegative()||t.isNeg())&&jc("unbound-bitwise-result","and"),Fc(qc(this).and(t))}or(e){const t=qc(e);return(this.isNegative()||t.isNeg())&&jc("unbound-bitwise-result","or"),Fc(qc(this).or(t))}xor(e){const t=qc(e);return(this.isNegative()||t.isNeg())&&jc("unbound-bitwise-result","xor"),Fc(qc(this).xor(t))}mask(e){return(this.isNegative()||e<0)&&jc("negative-width","mask"),Fc(qc(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&jc("negative-width","shl"),Fc(qc(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&jc("negative-width","shr"),Fc(qc(this).shrn(e))}eq(e){return qc(this).eq(qc(e))}lt(e){return qc(this).lt(qc(e))}lte(e){return qc(this).lte(qc(e))}gt(e){return qc(this).gt(qc(e))}gte(e){return qc(this).gte(qc(e))}isNegative(){return"-"===this._hex[0]}isZero(){return qc(this).isZero()}toNumber(){try{return qc(this).toNumber()}catch(e){jc("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch(e){}return xc.throwError("this platform does not support BigInt",jn.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(10===arguments[0]?Dc||(Dc=!0,xc.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):16===arguments[0]?xc.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",jn.errors.UNEXPECTED_ARGUMENT,{}):xc.throwError("BigNumber.toString does not accept parameters",jn.errors.UNEXPECTED_ARGUMENT,{})),qc(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof Lc)return e;if("string"==typeof e)return e.match(/^-?0x[0-9a-f]+$/i)?new Lc(Mc,Bc(e)):e.match(/^-?[0-9]+$/)?new Lc(Mc,Bc(new Cc(e))):xc.throwArgumentError("invalid BigNumber string","value",e);if("number"==typeof e)return e%1&&jc("underflow","BigNumber.from",e),(e>=Uc||e<=-Uc)&&jc("overflow","BigNumber.from",e),Lc.from(String(e));const t=e;if("bigint"==typeof t)return Lc.from(t.toString());if(Wn(t))return Lc.from(es(t));if(t)if(t.toHexString){const e=t.toHexString();if("string"==typeof e)return Lc.from(e)}else{let e=t._hex;if(null==e&&"BigNumber"===t.type&&(e=t.hex),"string"==typeof e&&(Xn(e)||"-"===e[0]&&Xn(e.substring(1))))return Lc.from(e)}return xc.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!(!e||!e._isBigNumber)}}function Bc(e){if("string"!=typeof e)return Bc(e.toString(16));if("-"===e[0])return"-"===(e=e.substring(1))[0]&&xc.throwArgumentError("invalid hex","value",e),"0x00"===(e=Bc(e))?e:"-"+e;if("0x"!==e.substring(0,2)&&(e="0x"+e),"0x"===e)return"0x00";for(e.length%2&&(e="0x0"+e.substring(2));e.length>4&&"0x00"===e.substring(0,4);)e="0x"+e.substring(4);return e}function Fc(e){return Lc.from(Bc(e))}function qc(e){const t=Lc.from(e).toHexString();return"-"===t[0]?new Cc("-"+t.substring(3),16):new Cc(t.substring(2),16)}function jc(e,t,r){const n={fault:e,operation:t};return null!=r&&(n.value=r),xc.throwError(e,jn.errors.NUMERIC_FAULT,n)}const Gc=Lc.from(-1),Hc=Lc.from(0),zc=Lc.from(1),Vc=Lc.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Kc=new jn("strings/5.8.0");var Wc,Yc;function Jc(e,t,r,n,s){if(e===Yc.BAD_PREFIX||e===Yc.UNEXPECTED_CONTINUE){let e=0;for(let n=t+1;n<r.length&&r[n]>>6==2;n++)e++;return e}return e===Yc.OVERRUN?r.length-t-1:0}!function(e){e.current="",e.NFC="NFC",e.NFD="NFD",e.NFKC="NFKC",e.NFKD="NFKD"}(Wc||(Wc={})),function(e){e.UNEXPECTED_CONTINUE="unexpected continuation byte",e.BAD_PREFIX="bad codepoint prefix",e.OVERRUN="string overrun",e.MISSING_CONTINUE="missing continuation byte",e.OUT_OF_RANGE="out of UTF-8 range",e.UTF16_SURROGATE="UTF-16 surrogate",e.OVERLONG="overlong representation"}(Yc||(Yc={}));const Qc=Object.freeze({error:function(e,t,r,n,s){return Kc.throwArgumentError(`invalid codepoint at offset ${t}; ${e}`,"bytes",r)},ignore:Jc,replace:function(e,t,r,n,s){return e===Yc.OVERLONG?(n.push(s),0):(n.push(65533),Jc(e,t,r))}});function $c(e,t){null==t&&(t=Qc.error),e=Yn(e);const r=[];let n=0;for(;n<e.length;){const s=e[n++];if(!(s>>7)){r.push(s);continue}let i=null,o=null;if(192==(224&s))i=1,o=127;else if(224==(240&s))i=2,o=2047;else{if(240!=(248&s)){n+=t(128==(192&s)?Yc.UNEXPECTED_CONTINUE:Yc.BAD_PREFIX,n-1,e,r);continue}i=3,o=65535}if(n-1+i>=e.length){n+=t(Yc.OVERRUN,n-1,e,r);continue}let a=s&(1<<8-i-1)-1;for(let s=0;s<i;s++){let s=e[n];if(128!=(192&s)){n+=t(Yc.MISSING_CONTINUE,n,e,r),a=null;break}a=a<<6|63&s,n++}null!==a&&(a>1114111?n+=t(Yc.OUT_OF_RANGE,n-1-i,e,r,a):a>=55296&&a<=57343?n+=t(Yc.UTF16_SURROGATE,n-1-i,e,r,a):a<=o?n+=t(Yc.OVERLONG,n-1-i,e,r,a):r.push(a))}return r}function Xc(e,t=Wc.current){t!=Wc.current&&(Kc.checkNormalize(),e=e.normalize(t));let r=[];for(let t=0;t<e.length;t++){const n=e.charCodeAt(t);if(n<128)r.push(n);else if(n<2048)r.push(n>>6|192),r.push(63&n|128);else if(55296==(64512&n)){t++;const s=e.charCodeAt(t);if(t>=e.length||56320!=(64512&s))throw new Error("invalid utf-8 string");const i=65536+((1023&n)<<10)+(1023&s);r.push(i>>18|240),r.push(i>>12&63|128),r.push(i>>6&63|128),r.push(63&i|128)}else r.push(n>>12|224),r.push(n>>6&63|128),r.push(63&n|128)}return Yn(r)}function Zc(e,t){return $c(e,t).map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10&1023),56320+(1023&e)))).join("")}function eh(e){return hs(Xc(e))}const th="hash/5.8.0";function rh(e){e=atob(e);const t=[];for(let r=0;r<e.length;r++)t.push(e.charCodeAt(r));return Yn(t)}function nh(e){e=Yn(e);let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}function sh(e,t){null==t&&(t=1);const r=[],n=r.forEach,s=function(e,t){n.call(e,function(e){t>0&&Array.isArray(e)?s(e,t-1):r.push(e)})};return s(e,t),r}function ih(e){return function(e){let t=0;return()=>e[t++]}(function(e){let t=0;function r(){return e[t++]<<8|e[t++]}let n=r(),s=1,i=[0,1];for(let e=1;e<n;e++)i.push(s+=r());let o=r(),a=t;t+=o;let c=0,h=0;function u(){return 0==c&&(h=h<<8|e[t++],c=8),h>>--c&1}const l=Math.pow(2,31),d=l>>>1,f=d>>1,p=l-1;let m=0;for(let e=0;e<31;e++)m=m<<1|u();let g=[],y=0,w=l;for(;;){let e=Math.floor(((m-y+1)*s-1)/w),t=0,r=n;for(;r-t>1;){let n=t+r>>>1;e<i[n]?r=n:t=n}if(0==t)break;g.push(t);let o=y+Math.floor(w*i[t]/s),a=y+Math.floor(w*i[t+1]/s)-1;for(;0==((o^a)&d);)m=m<<1&p|u(),o=o<<1&p,a=a<<1&p|1;for(;o&~a&f;)m=m&d|m<<1&p>>>1|u(),o=o<<1^d,a=(a^d)<<1|d|1;y=o,w=1+a-o}let v=n-4;return g.map(t=>{switch(t-v){case 3:return v+65792+(e[a++]<<16|e[a++]<<8|e[a++]);case 2:return v+256+(e[a++]<<8|e[a++]);case 1:return v+e[a++];default:return t-1}})}(e))}function oh(e){return 1&e?~e>>1:e>>1}function ah(e,t){let r=Array(e);for(let n=0,s=-1;n<e;n++)r[n]=s+=1+t();return r}function ch(e,t){let r=Array(e);for(let n=0,s=0;n<e;n++)r[n]=s+=oh(t());return r}function hh(e,t){let r=ah(e(),e),n=e(),s=ah(n,e),i=function(e,t){let r=Array(e);for(let n=0;n<e;n++)r[n]=1+t();return r}(n,e);for(let e=0;e<n;e++)for(let t=0;t<i[e];t++)r.push(s[e]+t);return t?r.map(e=>t[e]):r}function uh(e,t,r){let n=Array(e).fill(void 0).map(()=>[]);for(let s=0;s<t;s++)ch(e,r).forEach((e,t)=>n[t].push(e));return n}function lh(e,t){let r=1+t(),n=t(),s=function(e){let t=[];for(;;){let r=e();if(0==r)break;t.push(r)}return t}(t);return sh(uh(s.length,1+e,t).map((e,t)=>{const i=e[0],o=e.slice(1);return Array(s[t]).fill(void 0).map((e,t)=>{let s=t*n;return[i+t*r,o.map(e=>e+s)]})}))}function dh(e,t){return uh(1+t(),1+e,t).map(e=>[e[0],e.slice(1)])}const fh=ih(rh("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA==")),ph=new Set(hh(fh)),mh=new Set(hh(fh)),gh=function(e){let t=[];for(;;){let r=e();if(0==r)break;t.push(lh(r,e))}for(;;){let r=e()-1;if(r<0)break;t.push(dh(r,e))}return function(e){const t={};for(let r=0;r<e.length;r++){const n=e[r];t[n[0]]=n[1]}return t}(sh(t))}(fh),yh=function(e){let t=hh(e).sort((e,t)=>e-t);return function r(){let n=[];for(;;){let s=hh(e,t);if(0==s.length)break;n.push({set:new Set(s),node:r()})}n.sort((e,t)=>t.set.size-e.set.size);let s=e(),i=s%3;s=s/3|0;let o=!!(1&s);return s>>=1,{branches:n,valid:i,fe0f:o,save:1==s,check:2==s}}()}(fh);function wh(e){return function(e,t=Wc.current){return $c(Xc(e,t))}(e)}function vh(e){return e.filter(e=>65039!=e)}function Ah(e){for(let t of e.split(".")){let e=wh(t);try{for(let t=e.lastIndexOf(95)-1;t>=0;t--)if(95!==e[t])throw new Error("underscore only allowed at start");if(e.length>=4&&e.every(e=>e<128)&&45===e[2]&&45===e[3])throw new Error("invalid label extension")}catch(e){throw new Error(`Invalid label "${t}": ${e.message}`)}}return e}function bh(e){return Ah(function(e,t){let r=wh(e).reverse(),n=[];for(;r.length;){let e=Eh(r);if(e){n.push(...t(e));continue}let s=r.pop();if(ph.has(s)){n.push(s);continue}if(mh.has(s))continue;let i=gh[s];if(!i)throw new Error(`Disallowed codepoint: 0x${s.toString(16).toUpperCase()}`);n.push(...i)}return Ah(function(e){return e.normalize("NFC")}(String.fromCodePoint(...n)))}(e,vh))}function Eh(e,t){var r;let n,s,i=yh,o=[],a=e.length;for(;a;){let t=e[--a];if(i=null===(r=i.branches.find(e=>e.set.has(t)))||void 0===r?void 0:r.node,!i)break;if(i.save)s=t;else if(i.check&&t===s)break;o.push(t),i.fe0f&&(o.push(65039),a>0&&65039==e[a-1]&&a--),i.valid&&(n=o.slice(),2==i.valid&&n.splice(1,1),e.length=a)}return n}const _h=new jn(th),Ph=new Uint8Array(32);function Sh(e){if(0===e.length)throw new Error("invalid ENS name; empty component");return e}function Ih(e){const t=Xc(bh(e)),r=[];if(0===e.length)return r;let n=0;for(let e=0;e<t.length;e++){46===t[e]&&(r.push(Sh(t.slice(n,e))),n=e+1)}if(n>=t.length)throw new Error("invalid ENS name; empty component");return r.push(Sh(t.slice(n))),r}function kh(e){"string"!=typeof e&&_h.throwArgumentError("invalid ENS name; not a string","name",e);let t=Ph;const r=Ih(e);for(;r.length;)t=hs(Jn([t,hs(r.pop())]));return es(t)}function Rh(e){return es(Jn(Ih(e).map(e=>{if(e.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const t=new Uint8Array(e.length+1);return t.set(e,1),t[0]=t.length-1,t})))+"00"}Ph.fill(0);const Th="Ethereum Signed Message:\n";const Nh=new jn("rlp/5.8.0");function Oh(e){const t=[];for(;e;)t.unshift(255&e),e>>=8;return t}function Ch(e,t,r){let n=0;for(let s=0;s<r;s++)n=256*n+e[t+s];return n}function xh(e){if(Array.isArray(e)){let t=[];if(e.forEach(function(e){t=t.concat(xh(e))}),t.length<=55)return t.unshift(192+t.length),t;const r=Oh(t.length);return r.unshift(247+r.length),r.concat(t)}Vn(e)||Nh.throwArgumentError("RLP object must be BytesLike","object",e);const t=Array.prototype.slice.call(Yn(e));if(1===t.length&&t[0]<=127)return t;if(t.length<=55)return t.unshift(128+t.length),t;const r=Oh(t.length);return r.unshift(183+r.length),r.concat(t)}function Mh(e){return es(xh(e))}function Uh(e,t,r,n){const s=[];for(;r<t+1+n;){const i=Dh(e,r);s.push(i.result),(r+=i.consumed)>t+1+n&&Nh.throwError("child data too short",jn.errors.BUFFER_OVERRUN,{})}return{consumed:1+n,result:s}}function Dh(e,t){if(0===e.length&&Nh.throwError("data too short",jn.errors.BUFFER_OVERRUN,{}),e[t]>=248){const r=e[t]-247;t+1+r>e.length&&Nh.throwError("data short segment too short",jn.errors.BUFFER_OVERRUN,{});const n=Ch(e,t+1,r);return t+1+r+n>e.length&&Nh.throwError("data long segment too short",jn.errors.BUFFER_OVERRUN,{}),Uh(e,t,t+1+r,r+n)}if(e[t]>=192){const r=e[t]-192;return t+1+r>e.length&&Nh.throwError("data array too short",jn.errors.BUFFER_OVERRUN,{}),Uh(e,t,t+1,r)}if(e[t]>=184){const r=e[t]-183;t+1+r>e.length&&Nh.throwError("data array too short",jn.errors.BUFFER_OVERRUN,{});const n=Ch(e,t+1,r);t+1+r+n>e.length&&Nh.throwError("data array too short",jn.errors.BUFFER_OVERRUN,{});return{consumed:1+r+n,result:es(e.slice(t+1+r,t+1+r+n))}}if(e[t]>=128){const r=e[t]-128;t+1+r>e.length&&Nh.throwError("data too short",jn.errors.BUFFER_OVERRUN,{});return{consumed:1+r,result:es(e.slice(t+1,t+1+r))}}return{consumed:1,result:es(e[t])}}function Lh(e){const t=Yn(e),r=Dh(t,0);return r.consumed!==t.length&&Nh.throwArgumentError("invalid rlp data","data",e),r.result}const Bh=new jn("address/5.8.0");function Fh(e){Xn(e,20)||Bh.throwArgumentError("invalid address","address",e);const t=(e=e.toLowerCase()).substring(2).split(""),r=new Uint8Array(40);for(let e=0;e<40;e++)r[e]=t[e].charCodeAt(0);const n=Yn(hs(r));for(let e=0;e<40;e+=2)n[e>>1]>>4>=8&&(t[e]=t[e].toUpperCase()),(15&n[e>>1])>=8&&(t[e+1]=t[e+1].toUpperCase());return"0x"+t.join("")}const qh={};for(let e=0;e<10;e++)qh[String(e)]=String(e);for(let e=0;e<26;e++)qh[String.fromCharCode(65+e)]=String(10+e);const jh=Math.floor(function(e){return Math.log10?Math.log10(e):Math.log(e)/Math.LN10}(9007199254740991));function Gh(e){let t=null;if("string"!=typeof e&&Bh.throwArgumentError("invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/))"0x"!==e.substring(0,2)&&(e="0x"+e),t=Fh(e),e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&t!==e&&Bh.throwArgumentError("bad address checksum","address",e);else if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(e.substring(2,4)!==function(e){let t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map(e=>qh[e]).join("");for(;t.length>=jh;){let e=t.substring(0,jh);t=parseInt(e,10)%97+t.substring(e.length)}let r=String(98-parseInt(t,10)%97);for(;r.length<2;)r="0"+r;return r}(e)&&Bh.throwArgumentError("bad icap checksum","address",e),r=e.substring(4),t=new Cc(r,36).toString(16);t.length<40;)t="0"+t;t=Fh("0x"+t)}else Bh.throwArgumentError("invalid address","address",e);var r;return t}var Hh=function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})};const zh=new jn("properties/5.8.0");function Vh(e,t,r){Object.defineProperty(e,t,{enumerable:!0,value:r,writable:!1})}function Kh(e,t){for(let r=0;r<32;r++){if(e[t])return e[t];if(!e.prototype||"object"!=typeof e.prototype)break;e=Object.getPrototypeOf(e.prototype).constructor}return null}function Wh(e){return Hh(this,void 0,void 0,function*(){const t=Object.keys(e).map(t=>{const r=e[t];return Promise.resolve(r).then(e=>({key:t,value:e}))});return(yield Promise.all(t)).reduce((e,t)=>(e[t.key]=t.value,e),{})})}function Yh(e,t){e&&"object"==typeof e||zh.throwArgumentError("invalid object","object",e),Object.keys(e).forEach(r=>{t[r]||zh.throwArgumentError("invalid object key - "+r,"transaction:"+r,e)})}function Jh(e){const t={};for(const r in e)t[r]=e[r];return t}const Qh={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function $h(e){if(null==e||Qh[typeof e])return!0;if(Array.isArray(e)||"object"==typeof e){if(!Object.isFrozen(e))return!1;const t=Object.keys(e);for(let r=0;r<t.length;r++){let n=null;try{n=e[t[r]]}catch(e){continue}if(!$h(n))return!1}return!0}return zh.throwArgumentError("Cannot deepCopy "+typeof e,"object",e)}function Xh(e){if($h(e))return e;if(Array.isArray(e))return Object.freeze(e.map(e=>Zh(e)));if("object"==typeof e){const t={};for(const r in e){const n=e[r];void 0!==n&&Vh(t,r,Zh(n))}return t}return zh.throwArgumentError("Cannot deepCopy "+typeof e,"object",e)}function Zh(e){return Xh(e)}class eu{constructor(e){for(const t in e)this[t]=Zh(e[t])}}var tu=function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})};const ru=new jn(th),nu=new Uint8Array(32);nu.fill(0);const su=Lc.from(-1),iu=Lc.from(0),ou=Lc.from(1),au=Lc.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const cu=os(ou.toHexString(),32),hu=os(iu.toHexString(),32),uu={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},lu=["name","version","chainId","verifyingContract","salt"];function du(e){return function(t){return"string"!=typeof t&&ru.throwArgumentError(`invalid domain value for ${JSON.stringify(e)}`,`domain.${e}`,t),t}}const fu={name:du("name"),version:du("version"),chainId:function(e){try{return Lc.from(e).toString()}catch(e){}return ru.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",e)},verifyingContract:function(e){try{return Gh(e).toLowerCase()}catch(e){}return ru.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",e)},salt:function(e){try{const t=Yn(e);if(32!==t.length)throw new Error("bad length");return es(t)}catch(e){}return ru.throwArgumentError('invalid domain value "salt"',"domain.salt",e)}};function pu(e){{const t=e.match(/^(u?)int(\d*)$/);if(t){const r=""===t[1],n=parseInt(t[2]||"256");(n%8!=0||n>256||t[2]&&t[2]!==String(n))&&ru.throwArgumentError("invalid numeric width","type",e);const s=au.mask(r?n-1:n),i=r?s.add(ou).mul(su):iu;return function(t){const r=Lc.from(t);return(r.lt(i)||r.gt(s))&&ru.throwArgumentError(`value out-of-bounds for ${e}`,"value",t),os(r.toTwos(256).toHexString(),32)}}}{const t=e.match(/^bytes(\d+)$/);if(t){const r=parseInt(t[1]);return(0===r||r>32||t[1]!==String(r))&&ru.throwArgumentError("invalid bytes width","type",e),function(t){return Yn(t).length!==r&&ru.throwArgumentError(`invalid length for ${e}`,"value",t),function(e){const t=Yn(e),r=t.length%32;return r?ns([t,nu.slice(r)]):es(t)}(t)}}}switch(e){case"address":return function(e){return os(Gh(e),32)};case"bool":return function(e){return e?cu:hu};case"bytes":return function(e){return hs(e)};case"string":return function(e){return eh(e)}}return null}function mu(e,t){return`${e}(${t.map(({name:e,type:t})=>t+" "+e).join(",")})`}class gu{constructor(e){Vh(this,"types",Object.freeze(Zh(e))),Vh(this,"_encoderCache",{}),Vh(this,"_types",{});const t={},r={},n={};Object.keys(e).forEach(e=>{t[e]={},r[e]=[],n[e]={}});for(const n in e){const s={};e[n].forEach(i=>{s[i.name]&&ru.throwArgumentError(`duplicate variable name ${JSON.stringify(i.name)} in ${JSON.stringify(n)}`,"types",e),s[i.name]=!0;const o=i.type.match(/^([^\x5b]*)(\x5b|$)/)[1];o===n&&ru.throwArgumentError(`circular type reference to ${JSON.stringify(o)}`,"types",e);pu(o)||(r[o]||ru.throwArgumentError(`unknown type ${JSON.stringify(o)}`,"types",e),r[o].push(n),t[n][o]=!0)})}const s=Object.keys(r).filter(e=>0===r[e].length);0===s.length?ru.throwArgumentError("missing primary type","types",e):s.length>1&&ru.throwArgumentError(`ambiguous primary types or unused types: ${s.map(e=>JSON.stringify(e)).join(", ")}`,"types",e),Vh(this,"primaryType",s[0]),function s(i,o){o[i]&&ru.throwArgumentError(`circular type reference to ${JSON.stringify(i)}`,"types",e),o[i]=!0,Object.keys(t[i]).forEach(e=>{r[e]&&(s(e,o),Object.keys(o).forEach(t=>{n[t][e]=!0}))}),delete o[i]}(this.primaryType,{});for(const t in n){const r=Object.keys(n[t]);r.sort(),this._types[t]=mu(t,e[t])+r.map(t=>mu(t,e[t])).join("")}}getEncoder(e){let t=this._encoderCache[e];return t||(t=this._encoderCache[e]=this._getEncoder(e)),t}_getEncoder(e){{const t=pu(e);if(t)return t}const t=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(t){const e=t[1],r=this.getEncoder(e),n=parseInt(t[3]);return t=>{n>=0&&t.length!==n&&ru.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",t);let s=t.map(r);return this._types[e]&&(s=s.map(hs)),hs(ns(s))}}const r=this.types[e];if(r){const t=eh(this._types[e]);return e=>{const n=r.map(({name:t,type:r})=>{const n=this.getEncoder(r)(e[t]);return this._types[r]?hs(n):n});return n.unshift(t),ns(n)}}return ru.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const t=this._types[e];return t||ru.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return hs(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,r){if(pu(e))return r(e,t);const n=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(n){const e=n[1],s=parseInt(n[3]);return s>=0&&t.length!==s&&ru.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",t),t.map(t=>this._visit(e,t,r))}const s=this.types[e];return s?s.reduce((e,{name:n,type:s})=>(e[n]=this._visit(s,t[n],r),e),{}):ru.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new gu(e)}static getPrimaryType(e){return gu.from(e).primaryType}static hashStruct(e,t,r){return gu.from(t).hashStruct(e,r)}static hashDomain(e){const t=[];for(const r in e){const n=uu[r];n||ru.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),t.push({name:r,type:n})}return t.sort((e,t)=>lu.indexOf(e.name)-lu.indexOf(t.name)),gu.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,r){return ns(["0x1901",gu.hashDomain(e),gu.from(t).hash(r)])}static hash(e,t,r){return hs(gu.encode(e,t,r))}static resolveNames(e,t,r,n){return tu(this,void 0,void 0,function*(){e=Jh(e);const s={};e.verifyingContract&&!Xn(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const i=gu.from(t);i.visit(r,(e,t)=>("address"!==e||Xn(t,20)||(s[t]="0x"),t));for(const e in s)s[e]=yield n(e);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),r=i.visit(r,(e,t)=>"address"===e&&s[t]?s[t]:t),{domain:e,value:r}})}static getPayload(e,t,r){gu.hashDomain(e);const n={},s=[];lu.forEach(t=>{const r=e[t];null!=r&&(n[t]=fu[t](r),s.push({name:t,type:uu[t]}))});const i=gu.from(t),o=Jh(t);return o.EIP712Domain?ru.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",t):o.EIP712Domain=s,i.encode(r),{types:o,domain:n,primaryType:i.primaryType,message:i.visit(r,(e,t)=>{if(e.match(/^bytes(\d*)/))return es(Yn(t));if(e.match(/^u?int/))return Lc.from(t).toString();switch(e){case"address":return t.toLowerCase();case"bool":return!!t;case"string":return"string"!=typeof t&&ru.throwArgumentError("invalid string","value",t),t}return ru.throwArgumentError("unsupported type","type",e)})}}}var yu=Object.freeze({__proto__:null,_TypedDataEncoder:gu,dnsEncode:Rh,hashMessage:function(e){return"string"==typeof e&&(e=Xc(e)),hs(Jn([Xc(Th),Xc(String(e.length)),e]))},id:eh,messagePrefix:Th,namehash:kh});const wu="abi/5.8.0",vu=new jn(wu),Au={};let bu={calldata:!0,memory:!0,storage:!0},Eu={calldata:!0,memory:!0};function _u(e,t){if("bytes"===e||"string"===e){if(bu[t])return!0}else if("address"===e){if("payable"===t)return!0}else if((e.indexOf("[")>=0||"tuple"===e)&&Eu[t])return!0;return(bu[t]||"payable"===t)&&vu.throwArgumentError("invalid modifier","name",t),!1}function Pu(e,t){for(let r in t)Vh(e,r,t[r])}const Su=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),Iu=new RegExp(/^(.*)\[([0-9]*)\]$/);class ku{constructor(e,t){e!==Au&&vu.throwError("use fromString",jn.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),Pu(this,t);let r=this.type.match(Iu);Pu(this,r?{arrayLength:parseInt(r[2]||"-1"),arrayChildren:ku.fromObject({type:r[1],components:this.components}),baseType:"array"}:{arrayLength:null,arrayChildren:null,baseType:null!=this.components?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(e){if(e||(e=Su.sighash),Su[e]||vu.throwArgumentError("invalid format type","format",e),e===Su.json){let t={type:"tuple"===this.baseType?"tuple":this.type,name:this.name||void 0};return"boolean"==typeof this.indexed&&(t.indexed=this.indexed),this.components&&(t.components=this.components.map(t=>JSON.parse(t.format(e)))),JSON.stringify(t)}let t="";return"array"===this.baseType?(t+=this.arrayChildren.format(e),t+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):"tuple"===this.baseType?(e!==Su.sighash&&(t+=this.type),t+="("+this.components.map(t=>t.format(e)).join(e===Su.full?", ":",")+")"):t+=this.type,e!==Su.sighash&&(!0===this.indexed&&(t+=" indexed"),e===Su.full&&this.name&&(t+=" "+this.name)),t}static from(e,t){return"string"==typeof e?ku.fromString(e,t):ku.fromObject(e)}static fromObject(e){return ku.isParamType(e)?e:new ku(Au,{name:e.name||null,type:Ru(e.type),indexed:null==e.indexed?null:!!e.indexed,components:e.components?e.components.map(ku.fromObject):null})}static fromString(e,t){return r=function(e,t){let r=e;function n(t){vu.throwArgumentError(`unexpected character at position ${t}`,"param",e)}function s(e){let r={type:"",name:"",parent:e,state:{allowType:!0}};return t&&(r.indexed=!1),r}e=e.replace(/\s/g," ");let i={type:"",name:"",state:{allowType:!0}},o=i;for(let r=0;r<e.length;r++){let i=e[r];switch(i){case"(":o.state.allowType&&""===o.type?o.type="tuple":o.state.allowParams||n(r),o.state.allowType=!1,o.type=Ru(o.type),o.components=[s(o)],o=o.components[0];break;case")":delete o.state,"indexed"===o.name&&(t||n(r),o.indexed=!0,o.name=""),_u(o.type,o.name)&&(o.name=""),o.type=Ru(o.type);let e=o;o=o.parent,o||n(r),delete e.parent,o.state.allowParams=!1,o.state.allowName=!0,o.state.allowArray=!0;break;case",":delete o.state,"indexed"===o.name&&(t||n(r),o.indexed=!0,o.name=""),_u(o.type,o.name)&&(o.name=""),o.type=Ru(o.type);let a=s(o.parent);o.parent.components.push(a),delete o.parent,o=a;break;case" ":o.state.allowType&&""!==o.type&&(o.type=Ru(o.type),delete o.state.allowType,o.state.allowName=!0,o.state.allowParams=!0),o.state.allowName&&""!==o.name&&("indexed"===o.name?(t||n(r),o.indexed&&n(r),o.indexed=!0,o.name=""):_u(o.type,o.name)?o.name="":o.state.allowName=!1);break;case"[":o.state.allowArray||n(r),o.type+=i,o.state.allowArray=!1,o.state.allowName=!1,o.state.readArray=!0;break;case"]":o.state.readArray||n(r),o.type+=i,o.state.readArray=!1,o.state.allowArray=!0,o.state.allowName=!0;break;default:o.state.allowType?(o.type+=i,o.state.allowParams=!0,o.state.allowArray=!0):o.state.allowName?(o.name+=i,delete o.state.allowArray):o.state.readArray?o.type+=i:n(r)}}return o.parent&&vu.throwArgumentError("unexpected eof","param",e),delete i.state,"indexed"===o.name?(t||n(r.length-7),o.indexed&&n(r.length-7),o.indexed=!0,o.name=""):_u(o.type,o.name)&&(o.name=""),i.type=Ru(i.type),i}(e,!!t),ku.fromObject({name:r.name,type:r.type,indexed:r.indexed,components:r.components});var r}static isParamType(e){return!(null==e||!e._isParamType)}}function Ru(e){return e.match(/^uint($|[^1-9])/)?e="uint256"+e.substring(4):e.match(/^int($|[^1-9])/)&&(e="int256"+e.substring(3)),e}const Tu=new jn(wu);class Nu{constructor(e,t,r,n){this.name=e,this.type=t,this.localName=r,this.dynamic=n}_throwError(e,t){Tu.throwArgumentError(e,this.localName,t)}}class Ou{constructor(e){Vh(this,"wordSize",e||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(e)}get data(){return ns(this._data)}get length(){return this._dataLength}_writeData(e){return this._data.push(e),this._dataLength+=e.length,e.length}appendWriter(e){return this._writeData(Jn(e._data))}writeBytes(e){let t=Yn(e);const r=t.length%this.wordSize;return r&&(t=Jn([t,this._padding.slice(r)])),this._writeData(t)}_getValue(e){let t=Yn(Lc.from(e));return t.length>this.wordSize&&Tu.throwError("value out-of-bounds",jn.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:t.length}),t.length%this.wordSize&&(t=Jn([this._padding.slice(t.length%this.wordSize),t])),t}writeValue(e){return this._writeData(this._getValue(e))}writeUpdatableValue(){const e=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,t=>{this._data[e]=this._getValue(t)}}}class Cu{constructor(e,t,r,n){Vh(this,"_data",Yn(e)),Vh(this,"wordSize",t||32),Vh(this,"_coerceFunc",r),Vh(this,"allowLoose",n),this._offset=0}get data(){return es(this._data)}get consumed(){return this._offset}static coerce(e,t){let r=e.match("^u?int([0-9]+)$");return r&&parseInt(r[1])<=48&&(t=t.toNumber()),t}coerce(e,t){return this._coerceFunc?this._coerceFunc(e,t):Cu.coerce(e,t)}_peekBytes(e,t,r){let n=Math.ceil(t/this.wordSize)*this.wordSize;return this._offset+n>this._data.length&&(this.allowLoose&&r&&this._offset+t<=this._data.length?n=t:Tu.throwError("data out-of-bounds",jn.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+n})),this._data.slice(this._offset,this._offset+n)}subReader(e){return new Cu(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(e,t){let r=this._peekBytes(0,e,!!t);return this._offset+=r.length,r.slice(0,e)}readValue(){return Lc.from(this.readBytes(this.wordSize))}}class xu extends Nu{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){try{t=Gh(t)}catch(e){this._throwError(e.message,t)}return e.writeValue(t)}decode(e){return Gh(os(e.readValue().toHexString(),20))}}class Mu extends Nu{constructor(e){super(e.name,e.type,void 0,e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}const Uu=new jn(wu);function Du(e,t,r){let n=null;if(Array.isArray(r))n=r;else if(r&&"object"==typeof r){let e={};n=t.map(t=>{const n=t.localName;return n||Uu.throwError("cannot encode object for signature with missing names",jn.errors.INVALID_ARGUMENT,{argument:"values",coder:t,value:r}),e[n]&&Uu.throwError("cannot encode object for signature with duplicate names",jn.errors.INVALID_ARGUMENT,{argument:"values",coder:t,value:r}),e[n]=!0,r[n]})}else Uu.throwArgumentError("invalid tuple value","tuple",r);t.length!==n.length&&Uu.throwArgumentError("types/value length mismatch","tuple",r);let s=new Ou(e.wordSize),i=new Ou(e.wordSize),o=[];t.forEach((e,t)=>{let r=n[t];if(e.dynamic){let t=i.length;e.encode(i,r);let n=s.writeUpdatableValue();o.push(e=>{n(e+t)})}else e.encode(s,r)}),o.forEach(e=>{e(s.length)});let a=e.appendWriter(s);return a+=e.appendWriter(i),a}function Lu(e,t){let r=[],n=e.subReader(0);t.forEach(t=>{let s=null;if(t.dynamic){let r=e.readValue(),i=n.subReader(r.toNumber());try{s=t.decode(i)}catch(e){if(e.code===jn.errors.BUFFER_OVERRUN)throw e;s=e,s.baseType=t.name,s.name=t.localName,s.type=t.type}}else try{s=t.decode(e)}catch(e){if(e.code===jn.errors.BUFFER_OVERRUN)throw e;s=e,s.baseType=t.name,s.name=t.localName,s.type=t.type}null!=s&&r.push(s)});const s=t.reduce((e,t)=>{const r=t.localName;return r&&(e[r]||(e[r]=0),e[r]++),e},{});t.forEach((e,t)=>{let n=e.localName;if(!n||1!==s[n])return;if("length"===n&&(n="_length"),null!=r[n])return;const i=r[t];i instanceof Error?Object.defineProperty(r,n,{enumerable:!0,get:()=>{throw i}}):r[n]=i});for(let e=0;e<r.length;e++){const t=r[e];t instanceof Error&&Object.defineProperty(r,e,{enumerable:!0,get:()=>{throw t}})}return Object.freeze(r)}class Bu extends Nu{constructor(e,t,r){super("array",e.type+"["+(t>=0?t:"")+"]",r,-1===t||e.dynamic),this.coder=e,this.length=t}defaultValue(){const e=this.coder.defaultValue(),t=[];for(let r=0;r<this.length;r++)t.push(e);return t}encode(e,t){Array.isArray(t)||this._throwError("expected array value",t);let r=this.length;-1===r&&(r=t.length,e.writeValue(t.length)),Uu.checkArgumentCount(t.length,r,"coder array"+(this.localName?" "+this.localName:""));let n=[];for(let e=0;e<t.length;e++)n.push(this.coder);return Du(e,n,t)}decode(e){let t=this.length;-1===t&&(t=e.readValue().toNumber(),32*t>e._data.length&&Uu.throwError("insufficient data length",jn.errors.BUFFER_OVERRUN,{length:e._data.length,count:t}));let r=[];for(let e=0;e<t;e++)r.push(new Mu(this.coder));return e.coerce(this.name,Lu(e,r))}}class Fu extends Nu{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){return e.writeValue(t?1:0)}decode(e){return e.coerce(this.type,!e.readValue().isZero())}}class qu extends Nu{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=Yn(t);let r=e.writeValue(t.length);return r+=e.writeBytes(t),r}decode(e){return e.readBytes(e.readValue().toNumber(),!0)}}class ju extends qu{constructor(e){super("bytes",e)}decode(e){return e.coerce(this.name,es(super.decode(e)))}}class Gu extends Nu{constructor(e,t){let r="bytes"+String(e);super(r,r,t,!1),this.size=e}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(e,t){let r=Yn(t);return r.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(r)}decode(e){return e.coerce(this.name,es(e.readBytes(this.size)))}}class Hu extends Nu{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return null!=t&&this._throwError("not null",t),e.writeBytes([])}decode(e){return e.readBytes(0),e.coerce(this.name,null)}}class zu extends Nu{constructor(e,t,r){const n=(t?"int":"uint")+8*e;super(n,n,r,!1),this.size=e,this.signed=t}defaultValue(){return 0}encode(e,t){let r=Lc.from(t),n=Vc.mask(8*e.wordSize);if(this.signed){let e=n.mask(8*this.size-1);(r.gt(e)||r.lt(e.add(zc).mul(Gc)))&&this._throwError("value out-of-bounds",t)}else(r.lt(Hc)||r.gt(n.mask(8*this.size)))&&this._throwError("value out-of-bounds",t);return r=r.toTwos(8*this.size).mask(8*this.size),this.signed&&(r=r.fromTwos(8*this.size).toTwos(8*e.wordSize)),e.writeValue(r)}decode(e){let t=e.readValue().mask(8*this.size);return this.signed&&(t=t.fromTwos(8*this.size)),e.coerce(this.name,t)}}class Vu extends qu{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,Xc(t))}decode(e){return Zc(super.decode(e))}}class Ku extends Nu{constructor(e,t){let r=!1;const n=[];e.forEach(e=>{e.dynamic&&(r=!0),n.push(e.type)});super("tuple","tuple("+n.join(",")+")",t,r),this.coders=e}defaultValue(){const e=[];this.coders.forEach(t=>{e.push(t.defaultValue())});const t=this.coders.reduce((e,t)=>{const r=t.localName;return r&&(e[r]||(e[r]=0),e[r]++),e},{});return this.coders.forEach((r,n)=>{let s=r.localName;s&&1===t[s]&&("length"===s&&(s="_length"),null==e[s]&&(e[s]=e[n]))}),Object.freeze(e)}encode(e,t){return Du(e,this.coders,t)}decode(e){return e.coerce(this.name,Lu(e,this.coders))}}const Wu=new jn(wu),Yu=new RegExp(/^bytes([0-9]*)$/),Ju=new RegExp(/^(u?int)([0-9]*)$/);class Qu{constructor(e){Vh(this,"coerceFunc",e||null)}_getCoder(e){switch(e.baseType){case"address":return new xu(e.name);case"bool":return new Fu(e.name);case"string":return new Vu(e.name);case"bytes":return new ju(e.name);case"array":return new Bu(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new Ku((e.components||[]).map(e=>this._getCoder(e)),e.name);case"":return new Hu(e.name)}let t=e.type.match(Ju);if(t){let r=parseInt(t[2]||"256");return(0===r||r>256||r%8!=0)&&Wu.throwArgumentError("invalid "+t[1]+" bit length","param",e),new zu(r/8,"int"===t[1],e.name)}if(t=e.type.match(Yu),t){let r=parseInt(t[1]);return(0===r||r>32)&&Wu.throwArgumentError("invalid bytes length","param",e),new Gu(r,e.name)}return Wu.throwArgumentError("invalid type","type",e.type)}_getWordSize(){return 32}_getReader(e,t){return new Cu(e,this._getWordSize(),this.coerceFunc,t)}_getWriter(){return new Ou(this._getWordSize())}getDefaultValue(e){const t=e.map(e=>this._getCoder(ku.from(e)));return new Ku(t,"_").defaultValue()}encode(e,t){e.length!==t.length&&Wu.throwError("types/values length mismatch",jn.errors.INVALID_ARGUMENT,{count:{types:e.length,values:t.length},value:{types:e,values:t}});const r=e.map(e=>this._getCoder(ku.from(e))),n=new Ku(r,"_"),s=this._getWriter();return n.encode(s,t),s.data}decode(e,t,r){const n=e.map(e=>this._getCoder(ku.from(e)));return new Ku(n,"_").decode(this._getReader(Yn(t),r))}}const $u=new Qu;var Xu=Object.freeze({__proto__:null,AbiCoder:Qu,FormatTypes:Su,ParamType:ku,defaultAbiCoder:$u});var Zu=function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})};const el=new jn("abstract-provider/5.8.0");class tl extends eu{static isForkEvent(e){return!(!e||!e._isForkEvent)}}class rl{constructor(){el.checkAbstract(new.target,rl),Vh(this,"_isProvider",!0)}getFeeData(){return Zu(this,void 0,void 0,function*(){const{block:e,gasPrice:t}=yield Wh({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(e=>null)});let r=null,n=null,s=null;return e&&e.baseFeePerGas&&(r=e.baseFeePerGas,s=Lc.from("1500000000"),n=e.baseFeePerGas.mul(2).add(s)),{lastBaseFeePerGas:r,maxFeePerGas:n,maxPriorityFeePerGas:s,gasPrice:t}})}addListener(e,t){return this.on(e,t)}removeListener(e,t){return this.off(e,t)}static isProvider(e){return!(!e||!e._isProvider)}}const nl=new jn("networks/5.8.0");function sl(e){const t=function(t,r){null==r&&(r={});const n=[];if(t.InfuraProvider&&"-"!==r.infura)try{n.push(new t.InfuraProvider(e,r.infura))}catch(e){}if(t.EtherscanProvider&&"-"!==r.etherscan)try{n.push(new t.EtherscanProvider(e,r.etherscan))}catch(e){}if(t.AlchemyProvider&&"-"!==r.alchemy)try{n.push(new t.AlchemyProvider(e,r.alchemy))}catch(e){}if(t.PocketProvider&&"-"!==r.pocket){const s=["goerli","ropsten","rinkeby","sepolia"];try{const i=new t.PocketProvider(e,r.pocket);i.network&&-1===s.indexOf(i.network.name)&&n.push(i)}catch(e){}}if(t.CloudflareProvider&&"-"!==r.cloudflare)try{n.push(new t.CloudflareProvider(e))}catch(e){}if(t.AnkrProvider&&"-"!==r.ankr)try{const s=["ropsten"],i=new t.AnkrProvider(e,r.ankr);i.network&&-1===s.indexOf(i.network.name)&&n.push(i)}catch(e){}if(t.QuickNodeProvider&&"-"!==r.quicknode)try{n.push(new t.QuickNodeProvider(e,r.quicknode))}catch(e){}if(0===n.length)return null;if(t.FallbackProvider){let s=1;return null!=r.quorum?s=r.quorum:"homestead"===e&&(s=2),new t.FallbackProvider(n,s)}return n[0]};return t.renetwork=function(e){return sl(e)},t}function il(e,t){const r=function(r,n){return r.JsonRpcProvider?new r.JsonRpcProvider(e,t):null};return r.renetwork=function(t){return il(e,t)},r}const ol={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:sl("homestead")},al={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:sl("ropsten")},cl={chainId:63,name:"classicMordor",_defaultProvider:il("https://www.ethercluster.com/mordor","classicMordor")},hl={unspecified:{chainId:0,name:"unspecified"},homestead:ol,mainnet:ol,morden:{chainId:2,name:"morden"},ropsten:al,testnet:al,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:sl("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:sl("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:sl("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"sepolia",_defaultProvider:sl("sepolia")},holesky:{chainId:17e3,name:"holesky",_defaultProvider:sl("holesky")},classic:{chainId:61,name:"classic",_defaultProvider:il("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:cl,classicTestnet:cl,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:il("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:sl("matic")},maticmum:{chainId:80001,name:"maticmum",_defaultProvider:sl("maticmum")},optimism:{chainId:10,name:"optimism",_defaultProvider:sl("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},"optimism-sepolia":{chainId:11155420,name:"optimism-sepolia"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},"arbitrum-sepolia":{chainId:421614,name:"arbitrum-sepolia"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function ul(e){if(null==e)return null;if("number"==typeof e){for(const t in hl){const r=hl[t];if(r.chainId===e)return{name:r.name,chainId:r.chainId,ensAddress:r.ensAddress||null,_defaultProvider:r._defaultProvider||null}}return{chainId:e,name:"unknown"}}if("string"==typeof e){const t=hl[e];return null==t?null:{name:t.name,chainId:t.chainId,ensAddress:t.ensAddress,_defaultProvider:t._defaultProvider||null}}const t=hl[e.name];if(!t)return"number"!=typeof e.chainId&&nl.throwArgumentError("invalid network chainId","network",e),e;0!==e.chainId&&e.chainId!==t.chainId&&nl.throwArgumentError("network chainId mismatch","network",e);let r=e._defaultProvider||null;var n;return null==r&&t._defaultProvider&&(r=(n=t._defaultProvider)&&"function"==typeof n.renetwork?t._defaultProvider.renetwork(e):t._defaultProvider),{name:e.name,chainId:t.chainId,ensAddress:e.ensAddress||t.ensAddress||null,_defaultProvider:r}}class ll{constructor(e){Vh(this,"alphabet",e),Vh(this,"base",e.length),Vh(this,"_alphabetMap",{}),Vh(this,"_leader",e.charAt(0));for(let t=0;t<e.length;t++)this._alphabetMap[e.charAt(t)]=t}encode(e){let t=Yn(e);if(0===t.length)return"";let r=[0];for(let e=0;e<t.length;++e){let n=t[e];for(let e=0;e<r.length;++e)n+=r[e]<<8,r[e]=n%this.base,n=n/this.base|0;for(;n>0;)r.push(n%this.base),n=n/this.base|0}let n="";for(let e=0;0===t[e]&&e<t.length-1;++e)n+=this._leader;for(let e=r.length-1;e>=0;--e)n+=this.alphabet[r[e]];return n}decode(e){if("string"!=typeof e)throw new TypeError("Expected String");let t=[];if(0===e.length)return new Uint8Array(t);t.push(0);for(let r=0;r<e.length;r++){let n=this._alphabetMap[e[r]];if(void 0===n)throw new Error("Non-base"+this.base+" character");let s=n;for(let e=0;e<t.length;++e)s+=t[e]*this.base,t[e]=255&s,s>>=8;for(;s>0;)t.push(255&s),s>>=8}for(let r=0;e[r]===this._leader&&r<e.length-1;++r)t.push(0);return Yn(new Uint8Array(t.reverse()))}}new ll("abcdefghijklmnopqrstuvwxyz234567");const dl=new ll("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var fl={},pl={},ml=gl;function gl(e,t){if(!e)throw new Error(t||"Assertion failed")}gl.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var yl={exports:{}};"function"==typeof Object.create?yl.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:yl.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}};var wl=yl.exports,vl=ml,Al=wl;function bl(e,t){return 55296==(64512&e.charCodeAt(t))&&(!(t<0||t+1>=e.length)&&56320==(64512&e.charCodeAt(t+1)))}function El(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function _l(e){return 1===e.length?"0"+e:e}function Pl(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}pl.inherits=Al,pl.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"==typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),s=0;s<e.length;s+=2)r.push(parseInt(e[s]+e[s+1],16))}else for(var n=0,s=0;s<e.length;s++){var i=e.charCodeAt(s);i<128?r[n++]=i:i<2048?(r[n++]=i>>6|192,r[n++]=63&i|128):bl(e,s)?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++s)),r[n++]=i>>18|240,r[n++]=i>>12&63|128,r[n++]=i>>6&63|128,r[n++]=63&i|128):(r[n++]=i>>12|224,r[n++]=i>>6&63|128,r[n++]=63&i|128)}else for(s=0;s<e.length;s++)r[s]=0|e[s];return r},pl.toHex=function(e){for(var t="",r=0;r<e.length;r++)t+=_l(e[r].toString(16));return t},pl.htonl=El,pl.toHex32=function(e,t){for(var r="",n=0;n<e.length;n++){var s=e[n];"little"===t&&(s=El(s)),r+=Pl(s.toString(16))}return r},pl.zero2=_l,pl.zero8=Pl,pl.join32=function(e,t,r,n){var s=r-t;vl(s%4==0);for(var i=new Array(s/4),o=0,a=t;o<i.length;o++,a+=4){var c;c="big"===n?e[a]<<24|e[a+1]<<16|e[a+2]<<8|e[a+3]:e[a+3]<<24|e[a+2]<<16|e[a+1]<<8|e[a],i[o]=c>>>0}return i},pl.split32=function(e,t){for(var r=new Array(4*e.length),n=0,s=0;n<e.length;n++,s+=4){var i=e[n];"big"===t?(r[s]=i>>>24,r[s+1]=i>>>16&255,r[s+2]=i>>>8&255,r[s+3]=255&i):(r[s+3]=i>>>24,r[s+2]=i>>>16&255,r[s+1]=i>>>8&255,r[s]=255&i)}return r},pl.rotr32=function(e,t){return e>>>t|e<<32-t},pl.rotl32=function(e,t){return e<<t|e>>>32-t},pl.sum32=function(e,t){return e+t>>>0},pl.sum32_3=function(e,t,r){return e+t+r>>>0},pl.sum32_4=function(e,t,r,n){return e+t+r+n>>>0},pl.sum32_5=function(e,t,r,n,s){return e+t+r+n+s>>>0},pl.sum64=function(e,t,r,n){var s=e[t],i=n+e[t+1]>>>0,o=(i<n?1:0)+r+s;e[t]=o>>>0,e[t+1]=i},pl.sum64_hi=function(e,t,r,n){return(t+n>>>0<t?1:0)+e+r>>>0},pl.sum64_lo=function(e,t,r,n){return t+n>>>0},pl.sum64_4_hi=function(e,t,r,n,s,i,o,a){var c=0,h=t;return c+=(h=h+n>>>0)<t?1:0,c+=(h=h+i>>>0)<i?1:0,e+r+s+o+(c+=(h=h+a>>>0)<a?1:0)>>>0},pl.sum64_4_lo=function(e,t,r,n,s,i,o,a){return t+n+i+a>>>0},pl.sum64_5_hi=function(e,t,r,n,s,i,o,a,c,h){var u=0,l=t;return u+=(l=l+n>>>0)<t?1:0,u+=(l=l+i>>>0)<i?1:0,u+=(l=l+a>>>0)<a?1:0,e+r+s+o+c+(u+=(l=l+h>>>0)<h?1:0)>>>0},pl.sum64_5_lo=function(e,t,r,n,s,i,o,a,c,h){return t+n+i+a+h>>>0},pl.rotr64_hi=function(e,t,r){return(t<<32-r|e>>>r)>>>0},pl.rotr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0},pl.shr64_hi=function(e,t,r){return e>>>r},pl.shr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0};var Sl={},Il=pl,kl=ml;function Rl(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}Sl.BlockHash=Rl,Rl.prototype.update=function(e,t){if(e=Il.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var r=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-r,e.length),0===this.pending.length&&(this.pending=null),e=Il.join32(e,0,e.length-r,this.endian);for(var n=0;n<e.length;n+=this._delta32)this._update(e,n,n+this._delta32)}return this},Rl.prototype.digest=function(e){return this.update(this._pad()),kl(null===this.pending),this._digest(e)},Rl.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,n=new Array(r+this.padLength);n[0]=128;for(var s=1;s<r;s++)n[s]=0;if(e<<=3,"big"===this.endian){for(var i=8;i<this.padLength;i++)n[s++]=0;n[s++]=0,n[s++]=0,n[s++]=0,n[s++]=0,n[s++]=e>>>24&255,n[s++]=e>>>16&255,n[s++]=e>>>8&255,n[s++]=255&e}else for(n[s++]=255&e,n[s++]=e>>>8&255,n[s++]=e>>>16&255,n[s++]=e>>>24&255,n[s++]=0,n[s++]=0,n[s++]=0,n[s++]=0,i=8;i<this.padLength;i++)n[s++]=0;return n};var Tl={},Nl={},Ol=pl.rotr32;function Cl(e,t,r){return e&t^~e&r}function xl(e,t,r){return e&t^e&r^t&r}function Ml(e,t,r){return e^t^r}Nl.ft_1=function(e,t,r,n){return 0===e?Cl(t,r,n):1===e||3===e?Ml(t,r,n):2===e?xl(t,r,n):void 0},Nl.ch32=Cl,Nl.maj32=xl,Nl.p32=Ml,Nl.s0_256=function(e){return Ol(e,2)^Ol(e,13)^Ol(e,22)},Nl.s1_256=function(e){return Ol(e,6)^Ol(e,11)^Ol(e,25)},Nl.g0_256=function(e){return Ol(e,7)^Ol(e,18)^e>>>3},Nl.g1_256=function(e){return Ol(e,17)^Ol(e,19)^e>>>10};var Ul=pl,Dl=Sl,Ll=Nl,Bl=Ul.rotl32,Fl=Ul.sum32,ql=Ul.sum32_5,jl=Ll.ft_1,Gl=Dl.BlockHash,Hl=[1518500249,1859775393,2400959708,3395469782];function zl(){if(!(this instanceof zl))return new zl;Gl.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}Ul.inherits(zl,Gl);var Vl=zl;zl.blockSize=512,zl.outSize=160,zl.hmacStrength=80,zl.padLength=64,zl.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=Bl(r[n-3]^r[n-8]^r[n-14]^r[n-16],1);var s=this.h[0],i=this.h[1],o=this.h[2],a=this.h[3],c=this.h[4];for(n=0;n<r.length;n++){var h=~~(n/20),u=ql(Bl(s,5),jl(h,i,o,a),c,r[n],Hl[h]);c=a,a=o,o=Bl(i,30),i=s,s=u}this.h[0]=Fl(this.h[0],s),this.h[1]=Fl(this.h[1],i),this.h[2]=Fl(this.h[2],o),this.h[3]=Fl(this.h[3],a),this.h[4]=Fl(this.h[4],c)},zl.prototype._digest=function(e){return"hex"===e?Ul.toHex32(this.h,"big"):Ul.split32(this.h,"big")};var Kl=pl,Wl=Sl,Yl=Nl,Jl=ml,Ql=Kl.sum32,$l=Kl.sum32_4,Xl=Kl.sum32_5,Zl=Yl.ch32,ed=Yl.maj32,td=Yl.s0_256,rd=Yl.s1_256,nd=Yl.g0_256,sd=Yl.g1_256,id=Wl.BlockHash,od=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function ad(){if(!(this instanceof ad))return new ad;id.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=od,this.W=new Array(64)}Kl.inherits(ad,id);var cd=ad;ad.blockSize=512,ad.outSize=256,ad.hmacStrength=192,ad.padLength=64,ad.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=$l(sd(r[n-2]),r[n-7],nd(r[n-15]),r[n-16]);var s=this.h[0],i=this.h[1],o=this.h[2],a=this.h[3],c=this.h[4],h=this.h[5],u=this.h[6],l=this.h[7];for(Jl(this.k.length===r.length),n=0;n<r.length;n++){var d=Xl(l,rd(c),Zl(c,h,u),this.k[n],r[n]),f=Ql(td(s),ed(s,i,o));l=u,u=h,h=c,c=Ql(a,d),a=o,o=i,i=s,s=Ql(d,f)}this.h[0]=Ql(this.h[0],s),this.h[1]=Ql(this.h[1],i),this.h[2]=Ql(this.h[2],o),this.h[3]=Ql(this.h[3],a),this.h[4]=Ql(this.h[4],c),this.h[5]=Ql(this.h[5],h),this.h[6]=Ql(this.h[6],u),this.h[7]=Ql(this.h[7],l)},ad.prototype._digest=function(e){return"hex"===e?Kl.toHex32(this.h,"big"):Kl.split32(this.h,"big")};var hd=pl,ud=cd;function ld(){if(!(this instanceof ld))return new ld;ud.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}hd.inherits(ld,ud);var dd=ld;ld.blockSize=512,ld.outSize=224,ld.hmacStrength=192,ld.padLength=64,ld.prototype._digest=function(e){return"hex"===e?hd.toHex32(this.h.slice(0,7),"big"):hd.split32(this.h.slice(0,7),"big")};var fd=pl,pd=Sl,md=ml,gd=fd.rotr64_hi,yd=fd.rotr64_lo,wd=fd.shr64_hi,vd=fd.shr64_lo,Ad=fd.sum64,bd=fd.sum64_hi,Ed=fd.sum64_lo,_d=fd.sum64_4_hi,Pd=fd.sum64_4_lo,Sd=fd.sum64_5_hi,Id=fd.sum64_5_lo,kd=pd.BlockHash,Rd=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Td(){if(!(this instanceof Td))return new Td;kd.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=Rd,this.W=new Array(160)}fd.inherits(Td,kd);var Nd=Td;function Od(e,t,r,n,s){var i=e&r^~e&s;return i<0&&(i+=4294967296),i}function Cd(e,t,r,n,s,i){var o=t&n^~t&i;return o<0&&(o+=4294967296),o}function xd(e,t,r,n,s){var i=e&r^e&s^r&s;return i<0&&(i+=4294967296),i}function Md(e,t,r,n,s,i){var o=t&n^t&i^n&i;return o<0&&(o+=4294967296),o}function Ud(e,t){var r=gd(e,t,28)^gd(t,e,2)^gd(t,e,7);return r<0&&(r+=4294967296),r}function Dd(e,t){var r=yd(e,t,28)^yd(t,e,2)^yd(t,e,7);return r<0&&(r+=4294967296),r}function Ld(e,t){var r=gd(e,t,14)^gd(e,t,18)^gd(t,e,9);return r<0&&(r+=4294967296),r}function Bd(e,t){var r=yd(e,t,14)^yd(e,t,18)^yd(t,e,9);return r<0&&(r+=4294967296),r}function Fd(e,t){var r=gd(e,t,1)^gd(e,t,8)^wd(e,t,7);return r<0&&(r+=4294967296),r}function qd(e,t){var r=yd(e,t,1)^yd(e,t,8)^vd(e,t,7);return r<0&&(r+=4294967296),r}function jd(e,t){var r=gd(e,t,19)^gd(t,e,29)^wd(e,t,6);return r<0&&(r+=4294967296),r}function Gd(e,t){var r=yd(e,t,19)^yd(t,e,29)^vd(e,t,6);return r<0&&(r+=4294967296),r}Td.blockSize=1024,Td.outSize=512,Td.hmacStrength=192,Td.padLength=128,Td.prototype._prepareBlock=function(e,t){for(var r=this.W,n=0;n<32;n++)r[n]=e[t+n];for(;n<r.length;n+=2){var s=jd(r[n-4],r[n-3]),i=Gd(r[n-4],r[n-3]),o=r[n-14],a=r[n-13],c=Fd(r[n-30],r[n-29]),h=qd(r[n-30],r[n-29]),u=r[n-32],l=r[n-31];r[n]=_d(s,i,o,a,c,h,u,l),r[n+1]=Pd(s,i,o,a,c,h,u,l)}},Td.prototype._update=function(e,t){this._prepareBlock(e,t);var r=this.W,n=this.h[0],s=this.h[1],i=this.h[2],o=this.h[3],a=this.h[4],c=this.h[5],h=this.h[6],u=this.h[7],l=this.h[8],d=this.h[9],f=this.h[10],p=this.h[11],m=this.h[12],g=this.h[13],y=this.h[14],w=this.h[15];md(this.k.length===r.length);for(var v=0;v<r.length;v+=2){var A=y,b=w,E=Ld(l,d),_=Bd(l,d),P=Od(l,d,f,p,m),S=Cd(l,d,f,p,m,g),I=this.k[v],k=this.k[v+1],R=r[v],T=r[v+1],N=Sd(A,b,E,_,P,S,I,k,R,T),O=Id(A,b,E,_,P,S,I,k,R,T);A=Ud(n,s),b=Dd(n,s),E=xd(n,s,i,o,a),_=Md(n,s,i,o,a,c);var C=bd(A,b,E,_),x=Ed(A,b,E,_);y=m,w=g,m=f,g=p,f=l,p=d,l=bd(h,u,N,O),d=Ed(u,u,N,O),h=a,u=c,a=i,c=o,i=n,o=s,n=bd(N,O,C,x),s=Ed(N,O,C,x)}Ad(this.h,0,n,s),Ad(this.h,2,i,o),Ad(this.h,4,a,c),Ad(this.h,6,h,u),Ad(this.h,8,l,d),Ad(this.h,10,f,p),Ad(this.h,12,m,g),Ad(this.h,14,y,w)},Td.prototype._digest=function(e){return"hex"===e?fd.toHex32(this.h,"big"):fd.split32(this.h,"big")};var Hd=pl,zd=Nd;function Vd(){if(!(this instanceof Vd))return new Vd;zd.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}Hd.inherits(Vd,zd);var Kd=Vd;Vd.blockSize=1024,Vd.outSize=384,Vd.hmacStrength=192,Vd.padLength=128,Vd.prototype._digest=function(e){return"hex"===e?Hd.toHex32(this.h.slice(0,12),"big"):Hd.split32(this.h.slice(0,12),"big")},Tl.sha1=Vl,Tl.sha224=dd,Tl.sha256=cd,Tl.sha384=Kd,Tl.sha512=Nd;var Wd={},Yd=pl,Jd=Sl,Qd=Yd.rotl32,$d=Yd.sum32,Xd=Yd.sum32_3,Zd=Yd.sum32_4,ef=Jd.BlockHash;function tf(){if(!(this instanceof tf))return new tf;ef.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function rf(e,t,r,n){return e<=15?t^r^n:e<=31?t&r|~t&n:e<=47?(t|~r)^n:e<=63?t&n|r&~n:t^(r|~n)}function nf(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function sf(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}Yd.inherits(tf,ef),Wd.ripemd160=tf,tf.blockSize=512,tf.outSize=160,tf.hmacStrength=192,tf.padLength=64,tf.prototype._update=function(e,t){for(var r=this.h[0],n=this.h[1],s=this.h[2],i=this.h[3],o=this.h[4],a=r,c=n,h=s,u=i,l=o,d=0;d<80;d++){var f=$d(Qd(Zd(r,rf(d,n,s,i),e[of[d]+t],nf(d)),cf[d]),o);r=o,o=i,i=Qd(s,10),s=n,n=f,f=$d(Qd(Zd(a,rf(79-d,c,h,u),e[af[d]+t],sf(d)),hf[d]),l),a=l,l=u,u=Qd(h,10),h=c,c=f}f=Xd(this.h[1],s,u),this.h[1]=Xd(this.h[2],i,l),this.h[2]=Xd(this.h[3],o,a),this.h[3]=Xd(this.h[4],r,c),this.h[4]=Xd(this.h[0],n,h),this.h[0]=f},tf.prototype._digest=function(e){return"hex"===e?Yd.toHex32(this.h,"little"):Yd.split32(this.h,"little")};var of=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],af=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],cf=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],hf=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],uf=pl,lf=ml;function df(e,t,r){if(!(this instanceof df))return new df(e,t,r);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(uf.toArray(t,r))}var ff=df;df.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),lf(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},df.prototype.update=function(e,t){return this.inner.update(e,t),this},df.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)},function(e){var t=e;t.utils=pl,t.common=Sl,t.sha=Tl,t.ripemd=Wd,t.hmac=ff,t.sha1=t.sha.sha1,t.sha256=t.sha.sha256,t.sha224=t.sha.sha224,t.sha384=t.sha.sha384,t.sha512=t.sha.sha512,t.ripemd160=t.ripemd.ripemd160}(fl);var pf=Et(fl);function mf(e){return"0x"+pf.sha256().update(Yn(e)).digest("hex")}var gf=function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})};function yf(e,t){return gf(this,void 0,void 0,function*(){null==t&&(t={});const r={method:t.method||"GET",headers:t.headers||{},body:t.body||void 0};if(!0!==t.skipFetchSetup&&(r.mode="cors",r.cache="no-cache",r.credentials="same-origin",r.redirect="follow",r.referrer="client"),null!=t.fetchOptions){const e=t.fetchOptions;e.mode&&(r.mode=e.mode),e.cache&&(r.cache=e.cache),e.credentials&&(r.credentials=e.credentials),e.redirect&&(r.redirect=e.redirect),e.referrer&&(r.referrer=e.referrer)}const n=yield fetch(e,r),s=yield n.arrayBuffer(),i={};return n.headers.forEach?n.headers.forEach((e,t)=>{i[t.toLowerCase()]=e}):n.headers.keys().forEach(e=>{i[e.toLowerCase()]=n.headers.get(e)}),{headers:i,statusCode:n.status,statusMessage:n.statusText,body:Yn(new Uint8Array(s))}})}var wf=function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})};const vf=new jn("web/5.8.0");function Af(e){return new Promise(t=>{setTimeout(t,e)})}function bf(e,t){if(null==e)return null;if("string"==typeof e)return e;if(Vn(e)){if(t&&("text"===t.split("/")[0]||"application/json"===t.split(";")[0].trim()))try{return Zc(e)}catch(e){}return es(e)}return e}function Ef(e,t,r){let n=null;if(null!=t){n=Xc(t);const r="string"==typeof e?{url:e}:Jh(e);if(r.headers){const e=0!==Object.keys(r.headers).filter(e=>"content-type"===e.toLowerCase()).length;e||(r.headers=Jh(r.headers),r.headers["content-type"]="application/json")}else r.headers={"content-type":"application/json"};e=r}return function(e,t,r){const n="object"==typeof e&&null!=e.throttleLimit?e.throttleLimit:12;vf.assertArgument(n>0&&n%1==0,"invalid connection throttle limit","connection.throttleLimit",n);const s="object"==typeof e?e.throttleCallback:null,i="object"==typeof e&&"number"==typeof e.throttleSlotInterval?e.throttleSlotInterval:100;vf.assertArgument(i>0&&i%1==0,"invalid connection throttle slot interval","connection.throttleSlotInterval",i);const o="object"==typeof e&&!!e.errorPassThrough,a={};let c=null;const h={method:"GET"};let u=!1,l=12e4;if("string"==typeof e)c=e;else if("object"==typeof e){if(null!=e&&null!=e.url||vf.throwArgumentError("missing URL","connection.url",e),c=e.url,"number"==typeof e.timeout&&e.timeout>0&&(l=e.timeout),e.headers)for(const t in e.headers)a[t.toLowerCase()]={key:t,value:String(e.headers[t])},["if-none-match","if-modified-since"].indexOf(t.toLowerCase())>=0&&(u=!0);if(h.allowGzip=!!e.allowGzip,null!=e.user&&null!=e.password){"https:"!==c.substring(0,6)&&!0!==e.allowInsecureAuthentication&&vf.throwError("basic authentication requires a secure https url",jn.errors.INVALID_ARGUMENT,{argument:"url",url:c,user:e.user,password:"[REDACTED]"});const t=e.user+":"+e.password;a.authorization={key:"Authorization",value:"Basic "+nh(Xc(t))}}null!=e.skipFetchSetup&&(h.skipFetchSetup=!!e.skipFetchSetup),null!=e.fetchOptions&&(h.fetchOptions=Jh(e.fetchOptions))}const d=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),f=c?c.match(d):null;if(f)try{const e={statusCode:200,statusMessage:"OK",headers:{"content-type":f[1]||"text/plain"},body:f[2]?rh(f[3]):(p=f[3],Xc(p.replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16)))))};let t=e.body;return r&&(t=r(e.body,e)),Promise.resolve(t)}catch(e){vf.throwError("processing response error",jn.errors.SERVER_ERROR,{body:bf(f[1],f[2]),error:e,requestBody:null,requestMethod:"GET",url:c})}var p;t&&(h.method="POST",h.body=t,null==a["content-type"]&&(a["content-type"]={key:"Content-Type",value:"application/octet-stream"}),null==a["content-length"]&&(a["content-length"]={key:"Content-Length",value:String(t.length)}));const m={};Object.keys(a).forEach(e=>{const t=a[e];m[t.key]=t.value}),h.headers=m;const g=function(){let e=null;return{promise:new Promise(function(t,r){l&&(e=setTimeout(()=>{null!=e&&(e=null,r(vf.makeError("timeout",jn.errors.TIMEOUT,{requestBody:bf(h.body,m["content-type"]),requestMethod:h.method,timeout:l,url:c})))},l))}),cancel:function(){null!=e&&(clearTimeout(e),e=null)}}}(),y=function(){return wf(this,void 0,void 0,function*(){for(let e=0;e<n;e++){let t=null;try{if(t=yield yf(c,h),e<n)if(301===t.statusCode||302===t.statusCode){const e=t.headers.location||"";if("GET"===h.method&&e.match(/^https:/)){c=t.headers.location;continue}}else if(429===t.statusCode){let r=!0;if(s&&(r=yield s(e,c)),r){let r=0;const n=t.headers["retry-after"];r="string"==typeof n&&n.match(/^[1-9][0-9]*$/)?1e3*parseInt(n):i*parseInt(String(Math.random()*Math.pow(2,e))),yield Af(r);continue}}}catch(e){t=e.response,null==t&&(g.cancel(),vf.throwError("missing response",jn.errors.SERVER_ERROR,{requestBody:bf(h.body,m["content-type"]),requestMethod:h.method,serverError:e,url:c}))}let a=t.body;if(u&&304===t.statusCode?a=null:!o&&(t.statusCode<200||t.statusCode>=300)&&(g.cancel(),vf.throwError("bad response",jn.errors.SERVER_ERROR,{status:t.statusCode,headers:t.headers,body:bf(a,t.headers?t.headers["content-type"]:null),requestBody:bf(h.body,m["content-type"]),requestMethod:h.method,url:c})),r)try{const e=yield r(a,t);return g.cancel(),e}catch(r){if(r.throttleRetry&&e<n){let t=!0;if(s&&(t=yield s(e,c)),t){const t=i*parseInt(String(Math.random()*Math.pow(2,e)));yield Af(t);continue}}g.cancel(),vf.throwError("processing response error",jn.errors.SERVER_ERROR,{body:bf(a,t.headers?t.headers["content-type"]:null),error:r,requestBody:bf(h.body,m["content-type"]),requestMethod:h.method,url:c})}return g.cancel(),a}return vf.throwError("failed response",jn.errors.SERVER_ERROR,{requestBody:bf(h.body,m["content-type"]),requestMethod:h.method,url:c})})}();return Promise.race([g.promise,y])}(e,n,(e,t)=>{let n=null;if(null!=e)try{n=JSON.parse(Zc(e))}catch(t){vf.throwError("invalid JSON",jn.errors.SERVER_ERROR,{body:e,error:t})}return r&&(n=r(n,t)),n})}function _f(e,t){return t||(t={}),null==(t=Jh(t)).floor&&(t.floor=0),null==t.ceiling&&(t.ceiling=1e4),null==t.interval&&(t.interval=250),new Promise(function(r,n){let s=null,i=!1;const o=()=>!i&&(i=!0,s&&clearTimeout(s),!0);t.timeout&&(s=setTimeout(()=>{o()&&n(new Error("timeout"))},t.timeout));const a=t.retryLimit;let c=0;!function s(){return e().then(function(e){if(void 0!==e)o()&&r(e);else if(t.oncePoll)t.oncePoll.once("poll",s);else if(t.onceBlock)t.onceBlock.once("block",s);else if(!i){if(c++,c>a)return void(o()&&n(new Error("retry limit reached")));let e=t.interval*parseInt(String(Math.random()*Math.pow(2,c)));e<t.floor&&(e=t.floor),e>t.ceiling&&(e=t.ceiling),setTimeout(s,e)}return null},function(e){o()&&n(e)})}()})}for(var Pf="qpzry9x8gf2tvdw0s3jn54khce6mua7l",Sf={},If=0;If<32;If++){var kf=Pf.charAt(If);if(void 0!==Sf[kf])throw new TypeError(kf+" is ambiguous");Sf[kf]=If}function Rf(e){var t=e>>25;return(33554431&e)<<5^996825010&-(1&t)^642813549&-(t>>1&1)^513874426&-(t>>2&1)^1027748829&-(t>>3&1)^705979059&-(t>>4&1)}function Tf(e){for(var t=1,r=0;r<e.length;++r){var n=e.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+e+")";t=Rf(t)^n>>5}for(t=Rf(t),r=0;r<e.length;++r){var s=e.charCodeAt(r);t=Rf(t)^31&s}return t}function Nf(e,t){if(t=t||90,e.length<8)return e+" too short";if(e.length>t)return"Exceeds length limit";var r=e.toLowerCase(),n=e.toUpperCase();if(e!==r&&e!==n)return"Mixed-case string "+e;var s=(e=r).lastIndexOf("1");if(-1===s)return"No separator character for "+e;if(0===s)return"Missing prefix for "+e;var i=e.slice(0,s),o=e.slice(s+1);if(o.length<6)return"Data too short";var a=Tf(i);if("string"==typeof a)return a;for(var c=[],h=0;h<o.length;++h){var u=o.charAt(h),l=Sf[u];if(void 0===l)return"Unknown character "+u;a=Rf(a)^l,h+6>=o.length||c.push(l)}return 1!==a?"Invalid checksum for "+e:{prefix:i,words:c}}function Of(e,t,r,n){for(var s=0,i=0,o=(1<<r)-1,a=[],c=0;c<e.length;++c)for(s=s<<t|e[c],i+=t;i>=r;)i-=r,a.push(s>>i&o);if(n)i>0&&a.push(s<<r-i&o);else{if(i>=t)return"Excess padding";if(s<<r-i&o)return"Non-zero padding"}return a}var Cf={decodeUnsafe:function(){var e=Nf.apply(null,arguments);if("object"==typeof e)return e},decode:function(e){var t=Nf.apply(null,arguments);if("object"==typeof t)return t;throw new Error(t)},encode:function(e,t,r){if(r=r||90,e.length+7+t.length>r)throw new TypeError("Exceeds length limit");var n=Tf(e=e.toLowerCase());if("string"==typeof n)throw new Error(n);for(var s=e+"1",i=0;i<t.length;++i){var o=t[i];if(o>>5)throw new Error("Non 5-bit word");n=Rf(n)^o,s+=Pf.charAt(o)}for(i=0;i<6;++i)n=Rf(n);for(n^=1,i=0;i<6;++i){s+=Pf.charAt(n>>5*(5-i)&31)}return s},toWordsUnsafe:function(e){var t=Of(e,8,5,!0);if(Array.isArray(t))return t},toWords:function(e){var t=Of(e,8,5,!0);if(Array.isArray(t))return t;throw new Error(t)},fromWordsUnsafe:function(e){var t=Of(e,5,8,!1);if(Array.isArray(t))return t},fromWords:function(e){var t=Of(e,5,8,!1);if(Array.isArray(t))return t;throw new Error(t)}},xf=Et(Cf);const Mf="providers/5.8.0";function Uf(e,t,r){return r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&r.path)}},e(r,r.exports),r.exports}var Df=Lf;function Lf(e,t){if(!e)throw new Error(t||"Assertion failed")}Lf.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var Bf=Uf(function(e,t){var r=t;function n(e){return 1===e.length?"0"+e:e}function s(e){for(var t="",r=0;r<e.length;r++)t+=n(e[r].toString(16));return t}r.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"!=typeof e){for(var n=0;n<e.length;n++)r[n]=0|e[n];return r}if("hex"===t){(e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e);for(n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16))}else for(n=0;n<e.length;n++){var s=e.charCodeAt(n),i=s>>8,o=255&s;i?r.push(i,o):r.push(o)}return r},r.zero2=n,r.toHex=s,r.encode=function(e,t){return"hex"===t?s(e):e}}),Ff=Uf(function(e,t){var r=t;r.assert=Df,r.toArray=Bf.toArray,r.zero2=Bf.zero2,r.toHex=Bf.toHex,r.encode=Bf.encode,r.getNAF=function(e,t,r){var n,s=new Array(Math.max(e.bitLength(),r)+1);for(n=0;n<s.length;n+=1)s[n]=0;var i=1<<t+1,o=e.clone();for(n=0;n<s.length;n++){var a,c=o.andln(i-1);o.isOdd()?(a=c>(i>>1)-1?(i>>1)-c:c,o.isubn(a)):a=0,s[n]=a,o.iushrn(1)}return s},r.getJSF=function(e,t){var r=[[],[]];e=e.clone(),t=t.clone();for(var n,s=0,i=0;e.cmpn(-s)>0||t.cmpn(-i)>0;){var o,a,c=e.andln(3)+s&3,h=t.andln(3)+i&3;3===c&&(c=-1),3===h&&(h=-1),o=1&c?3!==(n=e.andln(7)+s&7)&&5!==n||2!==h?c:-c:0,r[0].push(o),a=1&h?3!==(n=t.andln(7)+i&7)&&5!==n||2!==c?h:-h:0,r[1].push(a),2*s===o+1&&(s=1-s),2*i===a+1&&(i=1-i),e.iushrn(1),t.iushrn(1)}return r},r.cachedProperty=function(e,t,r){var n="_"+t;e.prototype[t]=function(){return void 0!==this[n]?this[n]:this[n]=r.call(this)}},r.parseBytes=function(e){return"string"==typeof e?r.toArray(e,"hex"):e},r.intFromLE=function(e){return new Oc(e,"hex","le")}}),qf=Ff.getNAF,jf=Ff.getJSF,Gf=Ff.assert;function Hf(e,t){this.type=e,this.p=new Oc(t.p,16),this.red=t.prime?Oc.red(t.prime):Oc.mont(this.p),this.zero=new Oc(0).toRed(this.red),this.one=new Oc(1).toRed(this.red),this.two=new Oc(2).toRed(this.red),this.n=t.n&&new Oc(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var zf=Hf;function Vf(e,t){this.curve=e,this.type=t,this.precomputed=null}Hf.prototype.point=function(){throw new Error("Not implemented")},Hf.prototype.validate=function(){throw new Error("Not implemented")},Hf.prototype._fixedNafMul=function(e,t){Gf(e.precomputed);var r=e._getDoubles(),n=qf(t,1,this._bitLength),s=(1<<r.step+1)-(r.step%2==0?2:1);s/=3;var i,o,a=[];for(i=0;i<n.length;i+=r.step){o=0;for(var c=i+r.step-1;c>=i;c--)o=(o<<1)+n[c];a.push(o)}for(var h=this.jpoint(null,null,null),u=this.jpoint(null,null,null),l=s;l>0;l--){for(i=0;i<a.length;i++)(o=a[i])===l?u=u.mixedAdd(r.points[i]):o===-l&&(u=u.mixedAdd(r.points[i].neg()));h=h.add(u)}return h.toP()},Hf.prototype._wnafMul=function(e,t){var r=4,n=e._getNAFPoints(r);r=n.wnd;for(var s=n.points,i=qf(t,r,this._bitLength),o=this.jpoint(null,null,null),a=i.length-1;a>=0;a--){for(var c=0;a>=0&&0===i[a];a--)c++;if(a>=0&&c++,o=o.dblp(c),a<0)break;var h=i[a];Gf(0!==h),o="affine"===e.type?h>0?o.mixedAdd(s[h-1>>1]):o.mixedAdd(s[-h-1>>1].neg()):h>0?o.add(s[h-1>>1]):o.add(s[-h-1>>1].neg())}return"affine"===e.type?o.toP():o},Hf.prototype._wnafMulAdd=function(e,t,r,n,s){var i,o,a,c=this._wnafT1,h=this._wnafT2,u=this._wnafT3,l=0;for(i=0;i<n;i++){var d=(a=t[i])._getNAFPoints(e);c[i]=d.wnd,h[i]=d.points}for(i=n-1;i>=1;i-=2){var f=i-1,p=i;if(1===c[f]&&1===c[p]){var m=[t[f],null,null,t[p]];0===t[f].y.cmp(t[p].y)?(m[1]=t[f].add(t[p]),m[2]=t[f].toJ().mixedAdd(t[p].neg())):0===t[f].y.cmp(t[p].y.redNeg())?(m[1]=t[f].toJ().mixedAdd(t[p]),m[2]=t[f].add(t[p].neg())):(m[1]=t[f].toJ().mixedAdd(t[p]),m[2]=t[f].toJ().mixedAdd(t[p].neg()));var g=[-3,-1,-5,-7,0,7,5,1,3],y=jf(r[f],r[p]);for(l=Math.max(y[0].length,l),u[f]=new Array(l),u[p]=new Array(l),o=0;o<l;o++){var w=0|y[0][o],v=0|y[1][o];u[f][o]=g[3*(w+1)+(v+1)],u[p][o]=0,h[f]=m}}else u[f]=qf(r[f],c[f],this._bitLength),u[p]=qf(r[p],c[p],this._bitLength),l=Math.max(u[f].length,l),l=Math.max(u[p].length,l)}var A=this.jpoint(null,null,null),b=this._wnafT4;for(i=l;i>=0;i--){for(var E=0;i>=0;){var _=!0;for(o=0;o<n;o++)b[o]=0|u[o][i],0!==b[o]&&(_=!1);if(!_)break;E++,i--}if(i>=0&&E++,A=A.dblp(E),i<0)break;for(o=0;o<n;o++){var P=b[o];0!==P&&(P>0?a=h[o][P-1>>1]:P<0&&(a=h[o][-P-1>>1].neg()),A="affine"===a.type?A.mixedAdd(a):A.add(a))}}for(i=0;i<n;i++)h[i]=null;return s?A:A.toP()},Hf.BasePoint=Vf,Vf.prototype.eq=function(){throw new Error("Not implemented")},Vf.prototype.validate=function(){return this.curve.validate(this)},Hf.prototype.decodePoint=function(e,t){e=Ff.toArray(e,t);var r=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*r)return 6===e[0]?Gf(e[e.length-1]%2==0):7===e[0]&&Gf(e[e.length-1]%2==1),this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));if((2===e[0]||3===e[0])&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),3===e[0]);throw new Error("Unknown point format")},Vf.prototype.encodeCompressed=function(e){return this.encode(e,!0)},Vf.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))},Vf.prototype.encode=function(e,t){return Ff.encode(this._encode(t),e)},Vf.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},Vf.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},Vf.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,s=0;s<t;s+=e){for(var i=0;i<e;i++)n=n.dbl();r.push(n)}return{step:e,points:r}},Vf.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,n=1===r?null:this.dbl(),s=1;s<r;s++)t[s]=t[s-1].add(n);return{wnd:e,points:t}},Vf.prototype._getBeta=function(){return null},Vf.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t};var Kf=Uf(function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}}),Wf=Ff.assert;function Yf(e){zf.call(this,"short",e),this.a=new Oc(e.a,16).toRed(this.red),this.b=new Oc(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Kf(Yf,zf);var Jf=Yf;function Qf(e,t,r,n){zf.BasePoint.call(this,e,"affine"),null===t&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new Oc(t,16),this.y=new Oc(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function $f(e,t,r,n){zf.BasePoint.call(this,e,"jacobian"),null===t&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Oc(0)):(this.x=new Oc(t,16),this.y=new Oc(r,16),this.z=new Oc(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Yf.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,r;if(e.beta)t=new Oc(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);t=(t=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(e.lambda)r=new Oc(e.lambda,16);else{var s=this._getEndoRoots(this.n);0===this.g.mul(s[0]).x.cmp(this.g.x.redMul(t))?r=s[0]:(r=s[1],Wf(0===this.g.mul(r).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:r,basis:e.basis?e.basis.map(function(e){return{a:new Oc(e.a,16),b:new Oc(e.b,16)}}):this._getEndoBasis(r)}}},Yf.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:Oc.mont(e),r=new Oc(2).toRed(t).redInvm(),n=r.redNeg(),s=new Oc(3).toRed(t).redNeg().redSqrt().redMul(r);return[n.redAdd(s).fromRed(),n.redSub(s).fromRed()]},Yf.prototype._getEndoBasis=function(e){for(var t,r,n,s,i,o,a,c,h,u=this.n.ushrn(Math.floor(this.n.bitLength()/2)),l=e,d=this.n.clone(),f=new Oc(1),p=new Oc(0),m=new Oc(0),g=new Oc(1),y=0;0!==l.cmpn(0);){var w=d.div(l);c=d.sub(w.mul(l)),h=m.sub(w.mul(f));var v=g.sub(w.mul(p));if(!n&&c.cmp(u)<0)t=a.neg(),r=f,n=c.neg(),s=h;else if(n&&2===++y)break;a=c,d=l,l=c,m=f,f=h,g=p,p=v}i=c.neg(),o=h;var A=n.sqr().add(s.sqr());return i.sqr().add(o.sqr()).cmp(A)>=0&&(i=t,o=r),n.negative&&(n=n.neg(),s=s.neg()),i.negative&&(i=i.neg(),o=o.neg()),[{a:n,b:s},{a:i,b:o}]},Yf.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],n=t[1],s=n.b.mul(e).divRound(this.n),i=r.b.neg().mul(e).divRound(this.n),o=s.mul(r.a),a=i.mul(n.a),c=s.mul(r.b),h=i.mul(n.b);return{k1:e.sub(o).sub(a),k2:c.add(h).neg()}},Yf.prototype.pointFromX=function(e,t){(e=new Oc(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(0!==n.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var s=n.fromRed().isOdd();return(t&&!s||!t&&s)&&(n=n.redNeg()),this.point(e,n)},Yf.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,n=this.a.redMul(t),s=t.redSqr().redMul(t).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(s).cmpn(0)},Yf.prototype._endoWnafMulAdd=function(e,t,r){for(var n=this._endoWnafT1,s=this._endoWnafT2,i=0;i<e.length;i++){var o=this._endoSplit(t[i]),a=e[i],c=a._getBeta();o.k1.negative&&(o.k1.ineg(),a=a.neg(!0)),o.k2.negative&&(o.k2.ineg(),c=c.neg(!0)),n[2*i]=a,n[2*i+1]=c,s[2*i]=o.k1,s[2*i+1]=o.k2}for(var h=this._wnafMulAdd(1,n,s,2*i,r),u=0;u<2*i;u++)n[u]=null,s[u]=null;return h},Kf(Qf,zf.BasePoint),Yf.prototype.point=function(e,t,r){return new Qf(this,e,t,r)},Yf.prototype.pointFromJSON=function(e,t){return Qf.fromJSON(this,e,t)},Qf.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,n=function(e){return r.point(e.x.redMul(r.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return t}},Qf.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},Qf.fromJSON=function(e,t,r){"string"==typeof t&&(t=JSON.parse(t));var n=e.point(t[0],t[1],r);if(!t[2])return n;function s(t){return e.point(t[0],t[1],r)}var i=t[2];return n.precomputed={beta:null,doubles:i.doubles&&{step:i.doubles.step,points:[n].concat(i.doubles.points.map(s))},naf:i.naf&&{wnd:i.naf.wnd,points:[n].concat(i.naf.points.map(s))}},n},Qf.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},Qf.prototype.isInfinity=function(){return this.inf},Qf.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),n=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},Qf.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),n=e.redInvm(),s=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(n),i=s.redSqr().redISub(this.x.redAdd(this.x)),o=s.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,o)},Qf.prototype.getX=function(){return this.x.fromRed()},Qf.prototype.getY=function(){return this.y.fromRed()},Qf.prototype.mul=function(e){return e=new Oc(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},Qf.prototype.mulAdd=function(e,t,r){var n=[this,t],s=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,s):this.curve._wnafMulAdd(1,n,s,2)},Qf.prototype.jmulAdd=function(e,t,r){var n=[this,t],s=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,s,!0):this.curve._wnafMulAdd(1,n,s,2,!0)},Qf.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},Qf.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,n=function(e){return e.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return t},Qf.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},Kf($f,zf.BasePoint),Yf.prototype.jpoint=function(e,t,r){return new $f(this,e,t,r)},$f.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),n=this.y.redMul(t).redMul(e);return this.curve.point(r,n)},$f.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},$f.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(t),s=e.x.redMul(r),i=this.y.redMul(t.redMul(e.z)),o=e.y.redMul(r.redMul(this.z)),a=n.redSub(s),c=i.redSub(o);if(0===a.cmpn(0))return 0!==c.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var h=a.redSqr(),u=h.redMul(a),l=n.redMul(h),d=c.redSqr().redIAdd(u).redISub(l).redISub(l),f=c.redMul(l.redISub(d)).redISub(i.redMul(u)),p=this.z.redMul(e.z).redMul(a);return this.curve.jpoint(d,f,p)},$f.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,n=e.x.redMul(t),s=this.y,i=e.y.redMul(t).redMul(this.z),o=r.redSub(n),a=s.redSub(i);if(0===o.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=o.redSqr(),h=c.redMul(o),u=r.redMul(c),l=a.redSqr().redIAdd(h).redISub(u).redISub(u),d=a.redMul(u.redISub(l)).redISub(s.redMul(h)),f=this.z.redMul(o);return this.curve.jpoint(l,d,f)},$f.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var r=this;for(t=0;t<e;t++)r=r.dbl();return r}var n=this.curve.a,s=this.curve.tinv,i=this.x,o=this.y,a=this.z,c=a.redSqr().redSqr(),h=o.redAdd(o);for(t=0;t<e;t++){var u=i.redSqr(),l=h.redSqr(),d=l.redSqr(),f=u.redAdd(u).redIAdd(u).redIAdd(n.redMul(c)),p=i.redMul(l),m=f.redSqr().redISub(p.redAdd(p)),g=p.redISub(m),y=f.redMul(g);y=y.redIAdd(y).redISub(d);var w=h.redMul(a);t+1<e&&(c=c.redMul(d)),i=m,a=w,h=y}return this.curve.jpoint(i,h.redMul(s),a)},$f.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},$f.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),s=this.y.redSqr(),i=s.redSqr(),o=this.x.redAdd(s).redSqr().redISub(n).redISub(i);o=o.redIAdd(o);var a=n.redAdd(n).redIAdd(n),c=a.redSqr().redISub(o).redISub(o),h=i.redIAdd(i);h=(h=h.redIAdd(h)).redIAdd(h),e=c,t=a.redMul(o.redISub(c)).redISub(h),r=this.y.redAdd(this.y)}else{var u=this.x.redSqr(),l=this.y.redSqr(),d=l.redSqr(),f=this.x.redAdd(l).redSqr().redISub(u).redISub(d);f=f.redIAdd(f);var p=u.redAdd(u).redIAdd(u),m=p.redSqr(),g=d.redIAdd(d);g=(g=g.redIAdd(g)).redIAdd(g),e=m.redISub(f).redISub(f),t=p.redMul(f.redISub(e)).redISub(g),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(e,t,r)},$f.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),s=this.y.redSqr(),i=s.redSqr(),o=this.x.redAdd(s).redSqr().redISub(n).redISub(i);o=o.redIAdd(o);var a=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),c=a.redSqr().redISub(o).redISub(o);e=c;var h=i.redIAdd(i);h=(h=h.redIAdd(h)).redIAdd(h),t=a.redMul(o.redISub(c)).redISub(h),r=this.y.redAdd(this.y)}else{var u=this.z.redSqr(),l=this.y.redSqr(),d=this.x.redMul(l),f=this.x.redSub(u).redMul(this.x.redAdd(u));f=f.redAdd(f).redIAdd(f);var p=d.redIAdd(d),m=(p=p.redIAdd(p)).redAdd(p);e=f.redSqr().redISub(m),r=this.y.redAdd(this.z).redSqr().redISub(l).redISub(u);var g=l.redSqr();g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g),t=f.redMul(p.redISub(e)).redISub(g)}return this.curve.jpoint(e,t,r)},$f.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,n=this.z,s=n.redSqr().redSqr(),i=t.redSqr(),o=r.redSqr(),a=i.redAdd(i).redIAdd(i).redIAdd(e.redMul(s)),c=t.redAdd(t),h=(c=c.redIAdd(c)).redMul(o),u=a.redSqr().redISub(h.redAdd(h)),l=h.redISub(u),d=o.redSqr();d=(d=(d=d.redIAdd(d)).redIAdd(d)).redIAdd(d);var f=a.redMul(l).redISub(d),p=r.redAdd(r).redMul(n);return this.curve.jpoint(u,f,p)},$f.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),n=t.redSqr(),s=e.redAdd(e).redIAdd(e),i=s.redSqr(),o=this.x.redAdd(t).redSqr().redISub(e).redISub(n),a=(o=(o=(o=o.redIAdd(o)).redAdd(o).redIAdd(o)).redISub(i)).redSqr(),c=n.redIAdd(n);c=(c=(c=c.redIAdd(c)).redIAdd(c)).redIAdd(c);var h=s.redIAdd(o).redSqr().redISub(i).redISub(a).redISub(c),u=t.redMul(h);u=(u=u.redIAdd(u)).redIAdd(u);var l=this.x.redMul(a).redISub(u);l=(l=l.redIAdd(l)).redIAdd(l);var d=this.y.redMul(h.redMul(c.redISub(h)).redISub(o.redMul(a)));d=(d=(d=d.redIAdd(d)).redIAdd(d)).redIAdd(d);var f=this.z.redAdd(o).redSqr().redISub(r).redISub(a);return this.curve.jpoint(l,d,f)},$f.prototype.mul=function(e,t){return e=new Oc(e,t),this.curve._wnafMul(this,e)},$f.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var n=t.redMul(this.z),s=r.redMul(e.z);return 0===this.y.redMul(s).redISub(e.y.redMul(n)).cmpn(0)},$f.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(r))return!0;for(var n=e.clone(),s=this.curve.redN.redMul(t);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(s),0===this.x.cmp(r))return!0}},$f.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},$f.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var Xf=Uf(function(e,t){var r=t;r.base=zf,r.short=Jf,r.mont=null,r.edwards=null}),Zf=Uf(function(e,t){var r,n=t,s=Ff.assert;function i(e){"short"===e.type?this.curve=new Xf.short(e):"edwards"===e.type?this.curve=new Xf.edwards(e):this.curve=new Xf.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function o(e,t){Object.defineProperty(n,e,{configurable:!0,enumerable:!0,get:function(){var r=new i(t);return Object.defineProperty(n,e,{configurable:!0,enumerable:!0,value:r}),r}})}n.PresetCurve=i,o("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:pf.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),o("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:pf.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),o("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:pf.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),o("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:pf.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),o("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:pf.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),o("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:pf.sha256,gRed:!1,g:["9"]}),o("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:pf.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=null.crash()}catch(e){r=void 0}o("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:pf.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})});function ep(e){if(!(this instanceof ep))return new ep(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=Bf.toArray(e.entropy,e.entropyEnc||"hex"),r=Bf.toArray(e.nonce,e.nonceEnc||"hex"),n=Bf.toArray(e.pers,e.persEnc||"hex");Df(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,n)}var tp=ep;ep.prototype._init=function(e,t,r){var n=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},ep.prototype._hmac=function(){return new pf.hmac(this.hash,this.K)},ep.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},ep.prototype.reseed=function(e,t,r,n){"string"!=typeof t&&(n=r,r=t,t=null),e=Bf.toArray(e,t),r=Bf.toArray(r,n),Df(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1},ep.prototype.generate=function(e,t,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(n=r,r=t,t=null),r&&(r=Bf.toArray(r,n||"hex"),this._update(r));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var i=s.slice(0,e);return this._update(r),this._reseed++,Bf.encode(i,t)};var rp=Ff.assert;function np(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var sp=np;np.fromPublic=function(e,t,r){return t instanceof np?t:new np(e,{pub:t,pubEnc:r})},np.fromPrivate=function(e,t,r){return t instanceof np?t:new np(e,{priv:t,privEnc:r})},np.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},np.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},np.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},np.prototype._importPrivate=function(e,t){this.priv=new Oc(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},np.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?rp(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||rp(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},np.prototype.derive=function(e){return e.validate()||rp(e.validate(),"public point not validated"),e.mul(this.priv).getX()},np.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},np.prototype.verify=function(e,t,r){return this.ec.verify(e,t,this,void 0,r)},np.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var ip=Ff.assert;function op(e,t){if(e instanceof op)return e;this._importDER(e,t)||(ip(e.r&&e.s,"Signature without r or s"),this.r=new Oc(e.r,16),this.s=new Oc(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}var ap=op;function cp(){this.place=0}function hp(e,t){var r=e[t.place++];if(!(128&r))return r;var n=15&r;if(0===n||n>4)return!1;if(0===e[t.place])return!1;for(var s=0,i=0,o=t.place;i<n;i++,o++)s<<=8,s|=e[o],s>>>=0;return!(s<=127)&&(t.place=o,s)}function up(e){for(var t=0,r=e.length-1;!e[t]&&!(128&e[t+1])&&t<r;)t++;return 0===t?e:e.slice(t)}function lp(e,t){if(t<128)e.push(t);else{var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|r);--r;)e.push(t>>>(r<<3)&255);e.push(t)}}op.prototype._importDER=function(e,t){e=Ff.toArray(e,t);var r=new cp;if(48!==e[r.place++])return!1;var n=hp(e,r);if(!1===n)return!1;if(n+r.place!==e.length)return!1;if(2!==e[r.place++])return!1;var s=hp(e,r);if(!1===s)return!1;if(128&e[r.place])return!1;var i=e.slice(r.place,s+r.place);if(r.place+=s,2!==e[r.place++])return!1;var o=hp(e,r);if(!1===o)return!1;if(e.length!==o+r.place)return!1;if(128&e[r.place])return!1;var a=e.slice(r.place,o+r.place);if(0===i[0]){if(!(128&i[1]))return!1;i=i.slice(1)}if(0===a[0]){if(!(128&a[1]))return!1;a=a.slice(1)}return this.r=new Oc(i),this.s=new Oc(a),this.recoveryParam=null,!0},op.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&r[0]&&(r=[0].concat(r)),t=up(t),r=up(r);!(r[0]||128&r[1]);)r=r.slice(1);var n=[2];lp(n,t.length),(n=n.concat(t)).push(2),lp(n,r.length);var s=n.concat(r),i=[48];return lp(i,s.length),i=i.concat(s),Ff.encode(i,e)};var dp=function(){throw new Error("unsupported")},fp=Ff.assert;function pp(e){if(!(this instanceof pp))return new pp(e);"string"==typeof e&&(fp(Object.prototype.hasOwnProperty.call(Zf,e),"Unknown curve "+e),e=Zf[e]),e instanceof Zf.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}var mp=pp;pp.prototype.keyPair=function(e){return new sp(this,e)},pp.prototype.keyFromPrivate=function(e,t){return sp.fromPrivate(this,e,t)},pp.prototype.keyFromPublic=function(e,t){return sp.fromPublic(this,e,t)},pp.prototype.genKeyPair=function(e){e||(e={});for(var t=new tp({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||dp(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),n=this.n.sub(new Oc(2));;){var s=new Oc(t.generate(r));if(!(s.cmp(n)>0))return s.iaddn(1),this.keyFromPrivate(s)}},pp.prototype._truncateToN=function(e,t,r){var n;if(Oc.isBN(e)||"number"==typeof e)n=(e=new Oc(e,16)).byteLength();else if("object"==typeof e)n=e.length,e=new Oc(e,16);else{var s=e.toString();n=s.length+1>>>1,e=new Oc(s,16)}"number"!=typeof r&&(r=8*n);var i=r-this.n.bitLength();return i>0&&(e=e.ushrn(i)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},pp.prototype.sign=function(e,t,r,n){if("object"==typeof r&&(n=r,r=null),n||(n={}),"string"!=typeof e&&"number"!=typeof e&&!Oc.isBN(e)){fp("object"==typeof e&&e&&"number"==typeof e.length,"Expected message to be an array-like, a hex string, or a BN instance"),fp(e.length>>>0===e.length);for(var s=0;s<e.length;s++)fp((255&e[s])===e[s])}t=this.keyFromPrivate(t,r),e=this._truncateToN(e,!1,n.msgBitLength),fp(!e.isNeg(),"Can not sign a negative message");var i=this.n.byteLength(),o=t.getPrivate().toArray("be",i),a=e.toArray("be",i);fp(new Oc(a).eq(e),"Can not sign message");for(var c=new tp({hash:this.hash,entropy:o,nonce:a,pers:n.pers,persEnc:n.persEnc||"utf8"}),h=this.n.sub(new Oc(1)),u=0;;u++){var l=n.k?n.k(u):new Oc(c.generate(this.n.byteLength()));if(!((l=this._truncateToN(l,!0)).cmpn(1)<=0||l.cmp(h)>=0)){var d=this.g.mul(l);if(!d.isInfinity()){var f=d.getX(),p=f.umod(this.n);if(0!==p.cmpn(0)){var m=l.invm(this.n).mul(p.mul(t.getPrivate()).iadd(e));if(0!==(m=m.umod(this.n)).cmpn(0)){var g=(d.getY().isOdd()?1:0)|(0!==f.cmp(p)?2:0);return n.canonical&&m.cmp(this.nh)>0&&(m=this.n.sub(m),g^=1),new ap({r:p,s:m,recoveryParam:g})}}}}}},pp.prototype.verify=function(e,t,r,n,s){s||(s={}),e=this._truncateToN(e,!1,s.msgBitLength),r=this.keyFromPublic(r,n);var i=(t=new ap(t,"hex")).r,o=t.s;if(i.cmpn(1)<0||i.cmp(this.n)>=0)return!1;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var a,c=o.invm(this.n),h=c.mul(e).umod(this.n),u=c.mul(i).umod(this.n);return this.curve._maxwellTrick?!(a=this.g.jmulAdd(h,r.getPublic(),u)).isInfinity()&&a.eqXToP(i):!(a=this.g.mulAdd(h,r.getPublic(),u)).isInfinity()&&0===a.getX().umod(this.n).cmp(i)},pp.prototype.recoverPubKey=function(e,t,r,n){fp((3&r)===r,"The recovery param is more than two bits"),t=new ap(t,n);var s=this.n,i=new Oc(e),o=t.r,a=t.s,c=1&r,h=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&h)throw new Error("Unable to find sencond key candinate");o=h?this.curve.pointFromX(o.add(this.curve.n),c):this.curve.pointFromX(o,c);var u=t.r.invm(s),l=s.sub(i).mul(u).umod(s),d=a.mul(u).umod(s);return this.g.mulAdd(l,o,d)},pp.prototype.getKeyRecoveryParam=function(e,t,r,n){if(null!==(t=new ap(t,n)).recoveryParam)return t.recoveryParam;for(var s=0;s<4;s++){var i;try{i=this.recoverPubKey(e,t,s)}catch(e){continue}if(i.eq(r))return s}throw new Error("Unable to find valid recovery factor")};var gp=Uf(function(e,t){var r=t;r.version="6.6.1",r.utils=Ff,r.rand=function(){throw new Error("unsupported")},r.curve=Xf,r.curves=Zf,r.ec=mp,r.eddsa=null}).ec;const yp=new jn("signing-key/5.8.0");let wp=null;function vp(){return wp||(wp=new gp("secp256k1")),wp}class Ap{constructor(e){Vh(this,"curve","secp256k1"),Vh(this,"privateKey",es(e)),32!==ts(this.privateKey)&&yp.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const t=vp().keyFromPrivate(Yn(this.privateKey));Vh(this,"publicKey","0x"+t.getPublic(!1,"hex")),Vh(this,"compressedPublicKey","0x"+t.getPublic(!0,"hex")),Vh(this,"_isSigningKey",!0)}_addPoint(e){const t=vp().keyFromPublic(Yn(this.publicKey)),r=vp().keyFromPublic(Yn(e));return"0x"+t.pub.add(r.pub).encodeCompressed("hex")}signDigest(e){const t=vp().keyFromPrivate(Yn(this.privateKey)),r=Yn(e);32!==r.length&&yp.throwArgumentError("bad digest length","digest",e);const n=t.sign(r,{canonical:!0});return as({recoveryParam:n.recoveryParam,r:os("0x"+n.r.toString(16),32),s:os("0x"+n.s.toString(16),32)})}computeSharedSecret(e){const t=vp().keyFromPrivate(Yn(this.privateKey)),r=vp().keyFromPublic(Yn(bp(e)));return os("0x"+t.derive(r.getPublic()).toString(16),32)}static isSigningKey(e){return!(!e||!e._isSigningKey)}}function bp(e,t){const r=Yn(e);if(32===r.length){return new Ap(r).publicKey}return 33===r.length?"0x"+vp().keyFromPublic(r).getPublic(!1,"hex"):65===r.length?es(r):yp.throwArgumentError("invalid public or private key","key","[REDACTED]")}const Ep=new jn("transactions/5.8.0");var _p;function Pp(e){return"0x"===e?null:Gh(e)}function Sp(e){return"0x"===e?Hc:Lc.from(e)}!function(e){e[e.legacy=0]="legacy",e[e.eip2930=1]="eip2930",e[e.eip1559=2]="eip1559"}(_p||(_p={}));const Ip=[{name:"nonce",maxLength:32,numeric:!0},{name:"gasPrice",maxLength:32,numeric:!0},{name:"gasLimit",maxLength:32,numeric:!0},{name:"to",length:20},{name:"value",maxLength:32,numeric:!0},{name:"data"}],kp={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,type:!0,value:!0};function Rp(e){return Gh(rs(hs(rs(bp(e),1)),12))}function Tp(e,t){return Rp(function(e,t){const r=as(t),n={r:Yn(r.r),s:Yn(r.s)};return"0x"+vp().recoverPubKey(Yn(e),n,r.recoveryParam).encode("hex",!1)}(Yn(e),t))}function Np(e,t){const r=Qn(Lc.from(e).toHexString());return r.length>32&&Ep.throwArgumentError("invalid length for "+t,"transaction:"+t,e),r}function Op(e,t){return{address:Gh(e),storageKeys:(t||[]).map((t,r)=>(32!==ts(t)&&Ep.throwArgumentError("invalid access list storageKey",`accessList[${e}:${r}]`,t),t.toLowerCase()))}}function Cp(e){if(Array.isArray(e))return e.map((e,t)=>Array.isArray(e)?(e.length>2&&Ep.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${t}]`,e),Op(e[0],e[1])):Op(e.address,e.storageKeys));const t=Object.keys(e).map(t=>{const r=e[t].reduce((e,t)=>(e[t]=!0,e),{});return Op(t,Object.keys(r).sort())});return t.sort((e,t)=>e.address.localeCompare(t.address)),t}function xp(e){return Cp(e).map(e=>[e.address,e.storageKeys])}function Mp(e,t){if(null!=e.gasPrice){const t=Lc.from(e.gasPrice),r=Lc.from(e.maxFeePerGas||0);t.eq(r)||Ep.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:t,maxFeePerGas:r})}const r=[Np(e.chainId||0,"chainId"),Np(e.nonce||0,"nonce"),Np(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Np(e.maxFeePerGas||0,"maxFeePerGas"),Np(e.gasLimit||0,"gasLimit"),null!=e.to?Gh(e.to):"0x",Np(e.value||0,"value"),e.data||"0x",xp(e.accessList||[])];if(t){const e=as(t);r.push(Np(e.recoveryParam,"recoveryParam")),r.push(Qn(e.r)),r.push(Qn(e.s))}return ns(["0x02",Mh(r)])}function Up(e,t){const r=[Np(e.chainId||0,"chainId"),Np(e.nonce||0,"nonce"),Np(e.gasPrice||0,"gasPrice"),Np(e.gasLimit||0,"gasLimit"),null!=e.to?Gh(e.to):"0x",Np(e.value||0,"value"),e.data||"0x",xp(e.accessList||[])];if(t){const e=as(t);r.push(Np(e.recoveryParam,"recoveryParam")),r.push(Qn(e.r)),r.push(Qn(e.s))}return ns(["0x01",Mh(r)])}function Dp(e,t,r){try{const r=Sp(t[0]).toNumber();if(0!==r&&1!==r)throw new Error("bad recid");e.v=r}catch(e){Ep.throwArgumentError("invalid v for transaction type: 1","v",t[0])}e.r=os(t[1],32),e.s=os(t[2],32);try{const t=hs(r(e));e.from=Tp(t,{r:e.r,s:e.s,recoveryParam:e.v})}catch(e){}}function Lp(e){const t=Yn(e);if(t[0]>127)return function(e){const t=Lh(e);9!==t.length&&6!==t.length&&Ep.throwArgumentError("invalid raw transaction","rawTransaction",e);const r={nonce:Sp(t[0]).toNumber(),gasPrice:Sp(t[1]),gasLimit:Sp(t[2]),to:Pp(t[3]),value:Sp(t[4]),data:t[5],chainId:0};if(6===t.length)return r;try{r.v=Lc.from(t[6]).toNumber()}catch(e){return r}if(r.r=os(t[7],32),r.s=os(t[8],32),Lc.from(r.r).isZero()&&Lc.from(r.s).isZero())r.chainId=r.v,r.v=0;else{r.chainId=Math.floor((r.v-35)/2),r.chainId<0&&(r.chainId=0);let n=r.v-27;const s=t.slice(0,6);0!==r.chainId&&(s.push(es(r.chainId)),s.push("0x"),s.push("0x"),n-=2*r.chainId+8);const i=hs(Mh(s));try{r.from=Tp(i,{r:es(r.r),s:es(r.s),recoveryParam:n})}catch(e){}r.hash=hs(e)}return r.type=null,r}(t);switch(t[0]){case 1:return function(e){const t=Lh(e.slice(1));8!==t.length&&11!==t.length&&Ep.throwArgumentError("invalid component count for transaction type: 1","payload",es(e));const r={type:1,chainId:Sp(t[0]).toNumber(),nonce:Sp(t[1]).toNumber(),gasPrice:Sp(t[2]),gasLimit:Sp(t[3]),to:Pp(t[4]),value:Sp(t[5]),data:t[6],accessList:Cp(t[7])};return 8===t.length||(r.hash=hs(e),Dp(r,t.slice(8),Up)),r}(t);case 2:return function(e){const t=Lh(e.slice(1));9!==t.length&&12!==t.length&&Ep.throwArgumentError("invalid component count for transaction type: 2","payload",es(e));const r=Sp(t[2]),n=Sp(t[3]),s={type:2,chainId:Sp(t[0]).toNumber(),nonce:Sp(t[1]).toNumber(),maxPriorityFeePerGas:r,maxFeePerGas:n,gasPrice:null,gasLimit:Sp(t[4]),to:Pp(t[5]),value:Sp(t[6]),data:t[7],accessList:Cp(t[8])};return 9===t.length||(s.hash=hs(e),Dp(s,t.slice(9),Mp)),s}(t)}return Ep.throwError(`unsupported transaction type: ${t[0]}`,jn.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:t[0]})}var Bp=Object.freeze({__proto__:null,get TransactionTypes(){return _p},accessListify:Cp,computeAddress:Rp,parse:Lp,recoverAddress:Tp,serialize:function(e,t){if(null==e.type||0===e.type)return null!=e.accessList&&Ep.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",e),function(e,t){Yh(e,kp);const r=[];Ip.forEach(function(t){let n=e[t.name]||[];const s={};t.numeric&&(s.hexPad="left"),n=Yn(es(n,s)),t.length&&n.length!==t.length&&n.length>0&&Ep.throwArgumentError("invalid length for "+t.name,"transaction:"+t.name,n),t.maxLength&&(n=Qn(n),n.length>t.maxLength&&Ep.throwArgumentError("invalid length for "+t.name,"transaction:"+t.name,n)),r.push(es(n))});let n=0;if(null!=e.chainId?(n=e.chainId,"number"!=typeof n&&Ep.throwArgumentError("invalid transaction.chainId","transaction",e)):t&&!Vn(t)&&t.v>28&&(n=Math.floor((t.v-35)/2)),0!==n&&(r.push(es(n)),r.push("0x"),r.push("0x")),!t)return Mh(r);const s=as(t);let i=27+s.recoveryParam;return 0!==n?(r.pop(),r.pop(),r.pop(),i+=2*n+8,s.v>28&&s.v!==i&&Ep.throwArgumentError("transaction.chainId/signature.v mismatch","signature",t)):s.v!==i&&Ep.throwArgumentError("transaction.chainId/signature.v mismatch","signature",t),r.push(es(i)),r.push(Qn(Yn(s.r))),r.push(Qn(Yn(s.s))),Mh(r)}(e,t);switch(e.type){case 1:return Up(e,t);case 2:return Mp(e,t)}return Ep.throwError(`unsupported transaction type: ${e.type}`,jn.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:e.type})}});const Fp=new jn(Mf);class qp{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const e={},t=this.address.bind(this),r=this.bigNumber.bind(this),n=this.blockTag.bind(this),s=this.data.bind(this),i=this.hash.bind(this),o=this.hex.bind(this),a=this.number.bind(this),c=this.type.bind(this);return e.transaction={hash:i,type:c,accessList:qp.allowNull(this.accessList.bind(this),null),blockHash:qp.allowNull(i,null),blockNumber:qp.allowNull(a,null),transactionIndex:qp.allowNull(a,null),confirmations:qp.allowNull(a,null),from:t,gasPrice:qp.allowNull(r),maxPriorityFeePerGas:qp.allowNull(r),maxFeePerGas:qp.allowNull(r),gasLimit:r,to:qp.allowNull(t,null),value:r,nonce:a,data:s,r:qp.allowNull(this.uint256),s:qp.allowNull(this.uint256),v:qp.allowNull(a),creates:qp.allowNull(t,null),raw:qp.allowNull(s)},e.transactionRequest={from:qp.allowNull(t),nonce:qp.allowNull(a),gasLimit:qp.allowNull(r),gasPrice:qp.allowNull(r),maxPriorityFeePerGas:qp.allowNull(r),maxFeePerGas:qp.allowNull(r),to:qp.allowNull(t),value:qp.allowNull(r),data:qp.allowNull(e=>this.data(e,!0)),type:qp.allowNull(a),accessList:qp.allowNull(this.accessList.bind(this),null)},e.receiptLog={transactionIndex:a,blockNumber:a,transactionHash:i,address:t,topics:qp.arrayOf(i),data:s,logIndex:a,blockHash:i},e.receipt={to:qp.allowNull(this.address,null),from:qp.allowNull(this.address,null),contractAddress:qp.allowNull(t,null),transactionIndex:a,root:qp.allowNull(o),gasUsed:r,logsBloom:qp.allowNull(s),blockHash:i,transactionHash:i,logs:qp.arrayOf(this.receiptLog.bind(this)),blockNumber:a,confirmations:qp.allowNull(a,null),cumulativeGasUsed:r,effectiveGasPrice:qp.allowNull(r),status:qp.allowNull(a),type:c},e.block={hash:qp.allowNull(i),parentHash:i,number:a,timestamp:a,nonce:qp.allowNull(o),difficulty:this.difficulty.bind(this),gasLimit:r,gasUsed:r,miner:qp.allowNull(t),extraData:s,transactions:qp.allowNull(qp.arrayOf(i)),baseFeePerGas:qp.allowNull(r)},e.blockWithTransactions=Jh(e.block),e.blockWithTransactions.transactions=qp.allowNull(qp.arrayOf(this.transactionResponse.bind(this))),e.filter={fromBlock:qp.allowNull(n,void 0),toBlock:qp.allowNull(n,void 0),blockHash:qp.allowNull(i,void 0),address:qp.allowNull(t,void 0),topics:qp.allowNull(this.topics.bind(this),void 0)},e.filterLog={blockNumber:qp.allowNull(a),blockHash:qp.allowNull(i),transactionIndex:a,removed:qp.allowNull(this.boolean.bind(this)),address:t,data:qp.allowFalsish(s,"0x"),topics:qp.arrayOf(i),transactionHash:i,logIndex:a},e}accessList(e){return Cp(e||[])}number(e){return"0x"===e?0:Lc.from(e).toNumber()}type(e){return"0x"===e||null==e?0:Lc.from(e).toNumber()}bigNumber(e){return Lc.from(e)}boolean(e){if("boolean"==typeof e)return e;if("string"==typeof e){if("true"===(e=e.toLowerCase()))return!0;if("false"===e)return!1}throw new Error("invalid boolean - "+e)}hex(e,t){return"string"==typeof e&&(t||"0x"===e.substring(0,2)||(e="0x"+e),Xn(e))?e.toLowerCase():Fp.throwArgumentError("invalid hash","value",e)}data(e,t){const r=this.hex(e,t);if(r.length%2!=0)throw new Error("invalid data; odd-length - "+e);return r}address(e){return Gh(e)}callAddress(e){if(!Xn(e,32))return null;const t=Gh(rs(e,12));return"0x0000000000000000000000000000000000000000"===t?null:t}contractAddress(e){return function(e){let t=null;try{t=Gh(e.from)}catch(t){Bh.throwArgumentError("missing from address","transaction",e)}return Gh(rs(hs(Mh([t,Qn(Yn(Lc.from(e.nonce).toHexString()))])),12))}(e)}blockTag(e){if(null==e)return"latest";if("earliest"===e)return"0x0";switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}if("number"==typeof e||Xn(e))return ss(e);throw new Error("invalid blockTag")}hash(e,t){const r=this.hex(e,t);return 32!==ts(r)?Fp.throwArgumentError("invalid hash","value",e):r}difficulty(e){if(null==e)return null;const t=Lc.from(e);try{return t.toNumber()}catch(e){}return null}uint256(e){if(!Xn(e))throw new Error("invalid uint256");return os(e,32)}_block(e,t){null!=e.author&&null==e.miner&&(e.miner=e.author);const r=null!=e._difficulty?e._difficulty:e.difficulty,n=qp.check(t,e);return n._difficulty=null==r?null:Lc.from(r),n}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return qp.check(this.formats.transactionRequest,e)}transactionResponse(e){null!=e.gas&&null==e.gasLimit&&(e.gasLimit=e.gas),e.to&&Lc.from(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),null!=e.input&&null==e.data&&(e.data=e.input),null==e.to&&null==e.creates&&(e.creates=this.contractAddress(e)),1!==e.type&&2!==e.type||null!=e.accessList||(e.accessList=[]);const t=qp.check(this.formats.transaction,e);if(null!=e.chainId){let r=e.chainId;Xn(r)&&(r=Lc.from(r).toNumber()),t.chainId=r}else{let r=e.networkId;null==r&&null==t.v&&(r=e.chainId),Xn(r)&&(r=Lc.from(r).toNumber()),"number"!=typeof r&&null!=t.v&&(r=(t.v-35)/2,r<0&&(r=0),r=parseInt(r)),"number"!=typeof r&&(r=0),t.chainId=r}return t.blockHash&&"x"===t.blockHash.replace(/0/g,"")&&(t.blockHash=null),t}transaction(e){return Lp(e)}receiptLog(e){return qp.check(this.formats.receiptLog,e)}receipt(e){const t=qp.check(this.formats.receipt,e);if(null!=t.root)if(t.root.length<=4){const e=Lc.from(t.root).toNumber();0===e||1===e?(null!=t.status&&t.status!==e&&Fp.throwArgumentError("alt-root-status/status mismatch","value",{root:t.root,status:t.status}),t.status=e,delete t.root):Fp.throwArgumentError("invalid alt-root-status","value.root",t.root)}else 66!==t.root.length&&Fp.throwArgumentError("invalid root hash","value.root",t.root);return null!=t.status&&(t.byzantium=!0),t}topics(e){return Array.isArray(e)?e.map(e=>this.topics(e)):null!=e?this.hash(e,!0):null}filter(e){return qp.check(this.formats.filter,e)}filterLog(e){return qp.check(this.formats.filterLog,e)}static check(e,t){const r={};for(const n in e)try{const s=e[n](t[n]);void 0!==s&&(r[n]=s)}catch(e){throw e.checkKey=n,e.checkValue=t[n],e}return r}static allowNull(e,t){return function(r){return null==r?t:e(r)}}static allowFalsish(e,t){return function(r){return r?e(r):t}}static arrayOf(e){return function(t){if(!Array.isArray(t))throw new Error("not an array");const r=[];return t.forEach(function(t){r.push(e(t))}),r}}}var jp=function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})};const Gp=new jn(Mf);function Hp(e){return null==e?"null":(32!==ts(e)&&Gp.throwArgumentError("invalid topic","topic",e),e.toLowerCase())}function zp(e){for(e=e.slice();e.length>0&&null==e[e.length-1];)e.pop();return e.map(e=>{if(Array.isArray(e)){const t={};e.forEach(e=>{t[Hp(e)]=!0});const r=Object.keys(t);return r.sort(),r.join("|")}return Hp(e)}).join("&")}function Vp(e){if("string"==typeof e){if(32===ts(e=e.toLowerCase()))return"tx:"+e;if(-1===e.indexOf(":"))return e}else{if(Array.isArray(e))return"filter:*:"+zp(e);if(tl.isForkEvent(e))throw Gp.warn("not implemented"),new Error("not implemented");if(e&&"object"==typeof e)return"filter:"+(e.address||"*")+":"+zp(e.topics||[])}throw new Error("invalid event - "+e)}function Kp(){return(new Date).getTime()}function Wp(e){return new Promise(t=>{setTimeout(t,e)})}const Yp=["block","network","pending","poll"];let Jp=class{constructor(e,t,r){Vh(this,"tag",e),Vh(this,"listener",t),Vh(this,"once",r),this._lastBlockNumber=-2,this._inflight=!1}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const e=this.tag.split(":");return"tx"!==e[0]?null:e[1]}get filter(){const e=this.tag.split(":");if("filter"!==e[0])return null;const t=e[1],r=""===(n=e[2])?[]:n.split(/&/g).map(e=>{if(""===e)return[];const t=e.split("|").map(e=>"null"===e?null:e);return 1===t.length?t[0]:t});var n;const s={};return r.length>0&&(s.topics=r),t&&"*"!==t&&(s.address=t),s}pollable(){return this.tag.indexOf(":")>=0||Yp.indexOf(this.tag)>=0}};const Qp={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function $p(e){return os(Lc.from(e).toHexString(),32)}function Xp(e){return dl.encode(Jn([e,rs(mf(mf(e)),0,4)]))}const Zp=new RegExp("^(ipfs)://(.*)$","i"),em=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Zp,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function tm(e,t){try{return Zc(rm(e,t))}catch(e){}return null}function rm(e,t){if("0x"===e)return null;const r=Lc.from(rs(e,t,t+32)).toNumber(),n=Lc.from(rs(e,r,r+32)).toNumber();return rs(e,r+32,r+32+n)}function nm(e){return e.match(/^ipfs:\/\/ipfs\//i)?e=e.substring(12):e.match(/^ipfs:\/\//i)?e=e.substring(7):Gp.throwArgumentError("unsupported IPFS format","link",e),`https://gateway.ipfs.io/ipfs/${e}`}function sm(e){const t=Yn(e);if(t.length>32)throw new Error("internal; should not happen");const r=new Uint8Array(32);return r.set(t,32-t.length),r}function im(e){if(e.length%32==0)return e;const t=new Uint8Array(32*Math.ceil(e.length/32));return t.set(e),t}function om(e){const t=[];let r=0;for(let n=0;n<e.length;n++)t.push(null),r+=32;for(let n=0;n<e.length;n++){const s=Yn(e[n]);t[n]=sm(r),t.push(sm(s.length)),t.push(im(s)),r+=32+32*Math.ceil(s.length/32)}return ns(t)}class am{constructor(e,t,r,n){Vh(this,"provider",e),Vh(this,"name",r),Vh(this,"address",e.formatter.address(t)),Vh(this,"_resolvedAddress",n)}supportsWildcard(){return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then(e=>Lc.from(e).eq(1)).catch(e=>{if(e.code===jn.errors.CALL_EXCEPTION)return!1;throw this._supportsEip2544=null,e})),this._supportsEip2544}_fetch(e,t){return jp(this,void 0,void 0,function*(){const r={to:this.address,ccipReadEnabled:!0,data:ns([e,kh(this.name),t||"0x"])};let n=!1;(yield this.supportsWildcard())&&(n=!0,r.data=ns(["0x9061b923",om([Rh(this.name),r.data])]));try{let e=yield this.provider.call(r);return Yn(e).length%32==4&&Gp.throwError("resolver threw error",jn.errors.CALL_EXCEPTION,{transaction:r,data:e}),n&&(e=rm(e,0)),e}catch(e){if(e.code===jn.errors.CALL_EXCEPTION)return null;throw e}})}_fetchBytes(e,t){return jp(this,void 0,void 0,function*(){const r=yield this._fetch(e,t);return null!=r?rm(r,0):null})}_getAddress(e,t){const r=Qp[String(e)];if(null==r&&Gp.throwError(`unsupported coin type: ${e}`,jn.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`}),"eth"===r.ilk)return this.provider.formatter.address(t);const n=Yn(t);if(null!=r.p2pkh){const e=t.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(e){const t=parseInt(e[1],16);if(e[2].length===2*t&&t>=1&&t<=75)return Xp(Jn([[r.p2pkh],"0x"+e[2]]))}}if(null!=r.p2sh){const e=t.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(e){const t=parseInt(e[1],16);if(e[2].length===2*t&&t>=1&&t<=75)return Xp(Jn([[r.p2sh],"0x"+e[2]]))}}if(null!=r.prefix){const e=n[1];let t=n[0];if(0===t?20!==e&&32!==e&&(t=-1):t=-1,t>=0&&n.length===2+e&&e>=1&&e<=75){const e=xf.toWords(n.slice(2));return e.unshift(t),xf.encode(r.prefix,e)}}return null}getAddress(e){return jp(this,void 0,void 0,function*(){if(null==e&&(e=60),60===e)try{const e=yield this._fetch("0x3b3b57de");return"0x"===e||"0x0000000000000000000000000000000000000000000000000000000000000000"===e?null:this.provider.formatter.callAddress(e)}catch(e){if(e.code===jn.errors.CALL_EXCEPTION)return null;throw e}const t=yield this._fetchBytes("0xf1cb7e06",$p(e));if(null==t||"0x"===t)return null;const r=this._getAddress(e,t);return null==r&&Gp.throwError("invalid or unsupported coin data",jn.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:t}),r})}getAvatar(){return jp(this,void 0,void 0,function*(){const e=[{type:"name",content:this.name}];try{const t=yield this.getText("avatar");if(null==t)return null;for(let r=0;r<em.length;r++){const n=t.match(em[r]);if(null==n)continue;const s=n[1].toLowerCase();switch(s){case"https":return e.push({type:"url",content:t}),{linkage:e,url:t};case"data":return e.push({type:"data",content:t}),{linkage:e,url:t};case"ipfs":return e.push({type:"ipfs",content:t}),{linkage:e,url:nm(t)};case"erc721":case"erc1155":{const r="erc721"===s?"0xc87b56dd":"0x0e89341c";e.push({type:s,content:t});const i=this._resolvedAddress||(yield this.getAddress()),o=(n[2]||"").split("/");if(2!==o.length)return null;const a=yield this.provider.formatter.address(o[0]),c=os(Lc.from(o[1]).toHexString(),32);if("erc721"===s){const t=this.provider.formatter.callAddress(yield this.provider.call({to:a,data:ns(["0x6352211e",c])}));if(i!==t)return null;e.push({type:"owner",content:t})}else if("erc1155"===s){const t=Lc.from(yield this.provider.call({to:a,data:ns(["0x00fdd58e",os(i,32),c])}));if(t.isZero())return null;e.push({type:"balance",content:t.toString()})}const h={to:this.provider.formatter.address(o[0]),data:ns([r,c])};let u=tm(yield this.provider.call(h),0);if(null==u)return null;e.push({type:"metadata-url-base",content:u}),"erc1155"===s&&(u=u.replace("{id}",c.substring(2)),e.push({type:"metadata-url-expanded",content:u})),u.match(/^ipfs:/i)&&(u=nm(u)),e.push({type:"metadata-url",content:u});const l=yield Ef(u);if(!l)return null;e.push({type:"metadata",content:JSON.stringify(l)});let d=l.image;if("string"!=typeof d)return null;if(d.match(/^(https:\/\/|data:)/i));else{if(null==d.match(Zp))return null;e.push({type:"url-ipfs",content:d}),d=nm(d)}return e.push({type:"url",content:d}),{linkage:e,url:d}}}}}catch(e){}return null})}getContentHash(){return jp(this,void 0,void 0,function*(){const e=yield this._fetchBytes("0xbc1c58d1");if(null==e||"0x"===e)return null;const t=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const e=parseInt(t[3],16);if(t[4].length===2*e)return"ipfs://"+dl.encode("0x"+t[1])}const r=e.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(r){const e=parseInt(r[3],16);if(r[4].length===2*e)return"ipns://"+dl.encode("0x"+r[1])}const n=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(n&&64===n[1].length)return"bzz://"+n[1];const s=e.match(/^0x90b2c605([0-9a-f]*)$/);if(s&&68===s[1].length){const e={"=":"","+":"-","/":"_"},t=nh("0x"+s[1]).replace(/[=+\/]/g,t=>e[t]);return"sia://"+t}return Gp.throwError("invalid or unsupported content hash data",jn.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})})}getText(e){return jp(this,void 0,void 0,function*(){let t=Xc(e);t=Jn([$p(64),$p(t.length),t]),t.length%32!=0&&(t=Jn([t,os("0x",32-e.length%32)]));const r=yield this._fetchBytes("0x59d1d43c",es(t));return null==r||"0x"===r?null:Zc(r)})}}let cm=null,hm=1;class um extends rl{constructor(e){if(super(),this._events=[],this._emitted={block:-2},this.disableCcipRead=!1,this.formatter=new.target.getFormatter(),Vh(this,"anyNetwork","any"===e),this.anyNetwork&&(e=this.detectNetwork()),e instanceof Promise)this._networkPromise=e,e.catch(e=>{}),this._ready().catch(e=>{});else{const t=Kh(new.target,"getNetwork")(e);t?(Vh(this,"_network",t),this.emit("network",t,null)):Gp.throwArgumentError("invalid network","network",e)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._maxFilterBlockRange=10,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return jp(this,void 0,void 0,function*(){if(null==this._network){let e=null;if(this._networkPromise)try{e=yield this._networkPromise}catch(e){}null==e&&(e=yield this.detectNetwork()),e||Gp.throwError("no network detected",jn.errors.UNKNOWN_ERROR,{}),null==this._network&&(this.anyNetwork?this._network=e:Vh(this,"_network",e),this.emit("network",e,null))}return this._network})}get ready(){return _f(()=>this._ready().then(e=>e,e=>{if(e.code!==jn.errors.NETWORK_ERROR||"noNetwork"!==e.event)throw e}))}static getFormatter(){return null==cm&&(cm=new qp),cm}static getNetwork(e){return ul(null==e?"homestead":e)}ccipReadFetch(e,t,r){return jp(this,void 0,void 0,function*(){if(this.disableCcipRead||0===r.length)return null;const n=e.to.toLowerCase(),s=t.toLowerCase(),i=[];for(let e=0;e<r.length;e++){const t=r[e],o=t.replace("{sender}",n).replace("{data}",s),a=t.indexOf("{data}")>=0?null:JSON.stringify({data:s,sender:n}),c=yield Ef({url:o,errorPassThrough:!0},a,(e,t)=>(e.status=t.statusCode,e));if(c.data)return c.data;const h=c.message||"unknown error";if(c.status>=400&&c.status<500)return Gp.throwError(`response not found during CCIP fetch: ${h}`,jn.errors.SERVER_ERROR,{url:t,errorMessage:h});i.push(h)}return Gp.throwError(`error encountered during CCIP fetch: ${i.map(e=>JSON.stringify(e)).join(", ")}`,jn.errors.SERVER_ERROR,{urls:r,errorMessages:i})})}_getInternalBlockNumber(e){return jp(this,void 0,void 0,function*(){if(yield this._ready(),e>0)for(;this._internalBlockNumber;){const t=this._internalBlockNumber;try{const r=yield t;if(Kp()-r.respTime<=e)return r.blockNumber;break}catch(e){if(this._internalBlockNumber===t)break}}const t=Kp(),r=Wh({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then(e=>null,e=>e)}).then(({blockNumber:e,networkError:n})=>{if(n)throw this._internalBlockNumber===r&&(this._internalBlockNumber=null),n;const s=Kp();return(e=Lc.from(e).toNumber())<this._maxInternalBlockNumber&&(e=this._maxInternalBlockNumber),this._maxInternalBlockNumber=e,this._setFastBlockNumber(e),{blockNumber:e,reqTime:t,respTime:s}});return this._internalBlockNumber=r,r.catch(e=>{this._internalBlockNumber===r&&(this._internalBlockNumber=null)}),(yield r).blockNumber})}poll(){return jp(this,void 0,void 0,function*(){const e=hm++,t=[];let r=null;try{r=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(e){return void this.emit("error",e)}if(this._setFastBlockNumber(r),this.emit("poll",e,r),r!==this._lastBlockNumber){if(-2===this._emitted.block&&(this._emitted.block=r-1),Math.abs(this._emitted.block-r)>1e3)Gp.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${r})`),this.emit("error",Gp.makeError("network block skew detected",jn.errors.NETWORK_ERROR,{blockNumber:r,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",r);else for(let e=this._emitted.block+1;e<=r;e++)this.emit("block",e);this._emitted.block!==r&&(this._emitted.block=r,Object.keys(this._emitted).forEach(e=>{if("block"===e)return;const t=this._emitted[e];"pending"!==t&&r-t>12&&delete this._emitted[e]})),-2===this._lastBlockNumber&&(this._lastBlockNumber=r-1),this._events.forEach(e=>{switch(e.type){case"tx":{const r=e.hash;let n=this.getTransactionReceipt(r).then(e=>e&&null!=e.blockNumber?(this._emitted["t:"+r]=e.blockNumber,this.emit(r,e),null):null).catch(e=>{this.emit("error",e)});t.push(n);break}case"filter":if(!e._inflight){e._inflight=!0,-2===e._lastBlockNumber&&(e._lastBlockNumber=r-1);const n=e.filter;n.fromBlock=e._lastBlockNumber+1,n.toBlock=r;const s=n.toBlock-this._maxFilterBlockRange;s>n.fromBlock&&(n.fromBlock=s),n.fromBlock<0&&(n.fromBlock=0);const i=this.getLogs(n).then(t=>{e._inflight=!1,0!==t.length&&t.forEach(t=>{t.blockNumber>e._lastBlockNumber&&(e._lastBlockNumber=t.blockNumber),this._emitted["b:"+t.blockHash]=t.blockNumber,this._emitted["t:"+t.transactionHash]=t.blockNumber,this.emit(n,t)})}).catch(t=>{this.emit("error",t),e._inflight=!1});t.push(i)}}}),this._lastBlockNumber=r,Promise.all(t).then(()=>{this.emit("didPoll",e)}).catch(e=>{this.emit("error",e)})}else this.emit("didPoll",e)})}resetEventsBlock(e){this._lastBlockNumber=e-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return jp(this,void 0,void 0,function*(){return Gp.throwError("provider does not support network detection",jn.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})})}getNetwork(){return jp(this,void 0,void 0,function*(){const e=yield this._ready(),t=yield this.detectNetwork();if(e.chainId!==t.chainId){if(this.anyNetwork)return this._network=t,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",t,e),yield Wp(0),this._network;const r=Gp.makeError("underlying network changed",jn.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:t});throw this.emit("error",r),r}return e})}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then(e=>{this._setFastBlockNumber(e)},e=>{}),null!=this._fastBlockNumber?this._fastBlockNumber:-1}get polling(){return null!=this._poller}set polling(e){e&&!this._poller?(this._poller=setInterval(()=>{this.poll()},this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout(()=>{this.poll(),this._bootstrapPoll=setTimeout(()=>{this._poller||this.poll(),this._bootstrapPoll=null},this.pollingInterval)},0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if("number"!=typeof e||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval(()=>{this.poll()},this._pollingInterval))}_getFastBlockNumber(){const e=Kp();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then(e=>((null==this._fastBlockNumber||e>this._fastBlockNumber)&&(this._fastBlockNumber=e),this._fastBlockNumber))),this._fastBlockNumberPromise}_setFastBlockNumber(e){null!=this._fastBlockNumber&&e<this._fastBlockNumber||(this._fastQueryDate=Kp(),(null==this._fastBlockNumber||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))}waitForTransaction(e,t,r){return jp(this,void 0,void 0,function*(){return this._waitForTransaction(e,null==t?1:t,r||0,null)})}_waitForTransaction(e,t,r,n){return jp(this,void 0,void 0,function*(){const s=yield this.getTransactionReceipt(e);return(s?s.confirmations:0)>=t?s:new Promise((s,i)=>{const o=[];let a=!1;const c=function(){return!!a||(a=!0,o.forEach(e=>{e()}),!1)},h=e=>{e.confirmations<t||c()||s(e)};if(this.on(e,h),o.push(()=>{this.removeListener(e,h)}),n){let r=n.startBlock,s=null;const h=o=>jp(this,void 0,void 0,function*(){a||(yield Wp(1e3),this.getTransactionCount(n.from).then(u=>jp(this,void 0,void 0,function*(){if(!a){if(u<=n.nonce)r=o;else{{const t=yield this.getTransaction(e);if(t&&null!=t.blockNumber)return}for(null==s&&(s=r-3,s<n.startBlock&&(s=n.startBlock));s<=o;){if(a)return;const r=yield this.getBlockWithTransactions(s);for(let s=0;s<r.transactions.length;s++){const o=r.transactions[s];if(o.hash===e)return;if(o.from===n.from&&o.nonce===n.nonce){if(a)return;const r=yield this.waitForTransaction(o.hash,t);if(c())return;let s="replaced";return o.data===n.data&&o.to===n.to&&o.value.eq(n.value)?s="repriced":"0x"===o.data&&o.from===o.to&&o.value.isZero()&&(s="cancelled"),void i(Gp.makeError("transaction was replaced",jn.errors.TRANSACTION_REPLACED,{cancelled:"replaced"===s||"cancelled"===s,reason:s,replacement:this._wrapTransaction(o),hash:e,receipt:r}))}}s++}}a||this.once("block",h)}}),e=>{a||this.once("block",h)}))});if(a)return;this.once("block",h),o.push(()=>{this.removeListener("block",h)})}if("number"==typeof r&&r>0){const e=setTimeout(()=>{c()||i(Gp.makeError("timeout exceeded",jn.errors.TIMEOUT,{timeout:r}))},r);e.unref&&e.unref(),o.push(()=>{clearTimeout(e)})}})})}getBlockNumber(){return jp(this,void 0,void 0,function*(){return this._getInternalBlockNumber(0)})}getGasPrice(){return jp(this,void 0,void 0,function*(){yield this.getNetwork();const e=yield this.perform("getGasPrice",{});try{return Lc.from(e)}catch(t){return Gp.throwError("bad result from backend",jn.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:t})}})}getBalance(e,t){return jp(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Wh({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),n=yield this.perform("getBalance",r);try{return Lc.from(n)}catch(e){return Gp.throwError("bad result from backend",jn.errors.SERVER_ERROR,{method:"getBalance",params:r,result:n,error:e})}})}getTransactionCount(e,t){return jp(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Wh({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),n=yield this.perform("getTransactionCount",r);try{return Lc.from(n).toNumber()}catch(e){return Gp.throwError("bad result from backend",jn.errors.SERVER_ERROR,{method:"getTransactionCount",params:r,result:n,error:e})}})}getCode(e,t){return jp(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Wh({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),n=yield this.perform("getCode",r);try{return es(n)}catch(e){return Gp.throwError("bad result from backend",jn.errors.SERVER_ERROR,{method:"getCode",params:r,result:n,error:e})}})}getStorageAt(e,t,r){return jp(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield Wh({address:this._getAddress(e),blockTag:this._getBlockTag(r),position:Promise.resolve(t).then(e=>ss(e))}),s=yield this.perform("getStorageAt",n);try{return es(s)}catch(e){return Gp.throwError("bad result from backend",jn.errors.SERVER_ERROR,{method:"getStorageAt",params:n,result:s,error:e})}})}_wrapTransaction(e,t,r){if(null!=t&&32!==ts(t))throw new Error("invalid response - sendTransaction");const n=e;return null!=t&&e.hash!==t&&Gp.throwError("Transaction hash mismatch from Provider.sendTransaction.",jn.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:t}),n.wait=(t,n)=>jp(this,void 0,void 0,function*(){let s;null==t&&(t=1),null==n&&(n=0),0!==t&&null!=r&&(s={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:r});const i=yield this._waitForTransaction(e.hash,t,n,s);return null==i&&0===t?null:(this._emitted["t:"+e.hash]=i.blockNumber,0===i.status&&Gp.throwError("transaction failed",jn.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:i}),i)}),n}sendTransaction(e){return jp(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Promise.resolve(e).then(e=>es(e)),r=this.formatter.transaction(e);null==r.confirmations&&(r.confirmations=0);const n=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const e=yield this.perform("sendTransaction",{signedTransaction:t});return this._wrapTransaction(r,e,n)}catch(e){throw e.transaction=r,e.transactionHash=r.hash,e}})}_getTransactionRequest(e){return jp(this,void 0,void 0,function*(){const t=yield e,r={};return["from","to"].forEach(e=>{null!=t[e]&&(r[e]=Promise.resolve(t[e]).then(e=>e?this._getAddress(e):null))}),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach(e=>{null!=t[e]&&(r[e]=Promise.resolve(t[e]).then(e=>e?Lc.from(e):null))}),["type"].forEach(e=>{null!=t[e]&&(r[e]=Promise.resolve(t[e]).then(e=>null!=e?e:null))}),t.accessList&&(r.accessList=this.formatter.accessList(t.accessList)),["data"].forEach(e=>{null!=t[e]&&(r[e]=Promise.resolve(t[e]).then(e=>e?es(e):null))}),this.formatter.transactionRequest(yield Wh(r))})}_getFilter(e){return jp(this,void 0,void 0,function*(){e=yield e;const t={};return null!=e.address&&(t.address=this._getAddress(e.address)),["blockHash","topics"].forEach(r=>{null!=e[r]&&(t[r]=e[r])}),["fromBlock","toBlock"].forEach(r=>{null!=e[r]&&(t[r]=this._getBlockTag(e[r]))}),this.formatter.filter(yield Wh(t))})}_call(e,t,r){return jp(this,void 0,void 0,function*(){r>=10&&Gp.throwError("CCIP read exceeded maximum redirections",jn.errors.SERVER_ERROR,{redirects:r,transaction:e});const n=e.to,s=yield this.perform("call",{transaction:e,blockTag:t});if(r>=0&&"latest"===t&&null!=n&&"0x556f1830"===s.substring(0,10)&&ts(s)%32==4)try{const i=rs(s,4),o=rs(i,0,32);Lc.from(o).eq(n)||Gp.throwError("CCIP Read sender did not match",jn.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const a=[],c=Lc.from(rs(i,32,64)).toNumber(),h=Lc.from(rs(i,c,c+32)).toNumber(),u=rs(i,c+32);for(let t=0;t<h;t++){const r=tm(u,32*t);null==r&&Gp.throwError("CCIP Read contained corrupt URL string",jn.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s}),a.push(r)}const l=rm(i,64);Lc.from(rs(i,100,128)).isZero()||Gp.throwError("CCIP Read callback selector included junk",jn.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const d=rs(i,96,100),f=rm(i,128),p=yield this.ccipReadFetch(e,l,a);null==p&&Gp.throwError("CCIP Read disabled or provided no URLs",jn.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const m={to:n,data:ns([d,om([p,f])])};return this._call(m,t,r+1)}catch(e){if(e.code===jn.errors.SERVER_ERROR)throw e}try{return es(s)}catch(r){return Gp.throwError("bad result from backend",jn.errors.SERVER_ERROR,{method:"call",params:{transaction:e,blockTag:t},result:s,error:r})}})}call(e,t){return jp(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Wh({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(t),ccipReadEnabled:Promise.resolve(e.ccipReadEnabled)});return this._call(r.transaction,r.blockTag,r.ccipReadEnabled?0:-1)})}estimateGas(e){return jp(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Wh({transaction:this._getTransactionRequest(e)}),r=yield this.perform("estimateGas",t);try{return Lc.from(r)}catch(e){return Gp.throwError("bad result from backend",jn.errors.SERVER_ERROR,{method:"estimateGas",params:t,result:r,error:e})}})}_getAddress(e){return jp(this,void 0,void 0,function*(){"string"!=typeof(e=yield e)&&Gp.throwArgumentError("invalid address or ENS name","name",e);const t=yield this.resolveName(e);return null==t&&Gp.throwError("ENS name not configured",jn.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`}),t})}_getBlock(e,t){return jp(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;let r=-128;const n={includeTransactions:!!t};if(Xn(e,32))n.blockHash=e;else try{n.blockTag=yield this._getBlockTag(e),Xn(n.blockTag)&&(r=parseInt(n.blockTag.substring(2),16))}catch(t){Gp.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}return _f(()=>jp(this,void 0,void 0,function*(){const e=yield this.perform("getBlock",n);if(null==e)return null!=n.blockHash&&null==this._emitted["b:"+n.blockHash]||null!=n.blockTag&&r>this._emitted.block?null:void 0;if(t){let t=null;for(let r=0;r<e.transactions.length;r++){const n=e.transactions[r];if(null==n.blockNumber)n.confirmations=0;else if(null==n.confirmations){null==t&&(t=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let e=t-n.blockNumber+1;e<=0&&(e=1),n.confirmations=e}}const r=this.formatter.blockWithTransactions(e);return r.transactions=r.transactions.map(e=>this._wrapTransaction(e)),r}return this.formatter.block(e)}),{oncePoll:this})})}getBlock(e){return this._getBlock(e,!1)}getBlockWithTransactions(e){return this._getBlock(e,!0)}getTransaction(e){return jp(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return _f(()=>jp(this,void 0,void 0,function*(){const r=yield this.perform("getTransaction",t);if(null==r)return null==this._emitted["t:"+e]?null:void 0;const n=this.formatter.transactionResponse(r);if(null==n.blockNumber)n.confirmations=0;else if(null==n.confirmations){let e=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-n.blockNumber+1;e<=0&&(e=1),n.confirmations=e}return this._wrapTransaction(n)}),{oncePoll:this})})}getTransactionReceipt(e){return jp(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return _f(()=>jp(this,void 0,void 0,function*(){const r=yield this.perform("getTransactionReceipt",t);if(null==r)return null==this._emitted["t:"+e]?null:void 0;if(null==r.blockHash)return;const n=this.formatter.receipt(r);if(null==n.blockNumber)n.confirmations=0;else if(null==n.confirmations){let e=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-n.blockNumber+1;e<=0&&(e=1),n.confirmations=e}return n}),{oncePoll:this})})}getLogs(e){return jp(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Wh({filter:this._getFilter(e)}),r=yield this.perform("getLogs",t);return r.forEach(e=>{null==e.removed&&(e.removed=!1)}),qp.arrayOf(this.formatter.filterLog.bind(this.formatter))(r)})}getEtherPrice(){return jp(this,void 0,void 0,function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})})}_getBlockTag(e){return jp(this,void 0,void 0,function*(){if("number"==typeof(e=yield e)&&e<0){e%1&&Gp.throwArgumentError("invalid BlockTag","blockTag",e);let t=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return t+=e,t<0&&(t=0),this.formatter.blockTag(t)}return this.formatter.blockTag(e)})}getResolver(e){return jp(this,void 0,void 0,function*(){let t=e;for(;;){if(""===t||"."===t)return null;if("eth"!==e&&"eth"===t)return null;const r=yield this._getResolver(t,"getResolver");if(null!=r){const n=new am(this,r,e);return t===e||(yield n.supportsWildcard())?n:null}t=t.split(".").slice(1).join(".")}})}_getResolver(e,t){return jp(this,void 0,void 0,function*(){null==t&&(t="ENS");const r=yield this.getNetwork();r.ensAddress||Gp.throwError("network does not support ENS",jn.errors.UNSUPPORTED_OPERATION,{operation:t,network:r.name});try{const t=yield this.call({to:r.ensAddress,data:"0x0178b8bf"+kh(e).substring(2)});return this.formatter.callAddress(t)}catch(e){}return null})}resolveName(e){return jp(this,void 0,void 0,function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(t){if(Xn(e))throw t}"string"!=typeof e&&Gp.throwArgumentError("invalid ENS name","name",e);const t=yield this.getResolver(e);return t?yield t.getAddress():null})}lookupAddress(e){return jp(this,void 0,void 0,function*(){e=yield e;const t=(e=this.formatter.address(e)).substring(2).toLowerCase()+".addr.reverse",r=yield this._getResolver(t,"lookupAddress");if(null==r)return null;const n=tm(yield this.call({to:r,data:"0x691f3431"+kh(t).substring(2)}),0);return(yield this.resolveName(n))!=e?null:n})}getAvatar(e){return jp(this,void 0,void 0,function*(){let t=null;if(Xn(e)){const r=this.formatter.address(e).substring(2).toLowerCase()+".addr.reverse",n=yield this._getResolver(r,"getAvatar");if(!n)return null;t=new am(this,n,r);try{const e=yield t.getAvatar();if(e)return e.url}catch(e){if(e.code!==jn.errors.CALL_EXCEPTION)throw e}try{const e=tm(yield this.call({to:n,data:"0x691f3431"+kh(r).substring(2)}),0);t=yield this.getResolver(e)}catch(e){if(e.code!==jn.errors.CALL_EXCEPTION)throw e;return null}}else if(t=yield this.getResolver(e),!t)return null;const r=yield t.getAvatar();return null==r?null:r.url})}perform(e,t){return Gp.throwError(e+" not implemented",jn.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter(e=>e.pollable()).length>0}_stopEvent(e){this.polling=this._events.filter(e=>e.pollable()).length>0}_addEventListener(e,t,r){const n=new Jp(Vp(e),t,r);return this._events.push(n),this._startEvent(n),this}on(e,t){return this._addEventListener(e,t,!1)}once(e,t){return this._addEventListener(e,t,!0)}emit(e,...t){let r=!1,n=[],s=Vp(e);return this._events=this._events.filter(e=>e.tag!==s||(setTimeout(()=>{e.listener.apply(this,t)},0),r=!0,!e.once||(n.push(e),!1))),n.forEach(e=>{this._stopEvent(e)}),r}listenerCount(e){if(!e)return this._events.length;let t=Vp(e);return this._events.filter(e=>e.tag===t).length}listeners(e){if(null==e)return this._events.map(e=>e.listener);let t=Vp(e);return this._events.filter(e=>e.tag===t).map(e=>e.listener)}off(e,t){if(null==t)return this.removeAllListeners(e);const r=[];let n=!1,s=Vp(e);return this._events=this._events.filter(e=>e.tag!==s||e.listener!=t||(!!n||(n=!0,r.push(e),!1))),r.forEach(e=>{this._stopEvent(e)}),this}removeAllListeners(e){let t=[];if(null==e)t=this._events,this._events=[];else{const r=Vp(e);this._events=this._events.filter(e=>e.tag!==r||(t.push(e),!1))}return t.forEach(e=>{this._stopEvent(e)}),this}}var lm=function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})};const dm=new jn("abstract-signer/5.8.0"),fm=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],pm=[jn.errors.INSUFFICIENT_FUNDS,jn.errors.NONCE_EXPIRED,jn.errors.REPLACEMENT_UNDERPRICED];class mm{constructor(){dm.checkAbstract(new.target,mm),Vh(this,"_isSigner",!0)}getBalance(e){return lm(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)})}getTransactionCount(e){return lm(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)})}estimateGas(e){return lm(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const t=yield Wh(this.checkTransaction(e));return yield this.provider.estimateGas(t)})}call(e,t){return lm(this,void 0,void 0,function*(){this._checkProvider("call");const r=yield Wh(this.checkTransaction(e));return yield this.provider.call(r,t)})}sendTransaction(e){return lm(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const t=yield this.populateTransaction(e),r=yield this.signTransaction(t);return yield this.provider.sendTransaction(r)})}getChainId(){return lm(this,void 0,void 0,function*(){this._checkProvider("getChainId");return(yield this.provider.getNetwork()).chainId})}getGasPrice(){return lm(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return lm(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(e){return lm(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)})}checkTransaction(e){for(const t in e)-1===fm.indexOf(t)&&dm.throwArgumentError("invalid transaction key: "+t,"transaction",e);const t=Jh(e);return null==t.from?t.from=this.getAddress():t.from=Promise.all([Promise.resolve(t.from),this.getAddress()]).then(t=>(t[0].toLowerCase()!==t[1].toLowerCase()&&dm.throwArgumentError("from address mismatch","transaction",e),t[0])),t}populateTransaction(e){return lm(this,void 0,void 0,function*(){const t=yield Wh(this.checkTransaction(e));null!=t.to&&(t.to=Promise.resolve(t.to).then(e=>lm(this,void 0,void 0,function*(){if(null==e)return null;const t=yield this.resolveName(e);return null==t&&dm.throwArgumentError("provided ENS name resolves to null","tx.to",e),t})),t.to.catch(e=>{}));const r=null!=t.maxFeePerGas||null!=t.maxPriorityFeePerGas;if(null==t.gasPrice||2!==t.type&&!r?0!==t.type&&1!==t.type||!r||dm.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e):dm.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e),2!==t.type&&null!=t.type||null==t.maxFeePerGas||null==t.maxPriorityFeePerGas)if(0===t.type||1===t.type)null==t.gasPrice&&(t.gasPrice=this.getGasPrice());else{const e=yield this.getFeeData();if(null==t.type)if(null!=e.maxFeePerGas&&null!=e.maxPriorityFeePerGas)if(t.type=2,null!=t.gasPrice){const e=t.gasPrice;delete t.gasPrice,t.maxFeePerGas=e,t.maxPriorityFeePerGas=e}else null==t.maxFeePerGas&&(t.maxFeePerGas=e.maxFeePerGas),null==t.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas);else null!=e.gasPrice?(r&&dm.throwError("network does not support EIP-1559",jn.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),null==t.gasPrice&&(t.gasPrice=e.gasPrice),t.type=0):dm.throwError("failed to get consistent fee data",jn.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else 2===t.type&&(null==t.maxFeePerGas&&(t.maxFeePerGas=e.maxFeePerGas),null==t.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas))}else t.type=2;return null==t.nonce&&(t.nonce=this.getTransactionCount("pending")),null==t.gasLimit&&(t.gasLimit=this.estimateGas(t).catch(e=>{if(pm.indexOf(e.code)>=0)throw e;return dm.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",jn.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,tx:t})})),null==t.chainId?t.chainId=this.getChainId():t.chainId=Promise.all([Promise.resolve(t.chainId),this.getChainId()]).then(t=>(0!==t[1]&&t[0]!==t[1]&&dm.throwArgumentError("chainId address mismatch","transaction",e),t[0])),yield Wh(t)})}_checkProvider(e){this.provider||dm.throwError("missing provider",jn.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!(!e||!e._isSigner)}}var gm=function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})};const ym=new jn(Mf),wm=["call","estimateGas"];function vm(e,t){if(null==e)return null;if("string"==typeof e.message&&e.message.match("reverted")){const r=Xn(e.data)?e.data:null;if(!t||r)return{message:e.message,data:r}}if("object"==typeof e){for(const r in e){const n=vm(e[r],t);if(n)return n}return null}if("string"==typeof e)try{return vm(JSON.parse(e),t)}catch(e){}return null}function Am(e,t,r){const n=r.transaction||r.signedTransaction;if("call"===e){const e=vm(t,!0);if(e)return e.data;ym.throwError("missing revert data in call exception; Transaction reverted without a reason string",jn.errors.CALL_EXCEPTION,{data:"0x",transaction:n,error:t})}if("estimateGas"===e){let r=vm(t.body,!1);null==r&&(r=vm(t,!1)),r&&ym.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",jn.errors.UNPREDICTABLE_GAS_LIMIT,{reason:r.message,method:e,transaction:n,error:t})}let s=t.message;throw t.code===jn.errors.SERVER_ERROR&&t.error&&"string"==typeof t.error.message?s=t.error.message:"string"==typeof t.body?s=t.body:"string"==typeof t.responseText&&(s=t.responseText),s=(s||"").toLowerCase(),s.match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)&&ym.throwError("insufficient funds for intrinsic transaction cost",jn.errors.INSUFFICIENT_FUNDS,{error:t,method:e,transaction:n}),s.match(/nonce (is )?too low/i)&&ym.throwError("nonce has already been used",jn.errors.NONCE_EXPIRED,{error:t,method:e,transaction:n}),s.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&ym.throwError("replacement fee too low",jn.errors.REPLACEMENT_UNDERPRICED,{error:t,method:e,transaction:n}),s.match(/only replay-protected/i)&&ym.throwError("legacy pre-eip-155 transactions not supported",jn.errors.UNSUPPORTED_OPERATION,{error:t,method:e,transaction:n}),wm.indexOf(e)>=0&&s.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)&&ym.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",jn.errors.UNPREDICTABLE_GAS_LIMIT,{error:t,method:e,transaction:n}),t}function bm(e){return new Promise(function(t){setTimeout(t,e)})}function Em(e){if(e.error){const t=new Error(e.error.message);throw t.code=e.error.code,t.data=e.error.data,t}return e.result}function _m(e){return e?e.toLowerCase():e}const Pm={};class Sm extends mm{constructor(e,t,r){if(super(),e!==Pm)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");Vh(this,"provider",t),null==r&&(r=0),"string"==typeof r?(Vh(this,"_address",this.provider.formatter.address(r)),Vh(this,"_index",null)):"number"==typeof r?(Vh(this,"_index",r),Vh(this,"_address",null)):ym.throwArgumentError("invalid address or index","addressOrIndex",r)}connect(e){return ym.throwError("cannot alter JSON-RPC Signer connection",jn.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new Im(Pm,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then(e=>(e.length<=this._index&&ym.throwError("unknown account #"+this._index,jn.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(e[this._index])))}sendUncheckedTransaction(e){e=Jh(e);const t=this.getAddress().then(e=>(e&&(e=e.toLowerCase()),e));if(null==e.gasLimit){const r=Jh(e);r.from=t,e.gasLimit=this.provider.estimateGas(r)}return null!=e.to&&(e.to=Promise.resolve(e.to).then(e=>gm(this,void 0,void 0,function*(){if(null==e)return null;const t=yield this.provider.resolveName(e);return null==t&&ym.throwArgumentError("provided ENS name resolves to null","tx.to",e),t}))),Wh({tx:Wh(e),sender:t}).then(({tx:t,sender:r})=>{null!=t.from?t.from.toLowerCase()!==r&&ym.throwArgumentError("from address mismatch","transaction",e):t.from=r;const n=this.provider.constructor.hexlifyTransaction(t,{from:!0});return this.provider.send("eth_sendTransaction",[n]).then(e=>e,e=>("string"==typeof e.message&&e.message.match(/user denied/i)&&ym.throwError("user rejected transaction",jn.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:t}),Am("sendTransaction",e,n)))})}signTransaction(e){return ym.throwError("signing transactions is unsupported",jn.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return gm(this,void 0,void 0,function*(){const t=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),r=yield this.sendUncheckedTransaction(e);try{return yield _f(()=>gm(this,void 0,void 0,function*(){const e=yield this.provider.getTransaction(r);if(null!==e)return this.provider._wrapTransaction(e,r,t)}),{oncePoll:this.provider})}catch(e){throw e.transactionHash=r,e}})}signMessage(e){return gm(this,void 0,void 0,function*(){const t="string"==typeof e?Xc(e):e,r=yield this.getAddress();try{return yield this.provider.send("personal_sign",[es(t),r.toLowerCase()])}catch(t){throw"string"==typeof t.message&&t.message.match(/user denied/i)&&ym.throwError("user rejected signing",jn.errors.ACTION_REJECTED,{action:"signMessage",from:r,messageData:e}),t}})}_legacySignMessage(e){return gm(this,void 0,void 0,function*(){const t="string"==typeof e?Xc(e):e,r=yield this.getAddress();try{return yield this.provider.send("eth_sign",[r.toLowerCase(),es(t)])}catch(t){throw"string"==typeof t.message&&t.message.match(/user denied/i)&&ym.throwError("user rejected signing",jn.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:r,messageData:e}),t}})}_signTypedData(e,t,r){return gm(this,void 0,void 0,function*(){const n=yield gu.resolveNames(e,t,r,e=>this.provider.resolveName(e)),s=yield this.getAddress();try{return yield this.provider.send("eth_signTypedData_v4",[s.toLowerCase(),JSON.stringify(gu.getPayload(n.domain,t,n.value))])}catch(e){throw"string"==typeof e.message&&e.message.match(/user denied/i)&&ym.throwError("user rejected signing",jn.errors.ACTION_REJECTED,{action:"_signTypedData",from:s,messageData:{domain:n.domain,types:t,value:n.value}}),e}})}unlock(e){return gm(this,void 0,void 0,function*(){const t=this.provider,r=yield this.getAddress();return t.send("personal_unlockAccount",[r.toLowerCase(),e,null])})}}class Im extends Sm{sendTransaction(e){return this.sendUncheckedTransaction(e).then(e=>({hash:e,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:t=>this.provider.waitForTransaction(e,t)}))}}const km={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class Rm extends um{constructor(e,t){let r=t;null==r&&(r=new Promise((e,t)=>{setTimeout(()=>{this.detectNetwork().then(t=>{e(t)},e=>{t(e)})},0)})),super(r),e||(e=Kh(this.constructor,"defaultUrl")()),Vh(this,"connection","string"==typeof e?Object.freeze({url:e}):Object.freeze(Jh(e))),this._nextId=42}get _cache(){return null==this._eventLoopCache&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout(()=>{this._cache.detectNetwork=null},0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return gm(this,void 0,void 0,function*(){yield bm(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch(t){try{e=yield this.send("net_version",[])}catch(e){}}if(null!=e){const t=Kh(this.constructor,"getNetwork");try{return t(Lc.from(e).toNumber())}catch(t){return ym.throwError("could not detect network",jn.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:t})}}return ym.throwError("could not detect network",jn.errors.NETWORK_ERROR,{event:"noNetwork"})})}getSigner(e){return new Sm(Pm,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then(e=>e.map(e=>this.formatter.address(e)))}send(e,t){const r={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:Zh(r),provider:this});const n=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(n&&this._cache[e])return this._cache[e];const s=Ef(this.connection,JSON.stringify(r),Em).then(e=>(this.emit("debug",{action:"response",request:r,response:e,provider:this}),e),e=>{throw this.emit("debug",{action:"response",error:e,request:r,provider:this}),e});return n&&(this._cache[e]=s,setTimeout(()=>{this._cache[e]=null},0)),s}prepareRequest(e,t){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[_m(t.address),t.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[_m(t.address),t.blockTag]];case"getCode":return["eth_getCode",[_m(t.address),t.blockTag]];case"getStorageAt":return["eth_getStorageAt",[_m(t.address),os(t.position,32),t.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[t.signedTransaction]];case"getBlock":return t.blockTag?["eth_getBlockByNumber",[t.blockTag,!!t.includeTransactions]]:t.blockHash?["eth_getBlockByHash",[t.blockHash,!!t.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[t.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[t.transactionHash]];case"call":return["eth_call",[Kh(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0}),t.blockTag]];case"estimateGas":return["eth_estimateGas",[Kh(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0})]];case"getLogs":return t.filter&&null!=t.filter.address&&(t.filter.address=_m(t.filter.address)),["eth_getLogs",[t.filter]]}return null}perform(e,t){return gm(this,void 0,void 0,function*(){if("call"===e||"estimateGas"===e){const e=t.transaction;if(e&&null!=e.type&&Lc.from(e.type).isZero()&&null==e.maxFeePerGas&&null==e.maxPriorityFeePerGas){const r=yield this.getFeeData();null==r.maxFeePerGas&&null==r.maxPriorityFeePerGas&&((t=Jh(t)).transaction=Jh(e),delete t.transaction.type)}}const r=this.prepareRequest(e,t);null==r&&ym.throwError(e+" not implemented",jn.errors.NOT_IMPLEMENTED,{operation:e});try{return yield this.send(r[0],r[1])}catch(r){return Am(e,r,t)}})}_startEvent(e){"pending"===e.tag&&this._startPending(),super._startEvent(e)}_startPending(){if(null!=this._pendingFilter)return;const e=this,t=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=t,t.then(function(r){return function n(){e.send("eth_getFilterChanges",[r]).then(function(r){if(e._pendingFilter!=t)return null;let n=Promise.resolve();return r.forEach(function(t){e._emitted["t:"+t.toLowerCase()]="pending",n=n.then(function(){return e.getTransaction(t).then(function(t){return e.emit("pending",t),null})})}),n.then(function(){return bm(1e3)})}).then(function(){if(e._pendingFilter==t)return setTimeout(function(){n()},0),null;e.send("eth_uninstallFilter",[r])}).catch(e=>{})}(),r}).catch(e=>{})}_stopEvent(e){"pending"===e.tag&&0===this.listenerCount("pending")&&(this._pendingFilter=null),super._stopEvent(e)}static hexlifyTransaction(e,t){const r=Jh(km);if(t)for(const e in t)t[e]&&(r[e]=!0);Yh(e,r);const n={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(function(t){if(null==e[t])return;const r=ss(Lc.from(e[t]));"gasLimit"===t&&(t="gas"),n[t]=r}),["from","to","data"].forEach(function(t){null!=e[t]&&(n[t]=es(e[t]))}),e.accessList&&(n.accessList=Cp(e.accessList)),n}}var Tm=function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})};const Nm=new jn(Mf);var Om=Object.freeze({__proto__:null,BaseProvider:um,Formatter:qp,JsonRpcProvider:Rm,JsonRpcSigner:Sm,Provider:rl,Resolver:am,StaticJsonRpcProvider:class extends Rm{detectNetwork(){const e=Object.create(null,{detectNetwork:{get:()=>super.detectNetwork}});return Tm(this,void 0,void 0,function*(){let t=this.network;return null==t&&(t=yield e.detectNetwork.call(this),t||Nm.throwError("no network detected",jn.errors.UNKNOWN_ERROR,{}),null==this._network&&(Vh(this,"_network",t),this.emit("network",t,null))),t})}},getNetwork:ul})}();
//# sourceMappingURL=index.js.map
